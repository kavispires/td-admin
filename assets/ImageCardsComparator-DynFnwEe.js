import{r as l,G as k,j as e,L as w,B as x,I as B,T as N,D as A,P as O}from"./index-DVQc80aL.js";import{D as F}from"./DataLoadingWrapper-DrZAP9Hg.js";import{F as _}from"./FullScreenModal-Cv8jRpbt.js";import{u as z}from"./useCardWidth-BZCVjsfj.js";import{u as H}from"./useLoadWordLibrary-D_-m9llU.js";import{u as P}from"./useQueryParams-cZbALjai.js";import{l as h}from"./lodash-Cne9hxq2.js";import{I as y}from"./ImageCard-CBpWbRjy.js";import{R as S}from"./RelationshipCountTag-HdhmLkOY.js";import{u as M,a as G}from"./hooks-BENw9dVL.js";import{o as D,a as T,i as g,n as q}from"./util-CeAI_f06.js";import{F as p}from"./index-qapmTdyC.js";import{T as L}from"./index-CmvC0eiL.js";import{I as R}from"./index-Bf_bgK0s.js";import{a as J}from"./FilterEntries-BSVgz3Ob.js";import{R as K}from"./ResponseState-D2molCcQ.js";import{D as U}from"./DownloadButton-_GflqSws.js";import{S as $}from"./SaveButton-8a4Lw99d.js";import{P as Q}from"./useBaseUrl-BLmwdZA9.js";import{S as E}from"./SiderContent-DGYX1Rj7.js";import"./index-5TY1n3-z.js";import"./index-DAdu6QfX.js";import"./PlusOutlined-DyphvtIW.js";import"./useMeasure-BRBqEneU.js";import"./index-BnFUJhch.js";import"./constants-BdgM9j1Q.js";import"./Item-dNxgMdgm.js";import"./useMutation-D2a3OoZT.js";import"./gapSize-U1swVQyS.js";import"./Input-CXqvnCxL.js";import"./index-ZSSHW14X.js";import"./index-D5vZVq88.js";import"./index-BQj2rA2_.js";import"./index-CmE3exUg.js";import"./moment-C5S46NFB.js";import"./SaveOutlined-C8rMiad3.js";var V=g?window:null,I=function(r){return!!r.addEventListener},W=function(r){return!!r.on},X=function(r,i,t,n){t===void 0&&(t=V),l.useEffect(function(){if(i&&t)return I(t)?D(t,r,i,n):W(t)&&t.on(r,i,n),function(){I(t)?T(t,r,i,n):W(t)&&t.off(r,i,n)}},[r,i,t,JSON.stringify(n)])},Y=function(r){return typeof r=="function"?r:typeof r=="string"?function(i){return i.key===r}:r?function(){return!0}:function(){return!1}},b=function(r,i,t,n){i===void 0&&(i=q),t===void 0&&(t={}),n===void 0&&(n=[r]);var o=t.event,c=o===void 0?"keydown":o,u=t.target,s=t.options,a=l.useMemo(function(){var d=Y(r),m=function(f){if(d(f))return i(f)};return m},n);X(c,a,u,s)},Z=function(r){var i=l.useRef(r);i.current=r,k(function(){return function(){return i.current()}})},ee=function(r){var i=l.useRef(0),t=l.useState(r),n=t[0],o=t[1],c=l.useCallback(function(u){cancelAnimationFrame(i.current),i.current=requestAnimationFrame(function(){o(u)})},[]);return Z(function(){cancelAnimationFrame(i.current)}),[n,c]},re=function(r){var i={},t=i.initialWidth,n=t===void 0?1/0:t,o=i.initialHeight,c=o===void 0?1/0:o,u=i.onChange,s=ee({width:g?window.innerWidth:n,height:g?window.innerHeight:c}),a=s[0],d=s[1];return l.useEffect(function(){if(g){var m=function(){var f=window.innerWidth,j=window.innerHeight;d({width:f,height:j}),u&&u(f,j)};return D(window,"resize",m),function(){T(window,"resize",m)}}},[]),a};function te({query:r}){const{width:i}=re(),[t]=z(1,{minWidth:i/3}),{data:n,setDirty:o}=r,{cardAId:c,cardA:u,cardBId:s,cardB:a,relate:d,unrelate:m}=M(n,o),{addParam:f,is:j}=P(),C=j("open");return b("1",()=>{C&&m()}),b("2",()=>{C&&d()}),e.jsxs(w.Content,{className:"dev-content py-4",children:[e.jsx(x,{block:!0,onClick:()=>f("open","true"),children:"Open Modal"}),e.jsx(ie,{}),e.jsx(_,{title:`Card A: ${c} vs Card B: ${s}`,open:C,onClose:()=>f("open","false"),actions:[e.jsx(x,{onClick:m,size:"large",block:!0,children:"Unrelated"},"1"),e.jsx(x,{onClick:d,size:"large",block:!0,type:"primary",children:"Related"},"2")],children:e.jsx(B.PreviewGroup,{children:e.jsxs(p,{className:"center",wrap:"wrap",justify:"center",children:[e.jsxs(p,{vertical:!0,children:[e.jsx(y,{id:c,width:t}),e.jsxs(p,{children:[e.jsx(S,{card:u}),e.jsx(L,{children:c})]})]}),e.jsxs(p,{vertical:!0,children:[e.jsx(y,{id:s,width:t}),e.jsxs(p,{children:[e.jsx(S,{card:a}),e.jsx(L,{children:s})]})]})]})})})]})}const v={};function ie(){const{data:r,isLoading:i}=H(3,"pt",!0),[t,n]=l.useState(""),[o,c]=l.useState([]),u=()=>{!h.isEmpty(r)&&h.isEmpty(v)&&r.forEach(a=>{a.split("").forEach(d=>{v[d.toLowerCase()]?v[d.toLowerCase()].push(a):v[d.toLowerCase()]=[a]})});const s=t.split("").map(a=>h.sample(v[a.toLowerCase()])).filter(Boolean);c(s)};return e.jsxs(e.Fragment,{children:[e.jsx(N.Title,{level:3,className:"center",children:"Passcode Words"}),e.jsxs(p,{children:[e.jsx(R,{onChange:s=>n(s.target.value)}),e.jsx(x,{disabled:i||t.length===0,onClick:u,children:"Get"})]}),e.jsx(R.TextArea,{className:"mt-4",value:JSON.stringify(o)})]})}function ne({query:r}){const{data:i,isDirty:t,isSaving:n,save:o,isLoading:c,isError:u}=r,{queryParams:s,addParam:a}=P();return e.jsxs(Q,{children:[e.jsx(E,{children:e.jsxs(p,{vertical:!0,gap:6,children:[e.jsx($,{isDirty:t,dirt:JSON.stringify(i),onSave:()=>o({}),isSaving:n}),e.jsx(U,{data:i,fileName:"imageCardsRelationships.json",loading:n,disabled:h.isEmpty(i),block:!0})]})}),e.jsx(K,{isLoading:c||n,isDirty:t,isError:u,hasResponseData:!h.isEmpty(i)}),e.jsxs(E,{children:[e.jsx(x,{block:!0,onClick:()=>a("open","true"),children:"Open Modal"}),e.jsx(A,{}),e.jsx(J,{label:"Cycle Threshold",value:s.get("cycle")||3,onChange:d=>a("cycle",d),options:[1,3,5,10]})]})]})}function He(){const r=G();return e.jsx(O,{title:"Image Cards",subtitle:"Comparator",children:e.jsx(F,{isLoading:r.isLoading,error:r.error,hasResponseData:!h.isEmpty(r.data),children:e.jsxs(w,{hasSider:!0,children:[e.jsx(ne,{query:r}),e.jsx(w.Content,{className:"content",children:e.jsx(te,{query:r})})]})})})}export{He as default};
