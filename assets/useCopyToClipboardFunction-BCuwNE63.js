import{l as D}from"./useBaseUrl-BXKykm9Q.js";import{r as l,a1 as T,i as x}from"./index-DTFVBFfK.js";function h(){var e=l.useRef(!1),a=l.useCallback(function(){return e.current},[]);return l.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),a}var R=function(e){e===void 0&&(e={});var a=l.useState(e),n=a[0],c=a[1],u=l.useCallback(function(r){c(function(t){return Object.assign({},t,r instanceof Function?r(t):r)})},[]);return[n,u]},v,C;function S(){return C||(C=1,v=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var a=document.activeElement,n=[],c=0;c<e.rangeCount;c++)n.push(e.getRangeAt(c));switch(a.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":a.blur();break;default:a=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(u){e.addRange(u)}),a&&a.focus()}}),v}var b,w;function k(){if(w)return b;w=1;var e=S(),a={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function c(r){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return r.replace(/#{\s*key\s*}/g,t)}function u(r,t){var s,f,p,g,d,o,m=!1;t||(t={}),s=t.debug||!1;try{p=e(),g=document.createRange(),d=document.getSelection(),o=document.createElement("span"),o.textContent=r,o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(i){if(i.stopPropagation(),t.format)if(i.preventDefault(),typeof i.clipboardData>"u"){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var y=a[t.format]||a.default;window.clipboardData.setData(y,r)}else i.clipboardData.clearData(),i.clipboardData.setData(t.format,r);t.onCopy&&(i.preventDefault(),t.onCopy(i.clipboardData))}),document.body.appendChild(o),g.selectNodeContents(o),d.addRange(g);var E=document.execCommand("copy");if(!E)throw new Error("copy command was unsuccessful");m=!0}catch(i){s&&console.error("unable to copy using execCommand: ",i),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",r),t.onCopy&&t.onCopy(window.clipboardData),m=!0}catch(y){s&&console.error("unable to copy using clipboardData: ",y),s&&console.error("falling back to prompt"),f=c("message"in t?t.message:n),window.prompt(f,r)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(g):d.removeAllRanges()),o&&document.body.removeChild(o),p()}return m}return b=u,b}var U=k();const A=T(U);var I=function(){var e=h(),a=R({value:void 0,error:void 0,noUserInteraction:!0}),n=a[0],c=a[1],u=l.useCallback(function(r){if(e()){var t,s;try{if(typeof r!="string"&&typeof r!="number"){var f=new Error("Cannot copy typeof "+typeof r+" to clipboard, must be a string");c({value:r,error:f,noUserInteraction:!0});return}else if(r===""){var f=new Error("Cannot copy empty string to clipboard.");c({value:r,error:f,noUserInteraction:!0});return}s=r.toString(),t=A(s),c({value:s,error:void 0,noUserInteraction:t})}catch(p){c({value:s,error:p,noUserInteraction:t})}}},[]);return[n,u]};function M(){const[e,a]=I(),{message:n}=x.useApp();return l.useEffect(()=>{e.value&&(e.value.length>20?n.info(`Copied to clipboard: ${D.truncate(e.value,{length:30,omission:"..."})}`):n.success("Copied"))},[e,n]),a}export{M as u};
