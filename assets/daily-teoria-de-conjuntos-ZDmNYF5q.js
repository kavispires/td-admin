import{a as K,c as Z,u as F,D as X}from"./useParsedHistory-CUKpG8Px.js";import{l}from"./useBaseUrl-D1bg9UhE.js";import{s as B}from"./index-CnEqHRKo.js";import{u as w}from"./useTDResource-B7rQYhkN.js";import{r as ee}from"./index-DiQmi0MW.js";import{a as te}from"./warnings-C_1xf7kM.js";const h="|",W="abcdefghijklmnopqrstuvwxyz",I="bcdfghjklmnpqrstvwxyz",g="aeiou",ne=/[áéíóúãẽĩõũâêîôûàèìòùäëïöü]/,n=l.memoize(e=>B(e).toLowerCase()),E=e=>n(e).replace(/[-\s]/g,"").length,b=e=>n(e).split("").filter(t=>g.includes(t)).length,D=e=>n(e).split("").filter(t=>I.includes(t)).length,re=e=>e.toLowerCase().split("").filter(t=>ne.test(t)).length,f=e=>e.split(" ").length,ge={"ddr-7-pt":e=>W.indexOf(n(e)[0])<W.indexOf(n(e)[1]),"ddr-72-pt":e=>E(e)===3,"ddr-8-pt":e=>E(e)===4,"ddr-9-pt":e=>E(e)===5,"ddr-10-pt":e=>E(e)===6,"ddr-11-pt":e=>E(e)===7,"ddr-12-pt":e=>E(e)===8,"ddr-73-pt":e=>E(e)===9,"ddr-74-pt":e=>E(e)===10,"ddr-75-pt":e=>E(e)>10,"ddr-13-pt":e=>f(e)>1,"ddr-14-pt":e=>{const t=n(e).split("").filter(r=>g.includes(r));return new Set(t).size>=2},"ddr-15-pt":e=>new Set(n(e).split("")).size<=4,"ddr-16-pt":e=>D(e)>b(e),"ddr-17-pt":e=>b(e)>D(e),"ddr-53-pt":e=>b(e)===D(e),"ddr-18-pt":e=>{const t=n(e)[0];return n(e).slice(1).includes(t)},"ddr-70-pt":e=>{const t=n(e).slice(-1);return n(e).slice(0,-1).includes(t)},"ddr-19-pt":e=>n(e).split("").some((t,r)=>n(e).slice(r+1).includes(t)),"ddr-20-pt":e=>n(e).split("").some((t,r)=>g.includes(t)&&n(e).slice(r+1).includes(t)),"ddr-21-pt":e=>n(e).split("").some((t,r)=>I.includes(t)&&n(e).slice(r+1).includes(t)),"ddr-22-pt":e=>n(e).split("").some((t,r)=>g.includes(t)&&g.includes(e[r+1])),"ddr-23-pt":e=>"abcdefghijklm".includes(n(e)[0]),"ddr-24-pt":e=>"nopqrstuvwxyz".includes(n(e)[0]),"ddr-25-pt":e=>g.includes(n(e)[0]),"ddr-26-pt":e=>I.includes(n(e)[0]),"ddr-27-pt":e=>n(e).split("").some((t,r)=>I.includes(t)&&e[r+1]===t),"ddr-28-pt":e=>n(e).includes("a"),"ddr-54-pt":e=>n(e).includes("b"),"ddr-32-pt":e=>n(e).includes("c")||n(e).includes("ç"),"ddr-55-pt":e=>n(e).includes("d"),"ddr-29-pt":e=>n(e).includes("e"),"ddr-56-pt":e=>n(e).includes("f"),"ddr-57-pt":e=>n(e).includes("g"),"ddr-34-pt":e=>n(e).includes("h"),"ddr-47-pt":e=>n(e).includes("i"),"ddr-52-pt":e=>n(e).includes("j"),"ddr-58-pt":e=>n(e).includes("l"),"ddr-64-pt":e=>n(e).includes("m"),"ddr-65-pt":e=>n(e).includes("n"),"ddr-48-pt":e=>n(e).includes("o"),"ddr-59-pt":e=>n(e).includes("p"),"ddr-31-pt":e=>n(e).includes("q"),"ddr-60-pt":e=>n(e).includes("r"),"ddr-66-pt":e=>n(e).includes("s"),"ddr-61-pt":e=>n(e).includes("t"),"ddr-30-pt":e=>n(e).includes("u"),"ddr-62-pt":e=>n(e).includes("v"),"ddr-49-pt":e=>n(e).includes("x"),"ddr-63-pt":e=>n(e).includes("z"),"ddr-36-pt":e=>n(e).includes("k")||n(e).includes("w")||n(e).includes("y"),"ddr-37-pt":e=>re(e)>0,"ddr-33-pt":e=>n(e).split("").some((t,r)=>!!(["m","n"].includes(t)&&I.includes(e[r+1]))),"ddr-35-pt":e=>n(e).split("").some((t,r)=>!!(t==="h"&&I.includes(e[r-1]))),"ddr-38-pt":e=>g.includes(n(e).slice(-1)),"ddr-39-pt":e=>I.includes(n(e).slice(-1)),"ddr-40-pt":e=>n(e).slice(-1)==="s","ddr-67-pt":e=>new Set(n(e).split("").filter(t=>g.includes(t))).size===1,"ddr-76-pt":e=>n(e).split("").some((t,r,d)=>t===d[r+1]&&t===d[r+2])},Ee={"ddr-3-pt":(e,t)=>f(e)===1&&t.split(h).length===2,"ddr-4-pt":(e,t)=>f(e)===1&&t.split(h).length===3,"ddr-22-pt":(e,t)=>f(e)===1&&t.split(h).length===4,"ddr-71-pt":(e,t)=>f(e)===1&&t.split(h).length===5,"ddr-41-pt":(e,t)=>f(e)===1&&t.split(h).some(r=>r.split("").some((d,m)=>!!(g.includes(d)&&g.includes(r[m+1])))),"ddr-42-pt":(e,t)=>t.split(h).some((r,d)=>d===0?!1:r[0]===t.split(h)[d-1].slice(-1)),"ddr-46-pt":(e,t,r)=>f(e)===1&&!r&&t.split(h).length===1,"ddr-68-pt":(e,t)=>f(e)===1&&t.split(h)[0].length===3,"ddr-69-pt":(e,t)=>f(e)===1&&t.split(h)[0].length===1},Ie={"ddr-43-pt":(e,t,r)=>f(e)===1&&r===0,"ddr-44-pt":(e,t,r)=>f(e)===1&&r===1,"ddr-45-pt":(e,t,r)=>f(e)===1&&r===2},se=e=>Object.values(e).reduce((t,r)=>Math.max(t,r.updatedAt),0),G=(e,t)=>t>e.updatedAt;function Te(e){const t=/([^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*[aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]{1,3}[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*)(?=[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]|$)/gi;return e.replace(t,"$1|").slice(0,-1).replace(/\s/g,"")}const ye=(e,t,r,d)=>{const[m]=F(X.TEORIA_DE_CONJUNTOS,d),a=w("daily-diagram-items",{enabled:e}),p=w("daily-diagram-rules",{enabled:e});return{entries:ee.useMemo(()=>!e||!m||!a.isSuccess||!p.isSuccess?{}:ie(r,m,p.data,a.data),[e,r,m,p.dataUpdatedAt,a.dataUpdatedAt]),isLoading:a.isLoading||p.isLoading}},q=8,ie=(e,t,r,d)=>{console.count("Creating Teoria de Conjuntos...");let m=t.latestDate;const a=[...t.used],p=se(r),u=(()=>{const c=Object.values(r).reduce((o,i)=>(o[i.id]=[],o),{});return Object.values(d).forEach(o=>{G(o,p)||o.rules.forEach(i=>{c[i].push(o.itemId)})}),c})(),T={};for(let c=0;c<e;c++){const o=K(m),O=Z(o)?q+2:q;m=o,T[o]={id:o,type:"teoria-de-conjuntos",number:t.latestNumber+c+1,...de(d,u,r,a,p,O)}}return T};function de(e,t,r,d,m,a){try{const p=l.shuffle(Object.keys(e).filter(s=>!d.includes(s)&&!G(e[s],m))),u=l.sample(p);if(!u)throw new Error("No available things to choose from");d.push(u);const T={id:u,name:e[u].name},c=e[u].rules.reduce((s,U)=>{const L=r[U].type;return s[L]||(s[L]=[]),s[L].push(U),s},{});Object.keys(c).forEach(s=>{c[s].length<2&&delete c[s]});const o=l.sampleSize(Object.keys(c),2);if(o.length!==2)throw new Error("No types found for this thing");const i=[l.sample(c[o[0]]),l.sample(c[o[1]])];if(!i[0]||!i[1])throw new Error("No rules found for this thing");const O=[i[0],i[1]].sort().join("-");d.push(O);const V=r[i[0]].level+r[i[1]].level-1,R=l.shuffle(l.difference(t[i[0]],t[i[1]])),x=l.shuffle(l.difference(t[i[1]],t[i[0]])),M=l.shuffle(l.intersection(t[i[0]],t[i[1]])),y=R.pop();if(!y)throw new Error("No only in rule 1 things to choose from");const v={id:i[0],text:r[i[0]].title,level:r[i[0]].level,thing:{id:y,name:e[y].name}},S=x.pop();if(!S)throw new Error("No only in rule 2 things to choose from");const j={id:i[1],text:r[i[1]].title,level:r[i[1]].level,thing:{id:S,name:e[S].name}},C=new Set([u,y,S]),P=M.filter(s=>!C.has(s)),Y=R.filter(s=>!C.has(s)),$=x.filter(s=>!C.has(s)),N=l.sampleSize(P,a/2),k=l.sampleSize(Y,a),_=l.sampleSize($,a),A={};N.forEach(s=>{A[s]=0}),k.forEach(s=>{A[s]=1}),_.forEach(s=>{A[s]=2});const H=oe(N,k,_,a).map(s=>({id:s,name:e[s].name,rule:A[s]})),z={contains:"Inclusão",starts:"Inicialização",ends:"Terminação",grammar:"Gramática",order:"Sequência",count:"Contagem",comparison:"Comparação",repetition:"Repetição"},Q=[z?.[r[v.id].type]??"Desconhecido",z?.[r[j.id].type]??"Desconhecido"].join(" vs "),J=[v.id,j.id].sort().join("::");return{title:Q,setId:J,level:V,rule1:v,rule2:j,intersectingThing:T,things:H}}catch(p){return te("teoria-de-conjuntos",`Error generating Teoria de Conjuntos rule set: ${p.message}`),{title:"Erro na geração",setId:"error",level:1,rule1:{id:"error-1",text:"Erro na geração",level:1,thing:{id:"error-thing-1",name:"Erro na geração"}},rule2:{id:"error-2",text:"Erro na geração",level:1,thing:{id:"error-thing-2",name:"Erro na geração"}},intersectingThing:{id:"error-intersecting-thing",name:"Erro na geração"},things:[]}}}function oe(e,t,r,d){const m=e.slice(0,3),a=t.slice(0,3),p=r.slice(0,3);let u=l.sampleSize([...m,...a,...p],d);if(u.length<d){const T=e.slice(3),c=t.slice(3),o=r.slice(3),i=l.shuffle([...T,...c,...o]);u=[...u,...i]}return u.slice(0,d)}export{h as S,Ie as a,Te as b,ie as c,Ee as s,ye as u,ge as v};
