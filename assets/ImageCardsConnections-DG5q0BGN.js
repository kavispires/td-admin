import{r as f,a as y,_ as L,j as t,I as P,B as b,P as z,L as I}from"./index-DXe0NKsU.js";import{D as E}from"./DataLoadingWrapper-BMUHkU-9.js";import{l as S}from"./lodash-Bc7mGals.js";import{I as F}from"./ImageCard-4eSFwhr6.js";import{u as R,R as D,I as k}from"./RelationshipsStats-Cpz0GCOm.js";import{u as M}from"./useMeasure-CufE8NJQ.js";import{F as N}from"./Table-CWfbJPvq.js";import{F as _}from"./index-Cn-6dNGh.js";import{S as C}from"./index-l1pNpeva.js";import{T as B}from"./index-1eaCyCpZ.js";import{c as T,a as w}from"./FilterEntries-8ZA2M-0j.js";import{R as q}from"./ResponseState-BmIY8vMh.js";import{D as O}from"./DownloadButton-nV1Vp6mp.js";import{P as G}from"./useBaseUrl-Dr2gnGsV.js";import{S as j}from"./SiderContent-BizzpyAp.js";import{c as W,C as $}from"./constants-DMa2HerV.js";import"./hooks-DCEMwHSH.js";import"./index-CWkijkUk.js";import"./useMutation-BxXxI-Rq.js";import"./useQueryParams-BB0m4ZDO.js";import"./index-CywTZjU_.js";import"./util-CeAI_f06.js";import"./index-BZS9rDXb.js";import"./index-ChXZMZkL.js";import"./index-Dhr8lByo.js";import"./index-BN_TL9kb.js";import"./scrollTo-pEWCRynY.js";import"./Pagination-DdoKsGBK.js";import"./extendsObject-keMuGWqj.js";import"./Input-BjY3wOcJ.js";import"./gapSize-U1swVQyS.js";import"./index-DB9PR9p3.js";import"./Item-B1xaxzrh.js";var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm154.7 454.5l-246 178c-5.3 3.8-12.7 0-12.7-6.5v-46.9c0-10.2 4.9-19.9 13.2-25.9L566.6 512 421.2 406.8c-8.3-6-13.2-15.6-13.2-25.9V334c0-6.5 7.4-10.3 12.7-6.5l246 178c4.4 3.2 4.4 9.8 0 13z"}}]},name:"right-circle",theme:"filled"},Z=function(l,r){return f.createElement(y,L({},l,{ref:r,icon:A}))},V=f.forwardRef(Z);function H(){const{query:{isDirty:u,isSaving:l,save:r,stats:g,data:c,...i},randomGroups:{cardIds:e},showIds:p,cardSize:a}=R(),[s,{width:n}]=M(),[,h]=f.useMemo(()=>{const o=Math.floor(n/a)+1,d=Math.floor(n/o);return[o,d]},[a,n]),m=[{title:"Length",dataIndex:"length",key:"length"},{title:"Relationships",dataIndex:"relationships",key:"relationship",render:(o,d)=>t.jsx(P.PreviewGroup,{children:t.jsx(_,{wrap:"wrap",gap:2,children:o.map(x=>t.jsxs(C,{children:[t.jsxs(C,{direction:"vertical",children:[t.jsx(F,{id:x,width:h}),p&&t.jsx(B,{children:x})]}),o[o.length-1]!==x&&t.jsx(V,{})]},`${d.origin}-${x}`))})})}],v=f.useMemo(()=>S.orderBy(e.map(o=>{const d=J(o,c,"longest",10);return{key:o,origin:o,length:d.length,relationships:d}}),["length"],["desc"]),[e,c]);return t.jsx(E,{isLoading:i.isLoading,error:i.error,hasResponseData:!0,children:t.jsx("div",{ref:s,className:"my-6",children:t.jsx(N,{dataSource:v,columns:m})})})}const J=S.memoize((u,l,r,g)=>{const c=new Set,i=[];let e=[],p=0;for(i.push({currentId:u,path:[],depth:0});i.length>0&&p<100;){p++;const{currentId:a,path:s,depth:n}=i.pop()??{currentId:"",path:[],depth:0};if(c.add(a),s.push(a),r==="longest"&&s.length>e.length&&(e=[...s]),r==="shortest"&&(e.length===0||s.length<e.length)&&(e=[...s]),r==="any"&&e.length===0&&(e=[...s]),!(n>=g))for(const h of l[a]||[])c.has(h)||i.push({currentId:h,path:[...s],depth:n+1})}return e});function K(){const{query:{isDirty:u,isSaving:l,data:r,isLoading:g,isError:c},showIds:i,setShowIds:e,sampleSize:p,setSampleSize:a,cardSize:s,setCardSize:n,randomGroups:{nextSet:h}}=R();return t.jsxs(G,{children:[t.jsx(q,{isLoading:g||l,isDirty:u,isError:c,hasResponseData:!S.isEmpty(r)}),t.jsxs(j,{children:[t.jsx(T,{label:"Show Ids",value:i,onChange:m=>e(m)}),t.jsx(w,{onChange:m=>a(m),value:p,options:W,label:"Sample Size"}),t.jsx(w,{onChange:m=>n(m),value:s,options:$,label:"Card Size"}),t.jsx(b,{onClick:h,block:!0,type:"primary",children:"New Random Sample"})]}),t.jsx(j,{children:t.jsx(D,{})}),t.jsx(j,{children:t.jsx(O,{data:r,fileName:"imageCardsRelationships.json",loading:l,disabled:S.isEmpty(r),block:!0})})]})}function zt(){return t.jsx(z,{title:"Image Cards",subtitle:"Connections",children:t.jsx(k,{children:t.jsxs(I,{hasSider:!0,children:[t.jsx(K,{}),t.jsx(I.Content,{className:"content",children:t.jsx(H,{})})]})})})}export{zt as default};
