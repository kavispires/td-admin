import{r as u,a as C,_ as w,V as R,j as e,I as v,B as y,P as L,L as f}from"./index-3wVxZuaG.js";import{D as P}from"./DataLoadingWrapper-6fNA41cL.js";import{l as g,P as b}from"./useBaseUrl-DC_5F-uw.js";import{I as z}from"./ImageCard-Fpz4__Mc.js";import{u as I,R as E,I as F}from"./RelationshipsStats-CQte3enX.js";import{F as D}from"./Table-sMtIeBtT.js";import{F as k}from"./index-Bmxkh82F.js";import{S}from"./index-4IsNi3jv.js";import{T as M}from"./index-CPJA_5oE.js";import{c as N,a as j}from"./FilterEntries-CMdImjvp.js";import{R as _}from"./ResponseState-BvTYOhO0.js";import{D as B}from"./DownloadButton-D3lWDg_Q.js";import{S as x}from"./SiderContent-UJPs99j4.js";import{c as T,C as q}from"./constants-DbfgZwql.js";import"./hooks-CHmluJlm.js";import"./useMutation-CpFGIL82.js";import"./useQueryParams-DWwQ1WxE.js";import"./index-DgIKOhKb.js";import"./index-DoxZLNvv.js";import"./index-CDwmVdPk.js";import"./index-CsEJLaiP.js";import"./index-iLcWsVve.js";import"./index-PPfwJm5C.js";import"./scrollTo-wWuVwhsq.js";import"./Pagination-DKexQnw1.js";import"./extendsObject-keMuGWqj.js";import"./Input-DmrVH3Eq.js";import"./gapSize-U1swVQyS.js";import"./index-jla9GFPa.js";import"./Item-4Y7ACGy0.js";var O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm154.7 454.5l-246 178c-5.3 3.8-12.7 0-12.7-6.5v-46.9c0-10.2 4.9-19.9 13.2-25.9L566.6 512 421.2 406.8c-8.3-6-13.2-15.6-13.2-25.9V334c0-6.5 7.4-10.3 12.7-6.5l246 178c4.4 3.2 4.4 9.8 0 13z"}}]},name:"right-circle",theme:"filled"},G=function(a,r){return u.createElement(C,w({},a,{ref:r,icon:O}))},W=u.forwardRef(G);function $(){const{query:{data:c,...a},randomGroups:{cardIds:r},showIds:d,cardSize:h}=I(),[l,{width:s}]=R(),[,m]=u.useMemo(()=>{const t=Math.floor(s/h)+1,i=Math.floor(s/t);return[t,i]},[h,s]),p=[{title:"Length",dataIndex:"length",key:"length"},{title:"Relationships",dataIndex:"relationships",key:"relationship",render:(t,i)=>e.jsx(v.PreviewGroup,{children:e.jsx(k,{wrap:"wrap",gap:2,children:t.map(n=>e.jsxs(S,{children:[e.jsxs(S,{direction:"vertical",children:[e.jsx(z,{id:n,width:m}),d&&e.jsx(M,{children:n})]}),t[t.length-1]!==n&&e.jsx(W,{})]},`${i.origin}-${n}`))})})}],o=u.useMemo(()=>g.orderBy(r.map(t=>{const i=A(t,c,"longest",10);return{key:t,origin:t,length:i.length,relationships:i}}),["length"],["desc"]),[r,c]);return e.jsx(P,{isLoading:a.isLoading,error:a.error,hasResponseData:!0,children:e.jsx("div",{ref:l,className:"my-6",children:e.jsx(D,{dataSource:o,columns:p})})})}const A=g.memoize((c,a,r,d)=>{const h=new Set,l=[];let s=[],m=0;for(l.push({currentId:c,path:[],depth:0});l.length>0&&m<100;){m++;const{currentId:p,path:o,depth:t}=l.pop()??{currentId:"",path:[],depth:0};if(h.add(p),o.push(p),r==="longest"&&o.length>s.length&&(s=[...o]),r==="shortest"&&(s.length===0||o.length<s.length)&&(s=[...o]),r==="any"&&s.length===0&&(s=[...o]),!(t>=d))for(const i of a[p]||[])h.has(i)||l.push({currentId:i,path:[...o],depth:t+1})}return s});function V(){const{query:{isDirty:c,isSaving:a,data:r,isLoading:d,isError:h},showIds:l,setShowIds:s,sampleSize:m,setSampleSize:p,cardSize:o,setCardSize:t,randomGroups:{nextSet:i}}=I();return e.jsxs(b,{children:[e.jsx(_,{isLoading:d||a,isDirty:c,isError:h,hasResponseData:!g.isEmpty(r)}),e.jsxs(x,{children:[e.jsx(N,{label:"Show Ids",value:l,onChange:n=>s(n)}),e.jsx(j,{onChange:n=>p(n),value:m,options:T,label:"Sample Size"}),e.jsx(j,{onChange:n=>t(n),value:o,options:q,label:"Card Size"}),e.jsx(y,{onClick:i,block:!0,type:"primary",children:"New Random Sample"})]}),e.jsx(x,{children:e.jsx(E,{})}),e.jsx(x,{children:e.jsx(B,{data:r,fileName:"imageCardsRelationships.json",loading:a,disabled:g.isEmpty(r),block:!0})})]})}function we(){return e.jsx(L,{title:"Image Cards",subtitle:"Connections",children:e.jsx(F,{children:e.jsxs(f,{hasSider:!0,children:[e.jsx(V,{}),e.jsx(f.Content,{className:"content",children:e.jsx($,{})})]})})})}export{we as default};
