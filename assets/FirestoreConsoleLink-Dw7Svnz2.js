import{r as n,d as c,_ as l,i as p,u as v,e as w,s as x,f as $,j as r,T as f,F as j,D as y,B as C}from"./index-CHgUvU-Q.js";import{j as m}from"./useBaseUrl-CBSZVmxT.js";import{u as F}from"./useMutation-BIqnuchv.js";import{w as O}from"./index-Dljogd6m.js";import{P as R}from"./index-n8IfTqIK.js";var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},D=function(e,o){return n.createElement(c,l({},e,{ref:o,icon:A}))},E=n.forwardRef(D),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},k=function(e,o){return n.createElement(c,l({},e,{ref:o,icon:b}))},g=n.forwardRef(k),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M834.1 469.2A347.49 347.49 0 00751.2 354l-29.1-26.7a8.09 8.09 0 00-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 01-47.5 46.1 352.6 352.6 0 00-100.3 121.5A347.75 347.75 0 00160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0075.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 00760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0027.7-136c0-48.8-10-96.2-29.9-140.9zM713 808.5c-53.7 53.2-125 82.4-201 82.4s-147.3-29.2-201-82.4c-53.5-53.1-83-123.5-83-198.4 0-43.5 9.8-85.2 29.1-124 18.8-37.9 46.8-71.8 80.8-97.9a349.6 349.6 0 0058.6-56.8c25-30.5 44.6-64.5 58.2-101a240 240 0 0012.1-46.5c24.1 22.2 44.3 49 61.2 80.4 33.4 62.6 48.8 118.3 45.8 165.7a74.01 74.01 0 0024.4 59.8 73.36 73.36 0 0053.4 18.8c19.7-1 37.8-9.7 51-24.4 13.3-14.9 24.8-30.1 34.4-45.6 14 17.9 25.7 37.4 35 58.4 15.9 35.8 24 73.9 24 113.1 0 74.9-29.5 145.4-83 198.4z"}}]},name:"fire",theme:"outlined"},B=function(e,o){return n.createElement(c,l({},e,{ref:o,icon:z}))},M=n.forwardRef(B),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"},U=function(e,o){return n.createElement(c,l({},e,{ref:o,icon:L}))},h=n.forwardRef(U);function H({path:t,docId:e,queryKey:o,onSuccess:a}){const{notification:s}=p.useApp(),u=v();return F({mutationFn:async()=>{const i=w($,t,e);if(!t||!t.includes("tdr")&&!t.includes("testimonies"))throw new Error("This hook should only be used for wiping documents in the tdr/testimonies path");if(!e)throw new Error("Document ID is required");return console.log(`Wiping document at ${t}/${e}`),await O(1e3),x(i,{})},onSuccess:()=>{u.refetchQueries({queryKey:o}),s.success({message:`Document ${t}/${e} wiped successfully`}),a?.()},onError:i=>{console.error("Error wiping document:",i),s.error({message:`Failed to wipe document ${t}/${e}`,description:i.message})}})}function W({path:t,label:e,disabled:o,...a}){const{getConsoleUrl:s}=m();return r.jsxs(f.Link,{disabled:o,href:s(t),target:"_blank",...a,children:[r.jsx(h,{})," ",e??"Console"," ",r.jsx(g,{style:{rotate:"45deg"}})]})}function q({path:t,docId:e,queryKey:o,label:a,disabled:s,...u}){const{getConsoleUrl:i}=m(),d=H({path:t,docId:e,queryKey:o});return r.jsxs(j,{align:"center",gap:8,children:[r.jsxs(f.Link,{disabled:s,href:i(`${t}/${e}`),target:"_blank",...u,children:[r.jsx(h,{})," ",a??"Console"," ",r.jsx(g,{style:{rotate:"45deg"}})]}),r.jsx(y,{type:"vertical"}),r.jsx(R,{cancelText:"No, don't wipe it",description:"You should only do this if it has been downloaded to td-resources and deployed",icon:r.jsx(E,{}),okButtonProps:{danger:!0},okText:"Yes, wipe it",onConfirm:()=>d.mutateAsync(),placement:"topRight",title:`Are you sure to wipe the document: ${t}/${e}?`,children:r.jsx(C,{danger:!0,disabled:s,loading:d.isPending,size:"small",children:r.jsx(M,{})})})]})}export{W as F,q as a};
