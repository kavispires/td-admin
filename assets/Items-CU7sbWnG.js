import{r as g,d as L,j as e,c as A,h as Z,B as y,S as R,F as b,b as V,R as ee,T as C,aa as se,M as ae,D as P,ab as W,P as ne,L as _}from"./index-Kr2nSB3H.js";import{D as te}from"./DataLoadingWrapper-7GDk0pDv.js";import{F as ie,a as le}from"./FirestoreConsoleLink-BDID-5SV.js";import{u as oe,P as re}from"./useGridPagination-BBm05CE6.js";import{u as D}from"./useQueryParams-Bqo61ISN.js";import{u as ce}from"./useResourceFirestoreData-BIUb_rL3.js";import{l as x,P as de}from"./useBaseUrl-C8yhmZ87.js";import{L as O}from"./LanguageFlag-C93mlmPH.js";import{I as me}from"./Item-C-OAG_q2.js";import{u as B}from"./useCopyToClipboardFunction-C4LFVuGd.js";import{C as S}from"./index-CVA7C8M3.js";import{u as ue,R as pe}from"./useToggle-Djsr8sY7.js";import{C as he}from"./index-CrtrQNra.js";import{S as E}from"./index-7wT3J3ib.js";import{S as ge}from"./index-DfdP937w.js";import{R as fe}from"./SaveOutlined-DS7SnyMx.js";import{b as T,d as H,a as xe,T as je}from"./FilterEntries-BCgXs84H.js";import{S as ve}from"./SiderContent-CDz__gXX.js";import{D as J}from"./DownloadButton-DFiYG4h-.js";import{S as ke}from"./SaveButton-1rQERywv.js";import{a as q,i as be,r as ye}from"./index-CAAvxJas.js";import{D as Ce}from"./index-C3S716MY.js";import{I as we}from"./ItemsTypeahead-BxaPGNh5.js";import{R as Ie}from"./EnvironmentOutlined-BWuuy4c9.js";import"./useMutation-C9egDqiE.js";import"./index-B_-qmBTM.js";import"./Pagination-BgLpBW9u.js";import"./useGetFirestoreDoc-B-wg3TyH.js";import"./useTDResource-C9Oq-3UH.js";import"./useUpdateFirestoreDoc-BnErl-S6.js";import"./index-C7PkcG8E.js";import"./PlusOutlined-CVpNFS6t.js";import"./Dropdown-BTbqIPth.js";import"./index-CWd5lgrD.js";import"./moment-B-YVwB4U.js";import"./constants-DnCev-Ww.js";import"./useDebounce--5kSeAGA.js";import"./index-Dsx-nMhK.js";var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};function F(){return F=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},F.apply(this,arguments)}const Se=(s,n)=>g.createElement(L,F({},s,{ref:n,icon:Ne})),Oe=g.forwardRef(Se);var De={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482.88 128c-84.35 0-156.58 52.8-185.68 126.98-60.89 8.13-115.3 43.63-146.6 97.84-42.16 73-32.55 161.88 17.14 224.16-23.38 56.75-19.85 121.6 11.42 175.78 42.18 73.02 124.1 109.15 202.94 97.23C419.58 898.63 477.51 928 540.12 928c84.35 0 156.58-52.8 185.68-126.98 60.89-8.13 115.3-43.62 146.6-97.84 42.16-73 32.55-161.88-17.14-224.16 23.38-56.75 19.85-121.6-11.42-175.78-42.18-73.02-124.1-109.15-202.94-97.23C603.42 157.38 545.49 128 482.88 128m0 61.54c35.6 0 68.97 13.99 94.22 37.74-1.93 1.03-3.92 1.84-5.83 2.94l-136.68 78.91a46.11 46.11 0 00-23.09 39.78l-.84 183.6-65.72-38.34V327.4c0-76 61.9-137.86 137.94-137.86m197.7 75.9c44.19 3.14 86.16 27.44 109.92 68.57 17.8 30.8 22.38 66.7 14.43 100.42-1.88-1.17-3.6-2.49-5.53-3.6l-136.73-78.91a46.23 46.23 0 00-46-.06l-159.47 91.1.36-76.02 144.5-83.41a137.19 137.19 0 0178.53-18.09m-396.92 55.4c-.07 2.2-.3 4.35-.3 6.56v157.75a46.19 46.19 0 0022.91 39.9l158.68 92.5-66.02 37.67-144.55-83.35c-65.86-38-88.47-122.53-50.45-188.34 17.78-30.78 46.55-52.69 79.73-62.68m340.4 79.93l144.54 83.35c65.86 38 88.47 122.53 50.45 188.34-17.78 30.78-46.55 52.69-79.73 62.68.07-2.19.3-4.34.3-6.55V570.85a46.19 46.19 0 00-22.9-39.9l-158.69-92.5zM511.8 464.84l54.54 31.79-.3 63.22-54.84 31.31-54.54-31.85.3-63.16zm100.54 58.65l65.72 38.35V728.6c0 76-61.9 137.86-137.94 137.86-35.6 0-68.97-13.99-94.22-37.74 1.93-1.03 3.92-1.84 5.83-2.94l136.68-78.9a46.11 46.11 0 0023.09-39.8zm-46.54 89.55l-.36 76.02-144.5 83.41c-65.85 38-150.42 15.34-188.44-50.48-17.8-30.8-22.38-66.7-14.43-100.42 1.88 1.17 3.6 2.5 5.53 3.6l136.74 78.91a46.23 46.23 0 0046 .06z"}}]},name:"open-a-i",theme:"outlined"};function $(){return $=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},$.apply(this,arguments)}const Te=(s,n)=>g.createElement(L,$({},s,{ref:n,icon:De})),Pe=g.forwardRef(Te);var Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};function M(){return M=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},M.apply(this,arguments)}const ze=(s,n)=>g.createElement(L,M({},s,{ref:n,icon:Re})),Ee=g.forwardRef(ze),Q=g.createContext({items:{},isLoading:!0,error:null,hasResponseData:!1,decksDict:{},decks:[],listing:[],isDirty:!1,addItemToUpdate:()=>{},itemsToUpdate:{},isSaving:!1,save:()=>{},newId:"-1",hasFirestoreData:!1}),Fe=({children:s})=>{const{queryParams:n}=D(),{data:t,isLoading:a,error:i,isSaving:r,save:c,addEntryToUpdate:k,entriesToUpdate:o,isDirty:m,hasFirestoreData:u}=ce({tdrResourceName:"items",firestoreDataCollectionName:"items"}),{decksDict:l,decks:p}=g.useMemo(()=>{console.log("Recomputing item decks typeahead...");const j={},f={},N={},w=[];Object.values(t).forEach(v=>{const X=`${v.name.en} (${v.id})`,Y=`${v.name.pt} (${v.id})`;f[v.name.en]?w.push([`${v.name.en} (${f[v.name.en]})`,X]):f[v.name.en]=v.id,N[v.name.pt]?w.push([`${v.name.pt} (${N[v.name.pt]})`,Y]):N[v.name.pt]=v.id,v?.decks?.forEach(U=>{j[U]=U})}),j.age1="age1",j.age2="age2",j.age3="age3",j.age4="age4",j.age5="age5";const K=x.orderBy(Object.keys(j)).map(v=>({value:v}));return w.length>0&&console.warn("Possible duplicated items",w),{decksDict:j,decks:K}},[t,r,a]),d=n.get("deck")??"all",h=g.useMemo(()=>{const j=x.orderBy(Object.values(t),[f=>Number(f.id)],"asc");switch(d){case"all":return j;case"!all":return j.filter(f=>!f?.decks?.length||!0);case"nsfw":return j.filter(f=>f.nsfw);case"!nsfw":return j.filter(f=>!f.nsfw);default:return d.startsWith("!")?d.slice(1).startsWith("age")?j.filter(f=>!f?.decks?.some(N=>N.startsWith("age"))):j.filter(f=>!f?.decks?.includes(d.slice(1))):j.filter(f=>f?.decks?.includes(d))}},[d,t]),G=g.useMemo(()=>{const j=x.orderBy(Object.keys(o),[w=>Number(w)],"asc"),f=h[h.length-1]?.id,N=x.orderBy([...j,f],[w=>Number(w)],"desc")[0];return String(Number(N)+1)},[h,o]);return e.jsx(Q.Provider,{value:{items:t,listing:h,isLoading:a,error:i,decksDict:l,decks:p,hasResponseData:h.length>0,isDirty:m,addItemToUpdate:k,isSaving:r,save:c,itemsToUpdate:o,newId:G,hasFirestoreData:u},children:s})},I=()=>g.useContext(Q);function $e(s,n=!1){const{addItemToUpdate:t,itemsToUpdate:a}=I(),[i,r]=g.useState(n),[c,k]=g.useState(x.cloneDeep(s)),o=a[s.id]??s,m=d=>{const h={...x.cloneDeep(c),...d};Object.keys(d).includes("nsfw")&&d.nsfw===!1&&(h.nsfw=void 0),k(h)},u=async()=>{t(c.id,c)},l=()=>{k(x.cloneDeep(s)),r(!1)},p=JSON.stringify(o)!==JSON.stringify(c);return{isEditing:i,toggleEditMode:()=>r(d=>!d),editableItem:c,onEdit:m,isDirty:p,onModify:u,onReset:l}}function Me({item:s,isEditing:n,onEdit:t,decks:a}){return e.jsx("div",{style:{display:"grid",gap:4,gridTemplateColumns:"repeat(2, 1fr)"},children:a.map(i=>{const r=s.decks??[],c=r.includes(i.value);return e.jsxs(A.Item,{style:{margin:0,minHeight:1},children:[e.jsx(S,{checked:c,disabled:!n,onChange:k=>{const m=k.target.checked?[...r,i.value]:r.filter(u=>u!==i.value);console.log("onChange",k.target.checked,i.value,m),t({decks:m})},style:{minHeight:1}}),e.jsxs("span",{children:[" ",x.truncate(i.value,{length:10})]})]},i.value)})})}const Le=s=>({id:s.id,type:"item",header:{title:{en:"Item",pt:"Item"},iconId:"2077"},metadata:{level:"basic",keyword:x.snakeCase(s.name.en).toUpperCase()},content:{itemId:s.id,caption:s.name}});function Ae({item:s}){const[n,t]=ue(!1),a=B();return e.jsx(Z,{content:e.jsxs(R,{orientation:"vertical",children:[e.jsx(y,{onClick:()=>a(JSON.stringify(s,null,2)),size:"small",children:"Complete Item"}),e.jsx(y,{onClick:()=>a(s.name.en),size:"small",children:"EN Name"}),e.jsx(y,{onClick:()=>a(s.name.pt),size:"small",children:"PT Name"}),e.jsx(y,{onClick:()=>a(JSON.stringify(Le(s),null,2)),size:"small",children:"Escape Room Item"})]}),onOpenChange:t,open:n,title:"Copy",trigger:"click",children:e.jsx(y,{icon:e.jsx(Oe,{}),type:"text"})})}const Be=x.memoize(s=>{const n=!!s.decks?.includes("thing"),t=!!s.decks?.includes("manufactured"),a=s.name.en.split(" ").length===1,i=s.name.pt.split(" ").length===1,r={en:n||a&&t,pt:n||i&&t};return!r.pt&&!r.en?"":e.jsxs(e.Fragment,{children:[r.en&&e.jsx(O,{language:"en",width:"1em"}),r.pt&&e.jsx(O,{language:"pt",width:"1em"})]})}),Ue=({item:s})=>{const n=Be(s);return n?e.jsxs(b,{gap:6,children:["Thing: ",n]}):null};function z({item:s,editMode:n=!1,simplified:t}){const{decks:a}=I(),{isEditing:i,toggleEditMode:r,onEdit:c,isDirty:k,onModify:o,onReset:m,editableItem:u}=$e(s,n),l=B(),{is:p}=D(),d=t||p("simplified");return e.jsxs(he,{actions:d?void 0:k?[e.jsx(Ee,{onClick:m},"reset"),e.jsx(fe,{onClick:o},"save")]:[e.jsx(se,{onClick:r},"edit")],extra:e.jsx(Ae,{item:s}),size:d?"small":"default",style:{maxWidth:250},title:e.jsx(C.Text,{onClick:()=>l(s.id),children:s.id}),children:[e.jsx(me,{itemId:s.id,title:`${s.name.en} | ${s.name.pt}`,width:d?75:125}),e.jsxs(R,{className:d?"my-2":"my-4",orientation:"vertical",size:"small",children:[e.jsx(V,{defaultValue:s.name.en,onChange:h=>c({name:{...u.name,en:h.target.value}}),placeholder:"Name in EN",prefix:e.jsx(O,{language:"en",width:"1em"}),readOnly:!i,size:"small",variant:i?"outlined":"borderless"},`en-${s.name.en}`),e.jsx(V,{defaultValue:s.name.pt,onChange:h=>c({name:{...u.name,pt:h.target.value}}),placeholder:"Name in PT",prefix:e.jsx(O,{language:"pt",width:"1em"}),readOnly:!i,size:"small",variant:i?"outlined":"borderless"},`pt-${s.name.pt}`),!d&&e.jsxs(e.Fragment,{children:[!p("hideDecks")&&e.jsx("div",{children:p("deckCheckboxes")?e.jsx(Me,{decks:a,isEditing:i,item:s,onEdit:c}):e.jsx(E,{defaultValue:s.decks,disabled:!i,mode:"multiple",onChange:h=>c({decks:h.sort()}),options:a,placeholder:"Select a deck",size:"small",style:{width:"100%"},variant:i?"outlined":"borderless"},String(s.decks))}),!p("hideAliases")&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{gap:6,children:[e.jsx(O,{language:"en",width:"1em"}),e.jsx(E,{defaultValue:s.aliasesEn,disabled:!i,mode:"tags",onChange:h=>c({aliasesEn:h.sort()}),options:[],placeholder:"Other names EN",size:"small",style:{width:"100%"},variant:i?"outlined":"borderless"})]}),e.jsxs(b,{gap:6,children:[e.jsx(O,{language:"pt",width:"1em"}),e.jsx(E,{defaultValue:s.aliasesPt,disabled:!i,mode:"tags",onChange:h=>c({aliasesPt:h.sort()}),options:[],placeholder:"Other names PT",size:"small",style:{width:"100%"},variant:i?"outlined":"borderless"})]})]}),e.jsx(Ve,{item:s,onEdit:c}),p("showVerifyThing")&&e.jsx("div",{children:e.jsx(Ue,{item:s})}),(i||s.nsfw)&&e.jsx("div",{children:e.jsx(A.Item,{label:"nsfw",valuePropName:"checked",children:e.jsx(ge,{checked:s.nsfw,checkedChildren:e.jsx(ee,{style:{color:"hotpink"}}),disabled:!i,onChange:h=>c({nsfw:h}),size:"small"})})})]})]})]})}function Ve({item:s,onEdit:n}){const t=s.decks||[],a=async i=>{const r=t.includes(i)?t.filter(c=>c!==i):[...t,i];n({decks:r})};return e.jsxs("div",{children:[e.jsx(C.Text,{strong:!0,children:"Ages"}),e.jsxs(b,{gap:6,children:[e.jsx(S,{checked:t.includes("age1"),onChange:()=>a("age1")}),"1",e.jsx(S,{checked:t.includes("age2"),onChange:()=>a("age2")}),"2",e.jsx(S,{checked:t.includes("age3"),onChange:()=>a("age3")}),"3",e.jsx(S,{checked:t.includes("age4"),onChange:()=>a("age4")}),"4",e.jsx(S,{checked:t.includes("age5"),onChange:()=>a("age5")}),"5"]})]})}function We(){const{queryParams:s}=D(),n=s.get("deck")??"all",{listing:t}=I(),{page:a,pagination:i}=oe({data:t,resetter:n});return e.jsxs(e.Fragment,{children:[e.jsxs(b,{align:"center",gap:12,children:[e.jsxs(C.Title,{className:"my-0",level:2,children:["Listing - ",x.capitalize(n)," items (",t.length,")"]}),e.jsx(ie,{path:"/tdr/items"})]}),e.jsx(re,{className:"full-width",pagination:i,children:e.jsx(b,{gap:16,wrap:"wrap",children:a.map(r=>e.jsx(z,{item:r},r.id))})})]})}const _e={id:"",name:{en:"",pt:""},groups:[]};function He({isModalOpen:s,handleCancel:n,newId:t}){const[a]=g.useState(x.cloneDeep({..._e,id:t}));return e.jsx(ae,{footer:null,maskClosable:!1,onCancel:n,open:s,title:"Add new item",children:e.jsx(z,{editMode:!0,item:a})})}function Je(){const[s,n]=g.useState(!1),{newId:t}=I(),a=()=>{n(!0)},i=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(y,{block:!0,onClick:a,children:"Add New Item"}),s&&e.jsx(He,{handleCancel:i,isModalOpen:s,newId:t},t)]})}function qe(){const{isDirty:s,save:n,items:t,decks:a,itemsToUpdate:i,isSaving:r,hasFirestoreData:c}=I(),{queryParams:k,is:o,addParam:m}=D(),u=g.useMemo(()=>{const l=x.orderBy(a.map(({value:d})=>({label:x.capitalize(d),value:d})),"label"),p=l.filter(d=>!d.value.startsWith("age")).map(({label:d,value:h})=>({label:`NOT ${d}`,value:`!${h}`}));return[...l,...p,{label:"NOT any age",value:"!age"}]},[a]);return e.jsxs(ve,{children:[e.jsxs(b,{gap:6,vertical:!0,children:[e.jsx(ke,{dirt:JSON.stringify(i),isDirty:s,isSaving:r,onSave:n}),e.jsx(J,{block:!0,data:()=>Qe(t),disabled:s,fileName:"items.json",hasNewData:c}),e.jsx(b,{justify:"center",children:e.jsx(le,{docId:"items",path:"tdr",queryKey:["tdr","items"]})})]}),e.jsx(P,{className:"my-4"}),e.jsx(C.Text,{type:"secondary",children:"Tools"}),e.jsx(T,{className:"full-width m-0",label:"Show Search",onChange:l=>m("hideSearch",l?"":"true",""),value:!o("hideSearch")}),e.jsx(T,{className:"full-width m-0",label:"Show Randomizer",onChange:l=>m("showRandomizer",l?"true":"",""),value:o("showRandomizer")}),e.jsx(C.Text,{type:"secondary",children:"Input"}),e.jsx(H,{className:"full-width m-0",label:"Hide Decks",onChange:l=>m("hideDecks",l?"true":""),value:o("hideDecks")}),e.jsx(H,{className:"full-width m-0",label:"Hide Aliases",onChange:l=>m("hideAliases",l?"true":""),value:o("hideAliases")}),e.jsx(C.Text,{type:"secondary",children:"Display"}),e.jsx(T,{className:"full-width m-0",label:"Simplified UI",onChange:l=>m("simplified",l?"true":""),value:o("simplified")}),e.jsx(T,{className:"full-width m-0",label:"Deck Checkboxes",onChange:l=>m("deckCheckboxes",l?"true":""),value:o("deckCheckboxes")}),e.jsx(T,{className:"full-width m-0",disabled:o("simplified"),label:"Thing Verifier",onChange:l=>m("showVerifyThing",l?"true":""),value:o("showVerifyThing")}),e.jsx(P,{className:"my-4"}),e.jsx(b,{children:e.jsx(xe,{label:"Deck",minWidth:125,onChange:l=>m("deck",l,"all"),options:[{label:"All",value:"all"},{label:"NSFW",value:"nsfw"},{label:"SFW",value:"!nsfw"},...u,{label:"No decks",value:"!all"}],value:k.get("deck")??"all"})}),e.jsx(P,{className:"my-4"}),e.jsx(Je,{}),e.jsx(P,{className:"my-4"}),e.jsx(J,{block:!0,data:()=>Ge(t),disabled:s,fileName:"items-gpt.json",icon:e.jsx(Pe,{}),children:"Open AI JSON"})]})}function Qe(s){console.log("Preparing file for download...");const n=x.cloneDeep(s);return Object.values(n).reduce((t,a)=>(a.aliasesEn=Object.values(a.aliasesEn??{}).sort(),a.aliasesEn.length===0&&(a.aliasesEn=void 0),a.aliasesPt=Object.values(a.aliasesPt??{}).sort(),a.aliasesPt.length===0&&(a.aliasesPt=void 0),a.decks=Object.values(a?.decks??{}).sort(),a.decks.length===0&&(a.decks=void 0),t[a.id]=a,t),{}),q(be(n))}function Ge(s){return q(Object.values(x.cloneDeep(s)).reduce((n,t)=>{const a={id:t.id,names:{"en-US":t.name.en,"pt-BR":t.name.pt},aliases:{"en-US":t.aliasesEn,"pt-BR":t.aliasesPt}};return n[a.id]=a,n},{}))}function Ke(){const{listing:s}=I(),[n,t]=g.useState([]),a=B(),[i,r]=g.useState(5),c=()=>{t(x.sampleSize(s,i))},k=[{label:"Copy IDs",key:"copy_ids"},{label:"Copy Names EN",key:"copy_names_en"},{label:"Copy Names PT",key:"copy_names_pt"}],o=({key:u})=>{if(u==="copy_ids"){const l=n.map(p=>p.id);a(JSON.stringify(l));return}if(u==="copy_names_en"){const l=n.map(p=>p.name.en).join(", ");a(l);return}if(u==="copy_names_pt"){const l=n.map(p=>p.name.pt).join(", ");a(l);return}},m=()=>{const u=x.chunk(x.sampleSize(s,i*15),i).map(l=>l.filter(p=>!p.nsfw)).map(l=>l.map(p=>p.name.en).join(", ")).map((l,p)=>`${p+1}) ${l}`).join(`
`);a(u)};return e.jsxs("div",{children:[e.jsxs(C.Title,{level:2,children:["Randomized Sample"," ",e.jsx(y,{icon:e.jsx(W,{}),onClick:m,size:"small",children:"MJ"})]}),e.jsxs(b,{gap:12,children:[e.jsx(A.Item,{label:"Quantity"}),e.jsx("div",{children:e.jsx(je,{max:15,min:3,onChange:u=>r(Number(u)),style:{minWidth:"100px"},value:i})}),e.jsx(y,{onClick:c,type:"primary",children:"Get Sample"}),e.jsx(Ce.Button,{disabled:n.length===0,icon:e.jsx(W,{}),menu:{items:k,onClick:o},onClick:()=>a(JSON.stringify(n,null,2)),children:"Copy"})]}),e.jsx(R,{className:"my-4",wrap:!0,children:n.map(u=>e.jsx(z,{item:u,simplified:!0},u.id))})]})}function Xe(){const{items:s,isLoading:n,isSaving:t}=I(),[a,i]=g.useState(null),{queryParams:r,addParam:c}=D(),k=o=>{const m=Number(r.get("pageSize")??64),u=Number(o),l=Math.floor(u/m)+1;c("page",l.toString())};return e.jsxs(g.Fragment,{children:[e.jsx(C.Title,{level:2,children:"Search for an item"}),e.jsx("div",{children:e.jsx(we,{isPending:n||t,items:s,onFinish:o=>i([s[o]]),onFinishMultiple:o=>i(ye(o).map(m=>s[m]))})}),a&&a?.length>0&&e.jsxs(b,{gap:8,children:[e.jsxs(C.Paragraph,{className:"mt-1 italic",children:[a?.length," items found"]}),e.jsx(y,{icon:e.jsx(pe,{}),onClick:()=>i(null),size:"small",type:"text"})]}),e.jsx(b,{className:"my-4",gap:8,wrap:"wrap",children:a?.map(o=>e.jsxs(R,{className:"my-4",orientation:"vertical",children:[e.jsx(z,{item:o}),e.jsx(y,{block:!0,icon:e.jsx(Ie,{}),onClick:()=>k(o.id),children:"Find in listing"})]},o.id))})]},`item-search-${n}`)}function Ye(){const{isLoading:s,error:n,hasResponseData:t}=I(),{is:a}=D();return e.jsx(ne,{subtitle:"Listing",title:"Items",children:e.jsxs(_,{hasSider:!0,children:[e.jsx(de,{children:e.jsx(qe,{})}),e.jsx(_.Content,{className:"content",children:e.jsxs(te,{error:n,hasResponseData:t,isLoading:s,children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{align:"start",size:"large",children:[!a("hideSearch")&&e.jsx(Xe,{}),a("showRandomizer")&&e.jsx(Ke,{})]}),e.jsx(P,{})]}),e.jsx(We,{})]})})]})})}function Ms(){return e.jsx(Fe,{children:e.jsx(Ye,{})})}export{Ms as default};
