import{r as h,d as N,n as F,j as s,I as P,o as D,W as M,bK as $,F as k,c as A,P as B,L as b}from"./index-DyjSH4OM.js";import{u as w,R as W,I as q}from"./RelationshipsStats-B84vNBkD.js";import{T as G}from"./TransparentButton-DIOnkqCH.js";import{I as U}from"./IdTag-DAa7d6oF.js";import{D as Z}from"./DataLoadingWrapper-B0oxzPVc.js";import{l as y,P as J}from"./useBaseUrl-CGDFxb01.js";import{I as K}from"./ImageCard-C5pbT96q.js";import{R as Q}from"./RelationshipCountTag-DNVm_1Fz.js";import{C as V}from"./index-DEY7cLY0.js";import{F as m,R as H}from"./ExpandOutlined-CsK_rVTS.js";import{R as X}from"./Item-jt1Ui6d6.js";import{R as Y}from"./SyncOutlined-CNXhwoFN.js";import{b as T,a as C}from"./FilterEntries-D3ZPyz_c.js";import{R as ss}from"./ResponseState-DtpIRt2O.js";import{D as es}from"./DownloadButton-Bk4uNNwt.js";import{S as ts}from"./SaveButton-DSm6bsIT.js";import{S as R}from"./SiderContent--jQ49XzE.js";import{T as rs,g as as,C as os}from"./constants-B1K3jPng.js";import"./hooks-BbuNfvG7.js";import"./useMutation-B98nW9qs.js";import"./useQueryParams-Buak0vV0.js";import"./index-CIvxw8l3.js";import"./useCopyToClipboardFunction-DzFGYu6U.js";import"./index-CQYidkL6.js";import"./index-BblfdFop.js";import"./PlusOutlined-DXJb8t4Z.js";import"./Dropdown-CQ0KOtK0.js";import"./VerticalAlignTopOutlined-BLfJV8za.js";import"./scrollTo-Dcq7vwV7.js";import"./throttleByAnimationFrame-B0pY5Mro.js";import"./FileTextOutlined-BsvpX9O2.js";import"./index-BxFHkOJs.js";import"./useId-C3rCDJeT.js";import"./index-DpYZgC1U.js";import"./index-DQRiDBAE.js";import"./index-BSyNjB5B.js";import"./index-D9N9BiJs.js";import"./moment-B-YVwB4U.js";import"./SaveOutlined-C-TjSIG9.js";var is={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 100c-61.8 0-112 50.2-112 112 0 47.7 29.9 88.5 72 104.6v27.6L512 601.4 312 344.2v-27.6c42.1-16.1 72-56.9 72-104.6 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 50.6 33.8 93.5 80 107.3v34.4c0 9.7 3.3 19.3 9.3 27L476 672.3v33.6c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-33.6l226.7-291.6c6-7.7 9.3-17.3 9.3-27v-34.4c46.2-13.8 80-56.7 80-107.3 0-61.8-50.2-112-112-112zM224 212a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm336 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm192-552a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"fork",theme:"outlined"};function I(){return I=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},I.apply(this,arguments)}const ns=(a,e)=>h.createElement(N,I({},a,{ref:e,icon:is})),ls=h.forwardRef(ns);function cs(){const{query:{isDirty:a,isSaving:e,...t},randomGroups:{cardIds:r,cards:l,onSelect:c,selection:n,relate:u,nextSet:g,deselectAll:x,cycles:f},showIds:j,cardSize:p}=w(),d=h.useRef(null),[S,{width:o}]=F(),[O,z]=h.useMemo(()=>{const i=Math.floor(o/p)+1,v=Math.floor(o/i);return[i,v]},[p,o]),E=()=>{g(),d.current?.scrollIntoView({behavior:"smooth"})};return s.jsx(Z,{error:t.error,hasResponseData:!y.isEmpty(t.data),isLoading:t.isLoading,children:s.jsx("div",{className:"my-6",ref:S,children:s.jsxs(V,{className:"image-card-categorizer-card",extra:s.jsxs(D,{title:"Total cycles",children:[s.jsx(M,{})," ",f]}),ref:d,title:"Card Relationship Matching",children:[s.jsx(P.PreviewGroup,{children:s.jsx("div",{className:"image-cards-group",style:{gridTemplateColumns:`repeat(${Math.max(O,1)}, 1fr)`},children:r.map((i,v)=>{const _=n.includes(i),L=l[v];return s.jsx("div",{className:"image-card-card__image",children:s.jsxs(G,{active:_,activeClass:"image-cards-group__button--active",className:"image-cards-group__button",onClick:()=>c(i),children:[s.jsx(K,{cardId:i,cardWidth:z-24,preview:!1}),s.jsxs("div",{children:[j&&s.jsx(U,{children:i}),s.jsx(Q,{card:L})]})]})},i)})})}),s.jsx(ms,{deselectAll:x,isDirty:a,isSaving:e,onNextSet:E,relate:u,selection:n})]})})})}const ms=({isSaving:a,isDirty:e,selection:t,relate:r,deselectAll:l,onNextSet:c})=>{if(a)return s.jsx(m,{icon:s.jsx($,{})});const n=()=>{t.length<2||r()};return s.jsxs(s.Fragment,{children:[e&&s.jsx(m,{icon:s.jsx(X,{}),style:{right:234},type:"primary"}),s.jsx(m,{icon:s.jsx(H,{}),onClick:l,style:{right:164}}),s.jsx(m,{badge:{count:t.length,size:"small"},icon:s.jsx(ls,{}),onClick:n,style:{right:94},type:t.length<2?"default":"primary"}),s.jsx(m,{icon:s.jsx(Y,{}),onClick:c,style:{right:24}})]})};function ps(){const{query:{isDirty:a,isSaving:e,save:t,data:r,isLoading:l,isError:c},randomGroups:{filters:n},showIds:u,setShowIds:g,tagThreshold:x,setTagThreshold:f,sampleSize:j,setSampleSize:p,cardSize:d,setCardSize:S}=w();return s.jsxs(J,{children:[s.jsx(R,{children:s.jsxs(k,{gap:6,vertical:!0,children:[s.jsx(ts,{dirt:JSON.stringify(r),isDirty:a,isSaving:e,onSave:()=>t({})}),s.jsx(es,{block:!0,data:r,disabled:y.isEmpty(r),fileName:"imageCardsRelationships.json",loading:e})]})}),s.jsx(ss,{hasResponseData:!y.isEmpty(r),isDirty:a,isError:c,isLoading:l||e}),s.jsxs(R,{children:[s.jsx(T,{label:"Use Cycles",onChange:()=>n.toggleUseCycles(),value:n.useCycles}),s.jsx(T,{label:"Show Ids",onChange:o=>g(o),value:u}),s.jsxs(A,{layout:"vertical",children:[s.jsx(C,{label:"Tag Count",onChange:o=>f(o),options:rs,value:x}),s.jsx(C,{label:"Sample Size",onChange:o=>p(o),options:as,value:j}),s.jsx(C,{label:"Card Size",onChange:o=>S(o),options:os,value:d})]})]}),s.jsx(R,{children:s.jsx(W,{})})]})}function Hs(){return s.jsx(B,{subtitle:"Relationships",title:"Image Cards",children:s.jsx(q,{children:s.jsxs(b,{hasSider:!0,children:[s.jsx(ps,{}),s.jsx(b.Content,{className:"content",children:s.jsx(cs,{})})]})})})}export{Hs as default};
