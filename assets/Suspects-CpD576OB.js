import{r as O,a as _r,_ as wr,j as n,T as S,g as Sr,e as Tr,b as H,c as Pr,d as Rr,B as xe,I as Or,D as Ir,P as qr,L as je}from"./index-BvgJVW7d.js";import{D as Nr}from"./DataLoadingWrapper-DbxLta2F.js";import{l as q,P as Ar}from"./useBaseUrl-D1KQyl61.js";import{I as nr}from"./ImageCard-DSPg33KU.js";import{u as kr}from"./useCardWidth-CIKZGWiN.js";import{u as U}from"./useQueryParams-C0m2l_EQ.js";import{s as _e,a as Mr}from"./index-BOEwK3Jx.js";import{D as we}from"./EditableFields-CeSIesK7.js";import{g as ar}from"./utils-BxSvbnVR.js";import{u as Z}from"./useDebounce-bB-ftbQe.js";import{D as or}from"./index-B0GKkaGD.js";import{F as I}from"./index-DTdaIeah.js";import{S as Y}from"./index-VhfxMJYB.js";import{I as ir}from"./index-M0CbH9Pw.js";import{R as Se}from"./index-CF-_ss-M.js";import{S as sr}from"./index-X4WmpXU9.js";import{u as Dr}from"./useCopyToClipboardFunction-DX5TC-IC.js";import{S as Te}from"./index-Cbfw24BI.js";import{T as Br}from"./index-CmCCTxGn.js";import{R as Er,a as Wr}from"./WomanOutlined-3S9MwOuc.js";import{R as Hr,a as Fr}from"./ColumnWidthOutlined-CROh3OcP.js";import{a as Pe,b as Lr}from"./FilterEntries-DAehkN6x.js";import{S as zr}from"./SiderContent-46R1r0GQ.js";import{D as $r}from"./DownloadButton-CxSuRluW.js";import{F as Gr}from"./FirestoreConsoleLink-CavUHU2w.js";import{S as Kr}from"./SaveButton-xpBBkUoN.js";import{u as Yr}from"./useResourceFirestoreData-_KlcHWEV.js";import"./constants-D9Dpf4ur.js";import"./Item-CClapcG9.js";import"./LanguageFlag-BmXyp2ps.js";import"./FireFilled-BODGem4j.js";import"./IdcardOutlined-D1SFCEaM.js";import"./gapSize-U1swVQyS.js";import"./Input-DDQRQFh-.js";import"./index-B25zXE0m.js";import"./index-5gGgnGWi.js";import"./moment-C5S46NFB.js";import"./SaveOutlined-Bh36DPhn.js";import"./useGetFirestoreDoc-D4mW-Dvh.js";import"./useTDResource-BN7Ah5z6.js";import"./useUpdateFirestoreDoc-CJzmwTHX.js";import"./useMutation-CU6V_BvD.js";var Ur={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},Vr=function(o,i){return O.createElement(_r,wr({},o,{ref:i,icon:Ur}))},Qr=O.forwardRef(Vr);const Jr=["18-21","21-30","30-40","40-50","50-60","60-70","70-80","80-90"].map(e=>({label:e,value:e})),Xr=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Non-binary",value:"non-binary"},{label:"Other",value:"other"}],Zr=[{label:"Caucasian",value:"caucasian"},{label:"Black",value:"black"},{label:"Asian",value:"asian"},{label:"Latino",value:"latino"},{label:"Indigenous",value:"indigenous"},{label:"Indian",value:"indian"},{label:"Middle Eastern",value:"middle-eastern"},{label:"Mixed",value:"mixed"},{label:"Other",value:"other"}];function et({data:e,addEntryToUpdate:o}){const{removeParam:i,queryParams:r}=U(),a=r.get("suspectId"),s=r.get("version")??"gb",t=e[a??""],[c,h]=O.useState((t==null?void 0:t.name.pt)||""),[l,f]=O.useState((t==null?void 0:t.name.en)||""),[b,x]=O.useState((t==null?void 0:t.note)||"");if(O.useEffect(()=>{t&&(h(t.name.pt),f(t.name.en),x(t.note||""))},[t==null?void 0:t.id]),Z(()=>{t&&c!==t.name.pt&&o(t.id,{...t,name:{...t.name,pt:c}})},500,[c]),Z(()=>{t&&l!==t.name.en&&o(t.id,{...t,name:{...t.name,en:l}})},500,[l]),Z(()=>{t&&b!==t.note&&o(t.id,{...t,note:b})},500,[b]),!t)return null;const u={pt:c,en:l};return n.jsx(or,{title:t.name.pt,placement:"right",onClose:()=>i("suspectId"),open:!!t,width:400,children:n.jsxs("div",{className:"suspect__drawer",children:[n.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1.25fr"},children:[n.jsx(nr,{id:ar(t.id,s),width:100}),n.jsxs(I,{vertical:!0,gap:4,children:[n.jsx(we,{value:u,language:"pt",onChange:p=>h(p.target.value)}),n.jsx(we,{value:u,language:"en",onChange:p=>f(p.target.value)}),n.jsx("div",{children:n.jsx(Y,{placeholder:"Select Age",value:t.age,size:"small",onChange:p=>{o(t.id,{...t,age:p})},options:Jr,style:{width:80}})}),n.jsx("div",{children:n.jsx(Y,{value:t.gender,size:"small",onChange:p=>{o(t.id,{...t,gender:p})},options:Xr,style:{width:120}})}),n.jsx("div",{children:n.jsx(Y,{value:t.ethnicity,size:"small",onChange:p=>{o(t.id,{...t,ethnicity:p})},options:Zr,style:{width:150}})}),n.jsx("div",{children:n.jsx(ir,{value:b,size:"small",onChange:p=>x(p.target.value)})})]},`${u.pt}-${u.en}`)]}),n.jsxs("div",{className:"grid grid-2",children:[n.jsxs(I,{vertical:!0,children:[n.jsx(S.Text,{strong:!0,children:"Build"}),n.jsx(Se.Group,{size:"small",value:t.build,onChange:p=>{o(t.id,{...t,build:p.target.value})},options:tt,style:{display:"flex",flexDirection:"column",gap:3}})]}),n.jsxs(I,{vertical:!0,children:[n.jsx(S.Text,{strong:!0,children:"Height"}),n.jsx(Se.Group,{size:"small",value:t.height,onChange:p=>{o(t.id,{...t,height:p.target.value})},options:nt,style:{display:"flex",flexDirection:"column",gap:3}})]})]}),n.jsx(rt,{suspect:t,addEntryToUpdate:o})]})})}function rt({suspect:e,addEntryToUpdate:o}){const i=e.features??[],r=a=>{const s=i.includes(a)?i.filter(t=>t!==a):[...i,a];o(e.id,{...e,features:s})};return n.jsx("div",{className:"grid grid-2",children:be.map(a=>n.jsxs("div",{className:"my-4",children:[n.jsx(S.Text,{strong:!0,children:a.title}),a.features.map(s=>n.jsxs(I,{className:"my-2",gap:4,children:[n.jsx(sr,{size:"small",checked:i.includes(s.id),onChange:()=>r(s.id)})," ",s.label]},s.id))]},a.title))})}const tt=["thin","average","muscular","large"],nt=["short","medium","tall"],be=[{title:"Hair Length",features:[{id:"shortHair",label:"Short Hair"},{id:"longHair",label:"Long Hair"},{id:"mediumHair",label:"Medium Hair"},{id:"bald",label:"Bald"}]},{title:"Hair Color",features:[{id:"blackHair",label:"Black Hair"},{id:"brownHair",label:"Brown Hair"},{id:"blondeHair",label:"Blonde Hair"},{id:"redHair",label:"Red Hair"},{id:"greyHair",label:"Grey Hair"},{id:"coloredHair",label:"Colored Hair"}]},{title:"Face",features:[{id:"beard",label:"Beard"},{id:"mustache",label:"Mustache"},{id:"goatee",label:"Goatee"},{id:"lipstick",label:"Lipstick"}]},{title:"Specific",features:[{id:"buttonShirt",label:"Button Shirt"},{id:"showTeeth",label:"Showing Teeth"},{id:"avoidingCamera",label:"Avoiding Camera"},{id:"hairyChest",label:"Exposed Hairy Chest"}]},{title:"Accessories",features:[{id:"noAccessories",label:"No Accessories"},{id:"glasses",label:"Glasses"},{id:"piercings",label:"Piercings"},{id:"earrings",label:"Earrings"},{id:"necklace",label:"Necklace"},{id:"hat",label:"Hat"},{id:"scarf",label:"Scarf"},{id:"hoodie",label:"Hoodie"},{id:"tie",label:"Tie"},{id:"headscarf",label:"Headscarf/Bandana"},{id:"bow",label:"Bow"},{id:"wearingFlowers",label:"Wearing Flowers"},{id:"hairTie",label:"Hair Tie"}]},{title:"Clothing",features:[{id:"whiteShirt",label:"White Shirt"},{id:"blackClothes",label:"Black Clothes"},{id:"blueClothes",label:"Blue Clothes"},{id:"redClothes",label:"Red Clothes"},{id:"greenClothes",label:"Green Clothes"},{id:"yellowClothes",label:"Yellow Clothes"},{id:"purpleClothes",label:"Purple Clothes"},{id:"pinkClothes",label:"Pink Clothes"},{id:"orangeClothes",label:"Orange Clothes"},{id:"brownClothes",label:"Brown Clothes"},{id:"patternedShirt",label:"Patterned Shirt"},{id:"wearingStripes",label:"Wearing Stripes"}]}],lr=q.orderBy(be.reduce((e,o)=>(o.features.forEach(i=>{e.push({value:i.id,label:i.label})}),e),[]),["label"],["asc"]);console.log("flatFeatures",lr.map(e=>e.value));function at(){const{addParam:e,queryParams:o}=U();return n.jsxs(I,{gap:8,align:"center",className:"my-2",children:[n.jsx(S.Text,{children:"Feature Highlight:"})," ",n.jsx(Y,{options:lr,style:{width:200},size:"small",value:o.get("activeFeature")||void 0,onChange:i=>e("activeFeature",i),allowClear:!0})]})}var k={},ee={exports:{}},re={exports:{}},Re;function V(){return Re||(Re=1,function(e){function o(i){"@babel/helpers - typeof";return e.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,o(i)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(re)),re.exports}var Oe;function Q(){return Oe||(Oe=1,function(e){var o=V().default;function i(a){if(typeof WeakMap!="function")return null;var s=new WeakMap,t=new WeakMap;return(i=function(h){return h?t:s})(a)}function r(a,s){if(!s&&a&&a.__esModule)return a;if(a===null||o(a)!="object"&&typeof a!="function")return{default:a};var t=i(s);if(t&&t.has(a))return t.get(a);var c={__proto__:null},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in a)if(l!=="default"&&{}.hasOwnProperty.call(a,l)){var f=h?Object.getOwnPropertyDescriptor(a,l):null;f&&(f.get||f.set)?Object.defineProperty(c,l,f):c[l]=a[l]}return c.default=a,t&&t.set(a,c),c}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(ee)),ee.exports}var te={exports:{}},Ie;function F(){return Ie||(Ie=1,function(e){function o(i){return i&&i.__esModule?i:{default:i}}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(te)),te.exports}var ne={exports:{}},qe;function ur(){return qe||(qe=1,function(e){function o(){return e.exports=o=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},e.exports.__esModule=!0,e.exports.default=e.exports,o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(ne)),ne.exports}var $={},Ne;function ot(){if(Ne)return $;Ne=1,Object.defineProperty($,"__esModule",{value:!0});var e={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482.88 128c-84.35 0-156.58 52.8-185.68 126.98-60.89 8.13-115.3 43.63-146.6 97.84-42.16 73-32.55 161.88 17.14 224.16-23.38 56.75-19.85 121.6 11.42 175.78 42.18 73.02 124.1 109.15 202.94 97.23C419.58 898.63 477.51 928 540.12 928c84.35 0 156.58-52.8 185.68-126.98 60.89-8.13 115.3-43.62 146.6-97.84 42.16-73 32.55-161.88-17.14-224.16 23.38-56.75 19.85-121.6-11.42-175.78-42.18-73.02-124.1-109.15-202.94-97.23C603.42 157.38 545.49 128 482.88 128m0 61.54c35.6 0 68.97 13.99 94.22 37.74-1.93 1.03-3.92 1.84-5.83 2.94l-136.68 78.91a46.11 46.11 0 00-23.09 39.78l-.84 183.6-65.72-38.34V327.4c0-76 61.9-137.86 137.94-137.86m197.7 75.9c44.19 3.14 86.16 27.44 109.92 68.57 17.8 30.8 22.38 66.7 14.43 100.42-1.88-1.17-3.6-2.49-5.53-3.6l-136.73-78.91a46.23 46.23 0 00-46-.06l-159.47 91.1.36-76.02 144.5-83.41a137.19 137.19 0 0178.53-18.09m-396.92 55.4c-.07 2.2-.3 4.35-.3 6.56v157.75a46.19 46.19 0 0022.91 39.9l158.68 92.5-66.02 37.67-144.55-83.35c-65.86-38-88.47-122.53-50.45-188.34 17.78-30.78 46.55-52.69 79.73-62.68m340.4 79.93l144.54 83.35c65.86 38 88.47 122.53 50.45 188.34-17.78 30.78-46.55 52.69-79.73 62.68.07-2.19.3-4.34.3-6.55V570.85a46.19 46.19 0 00-22.9-39.9l-158.69-92.5zM511.8 464.84l54.54 31.79-.3 63.22-54.84 31.31-54.54-31.85.3-63.16zm100.54 58.65l65.72 38.35V728.6c0 76-61.9 137.86-137.94 137.86-35.6 0-68.97-13.99-94.22-37.74 1.93-1.03 3.92-1.84 5.83-2.94l136.68-78.9a46.11 46.11 0 0023.09-39.8zm-46.54 89.55l-.36 76.02-144.5 83.41c-65.85 38-150.42 15.34-188.44-50.48-17.8-30.8-22.38-66.7-14.43-100.42 1.88 1.17 3.6 2.5 5.53 3.6l136.74 78.91a46.23 46.23 0 0046 .06z"}}]},name:"open-a-i",theme:"outlined"};return $.default=e,$}var M={},ae={exports:{}},oe={exports:{}},Ae;function it(){return Ae||(Ae=1,function(e){function o(i){if(Array.isArray(i))return i}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(oe)),oe.exports}var ie={exports:{}},ke;function st(){return ke||(ke=1,function(e){function o(i,r){var a=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a!=null){var s,t,c,h,l=[],f=!0,b=!1;try{if(c=(a=a.call(i)).next,r===0){if(Object(a)!==a)return;f=!1}else for(;!(f=(s=c.call(a)).done)&&(l.push(s.value),l.length!==r);f=!0);}catch(x){b=!0,t=x}finally{try{if(!f&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(b)throw t}}return l}}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(ie)),ie.exports}var se={exports:{}},le={exports:{}},Me;function lt(){return Me||(Me=1,function(e){function o(i,r){(r==null||r>i.length)&&(r=i.length);for(var a=0,s=Array(r);a<r;a++)s[a]=i[a];return s}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(le)),le.exports}var De;function ut(){return De||(De=1,function(e){var o=lt();function i(r,a){if(r){if(typeof r=="string")return o(r,a);var s={}.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?o(r,a):void 0}}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(se)),se.exports}var ue={exports:{}},Be;function ct(){return Be||(Be=1,function(e){function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(ue)),ue.exports}var Ee;function cr(){return Ee||(Ee=1,function(e){var o=it(),i=st(),r=ut(),a=ct();function s(t,c){return o(t)||i(t,c)||r(t,c)||a()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}(ae)),ae.exports}var ce={exports:{}},de={exports:{}},fe={exports:{}},We;function dt(){return We||(We=1,function(e){var o=V().default;function i(r,a){if(o(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var t=s.call(r,a||"default");if(o(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(fe)),fe.exports}var He;function ft(){return He||(He=1,function(e){var o=V().default,i=dt();function r(a){var s=i(a,"string");return o(s)=="symbol"?s:s+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(de)),de.exports}var Fe;function dr(){return Fe||(Fe=1,function(e){var o=ft();function i(r,a,s){return(a=o(a))in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(ce)),ce.exports}var pe={exports:{}},he={exports:{}},Le;function pt(){return Le||(Le=1,function(e){function o(i,r){if(i==null)return{};var a={};for(var s in i)if({}.hasOwnProperty.call(i,s)){if(r.includes(s))continue;a[s]=i[s]}return a}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(he)),he.exports}var ze;function fr(){return ze||(ze=1,function(e){var o=pt();function i(r,a){if(r==null)return{};var s,t,c=o(r,a);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);for(t=0;t<h.length;t++)s=h[t],a.includes(s)||{}.propertyIsEnumerable.call(r,s)&&(c[s]=r[s])}return c}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(pe)),pe.exports}const pr=Sr(Tr);var D={},$e;function hr(){if($e)return D;$e=1,Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var e=H(),o=(0,e.createContext)({});return D.default=o,D}var B={},ve={exports:{}},Ge;function vr(){return Ge||(Ge=1,function(e){var o=dr();function i(a,s){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),t.push.apply(t,c)}return t}function r(a){for(var s=1;s<arguments.length;s++){var t=arguments[s]!=null?arguments[s]:{};s%2?i(Object(t),!0).forEach(function(c){o(a,c,t[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(t,c))})}return a}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(ve)),ve.exports}var w={},N={},me={exports:{}},Ke;function ht(){return Ke||(Ke=1,function(e){function o(i){return i&&i.__esModule?i:{default:i}}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(me)),me.exports}var G={},Ye;function vt(){if(Ye)return G;Ye=1,Object.defineProperty(G,"__esModule",{value:!0}),G.default=e;function e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return G}var K={},Ue;function mt(){if(Ue)return K;Ue=1,Object.defineProperty(K,"__esModule",{value:!0}),K.default=e;function e(o,i){if(!o)return!1;if(o.contains)return o.contains(i);for(var r=i;r;){if(r===o)return!0;r=r.parentNode}return!1}return K}var Ve;function gt(){if(Ve)return N;Ve=1;var e=ht().default;Object.defineProperty(N,"__esModule",{value:!0}),N.clearContainerCache=p,N.injectCSS=f,N.removeCSS=x,N.updateCSS=g;var o=e(vt()),i=e(mt()),r="data-rc-order",a="rc-util-key",s=new Map;function t(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=m.mark;return y?y.startsWith("data-")?y:"data-".concat(y):a}function c(m){if(m.attachTo)return m.attachTo;var y=document.querySelector("head");return y||document.body}function h(m){return m==="queue"?"prependQueue":m?"prepend":"append"}function l(m){return Array.from((s.get(m)||m).children).filter(function(y){return y.tagName==="STYLE"})}function f(m){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,o.default)())return null;var d=y.csp,C=y.prepend,v=document.createElement("style");v.setAttribute(r,h(C)),d!=null&&d.nonce&&(v.nonce=d==null?void 0:d.nonce),v.innerHTML=m;var j=c(y),_=j.firstChild;if(C){if(C==="queue"){var T=l(j).filter(function(R){return["prepend","prependQueue"].includes(R.getAttribute(r))});if(T.length)return j.insertBefore(v,T[T.length-1].nextSibling),v}j.insertBefore(v,_)}else j.appendChild(v);return v}function b(m){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=c(y);return l(d).find(function(C){return C.getAttribute(t(y))===m})}function x(m){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=b(m,y);if(d){var C=c(y);C.removeChild(d)}}function u(m,y){var d=s.get(m);if(!d||!(0,i.default)(document,d)){var C=f("",y),v=C.parentNode;s.set(m,v),m.removeChild(C)}}function p(){s.clear()}function g(m,y){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=c(d);u(C,d);var v=b(y,d);if(v){var j,_;if((j=d.csp)!==null&&j!==void 0&&j.nonce&&v.nonce!==((_=d.csp)===null||_===void 0?void 0:_.nonce)){var T;v.nonce=(T=d.csp)===null||T===void 0?void 0:T.nonce}return v.innerHTML!==m&&(v.innerHTML=m),v}var R=f(m,d);return R.setAttribute(t(d),y),R}return N}var E={},Qe;function xt(){if(Qe)return E;Qe=1,Object.defineProperty(E,"__esModule",{value:!0}),E.getShadowRoot=i,E.inShadow=o;function e(r){var a;return r==null||(a=r.getRootNode)===null||a===void 0?void 0:a.call(r)}function o(r){return e(r)!==(r==null?void 0:r.ownerDocument)}function i(r){return o(r)?e(r):null}return E}var P={},Je;function bt(){if(Je)return P;Je=1,Object.defineProperty(P,"__esModule",{value:!0}),P.call=s,P.default=void 0,P.note=r,P.noteOnce=c,P.preMessage=void 0,P.resetWarned=a,P.warning=i,P.warningOnce=t;var e={},o=function(f){};P.preMessage=o;function i(l,f){}function r(l,f){}function a(){e={}}function s(l,f,b){!f&&!e[b]&&(l(!1,b),e[b]=!0)}function t(l,f){s(i,l,f)}function c(l,f){s(r,l,f)}t.preMessage=o,t.resetWarned=a,t.noteOnce=c;var h=t;return P.default=h,P}var Xe;function ye(){if(Xe)return w;Xe=1;var e=Q().default,o=F().default;Object.defineProperty(w,"__esModule",{value:!0}),w.generate=p,w.getSecondaryColor=g,w.iconStyles=void 0,w.isIconDefinition=x,w.normalizeAttrs=u,w.normalizeTwoToneColors=m,w.useInsertStyles=w.svgBaseProps=void 0,w.warning=b;var i=o(vr()),r=o(V()),a=pr,s=gt(),t=xt(),c=o(bt()),h=e(H()),l=o(hr());function f(d){return d.replace(/-(.)/g,function(C,v){return v.toUpperCase()})}function b(d,C){(0,c.default)(d,"[@ant-design/icons] ".concat(C))}function x(d){return(0,r.default)(d)==="object"&&typeof d.name=="string"&&typeof d.theme=="string"&&((0,r.default)(d.icon)==="object"||typeof d.icon=="function")}function u(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(d).reduce(function(C,v){var j=d[v];switch(v){case"class":C.className=j,delete C.class;break;default:delete C[v],C[f(v)]=j}return C},{})}function p(d,C,v){return v?h.default.createElement(d.tag,(0,i.default)((0,i.default)({key:C},u(d.attrs)),v),(d.children||[]).map(function(j,_){return p(j,"".concat(C,"-").concat(d.tag,"-").concat(_))})):h.default.createElement(d.tag,(0,i.default)({key:C},u(d.attrs)),(d.children||[]).map(function(j,_){return p(j,"".concat(C,"-").concat(d.tag,"-").concat(_))}))}function g(d){return(0,a.generate)(d)[0]}function m(d){return d?Array.isArray(d)?d:[d]:[]}w.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var y=w.iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;return w.useInsertStyles=function(C){var v=(0,h.useContext)(l.default),j=v.csp,_=v.prefixCls,T=v.layer,R=y;_&&(R=R.replace(/anticon/g,_)),T&&(R="@layer ".concat(T,` {
`).concat(R,`
}`)),(0,h.useEffect)(function(){var L=C.current,z=(0,t.getShadowRoot)(L);(0,s.updateCSS)(R,"@ant-design-icons",{prepend:!T,csp:j,attachTo:z})},[])},w}var Ze;function mr(){if(Ze)return B;Ze=1;var e=F().default,o=Q().default;Object.defineProperty(B,"__esModule",{value:!0}),B.default=void 0;var i=e(fr()),r=e(vr()),a=o(H()),s=ye(),t=["icon","className","onClick","style","primaryColor","secondaryColor"],c={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function h(b){var x=b.primaryColor,u=b.secondaryColor;c.primaryColor=x,c.secondaryColor=u||(0,s.getSecondaryColor)(x),c.calculated=!!u}function l(){return(0,r.default)({},c)}var f=function(x){var u=x.icon,p=x.className,g=x.onClick,m=x.style,y=x.primaryColor,d=x.secondaryColor,C=(0,i.default)(x,t),v=a.useRef(),j=c;if(y&&(j={primaryColor:y,secondaryColor:d||(0,s.getSecondaryColor)(y)}),(0,s.useInsertStyles)(v),(0,s.warning)((0,s.isIconDefinition)(u),"icon should be icon definiton, but got ".concat(u)),!(0,s.isIconDefinition)(u))return null;var _=u;return _&&typeof _.icon=="function"&&(_=(0,r.default)((0,r.default)({},_),{},{icon:_.icon(j.primaryColor,j.secondaryColor)})),(0,s.generate)(_.icon,"svg-".concat(_.name),(0,r.default)((0,r.default)({className:p,onClick:g,style:m,"data-icon":_.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C),{},{ref:v}))};return f.displayName="IconReact",f.getTwoToneColors=l,f.setTwoToneColors=h,B.default=f,B}var W={},er;function yt(){if(er)return W;er=1;var e=F().default;Object.defineProperty(W,"__esModule",{value:!0}),W.getTwoToneColor=s,W.setTwoToneColor=a;var o=e(cr()),i=e(mr()),r=ye();function a(t){var c=(0,r.normalizeTwoToneColors)(t),h=(0,o.default)(c,2),l=h[0],f=h[1];return i.default.setTwoToneColors({primaryColor:l,secondaryColor:f})}function s(){var t=i.default.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}return W}var rr;function Ct(){if(rr)return M;rr=1;var e=F().default,o=Q().default;Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var i=e(ur()),r=e(cr()),a=e(dr()),s=e(fr()),t=o(H()),c=e(Pr()),h=pr,l=e(hr()),f=e(mr()),b=yt(),x=ye(),u=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,b.setTwoToneColor)(h.blue.primary);var p=t.forwardRef(function(g,m){var y=g.className,d=g.icon,C=g.spin,v=g.rotate,j=g.tabIndex,_=g.onClick,T=g.twoToneColor,R=(0,s.default)(g,u),L=t.useContext(l.default),z=L.prefixCls,J=z===void 0?"anticon":z,gr=L.rootClassName,xr=(0,c.default)(gr,J,(0,a.default)((0,a.default)({},"".concat(J,"-").concat(d.name),!!d.name),"".concat(J,"-spin"),!!C||d.name==="loading"),y),X=j;X===void 0&&_&&(X=-1);var br=v?{msTransform:"rotate(".concat(v,"deg)"),transform:"rotate(".concat(v,"deg)")}:void 0,yr=(0,x.normalizeTwoToneColors)(T),Ce=(0,r.default)(yr,2),Cr=Ce[0],jr=Ce[1];return t.createElement("span",(0,i.default)({role:"img","aria-label":d.name},R,{ref:m,tabIndex:X,onClick:_,className:xr}),t.createElement(f.default,{icon:d,primaryColor:Cr,secondaryColor:jr,style:br}))});return p.displayName="AntdIcon",p.getTwoToneColor=b.getTwoToneColor,p.setTwoToneColor=b.setTwoToneColor,M.default=p,M}var tr;function jt(){if(tr)return k;tr=1;var e=Q().default,o=F().default;Object.defineProperty(k,"__esModule",{value:!0}),k.default=void 0;var i=o(ur()),r=e(H()),a=o(ot()),s=o(Ct()),t=function(l,f){return r.createElement(s.default,(0,i.default)({},l,{ref:f,icon:a.default}))},c=r.forwardRef(t);return k.default=c,k}var _t=jt();const wt=Rr(_t),ge="TD_ADMIN_SUSPECTS_PROMPT";function St(){const[e,o]=O.useState(localStorage.getItem(ge)??"Make a pixar version of this image, keep the Polaroid frame and aspect ratio at 2:3. It's a"),i=r=>{const a=r.target.value;o(a),localStorage.setItem(ge,a)};return n.jsxs(I,{gap:8,align:"center",className:"my-2",children:[n.jsx(S.Text,{children:"Prompt Prefix:"}),n.jsx(ir,{value:e,onChange:i,placeholder:"AI Prompt",style:{width:320}})]})}function Tt({suspect:e}){const o=Dr(),i=()=>{const a=`${localStorage.getItem(ge)??""} ${e.prompt}`;o(a)};return n.jsx(xe,{size:"small",onClick:i,children:n.jsx(wt,{})})}function Pt({data:e,addEntryToUpdate:o}){const{addParam:i,queryParams:r}=U(),a=r.get("version")??"gb",s=r.get("sortBy")??"id",t=Number(r.get("cardsPerRow"))||8,c=r.get("activeFeature")||"",h=r.get("suspectId"),[l,f]=kr(t,{margin:16}),b=O.useMemo(()=>q.orderBy(Object.values(e),u=>s==="id"?Number(u.id.split("-").at(-1)):s==="name.pt"?_e(u.name.pt).toLowerCase():s==="name.en"?_e(u.name.en).toLowerCase():u[s]??u.id,["asc"]),[e,s]),x=(u,p)=>{const g=e[u];if(!g)return;const m=g.features||[];m.includes(p)?o(u,{...g,features:m.filter(y=>y!==p)}):o(u,{...g,features:[...m,p]})};return n.jsxs(n.Fragment,{children:[n.jsxs(S.Title,{level:2,children:["Deck ",a," (",b.length,")"]}),n.jsxs(Te,{children:[n.jsx(at,{})," ",n.jsx(St,{})]}),n.jsx(Or.PreviewGroup,{children:n.jsx(Te,{ref:f,wrap:!0,className:"my-2",children:b.map(u=>{var p,g,m;return n.jsxs("div",{className:"suspect",style:{width:`${l}px`},children:[n.jsx(nr,{id:ar(u.id,a),width:l,className:"suspect__image"}),n.jsxs("div",{className:"suspect__name",children:[n.jsxs(I,{gap:6,align:"center",children:[n.jsx(Br,{children:u.id})," ",n.jsx(Tt,{suspect:u})]}),n.jsx(S.Text,{type:"secondary",italic:!0,children:n.jsx("small",{children:q.truncate(u.note||"-",{length:18})})}),n.jsxs("div",{children:["ðŸ‡§ðŸ‡· ",u.name.pt]}),n.jsxs("div",{children:["ðŸ‡ºðŸ‡¸ ",u.name.en]}),n.jsxs("div",{className:"suspect__info",style:Rt(u),children:[n.jsxs("div",{children:[n.jsxs("div",{children:[u.gender==="male"?n.jsx(Er,{}):n.jsx(Wr,{})," ",u.age]}),n.jsx("div",{children:n.jsx("em",{children:u.ethnicity})})]}),n.jsxs("div",{className:"uppercase",children:[n.jsx(Hr,{}),n.jsx("br",{}),u.build.charAt(0)]}),n.jsxs("div",{className:"uppercase",children:[n.jsx(Fr,{}),n.jsx("br",{}),u.height.charAt(0)]}),n.jsxs("div",{children:[((p=u==null?void 0:u.features)==null?void 0:p.length)??0," features"]})]}),n.jsx(xe,{size:"small",block:!0,onClick:()=>i("suspectId",u.id),danger:!(u!=null&&u.features)||((g=u==null?void 0:u.features)==null?void 0:g.length)<2,children:n.jsx(Qr,{})}),!!c&&n.jsxs(I,{gap:8,className:"mt-2 mb-4",children:[n.jsxs(S.Text,{keyboard:!0,children:[c,":"]}),n.jsx(sr,{checked:(m=u.features)==null?void 0:m.includes(c),onChange:()=>x(u.id,c),checkedChildren:"âœ“",unCheckedChildren:"âœ—"})]})]})]},u.id)})},a)}),n.jsx(et,{data:e,addEntryToUpdate:o},h)]})}const Rt=e=>!e.build||!e.height||e.build.length===1||e.height.length===1?{borderColor:"red"}:{};function A(e,o){return q.orderBy(Object.entries(e).map(([i,r])=>({key:i,label:q.capitalize(i),value:r,percentage:Math.round(r/o*100)})),["percentage"],["desc"])}function Ot({data:e}){const[o,i]=O.useState(!1);return n.jsxs(n.Fragment,{children:[n.jsx(xe,{onClick:()=>i(!0),block:!0,children:"See Stats"}),o&&n.jsx(It,{data:e,open:o,onClose:()=>i(!1)})]})}function It({data:e,open:o,onClose:i}){const{ages:r,ethnicities:a,genders:s,builds:t,heights:c}=O.useMemo(()=>{const l={},f={},b={},x={},u={};Object.values(e).forEach(g=>{l[g.age]=(l[g.age]??0)+1,f[g.ethnicity]=(f[g.ethnicity]??0)+1,b[g.gender]=(b[g.gender]??0)+1,x[g.build||"?"]=(x[g.build||"?"]??0)+1,u[g.height||"?"]=(u[g.height||"?"]??0)+1});const p=Object.keys(e).length;return{ages:A(l,p),ethnicities:A(f,p),genders:A(b,p),builds:A(x,p),heights:A(u,p)}},[e]),h=O.useMemo(()=>{const l={};Object.values(e).forEach(x=>{var u;(u=x.features)==null||u.forEach(p=>{l[p]=(l[p]??0)+1})});const f=Object.keys(e).length,b=be.reduce((x,u)=>{const p=u.features.map(g=>g.id);return x.push(...p),x},[]);return q.orderBy(A(l,f),x=>b.findIndex(u=>u===x.key),["asc"])},[e]);return n.jsxs(or,{title:"Suspects Statistics",placement:"right",onClose:i,open:o,width:400,children:[n.jsx(S.Text,{strong:!0,children:"Ethnicity"}),n.jsx("ul",{className:"statistic__list",children:a.map(l=>n.jsxs("li",{children:[n.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),n.jsx(S.Text,{strong:!0,children:"Gender"}),n.jsx("ul",{className:"statistic__list",children:s.map(l=>n.jsxs("li",{children:[n.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),n.jsx(S.Text,{strong:!0,children:"Age"}),n.jsx("ul",{className:"statistic__list",children:r.map(l=>n.jsxs("li",{children:[n.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),n.jsx(S.Text,{strong:!0,children:"Build"}),n.jsx("ul",{className:"statistic__list",children:t.map(l=>n.jsxs("li",{children:[n.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),n.jsx(S.Text,{strong:!0,children:"Height"}),n.jsx("ul",{className:"statistic__list",children:c.map(l=>n.jsxs("li",{children:[n.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),n.jsx(S.Text,{strong:!0,children:"Features"}),n.jsx("ul",{className:"statistic__list",children:h.map(l=>n.jsxs("li",{children:[n.jsx("strong",{children:l.label})," - ",l.percentage,"% (",l.value,")"]},l.key))})]})}const qt=[{value:"gb",label:"Ghibli"},{value:"rl",label:"Realistic"},{value:"px",label:"Pixar"},{value:"ct",label:"Cartoon (deprecated)"},{value:"ai",label:"AI (deprecated)"},{value:"md",label:"Models (deprecated)"},{value:"wc",label:"Wacky (deprecated)"}],Nt=[{value:"id",label:"Id"},{value:"name.pt",label:"Name (PT)"},{value:"name.en",label:"Name (EN)"},{value:"ethnicity",label:"Ethnicity"},{value:"gender",label:"Gender"},{value:"age",label:"Age"},{value:"height",label:"Height"},{value:"build",label:"Build"}];function At({data:e,save:o,isDirty:i,isSaving:r,entriesToUpdate:a,hasFirestoreData:s}){const{addParam:t,queryParams:c}=U();return n.jsxs(zr,{children:[n.jsxs(I,{vertical:!0,gap:12,children:[n.jsx(Kr,{isDirty:i,onSave:o,isSaving:r,dirt:JSON.stringify(a)}),n.jsx($r,{data:()=>kt(e),fileName:"suspects.json",disabled:i,hasNewData:s,block:!0}),n.jsx(Gr,{path:"tdr/suspects",className:"text-center"})]}),n.jsx(Ir,{}),n.jsx(Pe,{label:"Version",value:c.get("version")??"gb",onChange:h=>t("version",h),options:qt}),n.jsx(Lr,{label:"Cards Per Row",value:Number(c.get("cardsPerRow")??"8"),onChange:h=>t("cardsPerRow",h),min:2,max:12}),n.jsx(Pe,{label:"Sort By",value:c.get("sortBy")??"id",onChange:h=>t("sortBy",h),options:Nt}),n.jsx(Ot,{data:e})]})}function kt(e){const o=q.cloneDeep(e);for(const i in o){const r=o[i];r.name.pt.endsWith(".")&&(r.name.pt=r.name.pt.slice(0,-1).trim()),r.name.en.endsWith(".")&&(r.name.en=r.name.en.slice(0,-1).trim()),Number(r.id.match(/\d+/))>114&&(r.gbExclusive=!0)}return Mr(o,["gender","ethnicity","age","height","build","features"])}function wn(){const e=Yr({tdrResourceName:"suspects",firestoreDataCollectionName:"suspects",serialize:!0});return n.jsx(qr,{title:"Suspects",subtitle:"Information",children:n.jsxs(je,{hasSider:!0,children:[n.jsx(Ar,{children:n.jsx(At,{...e})}),n.jsx(je.Content,{className:"content",children:n.jsx(Nr,{isLoading:e.isLoading,error:e.error,hasResponseData:!q.isEmpty(e.data),children:n.jsx(Pt,{...e})})})]})})}export{wn as default};
