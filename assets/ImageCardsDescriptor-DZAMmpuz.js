import{r as o,m as pe,aV as A,aP as Et,bw as $t,aY as Ne,aX as Dt,bx as kt,aZ as tt,o as wt,bp as Mt,by as Me,E as Pt,G as Rt,H as Q,J as jt,bi as rt,w as ue,bz as Bt,K as Vt,be as It,aH as Nt,d as ut,j as y,F as He,B as Pe,b as Ht,aa as Ot,D as nt,P as Ft,L as ot}from"./index-DyjSH4OM.js";import{D as dt}from"./DataLoadingWrapper-B0oxzPVc.js";import{u as Fe}from"./useQueryParams-Buak0vV0.js";import{u as Lt}from"./useTDResource-CGE34CFt.js";import{u as gt}from"./useImageCardsDecks-DLGh8czd.js";import{F as Tt}from"./FullScreenModal-Cvc3sB7K.js";import{r as At,a as zt}from"./index-CIvxw8l3.js";import{I as mt}from"./ImageCard-C5pbT96q.js";import{S as qt}from"./index-DQRiDBAE.js";import{u as Wt}from"./useTablePagination-B1j7FR-a.js";import{F as Xt}from"./Table-DHBMrFtB.js";import{D as Kt}from"./DownloadButton-Bk4uNNwt.js";import{S as _t}from"./SaveButton-DSm6bsIT.js";import{S as Ut}from"./SiderContent--jQ49XzE.js";import{l as ft,P as Yt}from"./useBaseUrl-CGDFxb01.js";import{u as Gt}from"./useResourceFirestoreData-Kas4aR5W.js";import"./index-DEY7cLY0.js";import"./index-BblfdFop.js";import"./PlusOutlined-DXJb8t4Z.js";import"./Dropdown-CQ0KOtK0.js";import"./constants-B1K3jPng.js";import"./Item-jt1Ui6d6.js";import"./index-D9N9BiJs.js";import"./index-BSyNjB5B.js";import"./index-ClnxuMyA.js";import"./useId-C3rCDJeT.js";import"./scrollTo-Dcq7vwV7.js";import"./Pagination-DhLSDJ7y.js";import"./moment-B-YVwB4U.js";import"./SaveOutlined-C-TjSIG9.js";import"./useGetFirestoreDoc-Clud0cWJ.js";import"./useUpdateFirestoreDoc-BINkZPPh.js";import"./useMutation-B98nW9qs.js";function qe(e,t,r){return(e-t)/(r-t)}function _e(e,t,r,n){const a=qe(t,r,n),l={};switch(e){case"rtl":l.right=`${a*100}%`,l.transform="translateX(50%)";break;case"btt":l.bottom=`${a*100}%`,l.transform="translateY(50%)";break;case"ttb":l.top=`${a*100}%`,l.transform="translateY(-50%)";break;default:l.left=`${a*100}%`,l.transform="translateX(-50%)";break}return l}function be(e,t){return Array.isArray(e)?e[t]:e}const ve=o.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),Qt=o.createContext({});function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},We.apply(this,arguments)}const at=o.forwardRef((e,t)=>{const{prefixCls:r,value:n,valueIndex:a,onStartMove:l,onDelete:u,style:m,render:b,dragging:g,draggingDelete:f,onOffsetChange:v,onChangeComplete:R,onFocus:p,onMouseEnter:c,...s}=e,{min:x,max:i,direction:h,disabled:k,keyboard:d,range:$,tabIndex:M,ariaLabelForHandle:w,ariaLabelledByForHandle:P,ariaRequired:O,ariaValueTextFormatterForHandle:ee,styles:te,classNames:de}=o.useContext(ve),oe=`${r}-handle`,j=B=>{k||l(B,a)},N=B=>{p?.(B,a)},F=B=>{c(B,a)},V=B=>{if(!k&&d){let I=null;switch(B.which||B.keyCode){case A.LEFT:I=h==="ltr"||h==="btt"?-1:1;break;case A.RIGHT:I=h==="ltr"||h==="btt"?1:-1;break;case A.UP:I=h!=="ttb"?1:-1;break;case A.DOWN:I=h!=="ttb"?-1:1;break;case A.HOME:I="min";break;case A.END:I="max";break;case A.PAGE_UP:I=2;break;case A.PAGE_DOWN:I=-2;break;case A.BACKSPACE:case A.DELETE:u?.(a);break}I!==null&&(B.preventDefault(),v(I,a))}},X=B=>{switch(B.which||B.keyCode){case A.LEFT:case A.RIGHT:case A.UP:case A.DOWN:case A.HOME:case A.END:case A.PAGE_UP:case A.PAGE_DOWN:R?.();break}},D=_e(h,n,x,i);let L={};a!==null&&(L={tabIndex:k?null:be(M,a),role:"slider","aria-valuemin":x,"aria-valuemax":i,"aria-valuenow":n,"aria-disabled":k,"aria-label":be(w,a),"aria-labelledby":be(P,a),"aria-required":be(O,a),"aria-valuetext":be(ee,a)?.(n),"aria-orientation":h==="ltr"||h==="rtl"?"horizontal":"vertical",onMouseDown:j,onTouchStart:j,onFocus:N,onMouseEnter:F,onKeyDown:V,onKeyUp:X});let H=o.createElement("div",We({ref:t,className:pe(oe,{[`${oe}-${a+1}`]:a!==null&&$,[`${oe}-dragging`]:g,[`${oe}-dragging-delete`]:f},de.handle),style:{...D,...m,...te.handle}},L,s));return b&&(H=b(H,{index:a,prefixCls:r,value:n,dragging:g,draggingDelete:f})),H});function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oe.apply(this,arguments)}const Jt=o.forwardRef((e,t)=>{const{prefixCls:r,style:n,onStartMove:a,onOffsetChange:l,values:u,handleRender:m,activeHandleRender:b,draggingIndex:g,draggingDelete:f,onFocus:v,...R}=e,p=o.useRef({}),[c,s]=o.useState(!1),[x,i]=o.useState(-1),h=M=>{i(M),s(!0)},k=(M,w)=>{h(w),v?.(M)},d=(M,w)=>{h(w)};o.useImperativeHandle(t,()=>({focus:M=>{p.current[M]?.focus()},hideHelp:()=>{Et.flushSync(()=>{s(!1)})}}));const $={prefixCls:r,onStartMove:a,onOffsetChange:l,render:m,onFocus:k,onMouseEnter:d,...R};return o.createElement(o.Fragment,null,u.map((M,w)=>{const P=g===w;return o.createElement(at,Oe({ref:O=>{O?p.current[w]=O:delete p.current[w]},dragging:P,draggingDelete:P&&f,style:be(n,w),key:w,value:M,valueIndex:w},$))}),b&&c&&o.createElement(at,Oe({key:"a11y"},$,{value:u[x],valueIndex:null,dragging:g!==-1,draggingDelete:f,render:b,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),Zt=e=>{const{prefixCls:t,style:r,children:n,value:a,onClick:l}=e,{min:u,max:m,direction:b,includedStart:g,includedEnd:f,included:v}=o.useContext(ve),R=`${t}-text`,p=_e(b,a,u,m);return o.createElement("span",{className:pe(R,{[`${R}-active`]:v&&g<=a&&a<=f}),style:{...p,...r},onMouseDown:c=>{c.stopPropagation()},onClick:()=>{l(a)}},n)},er=e=>{const{prefixCls:t,marks:r,onClick:n}=e,a=`${t}-mark`;return r.length?o.createElement("div",{className:a},r.map(({value:l,style:u,label:m})=>o.createElement(Zt,{key:l,prefixCls:a,style:u,value:l,onClick:n},m))):null},tr=e=>{const{prefixCls:t,value:r,style:n,activeStyle:a}=e,{min:l,max:u,direction:m,included:b,includedStart:g,includedEnd:f}=o.useContext(ve),v=`${t}-dot`,R=b&&g<=r&&r<=f;let p={..._e(m,r,l,u),...typeof n=="function"?n(r):n};return R&&(p={...p,...typeof a=="function"?a(r):a}),o.createElement("span",{className:pe(v,{[`${v}-active`]:R}),style:p})},rr=e=>{const{prefixCls:t,marks:r,dots:n,style:a,activeStyle:l}=e,{min:u,max:m,step:b}=o.useContext(ve),g=o.useMemo(()=>{const f=new Set;if(r.forEach(v=>{f.add(v.value)}),n&&b!==null){let v=u;for(;v<=m;)f.add(v),v+=b}return Array.from(f)},[u,m,b,n,r]);return o.createElement("div",{className:`${t}-step`},g.map(f=>o.createElement(tr,{prefixCls:t,key:f,value:f,style:a,activeStyle:l})))},st=e=>{const{prefixCls:t,style:r,start:n,end:a,index:l,onStartMove:u,replaceCls:m}=e,{direction:b,min:g,max:f,disabled:v,range:R,classNames:p}=o.useContext(ve),c=`${t}-track`,s=qe(n,g,f),x=qe(a,g,f),i=d=>{!v&&u&&u(d,-1)},h={};switch(b){case"rtl":h.right=`${s*100}%`,h.width=`${x*100-s*100}%`;break;case"btt":h.bottom=`${s*100}%`,h.height=`${x*100-s*100}%`;break;case"ttb":h.top=`${s*100}%`,h.height=`${x*100-s*100}%`;break;default:h.left=`${s*100}%`,h.width=`${x*100-s*100}%`}const k=m||pe(c,{[`${c}-${l+1}`]:l!==null&&R,[`${t}-track-draggable`]:u},p.track);return o.createElement("div",{className:k,style:{...h,...r},onMouseDown:i,onTouchStart:i})},nr=e=>{const{prefixCls:t,style:r,values:n,startPoint:a,onStartMove:l}=e,{included:u,range:m,min:b,styles:g,classNames:f}=o.useContext(ve),v=o.useMemo(()=>{if(!m){if(n.length===0)return[];const c=a??b,s=n[0];return[{start:Math.min(c,s),end:Math.max(c,s)}]}const p=[];for(let c=0;c<n.length-1;c+=1)p.push({start:n[c],end:n[c+1]});return p},[n,m,a,b]);if(!u)return null;const R=v?.length&&(f.tracks||g.tracks)?o.createElement(st,{index:null,prefixCls:t,start:v[0].start,end:v[v.length-1].end,replaceCls:pe(f.tracks,`${t}-tracks`),style:g.tracks}):null;return o.createElement(o.Fragment,null,R,v.map(({start:p,end:c},s)=>o.createElement(st,{index:s,prefixCls:t,style:{...be(r,s),...g.track},start:p,end:c,key:s,onStartMove:l})))},or=130;function lt(e){const t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function ar(e,t,r,n,a,l,u,m,b,g,f){const[v,R]=o.useState(null),[p,c]=o.useState(-1),[s,x]=o.useState(!1),[i,h]=o.useState(r),[k,d]=o.useState(r),$=o.useRef(null),M=o.useRef(null),w=o.useRef(null),{onDragStart:P,onDragChange:O}=o.useContext(Qt);$t(()=>{p===-1&&h(r)},[r,p]),o.useEffect(()=>()=>{document.removeEventListener("mousemove",$.current),document.removeEventListener("mouseup",M.current),w.current&&(w.current.removeEventListener("touchmove",$.current),w.current.removeEventListener("touchend",M.current))},[]);const ee=(j,N,F)=>{N!==void 0&&R(N),h(j);let V=j;F&&(V=j.filter((X,D)=>D!==p)),u(V),O&&O({rawValues:j,deleteIndex:F?p:-1,draggingIndex:p,draggingValue:N})},te=Ne((j,N,F)=>{if(j===-1){const V=k[0],X=k[k.length-1],D=n-V,L=a-X;let H=N*(a-n);H=Math.max(H,D),H=Math.min(H,L),H=l(V+H)-V;const I=k.map(J=>J+H);ee(I)}else{const V=(a-n)*N,X=[...i];X[j]=k[j];const D=b(X,V,j,"dist");ee(D.values,D.value,F)}}),de=(j,N,F)=>{j.stopPropagation();const V=F||r,X=V[N];c(N),R(X),d(V),h(V),x(!1);const{pageX:D,pageY:L}=lt(j);let H=!1;P&&P({rawValues:V,draggingIndex:N,draggingValue:X});const B=J=>{J.preventDefault();const{pageX:Ce,pageY:ge}=lt(J),ae=Ce-D,_=ge-L,{width:U,height:se}=e.current.getBoundingClientRect();let Z,z;switch(t){case"btt":Z=-_/se,z=ae;break;case"ttb":Z=_/se,z=ae;break;case"rtl":Z=-ae/U,z=_;break;default:Z=ae/U,z=_}H=g?Math.abs(z)>or&&f<i.length:!1,x(H),te(N,Z,H)},I=J=>{J.preventDefault(),document.removeEventListener("mouseup",I),document.removeEventListener("mousemove",B),w.current&&(w.current.removeEventListener("touchmove",$.current),w.current.removeEventListener("touchend",M.current)),$.current=null,M.current=null,w.current=null,m(H),c(-1),x(!1)};document.addEventListener("mouseup",I),document.addEventListener("mousemove",B),j.currentTarget.addEventListener("touchend",I),j.currentTarget.addEventListener("touchmove",B),$.current=B,M.current=I,w.current=j.currentTarget},oe=o.useMemo(()=>{const j=[...r].sort((D,L)=>D-L),N=[...i].sort((D,L)=>D-L),F={};N.forEach(D=>{F[D]=(F[D]||0)+1}),j.forEach(D=>{F[D]=(F[D]||0)-1});const V=g?1:0;return Object.values(F).reduce((D,L)=>D+Math.abs(L),0)<=V?i:r},[r,i,g]);return[p,v,s,oe,de]}function sr(e,t,r,n,a,l){const u=o.useCallback(p=>Math.max(e,Math.min(t,p)),[e,t]),m=o.useCallback(p=>{if(r!==null){const c=e+Math.round((u(p)-e)/r)*r,s=h=>(String(h).split(".")[1]||"").length,x=Math.max(s(r),s(t),s(e)),i=Number(c.toFixed(x));return e<=i&&i<=t?i:null}return null},[r,e,t,u]),b=o.useCallback(p=>{const c=u(p),s=n.map(h=>h.value);r!==null&&s.push(m(p)),s.push(e,t);let x=s[0],i=t-e;return s.forEach(h=>{const k=Math.abs(c-h);k<=i&&(x=h,i=k)}),x},[e,t,n,r,u,m]),g=(p,c,s,x="unit")=>{if(typeof c=="number"){let i;const h=p[s],k=h+c;let d=[];n.forEach(P=>{d.push(P.value)}),d.push(e,t),d.push(m(h));const $=c>0?1:-1;x==="unit"?d.push(m(h+$*r)):d.push(m(k)),d=d.filter(P=>P!==null).filter(P=>c<0?P<=h:P>=h),x==="unit"&&(d=d.filter(P=>P!==h));const M=x==="unit"?h:k;i=d[0];let w=Math.abs(i-M);if(d.forEach(P=>{const O=Math.abs(P-M);O<w&&(i=P,w=O)}),i===void 0)return c<0?e:t;if(x==="dist")return i;if(Math.abs(c)>1){const P=[...p];return P[s]=i,g(P,c-$,s,x)}return i}else{if(c==="min")return e;if(c==="max")return t}},f=(p,c,s,x="unit")=>{const i=p[s],h=g(p,c,s,x);return{value:h,changed:h!==i}},v=p=>l===null&&p===0||typeof l=="number"&&p<l;return[b,(p,c,s,x="unit")=>{const i=p.map(b),h=i[s],k=g(i,c,s,x);if(i[s]=k,a===!1){const d=l||0;s>0&&i[s-1]!==h&&(i[s]=Math.max(i[s],i[s-1]+d)),s<i.length-1&&i[s+1]!==h&&(i[s]=Math.min(i[s],i[s+1]-d))}else if(typeof l=="number"||l===null){for(let d=s+1;d<i.length;d+=1){let $=!0;for(;v(i[d]-i[d-1])&&$;)({value:i[d],changed:$}=f(i,1,d))}for(let d=s;d>0;d-=1){let $=!0;for(;v(i[d]-i[d-1])&&$;)({value:i[d-1],changed:$}=f(i,-1,d-1))}for(let d=i.length-1;d>0;d-=1){let $=!0;for(;v(i[d]-i[d-1])&&$;)({value:i[d-1],changed:$}=f(i,-1,d-1))}for(let d=0;d<i.length-1;d+=1){let $=!0;for(;v(i[d+1]-i[d])&&$;)({value:i[d+1],changed:$}=f(i,1,d+1))}}return{value:i[s],values:i}}]}function lr(e){return o.useMemo(()=>{if(e===!0||!e)return[!!e,!1,!1,0];const{editable:t,draggableTrack:r,minCount:n,maxCount:a}=e;return[!0,t,!t&&r,n||0,a]},[e])}const ir=o.forwardRef((e,t)=>{const{prefixCls:r="rc-slider",className:n,style:a,classNames:l,styles:u,id:m,disabled:b=!1,keyboard:g=!0,autoFocus:f,onFocus:v,onBlur:R,min:p=0,max:c=100,step:s=1,value:x,defaultValue:i,range:h,count:k,onChange:d,onBeforeChange:$,onAfterChange:M,onChangeComplete:w,allowCross:P=!0,pushable:O=!1,reverse:ee,vertical:te,included:de=!0,startPoint:oe,trackStyle:j,handleStyle:N,railStyle:F,dotStyle:V,activeDotStyle:X,marks:D,dots:L,handleRender:H,activeHandleRender:B,track:I,tabIndex:J=0,ariaLabelForHandle:Ce,ariaLabelledByForHandle:ge,ariaRequired:ae,ariaValueTextFormatterForHandle:_}=e,U=o.useRef(null),se=o.useRef(null),Z=o.useMemo(()=>te?ee?"ttb":"btt":ee?"rtl":"ltr",[ee,te]),[z,re,Ee,Re,je]=lr(h),K=o.useMemo(()=>isFinite(p)?p:0,[p]),me=o.useMemo(()=>isFinite(c)?c:100,[c]),le=o.useMemo(()=>s!==null&&s<=0?1:s,[s]),Le=o.useMemo(()=>typeof O=="boolean"?O?le:!1:O>=0?O:!1,[O,le]),T=o.useMemo(()=>Object.keys(D||{}).map(C=>{const S=D[C],E={value:Number(C)};return S&&typeof S=="object"&&!o.isValidElement(S)&&("label"in S||"style"in S)?(E.style=S.style,E.label=S.label):E.label=S,E}).filter(({label:C})=>C||typeof C=="number").sort((C,S)=>C.value-S.value),[D]),[G,xe]=sr(K,me,le,T,P,Le),[ne,he]=Dt(i,x),q=o.useMemo(()=>{const C=ne==null?[]:Array.isArray(ne)?ne:[ne],[S=K]=C;let E=ne===null?[]:[S];if(z){if(E=[...C],k||ne===void 0){const Y=k>=0?k+1:2;for(E=E.slice(0,Y);E.length<Y;)E.push(E[E.length-1]??K)}E.sort((Y,ce)=>Y-ce)}return E.forEach((Y,ce)=>{E[ce]=G(Y)}),E},[ne,z,K,k,G]),ie=C=>z?C:C[0],ye=Ne(C=>{const S=[...C].sort((E,Y)=>E-Y);d&&!kt(S,q,!0)&&d(ie(S)),he(S)}),W=Ne(C=>{C&&U.current.hideHelp();const S=ie(q);M?.(S),tt(!M,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),w?.(S)}),Be=C=>{if(b||!re||q.length<=Re)return;const S=[...q];S.splice(C,1),$?.(ie(S)),ye(S);const E=Math.max(0,C-1);U.current.hideHelp(),U.current.focus(E)},[Ve,bt,vt,Te,Ue]=ar(se,Z,q,K,me,G,ye,W,xe,re,Re),Ye=(C,S)=>{if(!b){const E=[...q];let Y=0,ce=0,De=me-K;q.forEach((we,fe)=>{const Ie=Math.abs(C-we);Ie<=De&&(De=Ie,Y=fe),we<C&&(ce=fe)});let ke=Y;re&&De!==0&&(!je||q.length<je)?(E.splice(ce+1,0,C),ke=ce+1):E[Y]=C,z&&!q.length&&k===void 0&&E.push(C);const Se=ie(E);$?.(Se),ye(E),S?(document.activeElement?.blur?.(),U.current.focus(ke),Ue(S,ke,E)):(M?.(Se),tt(!M,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),w?.(Se))}},Ct=C=>{C.preventDefault();const{width:S,height:E,left:Y,top:ce,bottom:De,right:ke}=se.current.getBoundingClientRect(),{clientX:Se,clientY:we}=C;let fe;switch(Z){case"btt":fe=(De-we)/E;break;case"ttb":fe=(we-ce)/E;break;case"rtl":fe=(ke-Se)/S;break;default:fe=(Se-Y)/S}const Ie=K+fe*(me-K);Ye(G(Ie),C)},[Ae,Ge]=o.useState(null),xt=(C,S)=>{if(!b){const E=xe(q,C,S);$?.(ie(q)),ye(E.values),Ge(E.value)}};o.useEffect(()=>{if(Ae!==null){const C=q.indexOf(Ae);C>=0&&U.current.focus(C)}Ge(null)},[Ae]);const yt=o.useMemo(()=>Ee&&le===null?!1:Ee,[Ee,le]),Qe=Ne((C,S)=>{Ue(C,S),$?.(ie(q))}),Je=Ve!==-1;o.useEffect(()=>{if(!Je){const C=q.lastIndexOf(bt);U.current.focus(C)}},[Je]);const $e=o.useMemo(()=>[...Te].sort((C,S)=>C-S),[Te]),[Ze,et]=o.useMemo(()=>z?[$e[0],$e[$e.length-1]]:[K,$e[0]],[$e,z,K]);o.useImperativeHandle(t,()=>({focus:()=>{U.current.focus(0)},blur:()=>{const{activeElement:C}=document;se.current?.contains(C)&&C?.blur()}})),o.useEffect(()=>{f&&U.current.focus(0)},[]);const St=o.useMemo(()=>({min:K,max:me,direction:Z,disabled:b,keyboard:g,step:le,included:de,includedStart:Ze,includedEnd:et,range:z,tabIndex:J,ariaLabelForHandle:Ce,ariaLabelledByForHandle:ge,ariaRequired:ae,ariaValueTextFormatterForHandle:_,styles:u||{},classNames:l||{}}),[K,me,Z,b,g,le,de,Ze,et,z,J,Ce,ge,ae,_,u,l]);return o.createElement(ve.Provider,{value:St},o.createElement("div",{ref:se,className:pe(r,n,{[`${r}-disabled`]:b,[`${r}-vertical`]:te,[`${r}-horizontal`]:!te,[`${r}-with-marks`]:T.length}),style:a,onMouseDown:Ct,id:m},o.createElement("div",{className:pe(`${r}-rail`,l?.rail),style:{...F,...u?.rail}}),I!==!1&&o.createElement(nr,{prefixCls:r,style:j,values:q,startPoint:oe,onStartMove:yt?Qe:void 0}),o.createElement(rr,{prefixCls:r,marks:T,dots:L,style:V,activeStyle:X}),o.createElement(Jt,{ref:U,prefixCls:r,style:N,values:Te,draggingIndex:Ve,draggingDelete:vt,onStartMove:Qe,onOffsetChange:xt,onFocus:v,onBlur:R,handleRender:H,activeHandleRender:B,onChangeComplete:W,onDelete:re?Be:void 0}),o.createElement(er,{prefixCls:r,marks:T,onClick:Ye})))}),cr=o.createContext({}),it=o.forwardRef((e,t)=>{const{open:r,draggingDelete:n,value:a}=e,l=o.useRef(null),u=r&&!n,m=o.useRef(null);function b(){Me.cancel(m.current),m.current=null}function g(){m.current=Me(()=>{l.current?.forceAlign(),m.current=null})}return o.useEffect(()=>(u?g():b(),b),[u,e.title,a]),o.createElement(wt,{ref:Mt(l,t),...e,open:u})}),ur=e=>{const{componentCls:t,antCls:r,controlSize:n,dotSize:a,marginFull:l,marginPart:u,colorFillContentHover:m,handleColorDisabled:b,calc:g,handleSize:f,handleSizeHover:v,handleActiveColor:R,handleActiveOutlineColor:p,handleLineWidth:c,handleLineWidthHover:s,motionDurationMid:x}=e;return{[t]:{...jt(e),position:"relative",height:n,margin:`${Q(u)} ${Q(l)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${Q(l)} ${Q(u)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${x}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${x}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:m},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${Q(c)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:f,height:f,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:g(c).mul(-1).equal(),insetBlockStart:g(c).mul(-1).equal(),width:g(f).add(g(c).mul(2)).equal(),height:g(f).add(g(c).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:f,height:f,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${Q(c)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${x},
            inset-block-start ${x},
            width ${x},
            height ${x},
            box-shadow ${x},
            outline ${x}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:g(v).sub(f).div(2).add(s).mul(-1).equal(),insetBlockStart:g(v).sub(f).div(2).add(s).mul(-1).equal(),width:g(v).add(g(s).mul(2)).equal(),height:g(v).add(g(s).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${Q(s)} ${R}`,outline:`6px solid ${p}`,width:v,height:v,insetInlineStart:e.calc(f).sub(v).div(2).equal(),insetBlockStart:e.calc(f).sub(v).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:a,height:a,backgroundColor:e.colorBgElevated,border:`${Q(c)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:f,height:f,boxShadow:`0 0 0 ${Q(c)} ${b}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${r}-tooltip-container`]:{minWidth:"unset"}}}},pt=(e,t)=>{const{componentCls:r,railSize:n,handleSize:a,dotSize:l,marginFull:u,calc:m}=e,b=t?"paddingBlock":"paddingInline",g=t?"width":"height",f=t?"height":"width",v=t?"insetBlockStart":"insetInlineStart",R=t?"top":"insetInlineStart",p=m(n).mul(3).sub(a).div(2).equal(),c=m(a).sub(n).div(2).equal(),s=t?{borderWidth:`${Q(c)} 0`,transform:`translateY(${Q(m(c).mul(-1).equal())})`}:{borderWidth:`0 ${Q(c)}`,transform:`translateX(${Q(e.calc(c).mul(-1).equal())})`};return{[b]:n,[f]:m(n).mul(3).equal(),[`${r}-rail`]:{[g]:"100%",[f]:n},[`${r}-track,${r}-tracks`]:{[f]:n},[`${r}-track-draggable`]:{...s},[`${r}-handle`]:{[v]:p},[`${r}-mark`]:{insetInlineStart:0,top:0,[R]:m(n).mul(3).add(t?0:u).equal(),[g]:"100%"},[`${r}-step`]:{insetInlineStart:0,top:0,[R]:n,[g]:"100%",[f]:n},[`${r}-dot`]:{position:"absolute",[v]:m(n).sub(l).div(2).equal()}}},dr=e=>{const{componentCls:t,marginPartWithMark:r}=e;return{[`${t}-horizontal`]:{...pt(e,!0),[`&${t}-with-marks`]:{marginBottom:r}}}},gr=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:{...pt(e,!1),height:"100%"}}},mr=e=>{const r=e.controlHeightLG/4,n=e.controlHeightSM/2,a=e.lineWidth+1,l=e.lineWidth+1*1.5,u=e.colorPrimary,m=new rt(u).setA(.2).toRgbString();return{controlSize:r,railSize:4,handleSize:r,handleSizeHover:n,dotSize:8,handleLineWidth:a,handleLineWidthHover:l,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:u,handleActiveOutlineColor:m,handleColorDisabled:new rt(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},fr=Pt("Slider",e=>{const t=Rt(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[ur(t),dr(t),gr(t)]},mr);function ze(){const[e,t]=o.useState(!1),r=o.useRef(null),n=()=>{Me.cancel(r.current)},a=l=>{n(),l?t(l):r.current=Me(()=>{t(l)})};return o.useEffect(()=>n,[]),[e,a]}function pr(e){return e||e===null?e:t=>typeof t=="number"?t.toString():""}const hr=ue.forwardRef((e,t)=>{const{prefixCls:r,range:n,className:a,rootClassName:l,style:u,disabled:m,tooltip:b={},onChangeComplete:g,classNames:f,styles:v,vertical:R,orientation:p,...c}=e,[,s]=Bt(p,R),{getPrefixCls:x,direction:i,className:h,style:k,classNames:d,styles:$,getPopupContainer:M}=Vt("slider"),w=ue.useContext(It),P=m??w,O={...e,disabled:P,vertical:s},[ee,te]=Nt([d,f],[$,v],{props:O}),{handleRender:de,direction:oe}=ue.useContext(cr),N=(oe||i)==="rtl",[F,V]=ze(),[X,D]=ze(),L={...b},{open:H,placement:B,getPopupContainer:I,prefixCls:J,formatter:Ce}=L,ge=H,ae=(F||X)&&ge!==!1,_=pr(Ce),[U,se]=ze(),Z=T=>{g?.(T),se(!1)},z=(T,G)=>T||(G?N?"left":"right":"top"),re=x("slider",r),[Ee,Re]=fr(re),je=pe(a,h,ee.root,l,{[`${re}-rtl`]:N,[`${re}-lock`]:U},Ee,Re);N&&!s&&(c.reverse=!c.reverse),ue.useEffect(()=>{const T=()=>{Me(()=>{D(!1)},1)};return document.addEventListener("mouseup",T),()=>{document.removeEventListener("mouseup",T)}},[]);const K=n&&!ge,me=de||((T,G)=>{const{index:xe}=G,ne=T.props;function he(W,Be,Ve){Ve&&c[W]?.(Be),ne[W]?.(Be)}const q={...ne,onMouseEnter:W=>{V(!0),he("onMouseEnter",W)},onMouseLeave:W=>{V(!1),he("onMouseLeave",W)},onMouseDown:W=>{D(!0),se(!0),he("onMouseDown",W)},onFocus:W=>{D(!0),c.onFocus?.(W),he("onFocus",W,!0)},onBlur:W=>{D(!1),c.onBlur?.(W),he("onBlur",W,!0)}},ie=ue.cloneElement(T,q),ye=(!!ge||ae)&&_!==null;return K?ie:ue.createElement(it,{...L,prefixCls:x("tooltip",J),title:_?_(G.value):"",value:G.value,open:ye,placement:z(B,s),key:xe,classNames:{root:`${re}-tooltip`},getPopupContainer:I||M},ie)}),le=K?(T,G)=>{const xe=ue.cloneElement(T,{style:{...T.props.style,visibility:"hidden"}});return ue.createElement(it,{...L,prefixCls:x("tooltip",J),title:_?_(G.value):"",open:_!==null&&ae,placement:z(B,s),key:"tooltip",classNames:{root:`${re}-tooltip`},getPopupContainer:I||M,draggingDelete:G.draggingDelete},xe)}:void 0,Le={...te.root,...k,...u};return ue.createElement(ir,{...c,classNames:ee,styles:te,step:c.step,range:n,className:je,style:Le,disabled:P,vertical:s,ref:t,prefixCls:re,handleRender:me,activeHandleRender:le,onChangeComplete:Z})});var br={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"};function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xe.apply(this,arguments)}const vr=(e,t)=>o.createElement(ut,Xe({},e,{ref:t,icon:br})),Cr=o.forwardRef(vr);var xr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ke.apply(this,arguments)}const yr=(e,t)=>o.createElement(ut,Ke({},e,{ref:t,icon:xr})),Sr=o.forwardRef(yr),ct=200;function Er({data:e,addEntryToUpdate:t,onClose:r,onNewCard:n}){const{queryParams:a,removeParam:l,addParam:u}=Fe(),m=Number(a.get("cardSize")??ct),b=a.get("cardId"),g=e[b??""]??{id:b,keywords:[]};return y.jsx(Tt,{actions:[y.jsx(Pe,{className:"my-10",onClick:r,children:"Close"},"cancel"),y.jsx(Pe,{className:"my-10",onClick:n,children:"New Card"},"cancel")],cover:y.jsx(He,{align:"center",justify:"center",style:{width:"100vw"},children:y.jsx(mt,{cardId:b??"",cardWidth:m})}),onClose:()=>l("cardId"),open:!!b,title:`Image Card Descriptor for ${b}`,children:y.jsxs(He,{gap:8,style:{maxWidth:"500px"},vertical:!0,children:[y.jsx(hr,{max:500,min:100,onChange:f=>u("cardSize",f,ct),step:25,style:{maxWidth:500,width:"100%"},value:m}),y.jsx(ht,{addEntryToUpdate:t,imageCard:g,size:"large"}),y.jsx($r,{addEntryToUpdate:t,imageCard:g,size:"large"}),y.jsx(Dr,{addEntryToUpdate:t,imageCard:g,size:"large"})]},b)})}function ht({imageCard:e,addEntryToUpdate:t,...r}){const n=e.favorite;return y.jsx(Pe,{icon:n?y.jsx(Cr,{style:{color:"red"}}):y.jsx(Sr,{}),onClick:()=>t(e.id,{...e,favorite:!n}),shape:"circle",type:"text",...r})}function $r({imageCard:e,addEntryToUpdate:t,style:r,...n}){const a=l=>{t(e.id,{...e,keywords:At(l.toLocaleLowerCase().split(/, |,| /).filter(Boolean).map(u=>u.trim()).sort())})};return y.jsx(Ht.Search,{defaultValue:e.keywords.join(" "),enterButton:"Update",onSearch:l=>a(l),style:{maxWidth:500,width:"100%",...r},...n})}function Dr({imageCard:e,addEntryToUpdate:t,style:r,...n}){const a=l=>{t(e.id,{...e,triggers:l})};return y.jsx(qt,{allowClear:!0,defaultValue:e?.triggers,mode:"multiple",onChange:a,options:[{label:"aliens",value:"aliens"},{label:"insets",value:"insets"},{label:"snakes",value:"snakes"},{label:"spiders",value:"spiders"},{label:"scarry",value:"scarry"}],placeholder:"Please select",style:{width:"100%",...r},...n})}function kr({data:e,addEntryToUpdate:t}){const{addParam:r}=Fe(),n=[{title:"CardId",dataIndex:"id",key:"id",sorter:(u,m)=>Number(u.id)-Number(m.id)},{title:"Image",dataIndex:"id",key:"image",render:u=>y.jsx(mt,{cardId:u,cardWidth:50})},{title:"Keywords",dataIndex:"keywords",key:"keywords",render:u=>u?.join(", ")},{title:"Triggers",dataIndex:"triggers",key:"triggers",render:u=>u?.join(", ")},{title:"Actions",key:"actions",render:(u,m)=>y.jsxs(He,{children:[y.jsx(ht,{addEntryToUpdate:t,imageCard:m}),y.jsx(Pe,{icon:y.jsx(Ot,{}),onClick:()=>r("cardId",m.id),children:"Edit"})]})}],a=Object.values(e),l=Wt({total:a.length,showQuickJumper:!0});return y.jsx(Xt,{columns:n,dataSource:a,pagination:l,rowKey:"id"})}function wr(e){const t=gt(),r=Lt("images-credo"),{addParam:n,removeParam:a}=Fe();return y.jsxs(dt,{error:r.error??t.error,hasResponseData:t.hasResponseData||r.hasResponseData,isLoading:t.isLoading||r.isLoading,children:[y.jsx(kr,{...e}),y.jsx(Er,{...e,onClose:()=>a("cardId"),onNewCard:()=>n("cardId",t.onRandomCard())})]})}function Mr({data:e,save:t,isDirty:r,isSaving:n,entriesToUpdate:a}){const{addParam:l}=Fe(),{onRandomCard:u}=gt();return y.jsxs(Ut,{children:[y.jsxs(He,{gap:12,vertical:!0,children:[y.jsx(_t,{dirt:JSON.stringify(a),isDirty:r,isSaving:n,onSave:t}),y.jsx(Kt,{block:!0,data:()=>Pr(e),disabled:r,fileName:"image-cards.json"})]}),y.jsx(nt,{}),y.jsx(Pe,{block:!0,onClick:()=>l("cardId",u()),children:"Random Card"}),y.jsx(nt,{})]})}function Pr(e){console.log("Preparing file for download...");const t=ft.cloneDeep(e);return zt(t)}function un(){const e=Gt({tdrResourceName:"image-cards",firestoreDataCollectionName:"imageCards",serialize:!0});return y.jsx(Ft,{subtitle:"Descriptors",title:"Image Cards",children:y.jsxs(ot,{hasSider:!0,children:[y.jsx(Yt,{children:y.jsx(Mr,{...e})}),y.jsx(ot.Content,{className:"content",children:y.jsx(dt,{error:e.error,hasResponseData:!ft.isEmpty(e.data),isLoading:e.isLoading,children:y.jsx(wr,{...e})})})]})})}export{un as ImageCardsDescriptor,un as default};
