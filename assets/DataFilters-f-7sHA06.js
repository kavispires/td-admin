import{r as m,j as c}from"./index-IdPNWoIA.js";import{u as f}from"./useQueryParams-DGhPKHGQ.js";import{l as p}from"./useBaseUrl-DjlPP39F.js";import{a as b}from"./FilterEntries-CyKTUyXf.js";import{F as g}from"./index-ZnkpdGSt.js";function d(t,o=[]){const l=Object.keys(Object.values(t).reduce((e,r)=>(Object.keys(r).forEach(s=>{!e[s]&&!o.includes(s)&&(e[s]=!0)}),e),{})),a=[],n=[];return l.forEach(e=>{const r=Object.values(t).map(i=>i[e]),s=Array.from(new Set(r)),u=s.length/r.length;u>=.05&&a.push(e),u<=.9&&n.push({label:e,options:[{label:"All",value:""},...s.sort().map(i=>({label:String(i),value:i}))]})}),{filters:n,sortableKeys:a}}function F({data:t,ignoreKeys:o=[]}){const{queryParams:l,addParam:a}=f(),n=m.useMemo(()=>d(t,o),[t,o]);return c.jsxs(g,{style:{overflowY:"auto"},vertical:!0,children:[n.filters.map(e=>c.jsx(b,{label:p.capitalize(e.label),onChange:r=>a(e.label.toLowerCase(),r),options:e.options,value:l.get(e.label.toLowerCase())??""},e.label)),c.jsx(b,{label:"Sort by",onChange:e=>a("sort",e),options:n.sortableKeys.map(e=>({label:p.capitalize(e),value:e})),value:l.get("sort")??""}),c.jsx(b,{label:"Order",onChange:e=>a("order",e),options:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],value:l.get("order")??"asc"})]})}function O(t){const{queryParams:o}=f(),l=m.useMemo(()=>d(t),[t]),a=m.useMemo(()=>Array.from(o.entries()).filter(([r])=>l.filters.some(s=>s.label.toLowerCase()===r)).reduce((r,[s,u])=>(r[s]=u,r),{}),[o,l]),n=o.get("sort")??"id",e=o.get("order")==="desc"?"desc":"asc";return m.useMemo(()=>{const s=Object.values(t).filter(u=>Object.entries(a).every(([i,v])=>String(u[i])===v));return p.orderBy(s,n,e)},[t,a,n,e])}export{F as D,O as u};
