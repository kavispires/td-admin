import{r as o,a1 as V,a2 as ct,a3 as _t,a4 as ut,a5 as Y,a6 as _e,a7 as pe,a8 as ir,a9 as Oe,x as sr,z as cr,aa as Je,g as ur,m as dr,e as fr,d as de,ab as wt,R as je,f as vr,ac as gr,c as Qe,a as At,j as E,B as Ze,D as jt,P as mr,L as Ot}from"./index-CiF5--2a.js";import{D as zt}from"./DataLoadingWrapper-DcZ8aPWb.js";import{u as at}from"./useQueryParams-BPSENYYW.js";import{u as hr}from"./useTDResource-BEVaMQKZ.js";import{F as br}from"./FullScreenModal-Bm8rqmb5.js";import{r as Cr,a as pr}from"./index-B70_2-pz.js";import{I as Wt}from"./ImageCard-C11Pbfxt.js";import{F as rt}from"./index-C2UcdlrS.js";import{I as yr}from"./index-Df8Fa_h3.js";import{S as Sr}from"./index-DK7iRz0b.js";import{u as xr}from"./useTablePagination-CpF-MMCU.js";import{F as Er}from"./Table-mDpHyuoe.js";import{R as kr}from"./EditOutlined-DiHy6bKQ.js";import{u as qt}from"./useImageCardsDecks-BhtZzDkT.js";import{D as $r}from"./DownloadButton-BlsojvSw.js";import{S as Rr}from"./SaveButton-s1jXsG7T.js";import{S as Mr}from"./SiderContent-CroB5yCP.js";import{l as Ut}from"./lodash-D0O7dYQ-.js";import{P as Dr}from"./useBaseUrl-CgXHlTLh.js";import{u as wr}from"./useResourceFirebaseData-CQQ-E8Rm.js";import"./index-C31xQDuY.js";import"./index-CcA0jY7g.js";import"./PlusOutlined-ByZyTB3m.js";import"./CloseOutlined-0nzJ8wU3.js";import"./constants-B4FgzbO3.js";import"./Item-n7HVLcpj.js";import"./gapSize-U1swVQyS.js";import"./Input-C-KfAM2p.js";import"./index-BjA8dbFX.js";import"./index-DoNNsqTe.js";import"./index-0mQ0wxZD.js";import"./index-CpJD0T27.js";import"./scrollTo-BaPpjTa9.js";import"./Pagination-bheZeHQM.js";import"./extendsObject-keMuGWqj.js";import"./moment-C5S46NFB.js";import"./SaveOutlined-0vKyCLNP.js";import"./useGetFirebaseDoc-DwdkTEca.js";import"./useUpdateFirebaseDoc-ThYrHW5R.js";import"./useMutation-B2Ymi21Q.js";function qe(e){var t=o.useRef();t.current=e;var a=o.useCallback(function(){for(var r,n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(l))},[]);return a}function jr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Pt=jr()?o.useLayoutEffect:o.useEffect,Vt=function(t,a){var r=o.useRef(!0);Pt(function(){return t(r.current)},a),Pt(function(){return r.current=!1,function(){r.current=!0}},[])},Ft=function(t,a){Vt(function(r){if(!r)return t()},a)};function Ht(e){var t=o.useRef(!1),a=o.useState(e),r=V(a,2),n=r[0],l=r[1];o.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function i(u,C){C&&t.current||l(u)}return[n,i]}function it(e){return e!==void 0}function Or(e,t){var a=t||{},r=a.defaultValue,n=a.value,l=a.onChange,i=a.postState,u=Ht(function(){return it(n)?n:it(r)?typeof r=="function"?r():r:typeof e=="function"?e():e}),C=V(u,2),f=C[0],v=C[1],h=n!==void 0?n:f,S=i?i(h):h,b=qe(l),m=Ht([h]),d=V(m,2),s=d[0],g=d[1];Ft(function(){var p=s[0];f!==p&&b(f,p)},[s]),Ft(function(){it(n)||v(n)},[n]);var c=qe(function(p,$){v(p,$),g([h],$)});return[S,c]}var dt={},Pr=function(t){};function Fr(e,t){}function Hr(e,t){}function Br(){dt={}}function Kt(e,t,a){!t&&!dt[a]&&(e(!1,a),dt[a]=!0)}function Ue(e,t){Kt(Fr,e,t)}function Nr(e,t){Kt(Hr,e,t)}Ue.preMessage=Pr;Ue.resetWarned=Br;Ue.noteOnce=Nr;function Tr(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function n(l,i){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=r.has(l);if(Ue(!C,"Warning: There may be circular references"),C)return!1;if(l===i)return!0;if(a&&u>1)return!1;r.add(l);var f=u+1;if(Array.isArray(l)){if(!Array.isArray(i)||l.length!==i.length)return!1;for(var v=0;v<l.length;v++)if(!n(l[v],i[v],f))return!1;return!0}if(l&&i&&ct(l)==="object"&&ct(i)==="object"){var h=Object.keys(l);return h.length!==Object.keys(i).length?!1:h.every(function(S){return n(l[S],i[S],f)})}return!1}return n(e,t)}function ft(e,t,a){return(e-t)/(a-t)}function mt(e,t,a,r){var n=ft(t,a,r),l={};switch(e){case"rtl":l.right="".concat(n*100,"%"),l.transform="translateX(50%)";break;case"btt":l.bottom="".concat(n*100,"%"),l.transform="translateY(50%)";break;case"ttb":l.top="".concat(n*100,"%"),l.transform="translateY(-50%)";break;default:l.left="".concat(n*100,"%"),l.transform="translateX(-50%)";break}return l}function Le(e,t){return Array.isArray(e)?e[t]:e}var U={BACKSPACE:8,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Ae=o.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),Ir=o.createContext({}),Lr=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],Bt=o.forwardRef(function(e,t){var a=e.prefixCls,r=e.value,n=e.valueIndex,l=e.onStartMove,i=e.onDelete,u=e.style,C=e.render,f=e.dragging,v=e.draggingDelete,h=e.onOffsetChange,S=e.onChangeComplete,b=e.onFocus,m=e.onMouseEnter,d=_t(e,Lr),s=o.useContext(Ae),g=s.min,c=s.max,p=s.direction,$=s.disabled,D=s.keyboard,H=s.range,I=s.tabIndex,z=s.ariaLabelForHandle,w=s.ariaLabelledByForHandle,R=s.ariaRequired,x=s.ariaValueTextFormatterForHandle,k=s.styles,W=s.classNames,K="".concat(a,"-handle"),L=function(P){$||l(P,n)},Q=function(P){b==null||b(P,n)},N=function(P){m(P,n)},ye=function(P){if(!$&&D){var M=null;switch(P.which||P.keyCode){case U.LEFT:M=p==="ltr"||p==="btt"?-1:1;break;case U.RIGHT:M=p==="ltr"||p==="btt"?1:-1;break;case U.UP:M=p!=="ttb"?1:-1;break;case U.DOWN:M=p!=="ttb"?-1:1;break;case U.HOME:M="min";break;case U.END:M="max";break;case U.PAGE_UP:M=2;break;case U.PAGE_DOWN:M=-2;break;case U.BACKSPACE:case U.DELETE:i(n);break}M!==null&&(P.preventDefault(),h(M,n))}},ae=function(P){switch(P.which||P.keyCode){case U.LEFT:case U.RIGHT:case U.UP:case U.DOWN:case U.HOME:case U.END:case U.PAGE_UP:case U.PAGE_DOWN:S==null||S();break}},ge=mt(p,r,g,c),fe={};if(n!==null){var ne;fe={tabIndex:$?null:Le(I,n),role:"slider","aria-valuemin":g,"aria-valuemax":c,"aria-valuenow":r,"aria-disabled":$,"aria-label":Le(z,n),"aria-labelledby":Le(w,n),"aria-required":Le(R,n),"aria-valuetext":(ne=Le(x,n))===null||ne===void 0?void 0:ne(r),"aria-orientation":p==="ltr"||p==="rtl"?"horizontal":"vertical",onMouseDown:L,onTouchStart:L,onFocus:Q,onMouseEnter:N,onKeyDown:ye,onKeyUp:ae}}var Se=o.createElement("div",ut({ref:t,className:_e(K,pe(pe(pe({},"".concat(K,"-").concat(n+1),n!==null&&H),"".concat(K,"-dragging"),f),"".concat(K,"-dragging-delete"),v),W.handle),style:Y(Y(Y({},ge),u),k.handle)},fe,d));return C&&(Se=C(Se,{index:n,prefixCls:a,value:r,dragging:f,draggingDelete:v})),Se}),_r=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],Ar=o.forwardRef(function(e,t){var a=e.prefixCls,r=e.style,n=e.onStartMove,l=e.onOffsetChange,i=e.values,u=e.handleRender,C=e.activeHandleRender,f=e.draggingIndex,v=e.draggingDelete,h=e.onFocus,S=_t(e,_r),b=o.useRef({}),m=o.useState(!1),d=V(m,2),s=d[0],g=d[1],c=o.useState(-1),p=V(c,2),$=p[0],D=p[1],H=function(x){D(x),g(!0)},I=function(x,k){H(k),h==null||h(x)},z=function(x,k){H(k)};o.useImperativeHandle(t,function(){return{focus:function(x){var k;(k=b.current[x])===null||k===void 0||k.focus()},hideHelp:function(){ir.flushSync(function(){g(!1)})}}});var w=Y({prefixCls:a,onStartMove:n,onOffsetChange:l,render:u,onFocus:I,onMouseEnter:z},S);return o.createElement(o.Fragment,null,i.map(function(R,x){var k=f===x;return o.createElement(Bt,ut({ref:function(K){K?b.current[x]=K:delete b.current[x]},dragging:k,draggingDelete:k&&v,style:Le(r,x),key:x,value:R,valueIndex:x},w))}),C&&s&&o.createElement(Bt,ut({key:"a11y"},w,{value:i[$],valueIndex:null,dragging:f!==-1,draggingDelete:v,render:C,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),zr=function(t){var a=t.prefixCls,r=t.style,n=t.children,l=t.value,i=t.onClick,u=o.useContext(Ae),C=u.min,f=u.max,v=u.direction,h=u.includedStart,S=u.includedEnd,b=u.included,m="".concat(a,"-text"),d=mt(v,l,C,f);return o.createElement("span",{className:_e(m,pe({},"".concat(m,"-active"),b&&h<=l&&l<=S)),style:Y(Y({},d),r),onMouseDown:function(g){g.stopPropagation()},onClick:function(){i(l)}},n)},Wr=function(t){var a=t.prefixCls,r=t.marks,n=t.onClick,l="".concat(a,"-mark");return r.length?o.createElement("div",{className:l},r.map(function(i){var u=i.value,C=i.style,f=i.label;return o.createElement(zr,{key:u,prefixCls:l,style:C,value:u,onClick:n},f)})):null},qr=function(t){var a=t.prefixCls,r=t.value,n=t.style,l=t.activeStyle,i=o.useContext(Ae),u=i.min,C=i.max,f=i.direction,v=i.included,h=i.includedStart,S=i.includedEnd,b="".concat(a,"-dot"),m=v&&h<=r&&r<=S,d=Y(Y({},mt(f,r,u,C)),typeof n=="function"?n(r):n);return m&&(d=Y(Y({},d),typeof l=="function"?l(r):l)),o.createElement("span",{className:_e(b,pe({},"".concat(b,"-active"),m)),style:d})},Ur=function(t){var a=t.prefixCls,r=t.marks,n=t.dots,l=t.style,i=t.activeStyle,u=o.useContext(Ae),C=u.min,f=u.max,v=u.step,h=o.useMemo(function(){var S=new Set;if(r.forEach(function(m){S.add(m.value)}),n&&v!==null)for(var b=C;b<=f;)S.add(b),b+=v;return Array.from(S)},[C,f,v,n,r]);return o.createElement("div",{className:"".concat(a,"-step")},h.map(function(S){return o.createElement(qr,{prefixCls:a,key:S,value:S,style:l,activeStyle:i})}))},Nt=function(t){var a=t.prefixCls,r=t.style,n=t.start,l=t.end,i=t.index,u=t.onStartMove,C=t.replaceCls,f=o.useContext(Ae),v=f.direction,h=f.min,S=f.max,b=f.disabled,m=f.range,d=f.classNames,s="".concat(a,"-track"),g=ft(n,h,S),c=ft(l,h,S),p=function(I){!b&&u&&u(I,-1)},$={};switch(v){case"rtl":$.right="".concat(g*100,"%"),$.width="".concat(c*100-g*100,"%");break;case"btt":$.bottom="".concat(g*100,"%"),$.height="".concat(c*100-g*100,"%");break;case"ttb":$.top="".concat(g*100,"%"),$.height="".concat(c*100-g*100,"%");break;default:$.left="".concat(g*100,"%"),$.width="".concat(c*100-g*100,"%")}var D=C||_e(s,pe(pe({},"".concat(s,"-").concat(i+1),i!==null&&m),"".concat(a,"-track-draggable"),u),d.track);return o.createElement("div",{className:D,style:Y(Y({},$),r),onMouseDown:p,onTouchStart:p})},Vr=function(t){var a=t.prefixCls,r=t.style,n=t.values,l=t.startPoint,i=t.onStartMove,u=o.useContext(Ae),C=u.included,f=u.range,v=u.min,h=u.styles,S=u.classNames,b=o.useMemo(function(){if(!f){if(n.length===0)return[];var d=l??v,s=n[0];return[{start:Math.min(d,s),end:Math.max(d,s)}]}for(var g=[],c=0;c<n.length-1;c+=1)g.push({start:n[c],end:n[c+1]});return g},[n,f,l,v]);if(!C)return null;var m=b!=null&&b.length&&(S.tracks||h.tracks)?o.createElement(Nt,{index:null,prefixCls:a,start:b[0].start,end:b[b.length-1].end,replaceCls:_e(S.tracks,"".concat(a,"-tracks")),style:h.tracks}):null;return o.createElement(o.Fragment,null,m,b.map(function(d,s){var g=d.start,c=d.end;return o.createElement(Nt,{index:s,prefixCls:a,style:Y(Y({},Le(r,s)),h.track),start:g,end:c,key:s,onStartMove:i})}))},Kr=130;function Tt(e){var t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function Xr(e,t,a,r,n,l,i,u,C,f,v){var h=o.useState(null),S=V(h,2),b=S[0],m=S[1],d=o.useState(-1),s=V(d,2),g=s[0],c=s[1],p=o.useState(!1),$=V(p,2),D=$[0],H=$[1],I=o.useState(a),z=V(I,2),w=z[0],R=z[1],x=o.useState(a),k=V(x,2),W=k[0],K=k[1],L=o.useRef(null),Q=o.useRef(null),N=o.useRef(null),ye=o.useContext(Ir),ae=ye.onDragStart,ge=ye.onDragChange;Vt(function(){g===-1&&R(a)},[a,g]),o.useEffect(function(){return function(){document.removeEventListener("mousemove",L.current),document.removeEventListener("mouseup",Q.current),N.current&&(N.current.removeEventListener("touchmove",L.current),N.current.removeEventListener("touchend",Q.current))}},[]);var fe=function(M,_,A){_!==void 0&&m(_),R(M);var Z=M;A&&(Z=M.filter(function(T,X){return X!==g})),i(Z),ge&&ge({rawValues:M,deleteIndex:A?g:-1,draggingIndex:g,draggingValue:_})},ne=qe(function(P,M,_){if(P===-1){var A=W[0],Z=W[W.length-1],T=r-A,X=n-Z,oe=M*(n-r);oe=Math.max(oe,T),oe=Math.min(oe,X);var ce=l(A+oe);oe=ce-A;var me=W.map(function(ve){return ve+oe});fe(me)}else{var he=(n-r)*M,be=Oe(w);be[P]=W[P];var xe=C(be,he,P,"dist");fe(xe.values,xe.value,_)}}),Se=function(M,_,A){M.stopPropagation();var Z=A||a,T=Z[_];c(_),m(T),K(Z),R(Z),H(!1);var X=Tt(M),oe=X.pageX,ce=X.pageY,me=!1;ae&&ae({rawValues:Z,draggingIndex:_,draggingValue:T});var he=function(ve){ve.preventDefault();var le=Tt(ve),Pe=le.pageX,Fe=le.pageY,ke=Pe-oe,ue=Fe-ce,F=e.current.getBoundingClientRect(),ee=F.width,Ee=F.height,Ce,ie;switch(t){case"btt":Ce=-ue/Ee,ie=ke;break;case"ttb":Ce=ue/Ee,ie=ke;break;case"rtl":Ce=-ke/ee,ie=ue;break;default:Ce=ke/ee,ie=ue}me=f?Math.abs(ie)>Kr&&v<w.length:!1,H(me),ne(_,Ce,me)},be=function xe(ve){ve.preventDefault(),document.removeEventListener("mouseup",xe),document.removeEventListener("mousemove",he),N.current&&(N.current.removeEventListener("touchmove",L.current),N.current.removeEventListener("touchend",Q.current)),L.current=null,Q.current=null,N.current=null,u(me),c(-1),H(!1)};document.addEventListener("mouseup",be),document.addEventListener("mousemove",he),M.currentTarget.addEventListener("touchend",be),M.currentTarget.addEventListener("touchmove",he),L.current=he,Q.current=be,N.current=M.currentTarget},J=o.useMemo(function(){var P=Oe(a).sort(function(T,X){return T-X}),M=Oe(w).sort(function(T,X){return T-X}),_={};M.forEach(function(T){_[T]=(_[T]||0)+1}),P.forEach(function(T){_[T]=(_[T]||0)-1});var A=f?1:0,Z=Object.values(_).reduce(function(T,X){return T+Math.abs(X)},0);return Z<=A?w:a},[a,w,f]);return[g,b,D,J,Se]}function Gr(e,t,a,r,n,l){var i=o.useCallback(function(b){return Math.max(e,Math.min(t,b))},[e,t]),u=o.useCallback(function(b){if(a!==null){var m=e+Math.round((i(b)-e)/a)*a,d=function(p){return(String(p).split(".")[1]||"").length},s=Math.max(d(a),d(t),d(e)),g=Number(m.toFixed(s));return e<=g&&g<=t?g:null}return null},[a,e,t,i]),C=o.useCallback(function(b){var m=i(b),d=r.map(function(c){return c.value});a!==null&&d.push(u(b)),d.push(e,t);var s=d[0],g=t-e;return d.forEach(function(c){var p=Math.abs(m-c);p<=g&&(s=c,g=p)}),s},[e,t,r,a,i,u]),f=function b(m,d,s){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof d=="number"){var c,p=m[s],$=p+d,D=[];r.forEach(function(R){D.push(R.value)}),D.push(e,t),D.push(u(p));var H=d>0?1:-1;g==="unit"?D.push(u(p+H*a)):D.push(u($)),D=D.filter(function(R){return R!==null}).filter(function(R){return d<0?R<=p:R>=p}),g==="unit"&&(D=D.filter(function(R){return R!==p}));var I=g==="unit"?p:$;c=D[0];var z=Math.abs(c-I);if(D.forEach(function(R){var x=Math.abs(R-I);x<z&&(c=R,z=x)}),c===void 0)return d<0?e:t;if(g==="dist")return c;if(Math.abs(d)>1){var w=Oe(m);return w[s]=c,b(w,d-H,s,g)}return c}else{if(d==="min")return e;if(d==="max")return t}},v=function(m,d,s){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",c=m[s],p=f(m,d,s,g);return{value:p,changed:p!==c}},h=function(m){return l===null&&m===0||typeof l=="number"&&m<l},S=function(m,d,s){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",c=m.map(C),p=c[s],$=f(c,d,s,g);if(c[s]=$,n===!1){var D=l||0;s>0&&c[s-1]!==p&&(c[s]=Math.max(c[s],c[s-1]+D)),s<c.length-1&&c[s+1]!==p&&(c[s]=Math.min(c[s],c[s+1]-D))}else if(typeof l=="number"||l===null){for(var H=s+1;H<c.length;H+=1)for(var I=!0;h(c[H]-c[H-1])&&I;){var z=v(c,1,H);c[H]=z.value,I=z.changed}for(var w=s;w>0;w-=1)for(var R=!0;h(c[w]-c[w-1])&&R;){var x=v(c,-1,w-1);c[w-1]=x.value,R=x.changed}for(var k=c.length-1;k>0;k-=1)for(var W=!0;h(c[k]-c[k-1])&&W;){var K=v(c,-1,k-1);c[k-1]=K.value,W=K.changed}for(var L=0;L<c.length-1;L+=1)for(var Q=!0;h(c[L+1]-c[L])&&Q;){var N=v(c,1,L+1);c[L+1]=N.value,Q=N.changed}}return{value:c[s],values:c}};return[C,S]}function Yr(e){return o.useMemo(function(){if(e===!0||!e)return[!!e,!1,!1,0];var t=e.editable,a=e.draggableTrack,r=e.minCount,n=e.maxCount;return[!0,t,!t&&a,r||0,n]},[e])}var Qr=o.forwardRef(function(e,t){var a=e.prefixCls,r=a===void 0?"rc-slider":a,n=e.className,l=e.style,i=e.classNames,u=e.styles,C=e.id,f=e.disabled,v=f===void 0?!1:f,h=e.keyboard,S=h===void 0?!0:h,b=e.autoFocus,m=e.onFocus,d=e.onBlur,s=e.min,g=s===void 0?0:s,c=e.max,p=c===void 0?100:c,$=e.step,D=$===void 0?1:$,H=e.value,I=e.defaultValue,z=e.range,w=e.count,R=e.onChange,x=e.onBeforeChange,k=e.onAfterChange,W=e.onChangeComplete,K=e.allowCross,L=K===void 0?!0:K,Q=e.pushable,N=Q===void 0?!1:Q,ye=e.reverse,ae=e.vertical,ge=e.included,fe=ge===void 0?!0:ge,ne=e.startPoint,Se=e.trackStyle,J=e.handleStyle,P=e.railStyle,M=e.dotStyle,_=e.activeDotStyle,A=e.marks,Z=e.dots,T=e.handleRender,X=e.activeHandleRender,oe=e.track,ce=e.tabIndex,me=ce===void 0?0:ce,he=e.ariaLabelForHandle,be=e.ariaLabelledByForHandle,xe=e.ariaRequired,ve=e.ariaValueTextFormatterForHandle,le=o.useRef(null),Pe=o.useRef(null),Fe=o.useMemo(function(){return ae?ye?"ttb":"btt":ye?"rtl":"ltr"},[ye,ae]),ke=Yr(z),ue=V(ke,5),F=ue[0],ee=ue[1],Ee=ue[2],Ce=ue[3],ie=ue[4],se=o.useMemo(function(){return isFinite(g)?g:0},[g]),$e=o.useMemo(function(){return isFinite(p)?p:100},[p]),Re=o.useMemo(function(){return D!==null&&D<=0?1:D},[D]),G=o.useMemo(function(){return typeof N=="boolean"?N?Re:!1:N>=0?N:!1},[N,Re]),te=o.useMemo(function(){return Object.keys(A||{}).map(function(j){var y=A[j],O={value:Number(j)};return y&&ct(y)==="object"&&!o.isValidElement(y)&&("label"in y||"style"in y)?(O.style=y.style,O.label=y.label):O.label=y,O}).filter(function(j){var y=j.label;return y||typeof y=="number"}).sort(function(j,y){return j.value-y.value})},[A]),nt=Gr(se,$e,Re,te,L,G),Ve=V(nt,2),He=Ve[0],Ke=Ve[1],Xe=Or(I,{value:H}),ht=V(Xe,2),Be=ht[0],Yt=ht[1],re=o.useMemo(function(){var j=Be==null?[]:Array.isArray(Be)?Be:[Be],y=V(j,1),O=y[0],B=O===void 0?se:O,q=Be===null?[]:[B];if(F){if(q=Oe(j),w||Be===void 0){var Ne=w>=0?w+1:2;for(q=q.slice(0,Ne);q.length<Ne;){var Me;q.push((Me=q[q.length-1])!==null&&Me!==void 0?Me:se)}}q.sort(function(De,we){return De-we})}return q.forEach(function(De,we){q[we]=He(De)}),q},[Be,F,se,w,He]),ze=function(y){return F?y:y[0]},et=qe(function(j){var y=Oe(j).sort(function(O,B){return O-B});R&&!Tr(y,re,!0)&&R(ze(y)),Yt(y)}),bt=qe(function(j){j&&le.current.hideHelp();var y=ze(re);k==null||k(y),Ue(!k,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),W==null||W(y)}),Qt=function(y){if(!(v||!ee||re.length<=Ce)){var O=Oe(re);O.splice(y,1),x==null||x(ze(O)),et(O);var B=Math.max(0,y-1);le.current.hideHelp(),le.current.focus(B)}},Jt=Xr(Pe,Fe,re,se,$e,He,et,bt,Ke,ee,Ce),Ge=V(Jt,5),Ct=Ge[0],Zt=Ge[1],er=Ge[2],ot=Ge[3],pt=Ge[4],yt=function(y,O){if(!v){var B=Oe(re),q=0,Ne=0,Me=$e-se;re.forEach(function(Te,tt){var Dt=Math.abs(y-Te);Dt<=Me&&(Me=Dt,q=tt),Te<y&&(Ne=tt)});var De=q;ee&&Me!==0&&(!ie||re.length<ie)?(B.splice(Ne+1,0,y),De=Ne+1):B[q]=y,F&&!re.length&&w===void 0&&B.push(y);var we=ze(B);if(x==null||x(we),et(B),O){var Ie,We;(Ie=document.activeElement)===null||Ie===void 0||(We=Ie.blur)===null||We===void 0||We.call(Ie),le.current.focus(De),pt(O,De,B)}else k==null||k(we),Ue(!k,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),W==null||W(we)}},tr=function(y){y.preventDefault();var O=Pe.current.getBoundingClientRect(),B=O.width,q=O.height,Ne=O.left,Me=O.top,De=O.bottom,we=O.right,Ie=y.clientX,We=y.clientY,Te;switch(Fe){case"btt":Te=(De-We)/q;break;case"ttb":Te=(We-Me)/q;break;case"rtl":Te=(we-Ie)/B;break;default:Te=(Ie-Ne)/B}var tt=se+Te*($e-se);yt(He(tt),y)},rr=o.useState(null),St=V(rr,2),lt=St[0],xt=St[1],ar=function(y,O){if(!v){var B=Ke(re,y,O);x==null||x(ze(re)),et(B.values),xt(B.value)}};o.useEffect(function(){if(lt!==null){var j=re.indexOf(lt);j>=0&&le.current.focus(j)}xt(null)},[lt]);var nr=o.useMemo(function(){return Ee&&Re===null?!1:Ee},[Ee,Re]),Et=qe(function(j,y){pt(j,y),x==null||x(ze(re))}),kt=Ct!==-1;o.useEffect(function(){if(!kt){var j=re.lastIndexOf(Zt);le.current.focus(j)}},[kt]);var Ye=o.useMemo(function(){return Oe(ot).sort(function(j,y){return j-y})},[ot]),or=o.useMemo(function(){return F?[Ye[0],Ye[Ye.length-1]]:[se,Ye[0]]},[Ye,F,se]),$t=V(or,2),Rt=$t[0],Mt=$t[1];o.useImperativeHandle(t,function(){return{focus:function(){le.current.focus(0)},blur:function(){var y,O=document,B=O.activeElement;(y=Pe.current)!==null&&y!==void 0&&y.contains(B)&&(B==null||B.blur())}}}),o.useEffect(function(){b&&le.current.focus(0)},[]);var lr=o.useMemo(function(){return{min:se,max:$e,direction:Fe,disabled:v,keyboard:S,step:Re,included:fe,includedStart:Rt,includedEnd:Mt,range:F,tabIndex:me,ariaLabelForHandle:he,ariaLabelledByForHandle:be,ariaRequired:xe,ariaValueTextFormatterForHandle:ve,styles:u||{},classNames:i||{}}},[se,$e,Fe,v,S,Re,fe,Rt,Mt,F,me,he,be,xe,ve,u,i]);return o.createElement(Ae.Provider,{value:lr},o.createElement("div",{ref:Pe,className:_e(r,n,pe(pe(pe(pe({},"".concat(r,"-disabled"),v),"".concat(r,"-vertical"),ae),"".concat(r,"-horizontal"),!ae),"".concat(r,"-with-marks"),te.length)),style:l,onMouseDown:tr,id:C},o.createElement("div",{className:_e("".concat(r,"-rail"),i==null?void 0:i.rail),style:Y(Y({},P),u==null?void 0:u.rail)}),oe!==!1&&o.createElement(Vr,{prefixCls:r,style:Se,values:re,startPoint:ne,onStartMove:nr?Et:void 0}),o.createElement(Ur,{prefixCls:r,marks:te,dots:Z,style:M,activeStyle:_}),o.createElement(Ar,{ref:le,prefixCls:r,style:J,values:ot,draggingIndex:Ct,draggingDelete:er,onStartMove:Et,onOffsetChange:ar,onFocus:m,onBlur:d,handleRender:T,activeHandleRender:X,onChangeComplete:bt,onDelete:ee?Qt:void 0}),o.createElement(Wr,{prefixCls:r,marks:te,onClick:yt})))});const Jr=o.createContext({}),It=o.forwardRef((e,t)=>{const{open:a,draggingDelete:r}=e,n=o.useRef(null),l=a&&!r,i=o.useRef(null);function u(){Je.cancel(i.current),i.current=null}function C(){i.current=Je(()=>{var f;(f=n.current)===null||f===void 0||f.forceAlign(),i.current=null})}return o.useEffect(()=>(l?C():u(),u),[l,e.title]),o.createElement(sr,Object.assign({ref:cr(n,t)},e,{open:l}))}),Zr=e=>{const{componentCls:t,antCls:a,controlSize:r,dotSize:n,marginFull:l,marginPart:i,colorFillContentHover:u,handleColorDisabled:C,calc:f,handleSize:v,handleSizeHover:h,handleActiveColor:S,handleActiveOutlineColor:b,handleLineWidth:m,handleLineWidthHover:d,motionDurationMid:s}=e;return{[t]:Object.assign(Object.assign({},fr(e)),{position:"relative",height:r,margin:`${de(i)} ${de(l)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${de(l)} ${de(i)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${s}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${s}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:u},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${de(m)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:v,height:v,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:f(m).mul(-1).equal(),insetBlockStart:f(m).mul(-1).equal(),width:f(v).add(f(m).mul(2)).equal(),height:f(v).add(f(m).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:v,height:v,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${de(m)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${s},
            inset-block-start ${s},
            width ${s},
            height ${s},
            box-shadow ${s},
            outline ${s}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:f(h).sub(v).div(2).add(d).mul(-1).equal(),insetBlockStart:f(h).sub(v).div(2).add(d).mul(-1).equal(),width:f(h).add(f(d).mul(2)).equal(),height:f(h).add(f(d).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${de(d)} ${S}`,outline:`6px solid ${b}`,width:h,height:h,insetInlineStart:e.calc(v).sub(h).div(2).equal(),insetBlockStart:e.calc(v).sub(h).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:n,height:n,backgroundColor:e.colorBgElevated,border:`${de(m)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:v,height:v,boxShadow:`0 0 0 ${de(m)} ${C}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${a}-tooltip-inner`]:{minWidth:"unset"}})}},Xt=(e,t)=>{const{componentCls:a,railSize:r,handleSize:n,dotSize:l,marginFull:i,calc:u}=e,C=t?"paddingBlock":"paddingInline",f=t?"width":"height",v=t?"height":"width",h=t?"insetBlockStart":"insetInlineStart",S=t?"top":"insetInlineStart",b=u(r).mul(3).sub(n).div(2).equal(),m=u(n).sub(r).div(2).equal(),d=t?{borderWidth:`${de(m)} 0`,transform:`translateY(${de(u(m).mul(-1).equal())})`}:{borderWidth:`0 ${de(m)}`,transform:`translateX(${de(e.calc(m).mul(-1).equal())})`};return{[C]:r,[v]:u(r).mul(3).equal(),[`${a}-rail`]:{[f]:"100%",[v]:r},[`${a}-track,${a}-tracks`]:{[v]:r},[`${a}-track-draggable`]:Object.assign({},d),[`${a}-handle`]:{[h]:b},[`${a}-mark`]:{insetInlineStart:0,top:0,[S]:u(r).mul(3).add(t?0:i).equal(),[f]:"100%"},[`${a}-step`]:{insetInlineStart:0,top:0,[S]:r,[f]:"100%",[v]:r},[`${a}-dot`]:{position:"absolute",[h]:u(r).sub(l).div(2).equal()}}},ea=e=>{const{componentCls:t,marginPartWithMark:a}=e;return{[`${t}-horizontal`]:Object.assign(Object.assign({},Xt(e,!0)),{[`&${t}-with-marks`]:{marginBottom:a}})}},ta=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:Object.assign(Object.assign({},Xt(e,!1)),{height:"100%"})}},ra=e=>{const a=e.controlHeightLG/4,r=e.controlHeightSM/2,n=e.lineWidth+1,l=e.lineWidth+1*1.5,i=e.colorPrimary,u=new wt(i).setA(.2).toRgbString();return{controlSize:a,railSize:4,handleSize:a,handleSizeHover:r,dotSize:8,handleLineWidth:n,handleLineWidthHover:l,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:i,handleActiveOutlineColor:u,handleColorDisabled:new wt(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},aa=ur("Slider",e=>{const t=dr(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[Zr(t),ea(t),ta(t)]},ra);function st(){const[e,t]=o.useState(!1),a=o.useRef(null),r=()=>{Je.cancel(a.current)},n=l=>{r(),l?t(l):a.current=Je(()=>{t(l)})};return o.useEffect(()=>r,[]),[e,n]}var na=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function oa(e,t){return e||e===null?e:t||t===null?t:a=>typeof a=="number"?a.toString():""}const la=je.forwardRef((e,t)=>{const{prefixCls:a,range:r,className:n,rootClassName:l,style:i,disabled:u,tooltipPrefixCls:C,tipFormatter:f,tooltipVisible:v,getTooltipPopupContainer:h,tooltipPlacement:S,tooltip:b={},onChangeComplete:m,classNames:d,styles:s}=e,g=na(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:c}=e,{getPrefixCls:p,direction:$,className:D,style:H,classNames:I,styles:z,getPopupContainer:w}=vr("slider"),R=je.useContext(gr),x=u??R,{handleRender:k,direction:W}=je.useContext(Jr),L=(W||$)==="rtl",[Q,N]=st(),[ye,ae]=st(),ge=Object.assign({},b),{open:fe,placement:ne,getPopupContainer:Se,prefixCls:J,formatter:P}=ge,M=fe??v,_=(Q||ye)&&M!==!1,A=oa(P,f),[Z,T]=st(),X=F=>{m==null||m(F),T(!1)},oe=(F,ee)=>F||(ee?L?"left":"right":"top"),ce=p("slider",a),[me,he,be]=aa(ce),xe=Qe(n,D,I.root,d==null?void 0:d.root,l,{[`${ce}-rtl`]:L,[`${ce}-lock`]:Z},he,be);L&&!g.vertical&&(g.reverse=!g.reverse),je.useEffect(()=>{const F=()=>{Je(()=>{ae(!1)},1)};return document.addEventListener("mouseup",F),()=>{document.removeEventListener("mouseup",F)}},[]);const ve=r&&!M,le=k||((F,ee)=>{const{index:Ee}=ee,Ce=F.props;function ie(G,te,nt){var Ve,He,Ke,Xe;nt&&((He=(Ve=g)[G])===null||He===void 0||He.call(Ve,te)),(Xe=(Ke=Ce)[G])===null||Xe===void 0||Xe.call(Ke,te)}const se=Object.assign(Object.assign({},Ce),{onMouseEnter:G=>{N(!0),ie("onMouseEnter",G)},onMouseLeave:G=>{N(!1),ie("onMouseLeave",G)},onMouseDown:G=>{ae(!0),T(!0),ie("onMouseDown",G)},onFocus:G=>{var te;ae(!0),(te=g.onFocus)===null||te===void 0||te.call(g,G),ie("onFocus",G,!0)},onBlur:G=>{var te;ae(!1),(te=g.onBlur)===null||te===void 0||te.call(g,G),ie("onBlur",G,!0)}}),$e=je.cloneElement(F,se),Re=(!!M||_)&&A!==null;return ve?$e:je.createElement(It,Object.assign({},ge,{prefixCls:p("tooltip",J??C),title:A?A(ee.value):"",open:Re,placement:oe(ne??S,c),key:Ee,classNames:{root:`${ce}-tooltip`},getPopupContainer:Se||h||w}),$e)}),Pe=ve?(F,ee)=>{const Ee=je.cloneElement(F,{style:Object.assign(Object.assign({},F.props.style),{visibility:"hidden"})});return je.createElement(It,Object.assign({},ge,{prefixCls:p("tooltip",J??C),title:A?A(ee.value):"",open:A!==null&&_,placement:oe(ne??S,c),key:"tooltip",classNames:{root:`${ce}-tooltip`},getPopupContainer:Se||h||w,draggingDelete:ee.draggingDelete}),Ee)}:void 0,Fe=Object.assign(Object.assign(Object.assign(Object.assign({},z.root),H),s==null?void 0:s.root),i),ke=Object.assign(Object.assign({},z.tracks),s==null?void 0:s.tracks),ue=Qe(I.tracks,d==null?void 0:d.tracks);return me(je.createElement(Qr,Object.assign({},g,{classNames:Object.assign({handle:Qe(I.handle,d==null?void 0:d.handle),rail:Qe(I.rail,d==null?void 0:d.rail),track:Qe(I.track,d==null?void 0:d.track)},ue?{tracks:ue}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},z.handle),s==null?void 0:s.handle),rail:Object.assign(Object.assign({},z.rail),s==null?void 0:s.rail),track:Object.assign(Object.assign({},z.track),s==null?void 0:s.track)},Object.keys(ke).length?{tracks:ke}:{}),step:g.step,range:r,className:xe,style:Fe,disabled:x,ref:t,prefixCls:ce,handleRender:le,activeHandleRender:Pe,onChangeComplete:X})))});var ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"},sa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},vt.apply(this,arguments)}const ca=(e,t)=>o.createElement(At,vt({},e,{ref:t,icon:ia})),ua=o.forwardRef(ca);function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},gt.apply(this,arguments)}const da=(e,t)=>o.createElement(At,gt({},e,{ref:t,icon:sa})),fa=o.forwardRef(da),Lt=200;function va({data:e,addEntryToUpdate:t,onClose:a,onNewCard:r}){const{queryParams:n,removeParam:l,addParam:i}=at(),u=Number(n.get("cardSize")??Lt),C=n.get("cardId"),f=e[C??""]??{id:C,keywords:[]};return E.jsx(br,{title:`Image Card Descriptor for ${C}`,open:!!C,onClose:()=>l("cardId"),cover:E.jsx(rt,{justify:"center",align:"center",style:{width:"100vw"},children:E.jsx(Wt,{id:C??"",width:u})}),actions:[E.jsx(Ze,{className:"my-10",onClick:a,children:"Close"},"cancel"),E.jsx(Ze,{className:"my-10",onClick:r,children:"New Card"},"cancel")],children:E.jsxs(rt,{gap:8,vertical:!0,style:{maxWidth:"500px"},children:[E.jsx(la,{value:u,min:100,max:500,step:25,style:{maxWidth:500,width:"100%"},onChange:v=>i("cardSize",v,Lt)}),E.jsx(Gt,{imageCard:f,addEntryToUpdate:t,size:"large"}),E.jsx(ga,{imageCard:f,addEntryToUpdate:t,size:"large"}),E.jsx(ma,{imageCard:f,addEntryToUpdate:t,size:"large"})]},C)})}function Gt({imageCard:e,addEntryToUpdate:t,...a}){const r=e.favorite;return E.jsx(Ze,{shape:"circle",icon:r?E.jsx(ua,{style:{color:"red"}}):E.jsx(fa,{}),type:"text",onClick:()=>t(e.id,{...e,favorite:!r}),...a})}function ga({imageCard:e,addEntryToUpdate:t,style:a,...r}){const n=l=>{t(e.id,{...e,keywords:Cr(l.toLocaleLowerCase().split(/, |,| /).filter(Boolean).map(i=>i.trim()).sort())})};return E.jsx(yr.Search,{defaultValue:e.keywords.join(" "),onSearch:l=>n(l),style:{maxWidth:500,width:"100%",...a},enterButton:"Update",...r})}function ma({imageCard:e,addEntryToUpdate:t,style:a,...r}){const n=l=>{t(e.id,{...e,triggers:l})};return E.jsx(Sr,{mode:"multiple",allowClear:!0,style:{width:"100%",...a},placeholder:"Please select",defaultValue:e==null?void 0:e.triggers,onChange:n,options:[{label:"aliens",value:"aliens"},{label:"insets",value:"insets"},{label:"snakes",value:"snakes"},{label:"spiders",value:"spiders"},{label:"scarry",value:"scarry"}],...r})}function ha({data:e,addEntryToUpdate:t}){const{addParam:a}=at(),r=[{title:"CardId",dataIndex:"id",key:"id",sorter:(i,u)=>Number(i.id)-Number(u.id)},{title:"Image",dataIndex:"id",key:"image",render:i=>E.jsx(Wt,{id:i,width:50})},{title:"Keywords",dataIndex:"keywords",key:"keywords",render:i=>i==null?void 0:i.join(", ")},{title:"Triggers",dataIndex:"triggers",key:"triggers",render:i=>i==null?void 0:i.join(", ")},{title:"Actions",key:"actions",render:(i,u)=>E.jsxs(rt,{children:[E.jsx(Gt,{imageCard:u,addEntryToUpdate:t}),E.jsx(Ze,{icon:E.jsx(kr,{}),onClick:()=>a("cardId",u.id),children:"Edit"})]})}],n=Object.values(e),l=xr({total:n.length,showQuickJumper:!0});return E.jsx(Er,{dataSource:n,columns:r,rowKey:"id",pagination:l})}function ba(e){const t=qt(),a=hr("images-credo"),{addParam:r,removeParam:n}=at();return E.jsxs(zt,{isLoading:t.isLoading||a.isLoading,hasResponseData:t.hasResponseData||a.hasResponseData,error:a.error??t.error,children:[E.jsx(ha,{...e}),E.jsx(va,{...e,onNewCard:()=>r("cardId",t.onRandomCard()),onClose:()=>n("cardId")})]})}function Ca({data:e,save:t,isDirty:a,isSaving:r,entriesToUpdate:n}){const{addParam:l}=at(),{onRandomCard:i}=qt();return E.jsxs(Mr,{children:[E.jsxs(rt,{vertical:!0,gap:12,children:[E.jsx(Rr,{isDirty:a,onSave:t,isSaving:r,dirt:JSON.stringify(n)}),E.jsx($r,{data:()=>pa(e),fileName:"image-cards.json",disabled:a,block:!0})]}),E.jsx(jt,{}),E.jsx(Ze,{onClick:()=>l("cardId",i()),block:!0,children:"Random Card"}),E.jsx(jt,{})]})}function pa(e){console.log("Preparing file for download...");const t=Ut.cloneDeep(e);return pr(t)}function ln(){const e=wr({tdrResourceName:"image-cards",firebaseDataCollectionName:"imageCards",serialize:!0});return E.jsx(mr,{title:"Image Cards",subtitle:"Descriptors",children:E.jsxs(Ot,{hasSider:!0,children:[E.jsx(Dr,{children:E.jsx(Ca,{...e})}),E.jsx(Ot.Content,{className:"content",children:E.jsx(zt,{isLoading:e.isLoading,error:e.error,hasResponseData:!Ut.isEmpty(e.data),children:E.jsx(ba,{...e})})})]})})}export{ln as ImageCardsDescriptor,ln as default};
