import{a as K,c as Z,u as F,D as X}from"./constants-D0-gnIAG.js";import{l as o}from"./useBaseUrl-Do8JSuXy.js";import{s as B}from"./index-0dszxRyZ.js";import{u as U}from"./useTDResource-CGG6wY3X.js";import{r as ee}from"./index-CYc_ZTzS.js";const g="|",q="abcdefghijklmnopqrstuvwxyz",y="bcdfghjklmnpqrstvwxyz",h="aeiou",te=/[áéíóúãẽĩõũâêîôûàèìòùäëïöü]/,s=o.memoize(e=>B(e).toLowerCase()),O=e=>s(e).length,R=e=>s(e).split("").filter(t=>h.includes(t)).length,L=e=>s(e).split("").filter(t=>y.includes(t)).length,se=e=>e.toLowerCase().split("").filter(t=>te.test(t)).length,f=e=>e.split(" ").length,fe={"ddr-7-pt":e=>q.indexOf(s(e)[0])<q.indexOf(s(e)[1]),"ddr-8-pt":e=>O(e)<=4,"ddr-9-pt":e=>O(e)===5,"ddr-10-pt":e=>O(e)===6,"ddr-11-pt":e=>O(e)===7,"ddr-12-pt":e=>O(e)>7,"ddr-13-pt":e=>f(e)>1,"ddr-14-pt":e=>{const t=s(e).split("").filter(n=>h.includes(n));return new Set(t).size>=2},"ddr-15-pt":e=>new Set(s(e).split("")).size<=4,"ddr-16-pt":e=>L(e)>R(e),"ddr-17-pt":e=>R(e)>L(e),"ddr-53-pt":e=>R(e)===L(e),"ddr-18-pt":e=>{const t=s(e)[0];return s(e).slice(1).includes(t)},"ddr-70-pt":e=>{const t=s(e).slice(-1);return s(e).slice(0,-1).includes(t)},"ddr-19-pt":e=>s(e).split("").some((t,n)=>s(e).slice(n+1).includes(t)),"ddr-20-pt":e=>s(e).split("").some((t,n)=>h.includes(t)&&s(e).slice(n+1).includes(t)),"ddr-21-pt":e=>s(e).split("").some((t,n)=>y.includes(t)&&s(e).slice(n+1).includes(t)),"ddr-22-pt":e=>s(e).split("").some((t,n)=>h.includes(t)&&h.includes(e[n+1])),"ddr-23-pt":e=>"abcdefghijklm".includes(s(e)[0]),"ddr-24-pt":e=>"nopqrstuvwxyz".includes(s(e)[0]),"ddr-25-pt":e=>h.includes(s(e)[0]),"ddr-26-pt":e=>y.includes(s(e)[0]),"ddr-27-pt":e=>s(e).split("").some((t,n)=>y.includes(t)&&e[n+1]===t),"ddr-28-pt":e=>s(e).includes("a"),"ddr-54-pt":e=>s(e).includes("b"),"ddr-32-pt":e=>s(e).includes("c")||s(e).includes("ç"),"ddr-55-pt":e=>s(e).includes("d"),"ddr-29-pt":e=>s(e).includes("e"),"ddr-56-pt":e=>s(e).includes("f"),"ddr-57-pt":e=>s(e).includes("g"),"ddr-34-pt":e=>s(e).includes("h"),"ddr-47-pt":e=>s(e).includes("i"),"ddr-52-pt":e=>s(e).includes("j"),"ddr-58-pt":e=>s(e).includes("l"),"ddr-64-pt":e=>s(e).includes("m"),"ddr-65-pt":e=>s(e).includes("n"),"ddr-48-pt":e=>s(e).includes("o"),"ddr-59-pt":e=>s(e).includes("p"),"ddr-31-pt":e=>s(e).includes("q"),"ddr-60-pt":e=>s(e).includes("r"),"ddr-66-pt":e=>s(e).includes("s"),"ddr-61-pt":e=>s(e).includes("t"),"ddr-30-pt":e=>s(e).includes("u"),"ddr-62-pt":e=>s(e).includes("v"),"ddr-49-pt":e=>s(e).includes("x"),"ddr-63-pt":e=>s(e).includes("z"),"ddr-36-pt":e=>s(e).includes("k")||s(e).includes("w")||s(e).includes("y"),"ddr-37-pt":e=>se(e)>0,"ddr-33-pt":e=>s(e).split("").some((t,n)=>!!(["m","n"].includes(t)&&y.includes(e[n+1]))),"ddr-35-pt":e=>s(e).split("").some((t,n)=>!!(t==="h"&&y.includes(e[n-1]))),"ddr-38-pt":e=>h.includes(s(e).slice(-1)),"ddr-39-pt":e=>y.includes(s(e).slice(-1)),"ddr-40-pt":e=>s(e).slice(-1)==="s","ddr-67-pt":e=>new Set(s(e).split("").filter(t=>h.includes(t))).size===1},he={"ddr-3-pt":(e,t)=>f(e)===1&&t.split(g).length===2,"ddr-4-pt":(e,t)=>f(e)===1&&t.split(g).length===3,"ddr-22-pt":(e,t)=>f(e)===1&&t.split(g).length===4,"ddr-41-pt":(e,t)=>f(e)===1&&t.split(g).some(n=>n.split("").some((d,a)=>!!(h.includes(d)&&h.includes(n[a+1])))),"ddr-42-pt":(e,t)=>t.split(g).some((n,d)=>d===0?!1:n[0]===t.split(g)[d-1].slice(-1)),"ddr-46-pt":(e,t,n)=>f(e)===1&&!n&&t.split(g).length===1,"ddr-68-pt":(e,t)=>f(e)===1&&t.split(g)[0].length===3,"ddr-69-pt":(e,t)=>f(e)===1&&t.split(g)[0].length===1},ge={"ddr-43-pt":(e,t,n)=>f(e)===1&&n===0,"ddr-44-pt":(e,t,n)=>f(e)===1&&n===1,"ddr-45-pt":(e,t,n)=>f(e)===1&&n===2},ne=e=>Object.values(e).reduce((t,n)=>Math.max(t,n.updatedAt),0),G=(e,t)=>t>e.updatedAt;function ye(e){const t=/([^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*[aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]{1,3}[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*)(?=[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]|$)/gi;return e.replace(t,"$1|").slice(0,-1).replace(/\s/g,"")}const Ee=(e,t,n,d)=>{const[a]=F(X.TEORIA_DE_CONJUNTOS,d),p=U("daily-diagram-items",e),m=U("daily-diagram-rules",e);return{entries:ee.useMemo(()=>!e||!a||!p.isSuccess||!m.isSuccess?{}:re(n,a,m.data,p.data),[e,n,a,m,p]),isLoading:p.isLoading||m.isLoading}},W=8,re=(e,t,n,d)=>{console.count("Creating Teoria de Conjuntos...");let a=t.latestDate;const p=[...t.used],m=ne(n),u=(()=>{const c=Object.values(n).reduce((l,i)=>(l[i.id]=[],l),{});return Object.values(d).forEach(l=>{G(l,m)||l.rules.forEach(i=>{c[i].push(l.itemId)})}),c})(),E={};for(let c=0;c<e;c++){const l=K(a),v=Z(l)?W+2:W;a=l,E[l]={id:l,type:"teoria-de-conjuntos",number:t.latestNumber+c+1,...ie(d,u,n,p,m,v)}}return E};function ie(e,t,n,d,a,p){const m=o.shuffle(Object.keys(e).filter(r=>!d.includes(r)&&!G(e[r],a))),u=o.sample(m);if(!u)throw new Error("No available things to choose from");d.push(u);const E={id:u,name:e[u].name},c=e[u].rules.reduce((r,w)=>{const D=n[w].type;return r[D]||(r[D]=[]),r[D].push(w),r},{});Object.keys(c).forEach(r=>{c[r].length<2&&delete c[r]});const l=o.sampleSize(Object.keys(c),2);if(l.length!==2)throw new Error("No types found for this thing");const i=[o.sample(c[l[0]]),o.sample(c[l[1]])];if(!i[0]||!i[1])throw new Error("No rules found for this thing");const v=[i[0],i[1]].sort().join("-");d.push(v);const V=n[i[0]].level+n[i[1]].level-1,N=o.shuffle(o.difference(t[i[0]],t[i[1]])),x=o.shuffle(o.difference(t[i[1]],t[i[0]])),M=o.shuffle(o.intersection(t[i[0]],t[i[1]])),S=N.pop();if(!S)throw new Error("No only in rule 1 things to choose from");const j={id:i[0],text:n[i[0]].title,level:n[i[0]].level,thing:{id:S,name:e[S].name}},A=x.pop();if(!A)throw new Error("No only in rule 2 things to choose from");const C={id:i[1],text:n[i[1]].title,level:n[i[1]].level,thing:{id:A,name:e[A].name}},b=new Set([u,S,A]),P=M.filter(r=>!b.has(r)),Y=N.filter(r=>!b.has(r)),H=x.filter(r=>!b.has(r)),k=o.sampleSize(P,p/2),_=o.sampleSize(Y,p),z=o.sampleSize(H,p),T={};k.forEach(r=>{T[r]=0}),_.forEach(r=>{T[r]=1}),z.forEach(r=>{T[r]=2});const Q=de(k,_,z,p).map(r=>({id:r,name:e[r].name,rule:T[r]})),I={contains:"Inclusão",starts:"Inicialização",ends:"Terminação",grammar:"Gramática",order:"Sequência",count:"Contagem",comparison:"Comparação",repetition:"Repetição"},$=[(I==null?void 0:I[n[j.id].type])??"Desconhecido",(I==null?void 0:I[n[C.id].type])??"Desconhecido"].join(" vs "),J=[j.id,C.id].sort().join("::");return{title:$,setId:J,level:V,rule1:j,rule2:C,intersectingThing:E,things:Q}}function de(e,t,n,d){const a=e.slice(0,3),p=t.slice(0,3),m=n.slice(0,3);let u=o.sampleSize([...a,...p,...m],d);if(u.length<d){const E=e.slice(3),c=t.slice(3),l=n.slice(3),i=o.shuffle([...E,...c,...l]);u=[...u,...i]}return u.slice(0,d)}export{g as S,he as a,ge as b,re as c,ye as s,Ee as u,fe as v};
