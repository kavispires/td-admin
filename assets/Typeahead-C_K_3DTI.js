import{r as d,j as h}from"./index-DXudZKff.js";import{l as x}from"./useBaseUrl-F4TfRTJP.js";import{u as w}from"./useDebounce-n9mupsfl.js";import{A}from"./index-B1JyxzAs.js";import{I as R}from"./index-CSQpxw9q.js";function k({data:c,isPending:f,onFinish:a,style:C,placeholder:y,parser:S,...v}){const{dict:o,options:g}=d.useMemo(()=>{if(console.log("Recomputing typeahead..."),!c||f)return{dict:{},options:[]};const e=S(c),t=x.orderBy(Object.keys(e),[s=>s.toLowerCase()]).map(s=>({value:s}));return{dict:e,options:t}},[c,f]),[i,u]=d.useState([]),[n,E]=d.useState("");w(()=>{n?O(n):a(null)},500,[n]);const O=e=>{if(!e){u([]);return}const t=e.trim().toUpperCase(),s=g.filter(r=>String((r==null?void 0:r.value)??"").toUpperCase().includes(t)),U=x.orderBy(s,[r=>{const l=String((r==null?void 0:r.value)??"").toUpperCase();if(l===t)return 0;const p=l.match(/\((.*?)\)/);if(p&&p[1]===t)return 1;const m=l.indexOf(t);return m===0?2:m>0?3:4}]);u(U)},j=()=>{if(i.length>0){const e=i[0].value;o[e]!==void 0&&a(o[e])}},T=e=>{o[e]!==void 0&&a(o[e])};return h.jsx(A,{options:i,style:{width:250,...C},allowClear:!0,placeholder:y,filterOption:(e,t)=>String((t==null?void 0:t.value)??"").toUpperCase().indexOf(e==null?void 0:e.toUpperCase())!==-1,onSearch:E,notFoundContent:n.length>0?"No entries found":"Type to search...",onSelect:T,...v,children:h.jsx(R,{onPressEnter:j})})}export{k as T};
