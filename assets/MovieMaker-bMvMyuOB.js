import{j as e,T as x,r as f,B as C,D,P as E,L as R}from"./index-u4YAhSlc.js";import{R as N}from"./ResponseState-CV5Mmw8p.js";import{D as L}from"./DataLoadingWrapper-BUCmFWbr.js";import{P as A}from"./useBaseUrl-DE7ZKGHU.js";import{C as T}from"./CopyToClipboardButton-ixHxOG1z.js";import{l as u}from"./lodash-Bjm1XJDL.js";import{I as M}from"./ImageCard-LRmQGDq9.js";import{u as q}from"./useCardWidth-pV6CA2Ci.js";import{T as v}from"./index-Dxln9b-r.js";import{R as O,a as G}from"./WomanOutlined-GXR9dARB.js";import{R as Q,a as _}from"./ColumnWidthOutlined-DOVcrwNW.js";import{F as $}from"./index-D5nCWXq2.js";import{S as k}from"./index-C9yLMmqD.js";import{I as y}from"./index-BGA14dYj.js";import{u as z}from"./useQueryParams-8Hkoerz0.js";import{u as g,a as B}from"./useTDResource-CUCNzABN.js";import"./SiderContent-BNI2VU4b.js";import"./index-B0-83e21.js";import"./useCopyToClipboardFunction-mhj4OBRg.js";import"./CopyOutlined-DuHBYeIP.js";import"./gapSize-U1swVQyS.js";import"./Input-CNJfsg7T.js";function V({role:s,language:a}){const[t]=q(8);return e.jsxs("div",{children:[e.jsx(x.Title,{level:3,children:s.title[a]}),e.jsxs("div",{className:"suspect",style:{width:`${t}px`},children:[e.jsx(M,{id:s.actor.id,width:t,className:"suspect__image"}),e.jsxs("div",{className:"suspect__name",children:[e.jsx("div",{children:e.jsx(v,{children:s.actor.id})}),e.jsxs("div",{children:["üáßüá∑ ",s.actor.name.pt]}),e.jsxs("div",{children:["üá∫üá∏ ",s.actor.name.en]}),e.jsxs("div",{className:"suspect__info",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[s.actor.gender==="male"?e.jsx(O,{}):e.jsx(G,{})," ",s.actor.age]}),e.jsx("div",{children:e.jsx("em",{children:s.actor.ethnicity})})]}),e.jsxs("div",{children:[e.jsx(Q,{}),e.jsx("br",{}),s.actor.build]}),e.jsxs("div",{children:[e.jsx(_,{}),e.jsx("br",{}),s.actor.height]})]})]})]}),e.jsx("br",{}),e.jsx("strong",{children:"Traits:"}),e.jsx("ul",{children:s.traits.map(n=>e.jsx("li",{children:n},n))})]},s.id)}function W({movieTitles:s,movieGenres:a,movieActors:t,characterTraits:n,items:i,language:c}){const[r,l]=f.useState({movieTitle:"",genre:{id:"",name:{pt:"",en:""},rating:0,rolesIds:[]},subGenre:{id:"",name:{pt:"",en:""},rating:0,rolesIds:[]},castingRoles:[],features:[],rating:0,props:[]}),m=f.useMemo(()=>U(r),[r]),p=f.useMemo(()=>H(r),[r]),h=()=>l(K(s,a,t,n,i));return e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:h,children:"Create Feature Film"}),!!r&&e.jsxs(e.Fragment,{children:[e.jsx(x.Title,{level:2,children:r.movieTitle||"?"}),e.jsxs(x.Paragraph,{children:[e.jsx("strong",{children:"Genre:"})," ",r.genre.name[c],e.jsx("br",{}),e.jsx("strong",{children:"Sub-genre:"})," ",r.subGenre.name[c],e.jsx("br",{}),e.jsx("strong",{children:"Rating:"})," ",r.rating,e.jsx("br",{}),e.jsxs($,{children:[e.jsx("strong",{children:"Features:"}),r.features.map(d=>e.jsx(v,{children:d.name[c]},d.id))]}),e.jsxs($,{children:[e.jsx("strong",{children:"Key Objects:"}),r.props.map(d=>e.jsx(v,{children:d.name[c]},d.id))]})]}),e.jsx(k,{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",alignItems:"flex-start"},children:r.castingRoles.map(d=>e.jsx(V,{role:d,language:c},d.id))}),e.jsx(D,{}),e.jsxs(x.Title,{level:2,children:["Movie Prompt ",e.jsx(T,{content:m})]}),e.jsx(y.TextArea,{value:m,autoSize:{minRows:3,maxRows:10}}),e.jsxs(x.Title,{level:2,children:["TV Series Prompt ",e.jsx(T,{content:p})]}),e.jsx(y.TextArea,{value:p,autoSize:{minRows:3,maxRows:10}})]})]})}const K=(s,a,t,n,i)=>{const c=u.sampleSize(s,2).map((o,j)=>j%2===0?o.prefix:o.suffix).join(" ");let r=0;const l=u.sample(Object.values(a.genres??{}));if(!l)throw new Error("No genre found");r+=l.rating;const m=u.sample(Object.values(a.subGenres??{}));if(!m)throw new Error("No sub-genre found");r+=m.rating;const p=[];Object.values(a.features??{}).forEach(o=>{Math.random()<o.probability&&(p.push(o),r+=o.rating)});const h=[];l.rolesIds.forEach(o=>{h.push(a.roles[o])}),m.rolesIds.forEach(o=>{h.push(a.roles[o])});const d=J(h,5),b=u.sampleSize(t,d.length),I=u.cloneDeep(u.shuffle(n)),w=d.map((o,j)=>({...o,actor:{...b[j],id:X(b[j].id)},traits:I.splice(0,o.complexity).map(P=>P.answer)}));return{movieTitle:c,genre:l,subGenre:m,castingRoles:w,features:p,rating:r,props:u.sampleSize(i,8)}},U=s=>{let a=`Escreva o resumo de um filme de ${s.genre.name.pt}/${s.subGenre.name.pt} entitulado "${s.movieTitle}"`;return s.features.length>0&&(a+=` que contenha os seguintes elementos: ${s.features.map(t=>t.name.pt).join(", ")}`),a+=`. Incorpore os personagens as suas caracter√≠sticas na trama, seja criativo e tamb√©m incorpore esses objetos na trama: ${s.props.slice(0,3).map(t=>t.name.pt).join(", ")}. Para a idade, escolha um n√∫mero aleat√≥rio dentre a faixa dada, por exemplo 20-30, diga 26 anos. N√£o use parenteses no texto. Adicione um plot twist inesperado. Aqui v√£o os personagens: 
`,s.castingRoles.forEach(t=>{a+=`
${t.title.pt}: ${t.actor.name.pt.split(" ")[0]}, ${t.actor.age} anos, ${F[t.actor.gender]}, ${S[t.actor.ethnicity]}, com as caracter√≠sticas: ${t.traits.join(", ")}.
`}),a},H=s=>{let a=`Escreva o resumo de cada um dos 8 epis√≥dios d√° s√©rie de ${s.genre.name.pt}/${s.subGenre.name.pt} entitulada "${s.movieTitle}"`;return s.features.length>0&&(a+=` que contenha os seguintes elementos: ${s.features.map(t=>t.name.pt).join(", ")}`),a+=`. Incorpore o t√≠tulo da s√©rie e todos os personagens as suas caracter√≠sticas na trama, seja criativo e tamb√©m incorpore esses objetos na trama: ${s.props.map(t=>t.name.pt).join(", ")}. Para a idade, escolha um n√∫mero aleat√≥rio dentre a faixa dada, por exemplo 20-30, diga 26 anos. N√£o use parenteses no texto. Cada epis√≥dio deve terminar com um cliffhanger e o pr√≥ximo epis√≥dio deve continuar desse cliffhanger. Aqui v√£o os personagens: 
`,s.castingRoles.forEach(t=>{a+=`
${t.title.pt}: ${t.actor.name.pt.split(" ")[0]}, ${t.actor.age} anos, ${F[t.actor.gender]}, ${S[t.actor.ethnicity]}, com as caracter√≠sticas: ${t.traits.join(", ")}.
`}),a},F={female:"mulher",male:"homem"},S={asian:"asi√°tico",black:"negro",caucasian:"branco",latino:"latino",mixed:"mesti√ßo","middle-eastern":"oriente-m√©dio","native-american":"nativo-americano",indian:"indiano"};function J(s,a){const t=[],n=new Set;for(const i of s)if(!n.has(i.id)&&(t.push(i),n.add(i.id),t.length===a))break;return t}function X(s){return s.split("-").join("-ct-")}function be(){const{queryParams:s}=z({language:"pt"}),a=s.get("language")??"pt",t=g(`movies-${a}`),n=B("movie-genres"),i=g("suspects"),c=g(`testimony-questions-${a}`),r=g("items"),l=t.hasResponseData&&n.hasResponseData&&i.hasResponseData&&r.hasResponseData&&c.hasResponseData,m=t.isLoading||n.isLoading||i.isLoading||r.isLoading||c.isLoading,p=t.error||n.error||i.error||c.error;return e.jsx(E,{title:"Movie Maker",children:e.jsxs(R,{hasSider:!0,children:[e.jsx(A,{children:e.jsx(N,{hasResponseData:l,isLoading:m,error:p})}),e.jsx(R.Content,{className:"content",children:e.jsx(L,{hasResponseData:l,isLoading:m,error:p,children:e.jsx(W,{movieTitles:Object.values(t.data),movieGenres:n.data,movieActors:Object.values(i.data),characterTraits:Object.values(c.data),items:Object.values(r.data),language:a})})})]})})}export{be as default};
