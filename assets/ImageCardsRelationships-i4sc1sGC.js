import{R as l,r as h,f as N,K as T,k as w,w as L,i as Ct,m as St,x as Ot,n as et,C as X,y as ot,z as nt,A as wt,E as rt,F as at,G as It,o as Bt,J as Et,M as jt,N as Rt,a as it,_ as st,O as Pt,j as s,I as zt,v as Tt,Q as Nt,P as Mt,L as K}from"./index-B-0Zi9dv.js";import{u as lt,R as _t,I as Ft}from"./RelationshipsStats-rMsw9eIj.js";import{T as qt}from"./TransparentButton-f7p_w2hT.js";import{I as Lt}from"./IdTag-Bey0unuZ.js";import{D as Dt}from"./DataLoadingWrapper-CknT-EYG.js";import{l as W,P as Gt}from"./useBaseUrl-C1hK2Zof.js";import{I as kt}from"./ImageCard-14hvnPAr.js";import{R as Ht}from"./RelationshipCountTag-DP8gMN-k.js";import{C as Vt}from"./index-Bb0mn3kW.js";import{R as At}from"./VerticalAlignTopOutlined-v8tIexFs.js";import{g as Wt,s as Xt}from"./scrollTo-DDzNabTo.js";import{t as Ut}from"./throttleByAnimationFrame-CJEP8Tv6.js";import{B as Zt,D as Jt}from"./DownloadButton-DvBQCSj9.js";import{R as ct}from"./FileTextOutlined-C24grtgR.js";import{R as Kt}from"./Item-BrOHfA5m.js";import{R as Qt}from"./SyncOutlined-BV6dNPN-.js";import{c as Q,a as V}from"./FilterEntries-C8wRYMK6.js";import{R as Yt}from"./ResponseState-CX2DgdcX.js";import{S as te}from"./SaveButton-CtQZ611A.js";import{S as A}from"./SiderContent-D--PIAJF.js";import{T as ee,c as oe,C as ne}from"./constants-CFIVBgkP.js";import{F as re}from"./index-BCV-x-Pg.js";import"./hooks-DJJwsV5e.js";import"./useMutation-C7eUXYBb.js";import"./useQueryParams-DKlNNCrc.js";import"./index-BGu6COLF.js";import"./index-CzNgOZrN.js";import"./useCopyToClipboardFunction-CtYHI-T0.js";import"./index-BC5DJJD_.js";import"./index-BAQ6ksxU.js";import"./PlusOutlined-De7PohVw.js";import"./index-cWv_beRK.js";import"./index-CU3voUOl.js";import"./index-B6_6TWFK.js";import"./moment-C5S46NFB.js";import"./SaveOutlined-C47doOKl.js";import"./gapSize-U1swVQyS.js";const U=l.createContext(void 0),{Provider:ae}=U,ie=t=>{const{icon:r,description:e,prefixCls:o,className:n}=t,a=l.createElement("div",{className:`${o}-icon`},l.createElement(ct,null));return l.createElement("div",{onClick:t.onClick,onFocus:t.onFocus,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,className:N(n,`${o}-content`)},r||e?l.createElement(l.Fragment,null,r&&l.createElement("div",{className:`${o}-icon`},r),e&&l.createElement("div",{className:`${o}-description`},e)):a)},se=h.memo(ie),Y=t=>t===0?0:t-Math.sqrt(Math.pow(t,2)/2),le=t=>{const{componentCls:r,floatButtonSize:e,motionDurationSlow:o,motionEaseInOutCirc:n,calc:a}=t,u=new T("antFloatButtonMoveTopIn",{"0%":{transform:`translate3d(0, ${w(e)}, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),f=new T("antFloatButtonMoveTopOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(0, ${w(e)}, 0)`,transformOrigin:"0 0",opacity:0}}),p=new T("antFloatButtonMoveRightIn",{"0%":{transform:`translate3d(${a(e).mul(-1).equal()}, 0, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),m=new T("antFloatButtonMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(${a(e).mul(-1).equal()}, 0, 0)`,transformOrigin:"0 0",opacity:0}}),c=new T("antFloatButtonMoveBottomIn",{"0%":{transform:`translate3d(0, ${a(e).mul(-1).equal()}, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),i=new T("antFloatButtonMoveBottomOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(0, ${a(e).mul(-1).equal()}, 0)`,transformOrigin:"0 0",opacity:0}}),C=new T("antFloatButtonMoveLeftIn",{"0%":{transform:`translate3d(${w(e)}, 0, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),y=new T("antFloatButtonMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(${w(e)}, 0, 0)`,transformOrigin:"0 0",opacity:0}}),d=`${r}-group`;return[{[d]:{[`&${d}-top ${d}-wrap`]:L(`${d}-wrap`,u,f,o,!0),[`&${d}-bottom ${d}-wrap`]:L(`${d}-wrap`,c,i,o,!0),[`&${d}-left ${d}-wrap`]:L(`${d}-wrap`,C,y,o,!0),[`&${d}-right ${d}-wrap`]:L(`${d}-wrap`,p,m,o,!0)}},{[`${d}-wrap`]:{[`&${d}-wrap-enter, &${d}-wrap-appear`]:{opacity:0,animationTimingFunction:n},[`&${d}-wrap-leave`]:{opacity:1,animationTimingFunction:n}}}]},ce=t=>{const{antCls:r,componentCls:e,floatButtonSize:o,margin:n,borderRadiusLG:a,borderRadiusSM:u,badgeOffset:f,floatButtonBodyPadding:p,zIndexPopupBase:m,calc:c}=t,i=`${e}-group`;return{[i]:Object.assign(Object.assign({},et(t)),{zIndex:m,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"none",position:"fixed",height:"auto",boxShadow:"none",minWidth:o,minHeight:o,insetInlineEnd:t.floatButtonInsetInlineEnd,bottom:t.floatButtonInsetBlockEnd,borderRadius:a,[`${i}-wrap`]:{zIndex:-1,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute"},[`&${i}-rtl`]:{direction:"rtl"},[e]:{position:"static"}}),[`${i}-top > ${i}-wrap`]:{flexDirection:"column",top:"auto",bottom:c(o).add(n).equal(),"&::after":{content:'""',position:"absolute",width:"100%",height:n,bottom:c(n).mul(-1).equal()}},[`${i}-bottom > ${i}-wrap`]:{flexDirection:"column",top:c(o).add(n).equal(),bottom:"auto","&::after":{content:'""',position:"absolute",width:"100%",height:n,top:c(n).mul(-1).equal()}},[`${i}-right > ${i}-wrap`]:{flexDirection:"row",left:{_skip_check_:!0,value:c(o).add(n).equal()},right:{_skip_check_:!0,value:"auto"},"&::after":{content:'""',position:"absolute",width:n,height:"100%",left:{_skip_check_:!0,value:c(n).mul(-1).equal()}}},[`${i}-left > ${i}-wrap`]:{flexDirection:"row",left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:c(o).add(n).equal()},"&::after":{content:'""',position:"absolute",width:n,height:"100%",right:{_skip_check_:!0,value:c(n).mul(-1).equal()}}},[`${i}-circle`]:{gap:n,[`${i}-wrap`]:{gap:n}},[`${i}-square`]:{[`${e}-square`]:{padding:0,borderRadius:0,[`&${i}-trigger`]:{borderRadius:a},"&:first-child":{borderStartStartRadius:a,borderStartEndRadius:a},"&:last-child":{borderEndStartRadius:a,borderEndEndRadius:a},"&:not(:last-child)":{borderBottom:`${w(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${r}-badge`]:{[`${r}-badge-count`]:{top:c(c(p).add(f)).mul(-1).equal(),insetInlineEnd:c(c(p).add(f)).mul(-1).equal()}}},[`${i}-wrap`]:{borderRadius:a,boxShadow:t.boxShadowSecondary,[`${e}-square`]:{boxShadow:"none",borderRadius:0,padding:p,[`${e}-body`]:{width:t.floatButtonBodySize,height:t.floatButtonBodySize,borderRadius:u}}}},[`${i}-top > ${i}-wrap, ${i}-bottom > ${i}-wrap`]:{[`> ${e}-square`]:{"&:first-child":{borderStartStartRadius:a,borderStartEndRadius:a},"&:last-child":{borderEndStartRadius:a,borderEndEndRadius:a},"&:not(:last-child)":{borderBottom:`${w(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}}},[`${i}-left > ${i}-wrap, ${i}-right > ${i}-wrap`]:{[`> ${e}-square`]:{"&:first-child":{borderStartStartRadius:a,borderEndStartRadius:a},"&:last-child":{borderStartEndRadius:a,borderEndEndRadius:a},"&:not(:last-child)":{borderInlineEnd:`${w(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}}},[`${i}-circle-shadow`]:{boxShadow:"none"},[`${i}-square-shadow`]:{boxShadow:t.boxShadowSecondary,[`${e}-square`]:{boxShadow:"none",padding:p,[`${e}-body`]:{width:t.floatButtonBodySize,height:t.floatButtonBodySize,borderRadius:u}}}}},de=t=>{const{antCls:r,componentCls:e,floatButtonBodyPadding:o,floatButtonIconSize:n,floatButtonSize:a,borderRadiusLG:u,badgeOffset:f,dotOffsetInSquare:p,dotOffsetInCircle:m,zIndexPopupBase:c,calc:i}=t;return{[e]:Object.assign(Object.assign({},et(t)),{border:"none",position:"fixed",cursor:"pointer",zIndex:c,display:"block",width:a,height:a,insetInlineEnd:t.floatButtonInsetInlineEnd,bottom:t.floatButtonInsetBlockEnd,boxShadow:t.boxShadowSecondary,"&-pure":{position:"relative",inset:"auto"},"&:empty":{display:"none"},[`${r}-badge`]:{width:"100%",height:"100%",[`${r}-badge-count`]:{transform:"translate(0, 0)",transformOrigin:"center",top:i(f).mul(-1).equal(),insetInlineEnd:i(f).mul(-1).equal()}},[`${e}-body`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",transition:`all ${t.motionDurationMid}`,[`${e}-content`]:{overflow:"hidden",textAlign:"center",minHeight:a,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:`${w(i(o).div(2).equal())} ${w(o)}`,[`${e}-icon`]:{textAlign:"center",margin:"auto",width:n,fontSize:n,lineHeight:1}}}}),[`${e}-rtl`]:{direction:"rtl"},[`${e}-circle`]:{height:a,borderRadius:"50%",[`${r}-badge`]:{[`${r}-badge-dot`]:{top:m,insetInlineEnd:m}},[`${e}-body`]:{borderRadius:"50%"}},[`${e}-square`]:{height:"auto",minHeight:a,borderRadius:u,[`${r}-badge`]:{[`${r}-badge-dot`]:{top:p,insetInlineEnd:p}},[`${e}-body`]:{height:"auto",borderRadius:u}},[`${e}-default`]:{backgroundColor:t.floatButtonBackgroundColor,transition:`background-color ${t.motionDurationMid}`,[`${e}-body`]:{backgroundColor:t.floatButtonBackgroundColor,transition:`background-color ${t.motionDurationMid}`,"&:hover":{backgroundColor:t.colorFillContent},[`${e}-content`]:{[`${e}-icon`]:{color:t.colorText},[`${e}-description`]:{display:"flex",alignItems:"center",lineHeight:w(t.fontSizeLG),color:t.colorText,fontSize:t.fontSizeSM}}}},[`${e}-primary`]:{backgroundColor:t.colorPrimary,[`${e}-body`]:{backgroundColor:t.colorPrimary,transition:`background-color ${t.motionDurationMid}`,"&:hover":{backgroundColor:t.colorPrimaryHover},[`${e}-content`]:{[`${e}-icon`]:{color:t.colorTextLightSolid},[`${e}-description`]:{display:"flex",alignItems:"center",lineHeight:w(t.fontSizeLG),color:t.colorTextLightSolid,fontSize:t.fontSizeSM}}}}}},ue=t=>({dotOffsetInCircle:Y(t.controlHeightLG/2),dotOffsetInSquare:Y(t.borderRadiusLG)}),dt=Ct("FloatButton",t=>{const{colorTextLightSolid:r,colorBgElevated:e,controlHeightLG:o,marginXXL:n,marginLG:a,fontSize:u,fontSizeIcon:f,controlItemBgHover:p,paddingXXS:m,calc:c}=t,i=St(t,{floatButtonBackgroundColor:e,floatButtonColor:r,floatButtonHoverBackgroundColor:p,floatButtonFontSize:u,floatButtonIconSize:c(f).mul(1.5).equal(),floatButtonSize:o,floatButtonInsetBlockEnd:n,floatButtonInsetInlineEnd:a,floatButtonBodySize:c(o).sub(c(m).mul(2)).equal(),floatButtonBodyPadding:m,badgeOffset:c(m).mul(1.5).equal()});return[ce(i),de(i),Ot(t),le(i)]},ue);var me=function(t,r){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(e[o[n]]=t[o[n]]);return e};const D="float-btn",pe=l.forwardRef((t,r)=>{const{prefixCls:e,className:o,rootClassName:n,style:a,type:u="default",shape:f="circle",icon:p,description:m,tooltip:c,htmlType:i="button",badge:C={}}=t,y=me(t,["prefixCls","className","rootClassName","style","type","shape","icon","description","tooltip","htmlType","badge"]),{getPrefixCls:d,direction:g}=h.useContext(X),I=h.useContext(U),x=d(D,e),E=ot(x),[b,j,R]=dt(x,E),P=I||f,M=N(j,R,E,x,o,n,`${x}-${u}`,`${x}-${P}`,{[`${x}-rtl`]:g==="rtl"}),[$]=nt("FloatButton",a==null?void 0:a.zIndex),v=Object.assign(Object.assign({},a),{zIndex:$}),S=wt(C,["title","children","status","text"]),_=h.useMemo(()=>({prefixCls:x,description:m,icon:p,type:u}),[x,m,p,u]);let z=l.createElement("div",{className:`${x}-body`},l.createElement(se,Object.assign({},_)));return"badge"in t&&(z=l.createElement(Zt,Object.assign({},S),z)),"tooltip"in t&&(z=l.createElement(rt,{title:c,placement:g==="rtl"?"right":"left"},z)),b(t.href?l.createElement("a",Object.assign({ref:r},y,{className:M,style:v}),z):l.createElement("button",Object.assign({ref:r},y,{className:M,style:v,type:i}),z))}),O=pe;var fe=function(t,r){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(e[o[n]]=t[o[n]]);return e};const ut=l.forwardRef((t,r)=>{const{prefixCls:e,className:o,type:n="default",shape:a="circle",visibilityHeight:u=400,icon:f=l.createElement(At,null),target:p,onClick:m,duration:c=450}=t,i=fe(t,["prefixCls","className","type","shape","visibilityHeight","icon","target","onClick","duration"]),[C,y]=h.useState(u===0),d=l.useRef(null);l.useImperativeHandle(r,()=>({nativeElement:d.current}));const g=()=>{var $;return(($=d.current)===null||$===void 0?void 0:$.ownerDocument)||window},I=Ut($=>{const v=Wt($.target);y(v>=u)});h.useEffect(()=>{const v=(p||g)();return I({target:v}),v==null||v.addEventListener("scroll",I),()=>{I.cancel(),v==null||v.removeEventListener("scroll",I)}},[p]);const x=$=>{Xt(0,{getContainer:p||g,duration:c}),m==null||m($)},{getPrefixCls:E}=h.useContext(X),b=E(D,e),j=E(),P=h.useContext(U)||a,M=Object.assign({prefixCls:b,icon:f,type:n,shape:P},i);return l.createElement(at,{visible:C,motionName:`${j}-fade`},($,v)=>{let{className:S}=$;return l.createElement(O,Object.assign({ref:It(d,v)},M,{onClick:x,className:N(o,S)}))})});var ge=function(t,r){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(e[o[n]]=t[o[n]]);return e};const mt=t=>{var r;const{prefixCls:e,className:o,style:n,shape:a="circle",type:u="default",placement:f="top",icon:p=l.createElement(ct,null),closeIcon:m,description:c,trigger:i,children:C,onOpenChange:y,open:d,onClick:g}=t,I=ge(t,["prefixCls","className","style","shape","type","placement","icon","closeIcon","description","trigger","children","onOpenChange","open","onClick"]),{direction:x,getPrefixCls:E,closeIcon:b}=Bt("floatButtonGroup"),j=(r=m??b)!==null&&r!==void 0?r:l.createElement(Rt,null),R=E(D,e),P=ot(R),[M,$,v]=dt(R,P),S=`${R}-group`,_=i&&["click","hover"].includes(i),z=f&&["top","left","right","bottom"].includes(f),ft=N(S,$,v,P,o,{[`${S}-rtl`]:x==="rtl",[`${S}-${a}`]:a,[`${S}-${a}-shadow`]:!_,[`${S}-${f}`]:_&&z}),[gt]=nt("FloatButton",n==null?void 0:n.zIndex),ht=Object.assign(Object.assign({},n),{zIndex:gt}),bt=N($,`${S}-wrap`),[F,vt]=Et(!1,{value:d}),Z=l.useRef(null),J=i==="hover",G=i==="click",q=jt(B=>{F!==B&&(vt(B),y==null||y(B))}),yt=()=>{J&&q(!0)},xt=()=>{J&&q(!1)},$t=B=>{G&&q(!F),g==null||g(B)};return l.useEffect(()=>{if(G){const B=k=>{var H;!((H=Z.current)===null||H===void 0)&&H.contains(k.target)||q(!1)};return document.addEventListener("click",B,{capture:!0}),()=>document.removeEventListener("click",B,{capture:!0})}},[G]),M(l.createElement(ae,{value:a},l.createElement("div",{ref:Z,className:ft,style:ht,onMouseEnter:yt,onMouseLeave:xt},_?l.createElement(l.Fragment,null,l.createElement(at,{visible:F,motionName:`${S}-wrap`},B=>{let{className:k}=B;return l.createElement("div",{className:N(k,bt)},C)}),l.createElement(O,Object.assign({type:u,icon:F?j:p,description:c,"aria-label":t["aria-label"],className:`${S}-trigger`,onClick:$t},I))):C)))};var pt=function(t,r){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(e[o[n]]=t[o[n]]);return e};const tt=t=>{var{backTop:r}=t,e=pt(t,["backTop"]);return r?h.createElement(ut,Object.assign({},e,{visibilityHeight:0})):h.createElement(O,Object.assign({},e))},he=t=>{var{className:r,items:e}=t,o=pt(t,["className","items"]);const{prefixCls:n}=o,{getPrefixCls:a}=h.useContext(X),f=`${a(D,n)}-pure`;return e?h.createElement(mt,Object.assign({className:N(r,f)},o),e.map((p,m)=>h.createElement(tt,Object.assign({key:m},p)))):h.createElement(tt,Object.assign({className:N(r,f)},o))};O.BackTop=ut;O.Group=mt;O._InternalPanelDoNotUseOrYouWillBeFired=he;var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"},ve=function(r,e){return h.createElement(it,st({},r,{ref:e,icon:be}))},ye=h.forwardRef(ve),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 100c-61.8 0-112 50.2-112 112 0 47.7 29.9 88.5 72 104.6v27.6L512 601.4 312 344.2v-27.6c42.1-16.1 72-56.9 72-104.6 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 50.6 33.8 93.5 80 107.3v34.4c0 9.7 3.3 19.3 9.3 27L476 672.3v33.6c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-33.6l226.7-291.6c6-7.7 9.3-17.3 9.3-27v-34.4c46.2-13.8 80-56.7 80-107.3 0-61.8-50.2-112-112-112zM224 212a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm336 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm192-552a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"fork",theme:"outlined"},$e=function(r,e){return h.createElement(it,st({},r,{ref:e,icon:xe}))},Ce=h.forwardRef($e);function Se(){const{query:{isDirty:t,isSaving:r,...e},randomGroups:{cardIds:o,cards:n,onSelect:a,selection:u,relate:f,nextSet:p,deselectAll:m,cycles:c},showIds:i,cardSize:C}=lt(),y=h.useRef(null),[d,{width:g}]=Pt(),[I,x]=h.useMemo(()=>{const b=Math.floor(g/C)+1,j=Math.floor(g/b);return[b,j]},[C,g]),E=()=>{var b;p(),(b=y.current)==null||b.scrollIntoView({behavior:"smooth"})};return s.jsx(Dt,{error:e.error,hasResponseData:!W.isEmpty(e.data),isLoading:e.isLoading,children:s.jsx("div",{className:"my-6",ref:d,children:s.jsxs(Vt,{className:"image-card-categorizer-card",extra:s.jsxs(rt,{title:"Total cycles",children:[s.jsx(Tt,{})," ",c]}),ref:y,title:"Card Relationship Matching",children:[s.jsx(zt.PreviewGroup,{children:s.jsx("div",{className:"image-cards-group",style:{gridTemplateColumns:`repeat(${Math.max(I,1)}, 1fr)`},children:o.map((b,j)=>{const R=u.includes(b),P=n[j];return s.jsx("div",{className:"image-card-card__image",children:s.jsxs(qt,{active:R,activeClass:"image-cards-group__button--active",className:"image-cards-group__button",onClick:()=>a(b),children:[s.jsx(kt,{id:b,preview:!1,width:x-24}),s.jsxs("div",{children:[i&&s.jsx(Lt,{children:b}),s.jsx(Ht,{card:P})]})]})},b)})})}),s.jsx(Oe,{deselectAll:m,isDirty:t,isSaving:r,onNextSet:E,relate:f,selection:u})]})})})}const Oe=({isSaving:t,isDirty:r,selection:e,relate:o,deselectAll:n,onNextSet:a})=>{if(t)return s.jsx(O,{icon:s.jsx(Nt,{})});const u=()=>{e.length<2||o()};return s.jsxs(s.Fragment,{children:[r&&s.jsx(O,{icon:s.jsx(Kt,{}),style:{right:234},type:"primary"}),s.jsx(O,{icon:s.jsx(ye,{}),onClick:n,style:{right:164}}),s.jsx(O,{badge:{count:e.length,size:"small"},icon:s.jsx(Ce,{}),onClick:u,style:{right:94},type:e.length<2?"default":"primary"}),s.jsx(O,{icon:s.jsx(Qt,{}),onClick:a,style:{right:24}})]})};function we(){const{query:{isDirty:t,isSaving:r,save:e,data:o,isLoading:n,isError:a},randomGroups:{filters:u},showIds:f,setShowIds:p,tagThreshold:m,setTagThreshold:c,sampleSize:i,setSampleSize:C,cardSize:y,setCardSize:d}=lt();return s.jsxs(Gt,{children:[s.jsx(A,{children:s.jsxs(re,{gap:6,vertical:!0,children:[s.jsx(te,{dirt:JSON.stringify(o),isDirty:t,isSaving:r,onSave:()=>e({})}),s.jsx(Jt,{block:!0,data:o,disabled:W.isEmpty(o),fileName:"imageCardsRelationships.json",loading:r})]})}),s.jsx(Yt,{hasResponseData:!W.isEmpty(o),isDirty:t,isError:a,isLoading:n||r}),s.jsxs(A,{children:[s.jsx(Q,{label:"Use Cycles",onChange:()=>u.toggleUseCycles(),value:u.useCycles}),s.jsx(Q,{label:"Show Ids",onChange:g=>p(g),value:f}),s.jsx(V,{label:"Tag Count",onChange:g=>c(g),options:ee,value:m}),s.jsx(V,{label:"Sample Size",onChange:g=>C(g),options:oe,value:i}),s.jsx(V,{label:"Card Size",onChange:g=>d(g),options:ne,value:y})]}),s.jsx(A,{children:s.jsx(_t,{})})]})}function co(){return s.jsx(Mt,{subtitle:"Relationships",title:"Image Cards",children:s.jsx(Ft,{children:s.jsxs(K,{hasSider:!0,children:[s.jsx(we,{}),s.jsx(K.Content,{className:"content",children:s.jsx(Se,{})})]})})})}export{co as default};
