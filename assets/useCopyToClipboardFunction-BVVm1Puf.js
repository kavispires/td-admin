import{l as w}from"./useBaseUrl-C81I6maY.js";import{r as l,be as D,d as x,a1 as E}from"./index-B5-2HM5B.js";function T(){var t=l.useRef(!1),a=l.useCallback(function(){return t.current},[]);return l.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),a}var S=function(t){t===void 0&&(t={});var a=l.useState(t),c=a[0],i=a[1],p=l.useCallback(function(r){i(function(e){return Object.assign({},e,r instanceof Function?r(e):r)})},[]);return[c,p]},g,v;function h(){if(v)return g;v=1;var t=D(),a={"text/plain":"Text","text/html":"Url",default:"Text"},c="Copy to clipboard: #{key}, Enter";function i(r){var e=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return r.replace(/#{\s*key\s*}/g,e)}function p(r,e){var n,u,d,y,f,o,m=!1;e||(e={}),n=e.debug||!1;try{d=t(),y=document.createRange(),f=document.getSelection(),o=document.createElement("span"),o.textContent=r,o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(s){if(s.stopPropagation(),e.format)if(s.preventDefault(),typeof s.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=a[e.format]||a.default;window.clipboardData.setData(b,r)}else s.clipboardData.clearData(),s.clipboardData.setData(e.format,r);e.onCopy&&(s.preventDefault(),e.onCopy(s.clipboardData))}),document.body.appendChild(o),y.selectNodeContents(o),f.addRange(y);var C=document.execCommand("copy");if(!C)throw new Error("copy command was unsuccessful");m=!0}catch(s){n&&console.error("unable to copy using execCommand: ",s),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",r),e.onCopy&&e.onCopy(window.clipboardData),m=!0}catch(b){n&&console.error("unable to copy using clipboardData: ",b),n&&console.error("falling back to prompt"),u=i("message"in e?e.message:c),window.prompt(u,r)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(y):f.removeAllRanges()),o&&document.body.removeChild(o),d()}return m}return g=p,g}var k=h();const R=x(k);var U=function(){var t=T(),a=S({value:void 0,error:void 0,noUserInteraction:!0}),c=a[0],i=a[1],p=l.useCallback(function(r){if(t()){var e,n;try{if(typeof r!="string"&&typeof r!="number"){var u=new Error("Cannot copy typeof "+typeof r+" to clipboard, must be a string");i({value:r,error:u,noUserInteraction:!0});return}else if(r===""){var u=new Error("Cannot copy empty string to clipboard.");i({value:r,error:u,noUserInteraction:!0});return}n=r.toString(),e=R(n),i({value:n,error:void 0,noUserInteraction:e})}catch(d){i({value:n,error:d,noUserInteraction:e})}}},[]);return[c,p]};function F(){const[t,a]=U(),{message:c}=E.useApp();return l.useEffect(()=>{t.value&&(t.value.length>20?c.info(`Copied to clipboard: ${w.truncate(t.value,{length:30,omission:"..."})}`):c.success("Copied"))},[t,c]),a}export{F as u};
