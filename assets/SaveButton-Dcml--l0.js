import{r,bJ as i,j as d,B as m}from"./index-D37itX2d.js";import{h as b}from"./moment-C5S46NFB.js";import{R as g}from"./SaveOutlined-Pe7M9McS.js";function p(e,t){t===void 0&&(t=0);var u=r.useRef(!1),n=r.useRef(),c=r.useRef(e),s=r.useCallback(function(){return u.current},[]),a=r.useCallback(function(){u.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){u.current=!0,c.current()},t)},[t]),o=r.useCallback(function(){u.current=null,n.current&&clearTimeout(n.current)},[]);return r.useEffect(function(){c.current=e},[e]),r.useEffect(function(){return a(),o},[t]),[s,o,a]}function h({isDirty:e,onSave:t,isSaving:u,dirt:n,interval:c=10*60*1e3,...s}){const[,a,o]=p(()=>{e&&t()},c);return r.useEffect(()=>{e?(i(!0),console.log("Save Reset",b(Date.now()).format("MM/DD/YYYY HH:mm:ss")),o()):(i(!1),a())},[e,o,a,n]),r.useEffect(()=>{const l=v=>{if(e){const f="You have unsaved changes, are you sure you want to leave?";return v.returnValue=f,f}};return window.addEventListener("beforeunload",l),()=>{window.removeEventListener("beforeunload",l)}},[e]),d.jsx(m,{block:!0,danger:!0,disabled:!e,icon:d.jsx(g,{}),loading:u,onClick:t,size:"large",type:"primary",...s,children:"Save"})}export{h as S,p as u};
