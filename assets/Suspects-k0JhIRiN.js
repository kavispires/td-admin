import{r as P,d as X,_ as Z,j as r,F as S,T as w,ab as Yr,ac as Xr,ad as Q,ae as Zr,a0 as Qr,i as Pr,B as D,b as De,n as Ir,M as et,A as rt,af as tt,I as at,D as ae,c as nt,P as it,L as ze}from"./index-D33WsCK5.js";import{D as ot}from"./DataLoadingWrapper-CwhgLI24.js";import{l as k,P as st}from"./useBaseUrl-BgzYt73r.js";import{c as Y}from"./clsx-B-dksMZM.js";import{u as lt}from"./useCardWidth-DAUWvXD1.js";import{u as F}from"./useQueryParams-Do2Pakyn.js";import{s as ne,a as Nr}from"./index-BbPzNS2e.js";import{S as ee}from"./index-B9JzNi-e.js";import{S as re}from"./index-C4KassD9.js";import{u as Rr}from"./useCopyToClipboardFunction-CxT6XfTg.js";import{S as ke,t as ct,a as ut}from"./useTestimoniesResource-B9qjmpXE.js";import{u as Le}from"./useTDResource-CzTlhf0K.js";import{C as $e}from"./Collapse-qSmAihH5.js";import{D as Ar}from"./index-CjGa4Msz.js";import{S as kr}from"./index-CkZyhWOD.js";import{R as dt}from"./CloudSyncOutlined-CUwfQnqS.js";import{R as pt}from"./index-C-3rx2UW.js";import{T as ie}from"./index-BV0tYmVh.js";import{R as ft}from"./AppstoreOutlined--ZR0H6r4.js";import{S as He}from"./index-C3m5A69x.js";import{a as ht,R as mt}from"./WomanOutlined-BjRq44UV.js";import{R as gt,a as vt}from"./ColumnWidthOutlined-DuSheCkt.js";import{F as xt}from"./Table--FBkT7OT.js";import{c as bt,a as pe}from"./FilterEntries-DFygJ0wF.js";import{S as jt}from"./SiderContent--LuVI2lT.js";import{D as We}from"./DownloadButton-Bn-I_8A-.js";import{a as Ge}from"./FirestoreConsoleLink-cS4LFqkb.js";import{S as Ke}from"./SaveButton-CAISvhur.js";import{S as yt}from"./SuspectsStyleVariantSelector-Caomv-LP.js";import{u as Je}from"./useResourceFirestoreData-BKii2upp.js";import"./constants-Df8aQCCe.js";import"./Item-B6QsqpPW.js";import"./ImageCard-L0J1y19O.js";import"./index-CTKuI9sg.js";import"./index-jq-kDFw4.js";import"./scrollTo-KOLrLSpu.js";import"./Pagination-BffLUaV7.js";import"./useMutation-DX3rkra1.js";import"./index-B_cyfMcn.js";import"./moment-BYTvHWBW.js";import"./SaveOutlined-CdzNkecV.js";import"./useGetFirestoreDoc-BU1yuPpp.js";import"./useUpdateFirestoreDoc-3f0VpAX-.js";var Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},St=function(t,a){return P.createElement(X,Z({},t,{ref:a,icon:Ct}))},Ue=P.forwardRef(St),wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},_t=function(t,a){return P.createElement(X,Z({},t,{ref:a,icon:wt}))},Ve=P.forwardRef(_t),Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M910.5 553.2l-109-370.8c-6.8-20.4-23.1-34.1-44.9-34.1s-39.5 12.3-46.3 32.7l-72.2 215.4H386.2L314 181.1c-6.8-20.4-24.5-32.7-46.3-32.7s-39.5 13.6-44.9 34.1L113.9 553.2c-4.1 13.6 1.4 28.6 12.3 36.8l385.4 289 386.7-289c10.8-8.1 16.3-23.1 12.2-36.8z"}}]},name:"gitlab",theme:"filled"},Tt=function(t,a){return P.createElement(X,Z({},t,{ref:a,icon:Ot}))},Pt=P.forwardRef(Tt),It={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Nt=function(t,a){return P.createElement(X,Z({},t,{ref:a,icon:It}))},Rt=P.forwardRef(Nt),At={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.3 338.4a447.57 447.57 0 00-96.1-143.3 443.09 443.09 0 00-143-96.3A443.91 443.91 0 00512 64h-2c-60.5.3-119 12.3-174.1 35.9a444.08 444.08 0 00-141.7 96.5 445 445 0 00-95 142.8A449.89 449.89 0 0065 514.1c.3 69.4 16.9 138.3 47.9 199.9v152c0 25.4 20.6 46 45.9 46h151.8a447.72 447.72 0 00199.5 48h2.1c59.8 0 117.7-11.6 172.3-34.3A443.2 443.2 0 00827 830.5c41.2-40.9 73.6-88.7 96.3-142 23.5-55.2 35.5-113.9 35.8-174.5.2-60.9-11.6-120-34.8-175.6zM312.4 560c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.4 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48z"}}]},name:"message",theme:"filled"},kt=function(t,a){return P.createElement(X,Z({},t,{ref:a,icon:At}))},qt=P.forwardRef(kt);const Mt=["18-21","21-30","30-40","40-50","50-60","60-70","70-80","80-90"].map(e=>({label:e,value:e})),Dt=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Non-binary",value:"non-binary"},{label:"Other",value:"other"}],Ft=[{label:"White",value:"white"},{label:"Black",value:"black"},{label:"Asian",value:"asian"},{label:"Brown",value:"brown"},{label:"Indigenous",value:"indigenous"},{label:"Mixed",value:"mixed"},{label:"Other",value:"other"}],Et=["thin","average","muscular","large"].map(e=>({label:e,value:e})),Bt=["short","medium","tall"].map(e=>({label:e,value:e})),zt=["INTJ","INTP","ENTJ","ENTP","INFJ","INFP","ENFJ","ENFP","ISTJ","ISFJ","ESTJ","ESFJ","ISTP","ISFP","ESTP","ESFP"],Lt=["aries","taurus","gemini","cancer","leo","virgo","libra","scorpio","sagittarius","capricorn","aquarius","pisces"].map(e=>({label:k.capitalize(e),value:e})),$t=["lawful-good","neutral-good","chaotic-good","lawful-neutral","true-neutral","chaotic-neutral","lawful-evil","neutral-evil","chaotic-evil"].map(e=>({label:k.capitalize(e.replace("-"," ")),value:e})),qr=[{label:"Straight",value:"straight"},{label:"Gay",value:"gay"},{label:"Bisexual",value:"bisexual"},{label:"Other",value:"other"}],Mr=[{label:"None",value:"none"},{label:"Basic",value:"basic"},{label:"College",value:"college"},{label:"High Education",value:"high"}],Dr=[{label:"Lower",value:"lower"},{label:"Middle",value:"middle"},{label:"Upper",value:"upper"}],Fe=[{title:"Hair Length",features:[{id:"shortHair",label:"Short Hair"},{id:"longHair",label:"Long Hair"},{id:"mediumHair",label:"Medium Hair"},{id:"bald",label:"Bald"}]},{title:"Hair Color",features:[{id:"blackHair",label:"Black Hair"},{id:"brownHair",label:"Brown Hair"},{id:"blondeHair",label:"Blonde Hair"},{id:"redHair",label:"Red Hair"},{id:"greyHair",label:"Grey Hair"},{id:"coloredHair",label:"Colored Hair"}]},{title:"Face",features:[{id:"beard",label:"Beard"},{id:"mustache",label:"Mustache"},{id:"goatee",label:"Goatee"},{id:"lipstick",label:"Lipstick"}]},{title:"Specific",features:[{id:"showTeeth",label:"Showing Teeth"},{id:"avoidingCamera",label:"Avoiding Camera"},{id:"hairyChest",label:"Exposed Hairy Chest"},{id:"shirtless",label:"Shirtless"},{id:"noHairInfo",label:"No Hair Info"}]},{title:"Accessories",features:[{id:"noAccessories",label:"No Accessories"},{id:"glasses",label:"Glasses"},{id:"piercings",label:"Piercings"},{id:"earrings",label:"Earrings"},{id:"necklace",label:"Necklace"},{id:"hat",label:"Hat"},{id:"scarf",label:"Scarf"},{id:"hoodie",label:"Hoodie"},{id:"tie",label:"Tie"},{id:"headscarf",label:"Headscarf/Bandana"},{id:"bow",label:"Bow"},{id:"wearingFlowers",label:"Wearing Flowers"},{id:"hairTie",label:"Hair Tie"}]},{title:"Clothing",features:[{id:"whiteShirt",label:"White Shirt"},{id:"blackClothes",label:"Black Clothes"},{id:"blueClothes",label:"Blue Clothes"},{id:"redClothes",label:"Red Clothes"},{id:"greenClothes",label:"Green Clothes"},{id:"yellowClothes",label:"Yellow Clothes"},{id:"purpleClothes",label:"Purple Clothes"},{id:"pinkClothes",label:"Pink Clothes"},{id:"orangeClothes",label:"Orange Clothes"},{id:"brownClothes",label:"Brown Clothes"},{id:"patternedShirt",label:"Patterned Shirt"},{id:"wearingStripes",label:"Wearing Stripes"},{id:"buttonShirt",label:"Button Shirt"}]}],Ht=qr.map(e=>({value:`sexualOrientation.${e.value}`,label:`Sexual Orientation: ${e.label}`})),Wt=Mr.map(e=>({value:`educationLevel.${e.value}`,label:`Education Level: ${e.label}`})),Gt=Dr.map(e=>({value:`economicClass.${e.value}`,label:`Economic Class: ${e.label}`})),Kt=[...Ht,...Wt,...Gt];function Jt(){const{addParam:e,queryParams:t}=F();return r.jsxs(S,{align:"center",className:"my-2",gap:8,children:[r.jsx(w.Text,{children:"Extended Info Highlight:"})," ",r.jsx(ee,{allowClear:!0,onChange:a=>e("activeExtendedInfo",a),options:Kt,size:"small",style:{width:275},value:t.get("activeExtendedInfo")||void 0})]})}function Ut({entry:e,addEntryToUpdate:t,activeExtendedInfo:a}){const{currentValue:n,checked:i}=P.useMemo(()=>{const[s,c]=(a??"").split(".");return!s||!c?{currentValue:void 0,checked:!1}:s==="sexualOrientation"?{currentValue:e.sexualOrientation,checked:e.sexualOrientation===c}:s==="educationLevel"?{currentValue:e.educationLevel,checked:e.educationLevel===c}:s==="economicClass"?{currentValue:e.economicClass,checked:e.economicClass===c}:{currentValue:void 0,checked:!1}},[a,e]),o=(s,c)=>{const[d,u]=c.split(".");if(!d||!u)return;const p={...e};d==="sexualOrientation"&&(p.sexualOrientation=i?"":u),d==="educationLevel"&&(p.educationLevel=i?"":u),d==="economicClass"&&(p.economicClass=i?"":u),t(s,p)};return a?r.jsxs(S,{className:Y("mt-2 mb-4",{"missing-value":!n}),gap:8,children:[r.jsxs(w.Text,{keyboard:!0,children:[a,":"]}),r.jsx(re,{checked:i,checkedChildren:"âœ“",onChange:()=>o(e.id,a),unCheckedChildren:"âœ—"})]}):null}const Fr=k.orderBy(Fe.reduce((e,t)=>(t.features.forEach(a=>{e.push({value:a.id,label:`${t.title}: ${a.label}`})}),e),[]),["label"],["asc"]);console.log("flatFeatures",Fr.map(e=>e.value));function Vt(){const{addParam:e,queryParams:t}=F();return r.jsxs(S,{align:"center",className:"my-2",gap:8,children:[r.jsx(w.Text,{children:"Feature Highlight:"})," ",r.jsx(ee,{allowClear:!0,onChange:a=>e("activeFeature",a),options:Fr,size:"small",style:{width:275},value:t.get("activeFeature")||void 0})]})}function Yt({entry:e,updateSuspectFeature:t,activeFeature:a}){return a?r.jsxs(S,{className:"mt-2 mb-4",gap:8,children:[r.jsxs(w.Text,{keyboard:!0,children:[a,":"]}),r.jsx(re,{checked:e.features?.includes(a),checkedChildren:"âœ“",onChange:()=>t(e.id,a),unCheckedChildren:"âœ—"})]}):null}var W={},fe={exports:{}},he={exports:{}},Ye;function ce(){return Ye||(Ye=1,function(e){function t(a){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(he)),he.exports}var Xe;function ue(){return Xe||(Xe=1,function(e){var t=ce().default;function a(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(a=function(d){return d?s:o})(i)}function n(i,o){if(!o&&i&&i.__esModule)return i;if(i===null||t(i)!="object"&&typeof i!="function")return{default:i};var s=a(o);if(s&&s.has(i))return s.get(i);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in i)if(u!=="default"&&{}.hasOwnProperty.call(i,u)){var p=d?Object.getOwnPropertyDescriptor(i,u):null;p&&(p.get||p.set)?Object.defineProperty(c,u,p):c[u]=i[u]}return c.default=i,s&&s.set(i,c),c}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(fe)),fe.exports}var me={exports:{}},Ze;function te(){return Ze||(Ze=1,function(e){function t(a){return a&&a.__esModule?a:{default:a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(me)),me.exports}var ge={exports:{}},Qe;function Er(){return Qe||(Qe=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)({}).hasOwnProperty.call(i,o)&&(a[o]=i[o])}return a},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ge)),ge.exports}var oe={},er;function Xt(){if(er)return oe;er=1,Object.defineProperty(oe,"__esModule",{value:!0});var e={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482.88 128c-84.35 0-156.58 52.8-185.68 126.98-60.89 8.13-115.3 43.63-146.6 97.84-42.16 73-32.55 161.88 17.14 224.16-23.38 56.75-19.85 121.6 11.42 175.78 42.18 73.02 124.1 109.15 202.94 97.23C419.58 898.63 477.51 928 540.12 928c84.35 0 156.58-52.8 185.68-126.98 60.89-8.13 115.3-43.62 146.6-97.84 42.16-73 32.55-161.88-17.14-224.16 23.38-56.75 19.85-121.6-11.42-175.78-42.18-73.02-124.1-109.15-202.94-97.23C603.42 157.38 545.49 128 482.88 128m0 61.54c35.6 0 68.97 13.99 94.22 37.74-1.93 1.03-3.92 1.84-5.83 2.94l-136.68 78.91a46.11 46.11 0 00-23.09 39.78l-.84 183.6-65.72-38.34V327.4c0-76 61.9-137.86 137.94-137.86m197.7 75.9c44.19 3.14 86.16 27.44 109.92 68.57 17.8 30.8 22.38 66.7 14.43 100.42-1.88-1.17-3.6-2.49-5.53-3.6l-136.73-78.91a46.23 46.23 0 00-46-.06l-159.47 91.1.36-76.02 144.5-83.41a137.19 137.19 0 0178.53-18.09m-396.92 55.4c-.07 2.2-.3 4.35-.3 6.56v157.75a46.19 46.19 0 0022.91 39.9l158.68 92.5-66.02 37.67-144.55-83.35c-65.86-38-88.47-122.53-50.45-188.34 17.78-30.78 46.55-52.69 79.73-62.68m340.4 79.93l144.54 83.35c65.86 38 88.47 122.53 50.45 188.34-17.78 30.78-46.55 52.69-79.73 62.68.07-2.19.3-4.34.3-6.55V570.85a46.19 46.19 0 00-22.9-39.9l-158.69-92.5zM511.8 464.84l54.54 31.79-.3 63.22-54.84 31.31-54.54-31.85.3-63.16zm100.54 58.65l65.72 38.35V728.6c0 76-61.9 137.86-137.94 137.86-35.6 0-68.97-13.99-94.22-37.74 1.93-1.03 3.92-1.84 5.83-2.94l136.68-78.9a46.11 46.11 0 0023.09-39.8zm-46.54 89.55l-.36 76.02-144.5 83.41c-65.85 38-150.42 15.34-188.44-50.48-17.8-30.8-22.38-66.7-14.43-100.42 1.88 1.17 3.6 2.5 5.53 3.6l136.74 78.91a46.23 46.23 0 0046 .06z"}}]},name:"open-a-i",theme:"outlined"};return oe.default=e,oe}var G={},ve={exports:{}},xe={exports:{}},rr;function Zt(){return rr||(rr=1,function(e){function t(a){if(Array.isArray(a))return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(xe)),xe.exports}var be={exports:{}},tr;function Qt(){return tr||(tr=1,function(e){function t(a,n){var i=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(i!=null){var o,s,c,d,u=[],p=!0,y=!1;try{if(c=(i=i.call(a)).next,n===0){if(Object(i)!==i)return;p=!1}else for(;!(p=(o=c.call(i)).done)&&(u.push(o.value),u.length!==n);p=!0);}catch(x){y=!0,s=x}finally{try{if(!p&&i.return!=null&&(d=i.return(),Object(d)!==d))return}finally{if(y)throw s}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(be)),be.exports}var je={exports:{}},ye={exports:{}},ar;function ea(){return ar||(ar=1,function(e){function t(a,n){(n==null||n>a.length)&&(n=a.length);for(var i=0,o=Array(n);i<n;i++)o[i]=a[i];return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ye)),ye.exports}var nr;function ra(){return nr||(nr=1,function(e){var t=ea();function a(n,i){if(n){if(typeof n=="string")return t(n,i);var o={}.toString.call(n).slice(8,-1);return o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set"?Array.from(n):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(n,i):void 0}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(je)),je.exports}var Ce={exports:{}},ir;function ta(){return ir||(ir=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ce)),Ce.exports}var or;function Br(){return or||(or=1,function(e){var t=Zt(),a=Qt(),n=ra(),i=ta();function o(s,c){return t(s)||a(s,c)||n(s,c)||i()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(ve)),ve.exports}var Se={exports:{}},we={exports:{}},_e={exports:{}},sr;function aa(){return sr||(sr=1,function(e){var t=ce().default;function a(n,i){if(t(n)!="object"||!n)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var s=o.call(n,i||"default");if(t(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(_e)),_e.exports}var lr;function na(){return lr||(lr=1,function(e){var t=ce().default,a=aa();function n(i){var o=a(i,"string");return t(o)=="symbol"?o:o+""}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(we)),we.exports}var cr;function zr(){return cr||(cr=1,function(e){var t=na();function a(n,i,o){return(i=t(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Se)),Se.exports}var Oe={exports:{}},Te={exports:{}},ur;function ia(){return ur||(ur=1,function(e){function t(a,n){if(a==null)return{};var i={};for(var o in a)if({}.hasOwnProperty.call(a,o)){if(n.includes(o))continue;i[o]=a[o]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Te)),Te.exports}var dr;function Lr(){return dr||(dr=1,function(e){var t=ia();function a(n,i){if(n==null)return{};var o,s,c=t(n,i);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(n);for(s=0;s<d.length;s++)o=d[s],i.includes(o)||{}.propertyIsEnumerable.call(n,o)&&(c[o]=n[o])}return c}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Oe)),Oe.exports}const $r=Yr(Xr);var K={},pr;function Hr(){if(pr)return K;pr=1,Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var e=Q(),t=(0,e.createContext)({});return K.default=t,K}var J={},Pe={exports:{}},fr;function Wr(){return fr||(fr=1,function(e){var t=zr();function a(i,o){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);o&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),s.push.apply(s,c)}return s}function n(i){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?a(Object(s),!0).forEach(function(c){t(i,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(s,c))})}return i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Pe)),Pe.exports}var A={},E={},Ie={exports:{}},hr;function oa(){return hr||(hr=1,function(e){function t(a){return a&&a.__esModule?a:{default:a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ie)),Ie.exports}var Ne={exports:{}},Re={exports:{}},mr;function sa(){return mr||(mr=1,function(e){function t(a,n,i){return n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Re)),Re.exports}var gr;function la(){return gr||(gr=1,function(e){var t=sa();function a(i,o){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);o&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),s.push.apply(s,c)}return s}function n(i){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?a(Object(s),!0).forEach(function(c){t(i,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(s,c))})}return i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Ne)),Ne.exports}var se={},vr;function ca(){if(vr)return se;vr=1,Object.defineProperty(se,"__esModule",{value:!0}),se.default=e;function e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return se}var le={},xr;function ua(){if(xr)return le;xr=1,Object.defineProperty(le,"__esModule",{value:!0}),le.default=e;function e(t,a){if(!t)return!1;if(t.contains)return t.contains(a);for(var n=a;n;){if(n===t)return!0;n=n.parentNode}return!1}return le}var br;function da(){if(br)return E;br=1;var e=oa().default;Object.defineProperty(E,"__esModule",{value:!0}),E.clearContainerCache=N,E.injectCSS=x,E.removeCSS=j,E.updateCSS=R;var t=e(la()),a=e(ca()),n=e(ua()),i="data-rc-order",o="data-rc-priority",s="rc-util-key",c=new Map;function d(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=h.mark;return v?v.startsWith("data-")?v:"data-".concat(v):s}function u(h){if(h.attachTo)return h.attachTo;var v=document.querySelector("head");return v||document.body}function p(h){return h==="queue"?"prependQueue":h?"prepend":"append"}function y(h){return Array.from((c.get(h)||h).children).filter(function(v){return v.tagName==="STYLE"})}function x(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,a.default)())return null;var l=v.csp,f=v.prepend,m=v.priority,C=m===void 0?0:m,T=p(f),_=T==="prependQueue",O=document.createElement("style");O.setAttribute(i,T),_&&C&&O.setAttribute(o,"".concat(C)),l!=null&&l.nonce&&(O.nonce=l?.nonce),O.innerHTML=h;var I=u(v),z=I.firstChild;if(f){if(_){var H=(v.styles||y(I)).filter(function(L){if(!["prepend","prependQueue"].includes(L.getAttribute(i)))return!1;var de=Number(L.getAttribute(o)||0);return C>=de});if(H.length)return I.insertBefore(O,H[H.length-1].nextSibling),O}I.insertBefore(O,z)}else I.appendChild(O);return O}function b(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=u(v);return(v.styles||y(l)).find(function(f){return f.getAttribute(d(v))===h})}function j(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=b(h,v);if(l){var f=u(v);f.removeChild(l)}}function g(h,v){var l=c.get(h);if(!l||!(0,n.default)(document,l)){var f=x("",v),m=f.parentNode;c.set(h,m),h.removeChild(f)}}function N(){c.clear()}function R(h,v){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=u(l),m=y(f),C=(0,t.default)((0,t.default)({},l),{},{styles:m});g(f,C);var T=b(v,C);if(T){var _,O;if((_=C.csp)!==null&&_!==void 0&&_.nonce&&T.nonce!==((O=C.csp)===null||O===void 0?void 0:O.nonce)){var I;T.nonce=(I=C.csp)===null||I===void 0?void 0:I.nonce}return T.innerHTML!==h&&(T.innerHTML=h),T}var z=x(h,C);return z.setAttribute(d(C),v),z}return E}var U={},jr;function pa(){if(jr)return U;jr=1,Object.defineProperty(U,"__esModule",{value:!0}),U.getShadowRoot=a,U.inShadow=t;function e(n){var i;return n==null||(i=n.getRootNode)===null||i===void 0?void 0:i.call(n)}function t(n){return e(n)instanceof ShadowRoot}function a(n){return t(n)?e(n):null}return U}var q={},yr;function fa(){if(yr)return q;yr=1,Object.defineProperty(q,"__esModule",{value:!0}),q.call=o,q.default=void 0,q.note=n,q.noteOnce=c,q.preMessage=void 0,q.resetWarned=i,q.warning=a,q.warningOnce=s;var e={},t=q.preMessage=function(u){};function a(d,u){}function n(d,u){}function i(){e={}}function o(d,u,p){!u&&!e[p]&&(d(!1,p),e[p]=!0)}function s(d,u){o(a,d,u)}function c(d,u){o(n,d,u)}return s.preMessage=t,s.resetWarned=i,s.noteOnce=c,q.default=s,q}var Cr;function Ee(){if(Cr)return A;Cr=1;var e=ue().default,t=te().default;Object.defineProperty(A,"__esModule",{value:!0}),A.generate=j,A.getSecondaryColor=g,A.iconStyles=void 0,A.isIconDefinition=x,A.normalizeAttrs=b,A.normalizeTwoToneColors=N,A.useInsertStyles=A.svgBaseProps=void 0,A.warning=y;var a=t(Wr()),n=t(ce()),i=$r,o=da(),s=pa(),c=t(fa()),d=e(Q()),u=t(Hr());function p(h){return h.replace(/-(.)/g,function(v,l){return l.toUpperCase()})}function y(h,v){(0,c.default)(h,"[@ant-design/icons] ".concat(v))}function x(h){return(0,n.default)(h)==="object"&&typeof h.name=="string"&&typeof h.theme=="string"&&((0,n.default)(h.icon)==="object"||typeof h.icon=="function")}function b(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(h).reduce(function(v,l){var f=h[l];switch(l){case"class":v.className=f,delete v.class;break;default:delete v[l],v[p(l)]=f}return v},{})}function j(h,v,l){return l?d.default.createElement(h.tag,(0,a.default)((0,a.default)({key:v},b(h.attrs)),l),(h.children||[]).map(function(f,m){return j(f,"".concat(v,"-").concat(h.tag,"-").concat(m))})):d.default.createElement(h.tag,(0,a.default)({key:v},b(h.attrs)),(h.children||[]).map(function(f,m){return j(f,"".concat(v,"-").concat(h.tag,"-").concat(m))}))}function g(h){return(0,i.generate)(h)[0]}function N(h){return h?Array.isArray(h)?h:[h]:[]}A.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var R=A.iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;return A.useInsertStyles=function(v){var l=(0,d.useContext)(u.default),f=l.csp,m=l.prefixCls,C=l.layer,T=R;m&&(T=T.replace(/anticon/g,m)),C&&(T="@layer ".concat(C,` {
`).concat(T,`
}`)),(0,d.useEffect)(function(){var _=v.current,O=(0,s.getShadowRoot)(_);(0,o.updateCSS)(T,"@ant-design-icons",{prepend:!C,csp:f,attachTo:O})},[])},A}var Sr;function Gr(){if(Sr)return J;Sr=1;var e=te().default,t=ue().default;Object.defineProperty(J,"__esModule",{value:!0}),J.default=void 0;var a=e(Lr()),n=e(Wr()),i=t(Q()),o=Ee(),s=["icon","className","onClick","style","primaryColor","secondaryColor"],c={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function d(y){var x=y.primaryColor,b=y.secondaryColor;c.primaryColor=x,c.secondaryColor=b||(0,o.getSecondaryColor)(x),c.calculated=!!b}function u(){return(0,n.default)({},c)}var p=function(x){var b=x.icon,j=x.className,g=x.onClick,N=x.style,R=x.primaryColor,h=x.secondaryColor,v=(0,a.default)(x,s),l=i.useRef(),f=c;if(R&&(f={primaryColor:R,secondaryColor:h||(0,o.getSecondaryColor)(R)}),(0,o.useInsertStyles)(l),(0,o.warning)((0,o.isIconDefinition)(b),"icon should be icon definiton, but got ".concat(b)),!(0,o.isIconDefinition)(b))return null;var m=b;return m&&typeof m.icon=="function"&&(m=(0,n.default)((0,n.default)({},m),{},{icon:m.icon(f.primaryColor,f.secondaryColor)})),(0,o.generate)(m.icon,"svg-".concat(m.name),(0,n.default)((0,n.default)({className:j,onClick:g,style:N,"data-icon":m.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},v),{},{ref:l}))};return p.displayName="IconReact",p.getTwoToneColors=u,p.setTwoToneColors=d,J.default=p,J}var V={},wr;function ha(){if(wr)return V;wr=1;var e=te().default;Object.defineProperty(V,"__esModule",{value:!0}),V.getTwoToneColor=o,V.setTwoToneColor=i;var t=e(Br()),a=e(Gr()),n=Ee();function i(s){var c=(0,n.normalizeTwoToneColors)(s),d=(0,t.default)(c,2),u=d[0],p=d[1];return a.default.setTwoToneColors({primaryColor:u,secondaryColor:p})}function o(){var s=a.default.getTwoToneColors();return s.calculated?[s.primaryColor,s.secondaryColor]:s.primaryColor}return V}var _r;function ma(){if(_r)return G;_r=1;var e=te().default,t=ue().default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var a=e(Er()),n=e(Br()),i=e(zr()),o=e(Lr()),s=t(Q()),c=e(Zr()),d=$r,u=e(Hr()),p=e(Gr()),y=ha(),x=Ee(),b=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,y.setTwoToneColor)(d.blue.primary);var j=s.forwardRef(function(g,N){var R=g.className,h=g.icon,v=g.spin,l=g.rotate,f=g.tabIndex,m=g.onClick,C=g.twoToneColor,T=(0,o.default)(g,b),_=s.useContext(u.default),O=_.prefixCls,I=O===void 0?"anticon":O,z=_.rootClassName,H=(0,c.default)(z,I,(0,i.default)((0,i.default)({},"".concat(I,"-").concat(h.name),!!h.name),"".concat(I,"-spin"),!!v||h.name==="loading"),R),L=f;L===void 0&&m&&(L=-1);var de=l?{msTransform:"rotate(".concat(l,"deg)"),transform:"rotate(".concat(l,"deg)")}:void 0,Jr=(0,x.normalizeTwoToneColors)(C),Be=(0,n.default)(Jr,2),Ur=Be[0],Vr=Be[1];return s.createElement("span",(0,a.default)({role:"img","aria-label":h.name},T,{ref:N,tabIndex:L,onClick:m,className:H}),s.createElement(p.default,{icon:h,primaryColor:Ur,secondaryColor:Vr,style:de}))});return j.displayName="AntdIcon",j.getTwoToneColor=y.getTwoToneColor,j.setTwoToneColor=y.setTwoToneColor,G.default=j,G}var Or;function ga(){if(Or)return W;Or=1;var e=ue().default,t=te().default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var a=t(Er()),n=e(Q()),i=t(Xt()),o=t(ma()),s=function(u,p){return n.createElement(o.default,(0,a.default)({},u,{ref:p,icon:i.default}))},c=n.forwardRef(s);return W.default=c,W}var va=ga();const Kr=Qr(va),qe="TD_ADMIN_SUSPECTS_PROMPT",Me="TD_ADMIN_SUSPECTS_PROMPT_SUFFIX",xa={ghibli:"Make this picture ghibli style in 2:3 aspect-ratio. It's a",fox:"Now make the image in the Family Guy style, aspect ratio at 2:3. It's a",pixar:"Now make the image in the 3d Pixar style, aspect ratio at 2:3. It's a",realistic:"Make this image realistic style, keep the Polaroid frame (don't make the image granular) and aspect ratio at 2:3. It's a",zootopia:"Make this image to look like a character from Zootopia, keep the Polaroid frame (don't make the image granular) and aspect ratio at 2:3. It's a"};function ba(){const[e,t]=P.useState(localStorage.getItem(qe)??"Make a pixar version of this image, keep the Polaroid frame and aspect ratio at 2:3. It's a"),[a,n]=P.useState(localStorage.getItem(Me)==="true"),{queryParams:i}=F(),o=c=>{const d=c.target.value;t(d),localStorage.setItem(qe,d)},s=c=>{n(c),localStorage.setItem(Me,c?"true":"false")};return r.jsxs(S,{align:"center",className:"my-2",gap:8,children:[r.jsx(w.Text,{children:"Custom Prompt:"}),r.jsx(De,{disabled:i.has("prompt"),onChange:o,placeholder:"AI Prompt",style:{width:320},value:e}),r.jsx(re,{checked:a,checkedChildren:"Include Features",onChange:s,unCheckedChildren:"No Features"})]})}function Tr({suspect:e,extendedInfo:t}){const a=Rr(),{notification:n}=Pr.useApp(),{queryParams:i}=F(),o=i.get("prompt"),s=()=>{console.log("promptQP",o);let c=o?xa[o]:localStorage.getItem(qe)??"";if(o==="zootopia"){if(!t.animal){n.error({message:"Error",description:"Suspect does not have an animal type defined."});return}c+=`${t.animal} `}if(!t.prompt){n.error({message:"Error",description:"Suspect does not have a prompt defined."});return}let d=`${c} ${t.prompt}`;localStorage.getItem(Me)==="true"&&(d+=` make sure it has the following features: ${e.features.join(", ")}`),console.log(d),a(d)};return r.jsx(D,{onClick:s,size:"small",children:r.jsx(Kr,{})})}function ja({extendedInfo:e}){const t=Rr(),a=()=>{let n="";e.persona.en&&(n+=`This one is: "${e.persona.en}" `),n+=`Here is some info about the character: ${e.prompt}`,e.economicClass&&(n+=`(${e.economicClass} class)`),e.educationLevel&&(n+=`(${e.educationLevel} education)`),e.sexualOrientation&&(n+=`(${e.sexualOrientation})`),t(n)};return r.jsx(D,{onClick:a,size:"small",children:r.jsx(Kr,{})})}function ya({suspect:e,suspectExtendedInfo:t,addSuspectExtendedInfo:a}){const[n,i]=P.useState(!1),[o,s]=P.useState(""),{message:c}=Pr.useApp(),[d,u]=P.useState(null),p=()=>{const b=JSON.parse(o),j={...t,...b};a(e.id,j),c.success("Suspect extended info updated successfully"),i(!1),s("")},y=b=>{u(null);try{const j=JSON.parse(b),g=["persona","prompt","description","animal","occupation","sexualOrientation","ethnicity","economicClass","educationLevel","traits"];if(Object.keys(j).some(R=>!g.includes(R)))throw new Error(`Invalid keys found: ${Object.keys(j).filter(R=>!g.includes(R)).join(", ")}`)}catch(j){u(j instanceof Error?j.message:"Invalid JSON")}s(b)},x=()=>{i(!1),u(null),s("")};return r.jsxs(r.Fragment,{children:[r.jsx(Ir,{title:"Add JSON partial data",children:r.jsx(D,{icon:r.jsx(Ue,{}),onClick:()=>i(!0),size:"small",children:"Add"})}),r.jsxs(et,{okButtonProps:{disabled:!!d||!o.trim(),icon:r.jsx(Ue,{})},onCancel:x,onOk:p,open:n,title:`JSON Partial Data for ${e.name} (${e.id})`,children:[r.jsx($e,{size:"small",children:r.jsxs($e.Panel,{header:"Instructions",children:[r.jsx("p",{children:"You can add or update specific fields for this suspect by providing a JSON partial data. This allows you to modify only the fields you want without affecting the rest of the data."}),r.jsx("p",{children:"Make sure the JSON is properly formatted."}),"Only include the fields you want to add or update for this suspect. For example:",r.jsx("pre",{children:`{
  "occupation": "Detective",
  "traits": ["Brave", "Clever"]
}`}),"This will update the occupation and traits fields for the suspect."]},"instructions")}),r.jsx(De.TextArea,{autoSize:{minRows:10,maxRows:20},defaultValue:"{}",onChange:b=>y(b.target.value),placeholder:"Paste JSON partial data here",value:o}),d&&r.jsx(rt,{message:`Error: ${d}`,type:"error"})]})]})}function Ca({suspects:e,suspectsExtendedInfos:t,addSuspectEntryToUpdate:a,addExtendedInfoEntryToUpdate:n,personalityOptions:i}){const{removeParam:o,queryParams:s,addParam:c}=F(),d=s.get("suspectId"),u=s.get("drawerTab")||"Basic",p=e[d??""],y=(b,j,g)=>{const N=e[b];N&&N[j]!==g&&a(b,{...N,[j]:g})},x=(b,j,g)=>{const N=t[b];N&&N[j]!==g&&n(b,{...N,[j]:g})};return p?r.jsx(Ar,{footer:r.jsx(Sa,{}),onClose:()=>o("suspectId"),open:!!p,placement:"right",title:p.name.pt,width:400,children:r.jsxs("div",{className:"suspect__drawer",children:[r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1.25fr",height:"100%",overflowY:"auto"},children:[r.jsx("div",{children:r.jsx("div",{style:{top:64,position:"fixed"},children:r.jsx(ke,{cardId:p.id,cardWidth:100})})}),r.jsxs(S,{gap:4,vertical:!0,children:[r.jsx(kr,{onChange:b=>c("drawerTab",b),options:["Basic","Features","Extended"],value:u}),r.jsx(M,{defaultValue:p.name.pt,label:"Name in PT",prefix:r.jsx("span",{children:"ðŸ‡§ðŸ‡·"}),suspect:p,suspectId:p.id,updater:a,valueKey:"name.pt"}),r.jsx(M,{defaultValue:p.name.en,label:"Name in EN",prefix:r.jsx("span",{children:"ðŸ‡ºðŸ‡¸"}),suspect:p,suspectId:p.id,updater:a,valueKey:"name.en"}),r.jsx("div",{children:r.jsx(ee,{onChange:b=>y(p.id,"age",b),options:Mt,placeholder:"Select Age",style:{width:128},value:p.age})})]})]}),u==="Basic"&&r.jsx(wa,{suspect:p,updateSuspectKeyValue:y},d),u==="Features"&&r.jsx(Oa,{addEntryToUpdate:a,suspect:p},d),u==="Extended"&&r.jsx(_a,{addExtendedInfoEntryToUpdate:n,personalityOptions:i,suspect:p,suspectExtendedInfo:t[p.id]||{},updateExtendedKeyValue:x},d)]})}):null}function Sa(){const{queryParams:e,addParam:t}=F(),a=e.get("suspectId")??"",n=()=>{const o=Number(a?.split("-")[1])??0;o&&t("suspectId",`us-${(o+1).toString().padStart(3,"0")}`)},i=()=>{const o=Number(a?.split("-")[1])??0;o&&o>1&&t("suspectId",`us-${(o-1).toString().padStart(3,"0")}`)};return r.jsxs(S,{gap:8,justify:"end",children:[r.jsx(D,{onClick:i,children:"Previous"}),r.jsx(D,{onClick:n,children:"Next"})]})}function M({label:e,defaultValue:t,suspect:a,suspectId:n,updater:i,valueKey:o,...s}){const[c,d]=P.useState(t||"");P.useEffect(()=>{t&&d(t)},[a.id]);const u=()=>{if(n&&c!==t){const p=k.cloneDeep(a);k.set(p,o,c),i(a.id,p)}};return r.jsx(De,{onBlur:u,onChange:p=>d(p.target.value),placeholder:e?String(e):"",value:c,...s})}function B({label:e,suspectId:t,valueKey:a,value:n,options:i,updater:o}){return r.jsxs(S,{vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:e}),r.jsx(pt.Group,{onChange:s=>o(t,a,s.target.value),options:i,size:"small",style:{display:"flex",flexDirection:"column",gap:3},value:n})]})}function Ae({label:e,suspectId:t,valueKey:a,value:n,options:i,updater:o,disabled:s}){return r.jsxs(S,{vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:e}),r.jsx(ee,{disabled:s,onChange:c=>o(t,a,c),options:i,placeholder:typeof e=="string"?e:"",style:{width:"100%",marginTop:6},value:n})]})}function wa({suspect:e,updateSuspectKeyValue:t}){return r.jsxs("div",{className:"grid grid-2 gap-4 my-4",children:[r.jsx(B,{label:"Gender",options:Dt,suspectId:e.id,updater:t,value:e.gender,valueKey:"gender"}),r.jsx(B,{label:"Race",options:Ft,suspectId:e.id,updater:t,value:e.race,valueKey:"race"}),r.jsx(B,{label:"Build",options:Et,suspectId:e.id,updater:t,value:e.build,valueKey:"build"}),r.jsx(B,{label:"Height",options:Bt,suspectId:e.id,updater:t,value:e.height,valueKey:"height"})]})}function _a({suspect:e,suspectExtendedInfo:t,updateExtendedKeyValue:a,addExtendedInfoEntryToUpdate:n,personalityOptions:i}){const o=r.jsx(Ir,{title:"This field is inferred from Testimony Answers",children:r.jsx(Rt,{})}),s=Ta(n),c=()=>{s(t)};return r.jsxs(r.Fragment,{children:[r.jsxs(S,{gap:8,vertical:!0,children:[r.jsxs(w.Title,{italic:!0,level:5,children:["Extended Info"," ",r.jsx(ya,{addSuspectExtendedInfo:n,suspect:e,suspectExtendedInfo:t})]}),r.jsxs(S,{gap:4,vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:"Persona"}),r.jsx(M,{defaultValue:t.persona?.pt||"",label:"Persona in PT",prefix:r.jsx("span",{children:"ðŸ‡§ðŸ‡·"}),suspect:t,suspectId:e.id,updater:n,valueKey:"persona.pt"}),r.jsx(M,{defaultValue:t.persona?.en||"",label:"Persona in EN",prefix:r.jsx("span",{children:"ðŸ‡ºðŸ‡¸"}),suspect:t,suspectId:e.id,updater:n,valueKey:"persona.en"})]}),r.jsxs(S,{gap:4,vertical:!0,children:[r.jsxs(w.Text,{strong:!0,children:["Prompt ",r.jsx(ja,{extendedInfo:t})]}),r.jsx(M,{defaultValue:t.prompt||"",label:"Prompt",suspect:t,suspectId:e.id,updater:n,valueKey:"prompt"})]}),r.jsxs(S,{gap:4,vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:"Description"}),r.jsx(M,{defaultValue:t.description||"",label:"Description",suspect:t,suspectId:e.id,updater:n,valueKey:"description"})]})]}),r.jsxs("div",{className:"grid grid-2 gap-4 my-4",children:[r.jsxs(S,{gap:6,vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:"Animal"}),r.jsx(M,{defaultValue:t.animal||"",label:"Animal",suspect:t,suspectId:e.id,updater:n,valueKey:"animal"})]}),r.jsxs(S,{gap:6,vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:"Occupation"}),r.jsx(M,{defaultValue:t.occupation||"",label:"Occupation",suspect:t,suspectId:e.id,updater:n,valueKey:"occupation"})]}),r.jsxs(S,{gap:6,vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:"Ethnicity"}),r.jsx(M,{defaultValue:t.ethnicity||"",label:"Ethnicity",suspect:t,suspectId:e.id,updater:n,valueKey:"ethnicity"})]}),r.jsx(Ae,{disabled:!0,label:r.jsxs(r.Fragment,{children:["Zodiac Sign ",o]}),options:Lt,suspectId:e.id,updater:a,value:t.zodiacSign,valueKey:"zodiacSign"}),r.jsx(Ae,{disabled:!0,label:r.jsxs(r.Fragment,{children:["Alignment ",o]}),options:$t,suspectId:e.id,updater:a,value:t.alignment,valueKey:"alignment"}),r.jsx(Ae,{disabled:!0,label:r.jsxs(r.Fragment,{children:["MBTI ",o]}),options:zt.map(d=>({label:d,value:d})),suspectId:e.id,updater:a,value:t.mbti,valueKey:"mbti"}),r.jsx("div",{style:{gridColumn:"span 2"},children:r.jsx(D,{block:!0,icon:r.jsx(dt,{}),onClick:c,size:"small",children:"Infer fields from Testimonies"})}),r.jsx(B,{label:"Sexual Orientation",options:qr,suspectId:e.id,updater:a,value:t.sexualOrientation,valueKey:"sexualOrientation"}),r.jsx(B,{label:"Economic Class",options:Dr,suspectId:e.id,updater:a,value:t.economicClass,valueKey:"economicClass"}),r.jsx(B,{label:"Education Level",options:Mr,suspectId:e.id,updater:a,value:t.educationLevel,valueKey:"educationLevel"}),r.jsxs(S,{gap:4,vertical:!0,children:[r.jsx(w.Text,{strong:!0,children:"Traits"}),r.jsx(ee,{defaultValue:t.traits??[],mode:"tags",onChange:d=>a(e.id,"traits",d.sort()),options:i.map(d=>({label:d,value:d})),placeholder:"Traits",size:"small",style:{width:"100%"}})]})]})]})}function Oa({suspect:e,addEntryToUpdate:t}){const a=e.features??[],n=i=>{const o=a.includes(i)?a.filter(s=>s!==i):[...a,i];t(e.id,{...e,features:o})};return r.jsxs(S,{gap:6,vertical:!0,children:[r.jsx(w.Title,{italic:!0,level:5,children:"Image Features for gb style"}),r.jsx("div",{className:"grid grid-2",children:Fe.map(i=>r.jsxs("div",{className:"my-4",children:[r.jsx(w.Text,{strong:!0,children:i.title}),i.features.map(o=>r.jsxs(S,{className:"my-2",gap:4,children:[r.jsx(re,{checked:a.includes(o.id),onChange:()=>n(o.id),size:"small"})," ",o.label]},o.id))]},i.title))})]})}function Ta(e){const[t,a]=P.useState(!0),n=Le("testimony-questions-pt",{enabled:t}),i=Le("testimony-answers",{select:ct,enabled:t});return async s=>{const c=n.data,d=i.data;if(!c||!d||!t){console.log("Enabling testimony queries for inference"),a(!0);return}if(!c||!d){console.warn("Testimonies or answers data not available");return}const u=Object.keys(c).reduce((m,C)=>{const T=ut(s.id,C,d?.[C]||{});return T.enoughData&&(m[C]=T),m},{}),p={},y={},x={};Object.values(c).forEach(m=>{const C=u?.[m.id]?.projection;if(!C)return;const T=C==="ðŸ‘";m.mbti.forEach(_=>{_.startsWith("x")||(T?p[_]=(p[_]||0)+2:p[_]=(p[_]||0)-1)}),m.zodiac.forEach(_=>{!_||_.startsWith("x")||(T?y[_]=(y[_]||0)+2:y[_]=(y[_]||0)-1)}),m.alignment.forEach(_=>{if(!_||_.startsWith("x"))return;let[O,I]=_.split("-");O&&!O.startsWith("x")&&(O={True:"NeutralX",Neutral:"NeutralX",False:"NeutralX"}[O]||O,T?x[O]=(x[O]||0)+2:x[O]=(x[O]||0)-1),I&&!I.startsWith("x")&&(I={Good:"NeutralY",Neutral:"NeutralY",Evil:"NeutralY"}[I]||I,T?x[I]=(x[I]||0)+2:x[I]=(x[I]||0)-1)})});const b=[(p.E||0)>=(p.I||0)?"E":"I",(p.S||0)>=(p.N||0)?"S":"N",(p.T||0)>=(p.F||0)?"T":"F",(p.J||0)>=(p.P||0)?"J":"P"].join(""),j=Object.entries(y).sort((m,C)=>C[1]-m[1]),g=j.length>0&&(j.length===1||j[0][1]>j[1][1])?j[0][0]:"Undefined",N=["Lawful","NeutralX","Chaotic"],R=["Good","NeutralY","Evil"],h=Object.entries(x).filter(([m])=>N.includes(m)).sort((m,C)=>C[1]-m[1]).map(([m])=>m&&(m==="NeutralX"?"Neutral":m)),v=Object.entries(x).filter(([m])=>R.includes(m)).sort((m,C)=>C[1]-m[1]).map(([m])=>m&&(m==="NeutralY"?"Neutral":m));let l=`${h[0]||"Neutral"}-${v[0]||"Neutral"}`;l=l.replace("Neutral-Neutral","True Neutral");const f={...s,mbti:b,zodiacSign:g,alignment:l};e(s.id,f)}}function Pa({suspectsQuery:e,suspectsExtendedInfoQuery:t}){const a=e.data,n=t.data,{addParam:i,queryParams:o}=F(),[s,c]=P.useState("cards"),d=o.get("variant")??"gb",u=o.get("sortBy")??"id",p=Number(o.get("cardsPerRow"))||10,y=o.get("activeFeature")||"",x=o.get("activeExtendedInfo")||"",b=o.get("suspectId"),[j,g]=lt(p,{margin:0,gap:8}),N=P.useMemo(()=>k.orderBy(Object.values(a),l=>u==="name.pt"?ne(l.name.pt).toLowerCase():u==="name.en"?ne(l.name.en).toLowerCase():l[u]??l.id,["asc"]),[a,u]),R=P.useMemo(()=>{const l=Object.values(n).reduce((f,m)=>(m.traits&&m.traits.forEach(C=>{f.add(C)}),f),new Set);return Array.from(l).sort()},[n]),h=(l,f)=>{const m=a[l];if(!m)return;const C=m.features||[];C.includes(f)?e.addEntryToUpdate(l,{...m,features:C.filter(T=>T!==f)}):e.addEntryToUpdate(l,{...m,features:[...C,f]})},v=P.useMemo(()=>[{title:"ID",dataIndex:"id",key:"id",width:80,sorter:(l,f)=>Number(l.id.split("-").at(-1))-Number(f.id.split("-").at(-1)),render:(l,f)=>r.jsxs(S,{align:"center",gap:4,vertical:!0,children:[r.jsxs(S,{align:"center",gap:6,children:[r.jsx(ie,{children:l})," ",r.jsx(Tr,{extendedInfo:n[f.id],suspect:f})]}),r.jsx(ke,{cardId:f.id,cardWidth:j/1.5,className:"suspect__image"})]})},{title:"Name (PT)",dataIndex:["name","pt"],key:"name.pt",sorter:(l,f)=>ne(l.name.pt.toLocaleLowerCase()).localeCompare(ne(f.name.pt.toLocaleLowerCase())),render:(l,f)=>r.jsxs(S,{vertical:!0,children:[r.jsx(w.Text,{children:f.name.pt}),r.jsx(w.Text,{children:f.name.en})]})},{title:"Gender",dataIndex:"gender",key:"gender",sorter:(l,f)=>l.gender.localeCompare(f.gender)},{title:"Age",dataIndex:"age",key:"age",render:l=>r.jsx(ie,{children:l}),sorter:(l,f)=>l.age.localeCompare(f.age)},{title:"Race",dataIndex:"race",key:"race",sorter:(l,f)=>l.race.localeCompare(f.race)},{title:"Build",dataIndex:"build",key:"build",sorter:(l,f)=>l.build.localeCompare(f.build)},{title:"Height",dataIndex:"height",key:"height",sorter:(l,f)=>l.height.localeCompare(f.height)},{title:"Features",dataIndex:"features",key:"features",sorter:(l,f)=>l.features.length-f.features.length,render:(l,f)=>r.jsxs(S,{gap:8,vertical:!0,children:[r.jsx(S,{gap:8,wrap:"wrap",children:l.map(m=>r.jsx(ie,{children:m},m))}),!!y&&r.jsxs(S,{className:"mt-2 mb-4",gap:8,children:[r.jsxs(w.Text,{keyboard:!0,children:[y,":"]}),r.jsx(re,{checked:l?.includes(y),checkedChildren:"âœ“",onChange:()=>h(f.id,y),unCheckedChildren:"âœ—"})]})]})},{title:"Edit",dataIndex:"id",key:"edit",width:80,render:l=>r.jsx(D,{block:!0,onClick:()=>i("suspectId",l),size:"small",children:r.jsx(Ve,{})})}],[y,j]);return r.jsxs(r.Fragment,{children:[r.jsxs(S,{align:"center",justify:"space-between",children:[r.jsxs(w.Title,{level:2,children:["Total Suspects: ",N.length]}),r.jsx(kr,{onChange:l=>c(l),options:[{value:"cards",icon:r.jsx(ft,{})},{value:"table",icon:r.jsx(tt,{})}]})]}),r.jsxs(He,{style:{position:"sticky",top:0,background:"black",zIndex:1,width:"100%"},children:[r.jsx(Vt,{})," ",r.jsx(Jt,{})]}),r.jsx(ba,{}),r.jsxs(at.PreviewGroup,{children:[s==="cards"&&r.jsx(He,{className:"my-2",ref:g,wrap:!0,children:N.map(l=>{const f=n[l.id];return r.jsxs("div",{className:"suspect",style:{width:`${j}px`},children:[r.jsx(ke,{cardId:l.id,cardWidth:j,className:"suspect__image"}),r.jsxs("div",{className:"suspect__name",children:[r.jsxs(S,{align:"center",gap:3,children:[r.jsx(ie,{children:l.id})," ",r.jsx(Tr,{extendedInfo:f,suspect:l})," ",!f.prompt&&r.jsx(qt,{style:{color:"red"}})," ",!!f.animal&&r.jsx(Pt,{style:{color:"sandybrown"}})]}),r.jsxs("div",{style:{backgroundColor:l.name.pt?"transparent":"red"},children:["ðŸ‡§ðŸ‡· ",l.name.pt]}),r.jsx(w.Text,{className:Y({"missing-value":!f.persona.pt}),ellipsis:!0,italic:!0,type:"secondary",children:r.jsx("small",{children:k.truncate(f.persona.pt||"-",{length:18})})}),r.jsxs("div",{style:{backgroundColor:l.name.en?"transparent":"red"},children:["ðŸ‡ºðŸ‡¸ ",l.name.en]}),r.jsx(w.Text,{className:Y({"missing-value":!f.persona.en}),ellipsis:!0,italic:!0,type:"secondary",children:r.jsx("small",{children:k.truncate(f.persona.en||"-",{length:18})})}),r.jsxs("div",{className:"suspect__info",style:Ia(l),children:[r.jsxs("div",{children:[r.jsxs("div",{children:[l.gender==="male"?r.jsx(ht,{}):r.jsx(mt,{})," ",l.age]}),r.jsx("div",{children:r.jsx("em",{children:l.race})})]}),r.jsxs("div",{className:"uppercase",children:[r.jsx(gt,{}),r.jsx("br",{}),l.build.charAt(0)]}),r.jsxs("div",{className:"uppercase",children:[r.jsx(vt,{}),r.jsx("br",{}),l.height.charAt(0)]}),r.jsxs("div",{className:Y({"missing-value":!l.features?.length}),children:[l?.features?.length??0," feats"]}),r.jsxs("div",{className:Y({"missing-value":!f?.traits?.length,"missing-value-alt":!f?.description}),children:[f?.traits?.length??0," traits"]})]}),r.jsx(D,{block:!0,danger:!l?.features||l?.features?.length<2,onClick:()=>i("suspectId",l.id),size:"small",children:r.jsx(Ve,{})}),r.jsx(Yt,{activeFeature:y,entry:l,updateSuspectFeature:h}),r.jsx(Ut,{activeExtendedInfo:x,addEntryToUpdate:t.addEntryToUpdate,entry:f})]})]},l.id)})},d),s==="table"&&r.jsx(xt,{columns:v,dataSource:N,pagination:!1,rowKey:"id"})]}),r.jsx(Ca,{addExtendedInfoEntryToUpdate:t.addEntryToUpdate,addSuspectEntryToUpdate:e.addEntryToUpdate,personalityOptions:R,suspects:a,suspectsExtendedInfos:t.data},b)]})}const Ia=e=>!e.build||!e.height||e.build.length===1||e.height.length===1?{borderColor:"red"}:{};function $(e,t){return k.orderBy(Object.entries(e).map(([a,n])=>({key:a,label:k.capitalize(a),value:n,percentage:Math.round(n/t*100)})),["percentage"],["desc"])}function Na({data:e}){const[t,a]=P.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(D,{block:!0,onClick:()=>a(!0),children:"See Stats"}),t&&r.jsx(Ra,{data:e,onClose:()=>a(!1),open:t})]})}function Ra({data:e,open:t,onClose:a}){const{ages:n,races:i,genders:o,builds:s,heights:c}=P.useMemo(()=>{const u={},p={},y={},x={},b={};Object.values(e).forEach(g=>{g.age||console.log("ðŸŽ‚ Missing age for suspect:",g.id),u[g.age]=(u[g.age]??0)+1,g.race||console.log("ðŸŒ Missing race for suspect:",g.id),p[g.race]=(p[g.race]??0)+1,g.gender||console.log("âš§ï¸ Missing gender for suspect:",g.id),y[g.gender]=(y[g.gender]??0)+1,g.build||console.log("ðŸ’ª Missing build for suspect:",g.id),x[g.build||"?"]=(x[g.build||"?"]??0)+1,g.height||console.log("ðŸ“ Missing height for suspect:",g.id),b[g.height||"?"]=(b[g.height||"?"]??0)+1});const j=Object.keys(e).length;return{ages:$(u,j),races:$(p,j),genders:$(y,j),builds:$(x,j),heights:$(b,j)}},[e]),d=P.useMemo(()=>{const u={};Object.values(e).forEach(x=>{x.features?.forEach(b=>{u[b]=(u[b]??0)+1})});const p=Object.keys(e).length,y=Fe.reduce((x,b)=>{const j=b.features.map(g=>g.id);return x.push(...j),x},[]);return k.orderBy($(u,p),x=>y.indexOf(x.key),["asc"])},[e]);return r.jsxs(Ar,{onClose:a,open:t,placement:"right",title:"Suspects Statistics",width:400,children:[r.jsx(w.Text,{strong:!0,children:"Race"}),r.jsx("ul",{className:"statistic__list",children:i.map(u=>r.jsxs("li",{children:[r.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),r.jsx(w.Text,{strong:!0,children:"Gender"}),r.jsx("ul",{className:"statistic__list",children:o.map(u=>r.jsxs("li",{children:[r.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),r.jsx(w.Text,{strong:!0,children:"Age"}),r.jsx("ul",{className:"statistic__list",children:n.map(u=>r.jsxs("li",{children:[r.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),r.jsx(w.Text,{strong:!0,children:"Build"}),r.jsx("ul",{className:"statistic__list",children:s.map(u=>r.jsxs("li",{children:[r.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),r.jsx(w.Text,{strong:!0,children:"Height"}),r.jsx("ul",{className:"statistic__list",children:c.map(u=>r.jsxs("li",{children:[r.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),r.jsx(w.Text,{strong:!0,children:"Features"}),r.jsx("ul",{className:"statistic__list",children:d.map(u=>r.jsxs("li",{children:[r.jsx("strong",{children:u.label})," - ",u.percentage,"% (",u.value,")"]},u.key))})]})}const Aa=[{value:"ct",label:"Cartoon (deprecated)"},{value:"ai",label:"AI (deprecated)"},{value:"md",label:"Models (deprecated)"},{value:"wc",label:"Wacky (deprecated)"}],ka=[{value:"id",label:"Id"},{value:"name.pt",label:"Name (PT)"},{value:"name.en",label:"Name (EN)"},{value:"ethnicity",label:"Ethnicity"},{value:"gender",label:"Gender"},{value:"age",label:"Age"},{value:"height",label:"Height"},{value:"build",label:"Build"}],qa=[{value:"",label:"No Prompt/Custom"},{value:"ghibli",label:"Ghibli Style"},{value:"realistic",label:"Realistic Style"},{value:"pixar",label:"Pixar Style"},{value:"fox",label:"Fox Style"},{value:"zootopia",label:"Zootopia Style"}];function Ma({suspectsQuery:e,suspectsExtendedInfoQuery:t}){const{addParam:a,queryParams:n}=F();return r.jsxs(jt,{children:[r.jsxs(S,{gap:12,vertical:!0,children:[r.jsx(Ke,{dirt:JSON.stringify(e.entriesToUpdate),isDirty:e.isDirty,isSaving:e.isSaving,onSave:e.save,children:"Save Suspects"}),r.jsx(We,{block:!0,data:()=>Da(e.data),disabled:e.isDirty,fileName:"suspects.json",hasNewData:e.hasFirestoreData}),r.jsx(S,{justify:"center",children:r.jsx(Ge,{docId:"suspects",path:"tdr",queryKey:["tdr","suspects"]})})]}),r.jsx(ae,{}),r.jsxs(S,{gap:12,vertical:!0,children:[r.jsx(Ke,{dirt:JSON.stringify(t.entriesToUpdate),isDirty:t.isDirty,isSaving:t.isSaving,onSave:t.save,children:"Save Extended"}),r.jsx(We,{block:!0,data:()=>Fa(t.data),disabled:t.isDirty,fileName:"suspects-extended-info.json",hasNewData:t.hasFirestoreData}),r.jsx(S,{justify:"center",children:r.jsx(Ge,{docId:"suspectsExtendedInfo",path:"tdr",queryKey:["tdr","suspectsExtendedInfo"]})})]}),r.jsx(ae,{}),r.jsx(yt,{}),r.jsx(ae,{}),r.jsxs(nt,{layout:"vertical",children:[r.jsx(bt,{label:"Cards Per Row",max:12,min:2,onChange:i=>a("cardsPerRow",i),value:Number(n.get("cardsPerRow")??"10")}),r.jsx(pe,{label:"Sort By",onChange:i=>a("sortBy",i),options:ka,value:n.get("sortBy")??"id"}),r.jsx(pe,{label:"Other Versions",onChange:i=>a("variant",i),options:Aa,value:n.get("variant")??"gb"}),r.jsx(pe,{label:"Prompt Style",onChange:i=>a("prompt",i),options:qa,value:n.get("prompt")??""})]}),r.jsx(ae,{}),r.jsx(Na,{data:e.data})]})}function Da(e){const t=k.cloneDeep(e);return Nr(t,["id","name","decks","gender","race","ethnicity","age","height","build","features","gbExclusive"])}function Fa(e){return Nr(e,["id","prompt","persona","description","animal","occupation","sexualOrientation","ethnicity","economicClass","educationLevel","traits"])}function Pn(){const e=Je({tdrResourceName:"suspects",firestoreDataCollectionName:"suspects",serialize:!0}),t=Je({tdrResourceName:"suspects-extended-info",firestoreDataCollectionName:"suspectsExtendedInfo",serialize:!0});return r.jsx(it,{subtitle:"Information",title:"Suspects",children:r.jsxs(ze,{hasSider:!0,children:[r.jsx(st,{children:r.jsx(Ma,{suspectsExtendedInfoQuery:t,suspectsQuery:e})}),r.jsx(ze.Content,{className:"content",children:r.jsx(ot,{error:e.error||t.error,hasResponseData:!k.isEmpty(e.data)&&!k.isEmpty(t.data),isLoading:e.isLoading||t.isLoading,children:r.jsx(Pa,{suspectsExtendedInfoQuery:t,suspectsQuery:e})})})]})})}export{Pn as default};
