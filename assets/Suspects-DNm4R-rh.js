import{r as j,a as P,_ as D,j as e,T as b,I as F,B as I,D as T,P as G,L as H}from"./index-BbidfSUH.js";import{D as O}from"./DataLoadingWrapper-Cs3hDOSI.js";import{l as v,P as L}from"./useBaseUrl-CiyIh1Nd.js";import{I as k}from"./ImageCard-C43c51T0.js";import{u as M}from"./useCardWidth-Ct1ScKW5.js";import{u as E}from"./useQueryParams-rJ2ApAyt.js";import{D as w}from"./EditableFields-d2ORozog.js";import{g as B}from"./utils-CTkqWQqX.js";import{D as y}from"./index-oeyb70Nu.js";import{F as S}from"./index-BSGoRmzj.js";import{S as N}from"./index-Gk41hASj.js";import{R as C}from"./index-olQcWg-x.js";import{S as z}from"./index-CWYGbqys.js";import{S as A}from"./index-BjuHWnvz.js";import{T as $}from"./index-D2itjBnv.js";import{R as W,a as V}from"./WomanOutlined-EaPMrXHF.js";import{R as q,a as K}from"./ColumnWidthOutlined-D-e-Ugx1.js";import{a as _,b as Y}from"./FilterEntries-CZdb1tfK.js";import{S as J}from"./SiderContent-CCO9yCl9.js";import{D as Q}from"./DownloadButton-DwWdGNIV.js";import{S as X}from"./SaveButton-wgwxAJGY.js";import{a as Z}from"./index-C_Q8hx2Z.js";import{u as U}from"./useResourceFirestoreData-BfTP7Cg1.js";import"./useCopyToClipboardFunction-Dpp3Y63C.js";import"./LanguageFlag-C0fPDiTh.js";import"./index-C9gMjVJ0.js";import"./Input-MaIaS5vU.js";import"./FireFilled-BKHtwEDc.js";import"./IdcardOutlined--NAwwgJB.js";import"./gapSize-U1swVQyS.js";import"./index-Bqci_POk.js";import"./index-Dceyr4gg.js";import"./moment-C5S46NFB.js";import"./SaveOutlined-D6p3qNcj.js";import"./constants-Deaxv8Z4.js";import"./Item-BRQtL1oz.js";import"./useGetFirestoreDoc-DLIe4LQj.js";import"./useTDResource-CjZEFtS5.js";import"./useUpdateFirestoreDoc-CHdHqpfx.js";import"./useMutation-Dz-az7RG.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},ae=function(r,n){return j.createElement(P,D({},r,{ref:n,icon:ee}))},ie=j.forwardRef(ae);const se=["18-21","21-30","30-40","40-50","50-60","50-70"].map(a=>({label:a,value:a})),te=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Non-binary",value:"non-binary"},{label:"Other",value:"other"}],le=[{label:"Caucasian",value:"caucasian"},{label:"Black",value:"black"},{label:"Asian",value:"asian"},{label:"Latino",value:"latino"},{label:"Indigenous",value:"indigenous"},{label:"Indian",value:"indian"},{label:"Middle Eastern",value:"middle-eastern"},{label:"Mixed",value:"mixed"},{label:"Other",value:"other"}];function re({data:a,addEntryToUpdate:r}){const{removeParam:n,queryParams:c}=E(),t=c.get("suspectId"),d=c.get("version")??"gb",i=a[t??""];return i?e.jsx(y,{title:i.name.pt,placement:"right",onClose:()=>n("suspectId"),open:!!i,width:400,children:e.jsxs("div",{className:"suspect__drawer",children:[e.jsxs("div",{className:"grid grid-2",children:[e.jsx(k,{id:B(i.id,d),width:100}),e.jsxs(S,{vertical:!0,gap:4,children:[e.jsx(w,{value:i.name,language:"pt",onChange:u=>{r(i.id,{...i,name:{...i.name,pt:u.target.value}})}}),e.jsx(w,{value:i.name,language:"en",onChange:u=>{r(i.id,{...i,name:{...i.name,en:u.target.value}})}}),e.jsx("div",{children:e.jsx(N,{value:i.age,size:"small",onChange:u=>{r(i.id,{...i,age:u})},options:se,style:{width:80}})}),e.jsx("div",{children:e.jsx(N,{value:i.gender,size:"small",onChange:u=>{r(i.id,{...i,gender:u})},options:te,style:{width:120}})}),e.jsx("div",{children:e.jsx(N,{value:i.ethnicity,size:"small",onChange:u=>{r(i.id,{...i,ethnicity:u})},options:le,style:{width:150}})})]})]}),e.jsxs("div",{className:"grid grid-2",children:[e.jsxs(S,{vertical:!0,children:[e.jsx(b.Text,{strong:!0,children:"Build"}),e.jsx(C.Group,{size:"small",value:i.build,onChange:u=>{r(i.id,{...i,build:u.target.value})},options:ue,style:{display:"flex",flexDirection:"column",gap:3}})]}),e.jsxs(S,{vertical:!0,children:[e.jsx(b.Text,{strong:!0,children:"Height"}),e.jsx(C.Group,{size:"small",value:i.height,onChange:u=>{r(i.id,{...i,height:u.target.value})},options:ce,style:{display:"flex",flexDirection:"column",gap:3}})]})]}),e.jsx(ne,{suspect:i,addEntryToUpdate:r})]})}):null}function ne({suspect:a,addEntryToUpdate:r}){const n=a.features??[],c=t=>{const d=n.includes(t)?n.filter(i=>i!==t):[...n,t];r(a.id,{...a,features:d})};return e.jsx("div",{className:"grid grid-2",children:R.map(t=>e.jsxs("div",{className:"my-4",children:[e.jsx(b.Text,{strong:!0,children:t.title}),t.features.map(d=>e.jsxs(S,{className:"my-2",gap:4,children:[e.jsx(z,{size:"small",checked:n.includes(d.id),onChange:()=>c(d.id)})," ",d.label]},d.id))]},t.title))})}const ue=["thin","average","muscular","large"],ce=["short","medium","tall"],R=[{title:"Hair Length",features:[{id:"shortHair",label:"Short Hair"},{id:"longHair",label:"Long Hair"},{id:"mediumHair",label:"Medium Hair"},{id:"bald",label:"Bald"}]},{title:"Hair Color",features:[{id:"blackHair",label:"Black Hair"},{id:"brownHair",label:"Brown Hair"},{id:"blondeHair",label:"Blonde Hair"},{id:"redHair",label:"Red Hair"},{id:"greyHair",label:"Grey Hair"},{id:"coloredHair",label:"Colored Hair"}]},{title:"Face",features:[{id:"beard",label:"Beard"},{id:"mustache",label:"Mustache"},{id:"goatee",label:"Goatee"},{id:"lipstick",label:"Lipstick"}]},{title:"Accessories",features:[{id:"glasses",label:"Glasses"},{id:"piercings",label:"Piercings"},{id:"earrings",label:"Earrings"},{id:"necklace",label:"Necklace"},{id:"hat",label:"Hat"},{id:"scarf",label:"Scarf"},{id:"hoodie",label:"Hoodie"},{id:"tie",label:"Tie"},{id:"headscarf",label:"Headscarf/Bandana"}]}];function de({data:a,addEntryToUpdate:r}){const{addParam:n,queryParams:c}=E(),t=c.get("version")??"gb",d=c.get("sortBy")??"id",i=Number(c.get("cardsPerRow"))||8,[u,p]=M(i),s=j.useMemo(()=>v.orderBy(Object.values(a),l=>d==="id"?Number(l.id.split("-").at(-1)):l[d]??l.id,["asc"]),[a,d]);return e.jsxs(e.Fragment,{children:[e.jsxs(b.Title,{level:2,children:["Deck ",t," (",s.length,")"]}),e.jsx(F.PreviewGroup,{children:e.jsx(A,{ref:p,wrap:!0,className:"my-2",children:s.map(l=>{var x,o;return e.jsxs("div",{className:"suspect",style:{width:`${u}px`},children:[e.jsx(k,{id:B(l.id,t),width:u,className:"suspect__image"}),e.jsxs("div",{className:"suspect__name",children:[e.jsx("div",{children:e.jsx($,{children:l.id})}),e.jsxs("div",{children:["ðŸ‡§ðŸ‡· ",l.name.pt]}),e.jsxs("div",{children:["ðŸ‡ºðŸ‡¸ ",l.name.en]}),e.jsxs("div",{className:"suspect__info",style:oe(l),children:[e.jsxs("div",{children:[e.jsxs("div",{children:[l.gender==="male"?e.jsx(W,{}):e.jsx(V,{})," ",l.age]}),e.jsx("div",{children:e.jsx("em",{children:l.ethnicity})})]}),e.jsxs("div",{className:"uppercase",children:[e.jsx(q,{}),e.jsx("br",{}),l.build.charAt(0)]}),e.jsxs("div",{className:"uppercase",children:[e.jsx(K,{}),e.jsx("br",{}),l.height.charAt(0)]}),e.jsxs("div",{children:[((x=l==null?void 0:l.features)==null?void 0:x.length)??0," features"]})]}),e.jsx(I,{size:"small",block:!0,onClick:()=>n("suspectId",l.id),danger:!(l!=null&&l.features)||((o=l==null?void 0:l.features)==null?void 0:o.length)<2,children:e.jsx(ie,{})})]})]},l.id)})},t)}),e.jsx(re,{data:a,addEntryToUpdate:r})]})}const oe=a=>!a.build||!a.height||a.build.length===1||a.height.length===1?{borderColor:"red"}:{};function f(a,r){return v.orderBy(Object.entries(a).map(([n,c])=>({key:n,label:v.capitalize(n),value:c,percentage:Math.round(c/r*100)})),["percentage"],["desc"])}function he({data:a}){const[r,n]=j.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(I,{onClick:()=>n(!0),block:!0,children:"See Stats"}),r&&e.jsx(ge,{data:a,open:r,onClose:()=>n(!1)})]})}function ge({data:a,open:r,onClose:n}){const{ages:c,ethnicities:t,genders:d,builds:i,heights:u}=j.useMemo(()=>{const s={},l={},x={},o={},g={};Object.values(a).forEach(h=>{s[h.age]=(s[h.age]??0)+1,l[h.ethnicity]=(l[h.ethnicity]??0)+1,x[h.gender]=(x[h.gender]??0)+1,o[h.build||"?"]=(o[h.build||"?"]??0)+1,g[h.height||"?"]=(g[h.height||"?"]??0)+1});const m=Object.keys(a).length;return{ages:f(s,m),ethnicities:f(l,m),genders:f(x,m),builds:f(o,m),heights:f(g,m)}},[a]),p=j.useMemo(()=>{const s={};Object.values(a).forEach(o=>{var g;(g=o.features)==null||g.forEach(m=>{s[m]=(s[m]??0)+1})});const l=Object.keys(a).length,x=R.reduce((o,g)=>{const m=g.features.map(h=>h.id);return o.push(...m),o},[]);return v.orderBy(f(s,l),o=>x.findIndex(g=>g===o.key),["asc"])},[a]);return e.jsxs(y,{title:"Suspects Statistics",placement:"right",onClose:n,open:r,width:400,children:[e.jsx(b.Text,{strong:!0,children:"Ethnicity"}),e.jsx("ul",{className:"statistic__list",children:t.map(s=>e.jsxs("li",{children:[e.jsx("strong",{children:s.label})," - ",s.percentage,"%"]},s.key))}),e.jsx(b.Text,{strong:!0,children:"Gender"}),e.jsx("ul",{className:"statistic__list",children:d.map(s=>e.jsxs("li",{children:[e.jsx("strong",{children:s.label})," - ",s.percentage,"%"]},s.key))}),e.jsx(b.Text,{strong:!0,children:"Age"}),e.jsx("ul",{className:"statistic__list",children:c.map(s=>e.jsxs("li",{children:[e.jsx("strong",{children:s.label})," - ",s.percentage,"%"]},s.key))}),e.jsx(b.Text,{strong:!0,children:"Build"}),e.jsx("ul",{className:"statistic__list",children:i.map(s=>e.jsxs("li",{children:[e.jsx("strong",{children:s.label})," - ",s.percentage,"%"]},s.key))}),e.jsx(b.Text,{strong:!0,children:"Height"}),e.jsx("ul",{className:"statistic__list",children:u.map(s=>e.jsxs("li",{children:[e.jsx("strong",{children:s.label})," - ",s.percentage,"%"]},s.key))}),e.jsx(b.Text,{strong:!0,children:"Features"}),e.jsx("ul",{className:"statistic__list",children:p.map(s=>e.jsxs("li",{children:[e.jsx("strong",{children:s.label})," - ",s.percentage,"% (",s.value,")"]},s.key))})]})}const me=[{value:"ct",label:"Cartoon"},{value:"gb",label:"Ghibli"},{value:"ai",label:"AI"},{value:"md",label:"Models"},{value:"wc",label:"Wacky"}],be=[{value:"id",label:"Id"},{value:"name.pt",label:"Name (PT)"},{value:"name.en",label:"Name (EN)"},{value:"ethnicity",label:"Ethnicity"},{value:"gender",label:"Gender"},{value:"age",label:"Age"},{value:"height",label:"Height"},{value:"build",label:"Build"}];function pe({data:a,save:r,isDirty:n,isSaving:c,entriesToUpdate:t,hasFirestoreData:d}){const{addParam:i,queryParams:u}=E();return e.jsxs(J,{children:[e.jsxs(S,{vertical:!0,gap:12,children:[e.jsx(X,{isDirty:n,onSave:r,isSaving:c,dirt:JSON.stringify(t)}),e.jsx(Q,{data:()=>xe(a),fileName:"suspects.json",disabled:n,hasNewData:d,block:!0})]}),e.jsx(T,{}),e.jsx(_,{label:"Version",value:u.get("version")??"gb",onChange:p=>i("version",p),options:me}),e.jsx(Y,{label:"Cards Per Row",value:Number(u.get("cardsPerRow")??"8"),onChange:p=>i("cardsPerRow",p),min:2,max:12}),e.jsx(_,{label:"Sort By",value:u.get("sortBy")??"id",onChange:p=>i("sortBy",p),options:be}),e.jsx(he,{data:a})]})}function xe(a){const r=v.cloneDeep(a);for(const c in r){const t=r[c];(t.height.length===1||t.build.length===1)&&(t.height==="S"&&(t.height="short"),t.height==="M"&&(t.height="medium"),t.height==="L"&&(t.height="tall"),t.build==="S"&&(t.build="thin"),t.build==="M"&&(t.build="average")),t.build==="fat"&&(t.build="large"),t.build==="heavy"&&(t.build="large")}const n={...r,...fe};return Z(n,["gender","ethnicity","age","height","build","features"])}const fe={"us-115":{id:"us-115",name:{pt:"Kai V",en:"Kai V"},gender:"male",age:"18-21",ethnicity:"asian",height:"short",build:"muscular",features:[],gbExclusive:!0},"us-116":{id:"us-116",name:{pt:"TÃ©o",en:"Theo"},gender:"male",age:"21-30",ethnicity:"white",height:"medium",build:"thin",features:[],gbExclusive:!0},"us-117":{id:"us-117",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-118":{id:"us-118",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-119":{id:"us-119",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-120":{id:"us-120",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-121":{id:"us-121",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-122":{id:"us-122",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-123":{id:"us-123",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-124":{id:"us-124",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-125":{id:"us-125",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-126":{id:"us-126",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-127":{id:"us-127",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-128":{id:"us-128",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-129":{id:"us-129",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0},"us-130":{id:"us-130",name:{pt:"aaa",en:"aaa"},gender:"male",age:"",ethnicity:"",height:"",build:"",features:[],gbExclusive:!0}};function la(){const a=U({tdrResourceName:"suspects",firestoreDataCollectionName:"suspects",serialize:!0});return e.jsx(G,{title:"Suspects",subtitle:"Information",children:e.jsxs(H,{hasSider:!0,children:[e.jsx(L,{children:e.jsx(pe,{...a})}),e.jsx(H.Content,{className:"content",children:e.jsx(O,{isLoading:a.isLoading,error:a.error,hasResponseData:!v.isEmpty(a.data),children:e.jsx(de,{...a})})})]})})}export{la as default};
