import{j as e,T as x,r as f,B as C,D,P as E,L as R}from"./index-DyB2iw-j.js";import{R as N}from"./ResponseState-CG1A6lU1.js";import{D as L}from"./DataLoadingWrapper-D1KQYaFp.js";import{P as A}from"./PageSider-BMJXEA3M.js";import{C as T}from"./CopyToClipboardButton-BcqoOkAF.js";import{l as u}from"./useBaseUrl-Cs5WxjUA.js";import{I as M}from"./ImageCard-EUvrFvV0.js";import{u as q}from"./useCardWidth-3UhqSkaM.js";import{T as v}from"./index-DDOtrrfR.js";import{R as O,a as G}from"./WomanOutlined-BcheqUQd.js";import{R as Q,a as _}from"./ColumnWidthOutlined-BMIjhepl.js";import{F as $}from"./index-dctUwvzp.js";import{S as k}from"./index-Cr4ra8mC.js";import{I as y}from"./index-0CCUjJ0c.js";import{u as z}from"./useQueryParams-gR26FJF6.js";import{u as g,a as B}from"./useTDResource-kIzAJGU0.js";import"./SiderContent-CUQL2V2J.js";import"./index-Cw_wg7U4.js";import"./useCopyToClipboardFunction-B_431zHA.js";import"./CopyOutlined-DCxpfbTV.js";import"./gapSize-U1swVQyS.js";import"./Input-DGGpOnt9.js";function V({role:s,language:t}){const[a]=q(8);return e.jsxs("div",{children:[e.jsx(x.Title,{level:3,children:s.title[t]}),e.jsxs("div",{className:"suspect",style:{width:`${a}px`},children:[e.jsx(M,{id:s.actor.id,width:a,className:"suspect__image"}),e.jsxs("div",{className:"suspect__name",children:[e.jsx("div",{children:e.jsx(v,{children:s.actor.id})}),e.jsxs("div",{children:["üáßüá∑ ",s.actor.name.pt]}),e.jsxs("div",{children:["üá∫üá∏ ",s.actor.name.en]}),e.jsxs("div",{className:"suspect__info",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[s.actor.gender==="male"?e.jsx(O,{}):e.jsx(G,{})," ",s.actor.age]}),e.jsx("div",{children:e.jsx("em",{children:s.actor.ethnicity})})]}),e.jsxs("div",{children:[e.jsx(Q,{}),e.jsx("br",{}),s.actor.build]}),e.jsxs("div",{children:[e.jsx(_,{}),e.jsx("br",{}),s.actor.height]})]})]})]}),e.jsx("br",{}),e.jsx("strong",{children:"Traits:"}),e.jsx("ul",{children:s.traits.map(n=>e.jsx("li",{children:n},n))})]},s.id)}function W({movieTitles:s,movieGenres:t,movieActors:a,characterTraits:n,items:i,language:c}){const[r,l]=f.useState({movieTitle:"",genre:{id:"",name:{pt:"",en:""},rating:0,rolesIds:[]},subGenre:{id:"",name:{pt:"",en:""},rating:0,rolesIds:[]},castingRoles:[],features:[],rating:0,props:[]}),m=f.useMemo(()=>U(r),[r]),p=f.useMemo(()=>H(r),[r]),h=()=>l(K(s,t,a,n,i));return e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:h,children:"Create Feature Film"}),!!r&&e.jsxs(e.Fragment,{children:[e.jsx(x.Title,{level:2,children:r.movieTitle||"?"}),e.jsxs(x.Paragraph,{children:[e.jsx("strong",{children:"Genre:"})," ",r.genre.name[c],e.jsx("br",{}),e.jsx("strong",{children:"Sub-genre:"})," ",r.subGenre.name[c],e.jsx("br",{}),e.jsx("strong",{children:"Rating:"})," ",r.rating,e.jsx("br",{}),e.jsxs($,{children:[e.jsx("strong",{children:"Features:"}),r.features.map(d=>e.jsx(v,{children:d.name[c]},d.id))]}),e.jsxs($,{children:[e.jsx("strong",{children:"Key Objects:"}),r.props.map(d=>e.jsx(v,{children:d.name[c]},d.id))]})]}),e.jsx(k,{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",alignItems:"flex-start"},children:r.castingRoles.map(d=>e.jsx(V,{role:d,language:c},d.id))}),e.jsx(D,{}),e.jsxs(x.Title,{level:2,children:["Movie Prompt ",e.jsx(T,{content:m})]}),e.jsx(y.TextArea,{value:m,autoSize:{minRows:3,maxRows:10}}),e.jsxs(x.Title,{level:2,children:["TV Series Prompt ",e.jsx(T,{content:p})]}),e.jsx(y.TextArea,{value:p,autoSize:{minRows:3,maxRows:10}})]})]})}const K=(s,t,a,n,i)=>{const c=u.sampleSize(s,2).map((o,j)=>j%2===0?o.prefix:o.suffix).join(" ");let r=0;const l=u.sample(Object.values(t.genres??{}));if(!l)throw new Error("No genre found");r+=l.rating;const m=u.sample(Object.values(t.subGenres??{}));if(!m)throw new Error("No sub-genre found");r+=m.rating;const p=[];Object.values(t.features??{}).forEach(o=>{Math.random()<o.probability&&(p.push(o),r+=o.rating)});const h=[];l.rolesIds.forEach(o=>{h.push(t.roles[o])}),m.rolesIds.forEach(o=>{h.push(t.roles[o])});const d=J(h,5),b=u.sampleSize(a,d.length),I=u.cloneDeep(u.shuffle(n)),w=d.map((o,j)=>({...o,actor:{...b[j],id:X(b[j].id)},traits:I.splice(0,o.complexity).map(P=>P.answer)}));return{movieTitle:c,genre:l,subGenre:m,castingRoles:w,features:p,rating:r,props:u.sampleSize(i,8)}},U=s=>{let t=`Escreva o resumo de um filme de ${s.genre.name.pt}/${s.subGenre.name.pt} entitulado "${s.movieTitle}"`;return s.features.length>0&&(t+=` que contenha os seguintes elementos: ${s.features.map(a=>a.name.pt).join(", ")}`),t+=`. Incorpore os personagens as suas caracter√≠sticas na trama, seja criativo e tamb√©m incorpore esses objetos na trama: ${s.props.slice(0,3).map(a=>a.name.pt).join(", ")}. Para a idade, escolha um n√∫mero aleat√≥rio dentre a faixa dada, por exemplo 20-30, diga 26 anos. N√£o use parenteses no texto. Adicione um plot twist inesperado. Aqui v√£o os personagens: 
`,s.castingRoles.forEach(a=>{t+=`
${a.title.pt}: ${a.actor.name.pt.split(" ")[0]}, ${a.actor.age} anos, ${F[a.actor.gender]}, ${S[a.actor.ethnicity]}, com as caracter√≠sticas: ${a.traits.join(", ")}.
`}),t},H=s=>{let t=`Escreva o resumo de cada um dos 8 epis√≥dios d√° s√©rie de ${s.genre.name.pt}/${s.subGenre.name.pt} entitulada "${s.movieTitle}"`;return s.features.length>0&&(t+=` que contenha os seguintes elementos: ${s.features.map(a=>a.name.pt).join(", ")}`),t+=`. Incorpore o t√≠tulo da s√©rie e todos os personagens as suas caracter√≠sticas na trama, seja criativo e tamb√©m incorpore esses objetos na trama: ${s.props.map(a=>a.name.pt).join(", ")}. Para a idade, escolha um n√∫mero aleat√≥rio dentre a faixa dada, por exemplo 20-30, diga 26 anos. N√£o use parenteses no texto. Cada epis√≥dio deve terminar com um cliffhanger e o pr√≥ximo epis√≥dio deve continuar desse cliffhanger. Aqui v√£o os personagens: 
`,s.castingRoles.forEach(a=>{t+=`
${a.title.pt}: ${a.actor.name.pt.split(" ")[0]}, ${a.actor.age} anos, ${F[a.actor.gender]}, ${S[a.actor.ethnicity]}, com as caracter√≠sticas: ${a.traits.join(", ")}.
`}),t},F={female:"mulher",male:"homem"},S={asian:"asi√°tico",black:"negro",caucasian:"branco",latino:"latino",mixed:"mesti√ßo","middle-eastern":"oriente-m√©dio","native-american":"nativo-americano",indian:"indiano"};function J(s,t){const a=[],n=new Set;for(const i of s)if(!n.has(i.id)&&(a.push(i),n.add(i.id),a.length===t))break;return a}function X(s){return s.split("-").join("-gb-")}function be(){const{queryParams:s}=z({language:"pt"}),t=s.get("language")??"pt",a=g(`movies-${t}`),n=B("movie-genres"),i=g("suspects"),c=g(`testimony-questions-${t}`),r=g("items"),l=a.hasResponseData&&n.hasResponseData&&i.hasResponseData&&r.hasResponseData&&c.hasResponseData,m=a.isLoading||n.isLoading||i.isLoading||r.isLoading||c.isLoading,p=a.error||n.error||i.error||c.error;return e.jsx(E,{title:"Movie Maker",children:e.jsxs(R,{hasSider:!0,children:[e.jsx(A,{children:e.jsx(N,{hasResponseData:l,isLoading:m,error:p})}),e.jsx(R.Content,{className:"content",children:e.jsx(L,{hasResponseData:l,isLoading:m,error:p,children:e.jsx(W,{movieTitles:Object.values(a.data),movieGenres:n.data,movieActors:Object.values(i.data),characterTraits:Object.values(c.data),items:Object.values(r.data),language:t})})})]})})}export{be as default};
