import{r as I,j as e,F as x,T as g,I as L,A as N,a4 as A,d1 as P,D as R,c9 as w,P as z,L as D}from"./index-CJP1NcLY.js";import{D as O}from"./DataLoadingWrapper-DG7QZDr8.js";import{l as T,P as M}from"./useBaseUrl-7hhyaw6U.js";import{S as F}from"./SuspectImageCard-CxIZvabj.js";import{S as Q}from"./index-XI8Y8BcL.js";import{c as Z}from"./utils-Dv7EoUju.js";import{u as h}from"./useTDResource-BAk1Iz0J.js";import"./ImageCard-DpwjCEPh.js";import"./useQueryParams-BFtarVaT.js";function k({data:t}){const d=I.useMemo(()=>T.orderBy(Object.values(t.suspects),[o=>Number(o.id.split("-")[1])],["asc"]),[t.suspects]);return e.jsxs(e.Fragment,{children:[e.jsx(x,{align:"center",justify:"space-between",children:e.jsx(g.Title,{level:2,children:"IDK"})}),e.jsx(Q,{style:{position:"sticky",top:0,background:"black",zIndex:1,width:"100%"},children:"Filters and Sorters come here"}),e.jsx(L.PreviewGroup,{children:e.jsx(x,{gap:16,style:{marginBottom:16},wrap:!0,children:d.map(o=>{const{zodiacSign:a,ascendantSign:n,mbtiType:m,notEnoughData:p}=t.personalities[o.id]||{};return e.jsxs(x,{vertical:!0,children:[e.jsx(F,{cardId:o.id,cardWidth:120,className:"suspect__image"}),e.jsxs(g.Text,{children:[T.truncate(o.name.pt,{length:10})," (",o.age,")"]}),p?e.jsx(N,{message:"N/A",type:"warning"}):e.jsxs(e.Fragment,{children:[e.jsx(A,{title:t.zodiacCrossReference[a||"N/A"]?.description||"",children:e.jsx(g.Text,{children:E?.[a]||"N/A"})}),e.jsx(A,{title:t.zodiacCrossReference[n||"N/A"]?.description||"",children:e.jsxs(g.Text,{type:"secondary",children:[e.jsx(P,{style:{transform:"scaleX(-1)"}})," ",E?.[n]||"N/A"]})}),e.jsx(R,{className:"my-1"}),e.jsx(g.Text,{type:m.includes("X")?"danger":void 0,children:m||"N/A"})]})]},o.id)})})})]})}const E={aries:"Ãries â™ˆ",touro:"Touro â™‰",gemeos:"GÃªmeos â™Š",cancer:"CÃ¢ncer â™‹",leao:"LeÃ£o â™Œ",virgem:"Virgem â™",libra:"Libra â™Ž",escorpiao:"EscorpiÃ£o â™",sagitario:"SagitÃ¡rio â™",capricornio:"CapricÃ³rnio â™‘",aquario:"AquÃ¡rio â™’",peixes:"Peixes â™“"};function q(){const t=h("suspects"),d=h("testimony-questions-pt"),o=h("testimony-answers"),a=h("suspect-testimony-crossreference-zodiac-pt"),n=h("suspect-testimony-crossreference-mbti-pt"),m=I.useMemo(()=>!t.data||!d.data||!o.data||!a.data||!n.data?{}:B(t.data,d.data,o.data,a.data,n.data),[t.data,d.data,o.data,a.data,n.data]),{unusedZodiacTestimonyIds:p,unusedMbtiTestimonyIds:f}=I.useMemo(()=>{const s=Object.values(a.data??{}).reduce((i,c)=>(c.relatedTestimonyIds.forEach(y=>{i[y]=!0}),c.unrelatedTestimonyIds.forEach(y=>{i[y]=!0}),i),{}),l=Object.values(n.data??{}).reduce((i,c)=>(c.relatedTestimonyIds.forEach(y=>{i[y]=!0}),c.unrelatedTestimonyIds.forEach(y=>{i[y]=!0}),i),{});return{unusedZodiacTestimonyIds:Object.keys(s).sort(),unusedMbtiTestimonyIds:Object.keys(l).sort()}},[a.data,n.data]);return console.log("Unused Zodiac Testimony IDs:",p.map(s=>`${s} - ${d.data?.[s]?.question||"N/A"}`)),console.log("Unused MBTI Testimony IDs:",f.map(s=>`${s} - ${d.data?.[s]?.question||"N/A"}`)),{error:t.error||d.error||o.error||a.error||n.error,isLoading:t.isLoading||d.isLoading||o.isLoading||a.isLoading||n.isLoading,data:{suspects:t.data,testimonies:d.data,testimonyAnswers:o.data,zodiacCrossReference:a.data,mbtiCrossReference:n.data,personalities:m,unusedZodiacTestimonyIds:p,unusedMbtiTestimonyIds:f}}}const B=(t,d,o,a,n)=>{const m={},p={};for(const s in t)for(const l in d){const i=o[l]??{},c=Z(s,l,i);c.resolution==="ðŸ‘"||c.projection==="ðŸ‘"?(m[s]=m[s]||{},m[s][l]=!0):(c.resolution==="ðŸ‘Ž"||c.projection==="ðŸ‘Ž")&&(p[s]=p[s]||{},p[s][l]=!0)}const f={};for(const s in t){const l={},i={};for(const r of Object.values(a))l[r.id]=0,r.relatedTestimonyIds.forEach(u=>{m[s]?.[u]&&(l[r.id]+=1)}),r.unrelatedTestimonyIds.forEach(u=>{p[s]?.[u]&&(l[r.id]+=1)});const c=Object.entries(l).sort((r,u)=>u[1]-r[1]),y=c[0]?.[0]||"",v=c[1]?.[0]||"";for(const r of Object.values(n))i[r.id]=0,r.relatedTestimonyIds.forEach(u=>{m[s]?.[u]&&(i[r.id]+=1)}),r.unrelatedTestimonyIds.forEach(u=>{p[s]?.[u]&&(i[r.id]+=1)});const C=[["E","I"],["S","N"],["T","F"],["J","P"]];let j="";for(const[r,u]of C){const b=i[r]||0,S=i[u]||0;Math.abs(b-S)<1?j+="X":b>S?j+=r:j+=u}f[s]={suspectId:s,zodiacSign:y,ascendantSign:v,mbtiType:j}}return f};function H(){w("Suspect Personalities");const t=q();return e.jsx(z,{subtitle:"Dive deep into the suspect personalities based on their testimonies",title:"Suspect Personalities",children:e.jsxs(D,{hasSider:!0,children:[e.jsx(M,{children:"-"}),e.jsx(D.Content,{className:"content",children:e.jsx(O,{error:t.error,hasResponseData:!T.isEmpty(t.data),isLoading:t.isLoading,children:e.jsx(k,{...t})})})]})})}export{H as SuspectsPersonalities,H as default};
