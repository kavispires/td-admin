import{r as f,a as A,j as e,ae as ee,B as y,T as C,D as R,P as se,L as H}from"./index-YrxXJCRo.js";import{D as ne}from"./DataLoadingWrapper-PpUqHkgV.js";import{u as ae,P as te}from"./useGridPagination-BerfGSFJ.js";import{u as D}from"./useQueryParams-Bdhq2aAO.js";import{u as ie}from"./useResourceFirebaseData-1K82SYK-.js";import{l as j}from"./lodash-DHSXaBCI.js";import{L as O}from"./LanguageFlag-DDMdmxf8.js";import{I as le}from"./Item-DhRhcEKB.js";import{u as B}from"./useCopyToClipboardFunction-DLn4amDY.js";import{F as U}from"./index-CXekz8d8.js";import{C as N}from"./index-BlsZn4o0.js";import{u as oe,R as re}from"./CloseCircleOutlined-CDLJNmAD.js";import{S as z}from"./index-CTPuhsUj.js";import{F as w}from"./index-CGTHWfcT.js";import{C as ce}from"./index-CkJ5FHLh.js";import{I as J}from"./index-C7MVWxrt.js";import{S as F}from"./index-BHZnLOj_.js";import{S as de}from"./index-C3pi46bp.js";import{R as me}from"./FireFilled-Cd9Mhj0G.js";import{R as pe}from"./SaveOutlined-CCBaQX56.js";import{R as ue}from"./EditOutlined-BAwpvVwk.js";import{c as P,d as W,a as he,T as ge}from"./FilterEntries-SHPIZRcQ.js";import{S as fe}from"./SiderContent-Cw0bn2HP.js";import{D as q}from"./DownloadButton-COz1tbcl.js";import{S as xe}from"./SaveButton-8cgWxSCL.js";import{a as G,d as je,r as ve}from"./index-Ie4GiVIN.js";import{M as ke}from"./index-B4jM5EJM.js";import{R as Q}from"./CopyOutlined-DC66PhiR.js";import{D as be}from"./index-C3cyCUJ1.js";import{I as ye}from"./ItemsTypeahead-CptH66LD.js";import{R as Ce}from"./EnvironmentOutlined-Bo9wxJ52.js";import{P as we}from"./useBaseUrl-C6NB5AVO.js";import"./Pagination-Bs8rgT4I.js";import"./useGetFirebaseDoc-B2OdLxyM.js";import"./useTDResource-CDxaXFWP.js";import"./useUpdateFirebaseDoc-BKyxfK8p.js";import"./useMutation-csmyFkac.js";import"./gapSize-U1swVQyS.js";import"./index-DaDAmdSV.js";import"./PlusOutlined-ByZyTB3m.js";import"./Input-C7GOHm5-.js";import"./moment-C5S46NFB.js";import"./constants-OlFzuvYk.js";import"./useDebounce-B7PG9kN8.js";var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},Se={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482.88 128c-84.35 0-156.58 52.8-185.68 126.98-60.89 8.13-115.3 43.63-146.6 97.84-42.16 73-32.55 161.88 17.14 224.16-23.38 56.75-19.85 121.6 11.42 175.78 42.18 73.02 124.1 109.15 202.94 97.23C419.58 898.63 477.51 928 540.12 928c84.35 0 156.58-52.8 185.68-126.98 60.89-8.13 115.3-43.62 146.6-97.84 42.16-73 32.55-161.88-17.14-224.16 23.38-56.75 19.85-121.6-11.42-175.78-42.18-73.02-124.1-109.15-202.94-97.23C603.42 157.38 545.49 128 482.88 128m0 61.54c35.6 0 68.97 13.99 94.22 37.74-1.93 1.03-3.92 1.84-5.83 2.94l-136.68 78.91a46.11 46.11 0 00-23.09 39.78l-.84 183.6-65.72-38.34V327.4c0-76 61.9-137.86 137.94-137.86m197.7 75.9c44.19 3.14 86.16 27.44 109.92 68.57 17.8 30.8 22.38 66.7 14.43 100.42-1.88-1.17-3.6-2.49-5.53-3.6l-136.73-78.91a46.23 46.23 0 00-46-.06l-159.47 91.1.36-76.02 144.5-83.41a137.19 137.19 0 0178.53-18.09m-396.92 55.4c-.07 2.2-.3 4.35-.3 6.56v157.75a46.19 46.19 0 0022.91 39.9l158.68 92.5-66.02 37.67-144.55-83.35c-65.86-38-88.47-122.53-50.45-188.34 17.78-30.78 46.55-52.69 79.73-62.68m340.4 79.93l144.54 83.35c65.86 38 88.47 122.53 50.45 188.34-17.78 30.78-46.55 52.69-79.73 62.68.07-2.19.3-4.34.3-6.55V570.85a46.19 46.19 0 00-22.9-39.9l-158.69-92.5zM511.8 464.84l54.54 31.79-.3 63.22-54.84 31.31-54.54-31.85.3-63.16zm100.54 58.65l65.72 38.35V728.6c0 76-61.9 137.86-137.94 137.86-35.6 0-68.97-13.99-94.22-37.74 1.93-1.03 3.92-1.84 5.83-2.94l136.68-78.9a46.11 46.11 0 0023.09-39.8zm-46.54 89.55l-.36 76.02-144.5 83.41c-65.85 38-150.42 15.34-188.44-50.48-17.8-30.8-22.38-66.7-14.43-100.42 1.88 1.17 3.6 2.5 5.53 3.6l136.74 78.91a46.23 46.23 0 0046 .06z"}}]},name:"open-a-i",theme:"outlined"},Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};function $(){return $=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},$.apply(this,arguments)}const Oe=(s,a)=>f.createElement(A,$({},s,{ref:a,icon:Ie})),De=f.forwardRef(Oe);function M(){return M=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},M.apply(this,arguments)}const Te=(s,a)=>f.createElement(A,M({},s,{ref:a,icon:Se})),Pe=f.forwardRef(Te);function L(){return L=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},L.apply(this,arguments)}const Re=(s,a)=>f.createElement(A,L({},s,{ref:a,icon:Ne})),ze=f.forwardRef(Re),K=f.createContext({items:{},isLoading:!0,error:null,hasResponseData:!1,decksDict:{},decks:[],listing:[],isDirty:!1,addItemToUpdate:()=>{},itemsToUpdate:{},isSaving:!1,save:()=>{},newId:"-1",hasFirestoreData:!1}),Ee=({children:s})=>{const{queryParams:a}=D(),{data:t,isLoading:n,error:i,isSaving:o,save:r,addEntryToUpdate:v,entriesToUpdate:c,isDirty:d,hasFirestoreData:m}=ie({tdrResourceName:"items",firebaseDataCollectionName:"items"}),{decksDict:l,decks:p}=f.useMemo(()=>{console.log("Recomputing item decks typeahead...");const k={},u={},b={},S=[];Object.values(t).forEach(x=>{var V;const Y=`${x.name.en} (${x.id})`,Z=`${x.name.pt} (${x.id})`;u[x.name.en]?S.push([`${x.name.en} (${u[x.name.en]})`,Y]):u[x.name.en]=x.id,b[x.name.pt]?S.push([`${x.name.pt} (${b[x.name.pt]})`,Z]):b[x.name.pt]=x.id,(V=x==null?void 0:x.decks)==null||V.forEach(_=>{k[_]=_})}),k.age1="age1",k.age2="age2",k.age3="age3",k.age4="age4",k.age5="age5";const T=j.orderBy(Object.keys(k)).map(x=>({value:x}));return S.length>0&&console.warn("Possible duplicated items",S),{decksDict:k,decks:T}},[t,o,n]),h=a.get("deck")??"all",g=f.useMemo(()=>{const k=j.orderBy(Object.values(t),[u=>Number(u.id)],"asc");switch(h){case"all":return k;case"!all":return k.filter(u=>{var b;return!((b=u==null?void 0:u.decks)!=null&&b.length)||!0});case"nsfw":return k.filter(u=>u.nsfw);case"!nsfw":return k.filter(u=>!u.nsfw);default:return h.startsWith("!")?k.filter(u=>{var b;return!((b=u==null?void 0:u.decks)!=null&&b.includes(h.slice(1)))}):k.filter(u=>{var b;return(b=u==null?void 0:u.decks)==null?void 0:b.includes(h)})}},[t,h]),X=f.useMemo(()=>{var S;const k=j.orderBy(Object.keys(c),[T=>Number(T)],"asc"),u=(S=g[g.length-1])==null?void 0:S.id,b=j.orderBy([...k,u],[T=>Number(T)],"desc")[0];return String(Number(b)+1)},[g,c]);return e.jsx(K.Provider,{value:{items:t,listing:g,isLoading:n,error:i,decksDict:l,decks:p,hasResponseData:g.length>0,isDirty:d,addItemToUpdate:v,isSaving:o,save:r,itemsToUpdate:c,newId:X,hasFirestoreData:m},children:s})},I=()=>f.useContext(K);function Fe(s,a=!1){const{addItemToUpdate:t,itemsToUpdate:n}=I(),[i,o]=f.useState(a),[r,v]=f.useState(j.cloneDeep(s)),c=n[s.id]??s,d=h=>{const g={...j.cloneDeep(r),...h};Object.keys(h).includes("nsfw")&&h.nsfw===!1&&(g.nsfw=void 0),v(g)},m=async()=>{t(r.id,r)},l=()=>{v(j.cloneDeep(s)),o(!1)},p=JSON.stringify(c)!==JSON.stringify(r);return{isEditing:i,toggleEditMode:()=>o(h=>!h),editableItem:r,onEdit:d,isDirty:p,onModify:m,onReset:l}}function $e({item:s,isEditing:a,onEdit:t,decks:n}){return e.jsx("div",{style:{display:"grid",gap:4,gridTemplateColumns:"repeat(2, 1fr)"},children:n.map(i=>{const o=s.decks??[],r=o.includes(i.value);return e.jsxs(U.Item,{style:{margin:0,minHeight:1},children:[e.jsx(N,{checked:r,disabled:!a,onChange:v=>{const d=v.target.checked?[...o,i.value]:o.filter(m=>m!==i.value);console.log("onChange",v.target.checked,i.value,d),t({decks:d})},style:{minHeight:1}}),e.jsxs("span",{children:[" ",j.truncate(i.value,{length:10})]})]},i.value)})})}const Me=s=>({id:s.id,type:"item",header:{title:{en:"Item",pt:"Item"},iconId:"2077"},metadata:{level:"basic",keyword:j.snakeCase(s.name.en).toUpperCase()},content:{itemId:s.id,caption:s.name}});function Le({item:s}){const[a,t]=oe(!1),n=B();return e.jsx(ee,{content:e.jsxs(z,{direction:"vertical",children:[e.jsx(y,{size:"small",onClick:()=>n(JSON.stringify(s,null,2)),children:"Complete Item"}),e.jsx(y,{size:"small",onClick:()=>n(s.name.en),children:"EN Name"}),e.jsx(y,{size:"small",onClick:()=>n(s.name.pt),children:"PT Name"}),e.jsx(y,{size:"small",onClick:()=>n(JSON.stringify(Me(s),null,2)),children:"Escape Room Item"})]}),title:"Copy",trigger:"click",open:a,onOpenChange:t,children:e.jsx(y,{type:"text",icon:e.jsx(De,{})})})}const Ae=j.memoize(s=>{var r,v;const a=!!((r=s.decks)!=null&&r.includes("thing")),t=!!((v=s.decks)!=null&&v.includes("manufactured")),n=s.name.en.split(" ").length===1,i=s.name.pt.split(" ").length===1,o={en:a||n&&t,pt:a||i&&t};return!o.pt&&!o.en?"":e.jsxs(e.Fragment,{children:[o.en&&e.jsx(O,{language:"en",width:"1em"}),o.pt&&e.jsx(O,{language:"pt",width:"1em"})]})}),Be=({item:s})=>{const a=Ae(s);return a?e.jsxs(w,{gap:6,children:["Thing: ",a]}):e.jsx(e.Fragment,{})};function E({item:s,editMode:a=!1,simplified:t}){const{decks:n}=I(),{isEditing:i,toggleEditMode:o,onEdit:r,isDirty:v,onModify:c,onReset:d,editableItem:m}=Fe(s,a),l=B(),{is:p}=D(),h=t||p("simplified");return s.decks,e.jsxs(ce,{title:e.jsx(C.Text,{onClick:()=>l(s.id),children:s.id}),extra:e.jsx(Le,{item:s}),style:{maxWidth:250},size:h?"small":"default",actions:h?void 0:v?[e.jsx(ze,{onClick:d},"reset"),e.jsx(pe,{onClick:c},"save")]:[e.jsx(ue,{onClick:o},"edit")],children:[e.jsx(le,{id:s.id,width:h?75:125,title:`${s.name.en} | ${s.name.pt}`}),e.jsxs(z,{size:"small",direction:"vertical",className:h?"my-2":"my-4",children:[e.jsx(J,{prefix:e.jsx(O,{language:"en",width:"1em"}),placeholder:"Name in EN",variant:i?"outlined":"borderless",size:"small",defaultValue:s.name.en,readOnly:!i,onChange:g=>r({name:{...m.name,en:g.target.value}})},`en-${s.name.en}`),e.jsx(J,{prefix:e.jsx(O,{language:"pt",width:"1em"}),placeholder:"Name in PT",variant:i?"outlined":"borderless",size:"small",defaultValue:s.name.pt,readOnly:!i,onChange:g=>r({name:{...m.name,pt:g.target.value}})},`pt-${s.name.pt}`),!h&&e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[!p("hideDecks")&&e.jsx("div",{children:p("deckCheckboxes")?e.jsx($e,{item:s,isEditing:i,onEdit:r,decks:n}):e.jsx(F,{mode:"multiple",style:{width:"100%"},placeholder:"Select a deck",defaultValue:s.decks,disabled:!i,options:n,variant:i?"outlined":"borderless",size:"small",onChange:g=>r({decks:g.sort()})},String(s.decks))}),!p("hideAliases")&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{gap:6,children:[e.jsx(O,{language:"en",width:"1em"}),e.jsx(F,{mode:"tags",style:{width:"100%"},placeholder:"Other names EN",defaultValue:s.aliasesEn,options:[],disabled:!i,variant:i?"outlined":"borderless",size:"small",onChange:g=>r({aliasesEn:g.sort()})})]}),e.jsxs(w,{gap:6,children:[e.jsx(O,{language:"pt",width:"1em"}),e.jsx(F,{mode:"tags",style:{width:"100%"},placeholder:"Other names PT",defaultValue:s.aliasesPt,options:[],disabled:!i,variant:i?"outlined":"borderless",size:"small",onChange:g=>r({aliasesPt:g.sort()})})]})]})]}),e.jsx(Ue,{item:s,onEdit:r}),p("showVerifyThing")&&e.jsx("div",{children:e.jsx(Be,{item:s})}),(i||s.nsfw)&&e.jsx("div",{children:e.jsx(U.Item,{label:"nsfw",valuePropName:"checked",children:e.jsx(de,{checked:s.nsfw,onChange:g=>r({nsfw:g}),size:"small",checkedChildren:e.jsx(me,{style:{color:"hotpink"}}),disabled:!i})})})]})]})]})}function Ue({item:s,onEdit:a}){const t=s.decks||[],n=async i=>{const o=t.includes(i)?t.filter(r=>r!==i):[...t,i];a({decks:o})};return e.jsxs("div",{children:[e.jsx(C.Text,{strong:!0,children:"Ages"}),e.jsxs(w,{gap:6,children:[e.jsx(N,{checked:t.includes("age1"),onChange:()=>n("age1")}),"1",e.jsx(N,{checked:t.includes("age2"),onChange:()=>n("age2")}),"2",e.jsx(N,{checked:t.includes("age3"),onChange:()=>n("age3")}),"3",e.jsx(N,{checked:t.includes("age4"),onChange:()=>n("age4")}),"4",e.jsx(N,{checked:t.includes("age5"),onChange:()=>n("age5")}),"5"]})]})}function Ve(){const{queryParams:s}=D(),a=s.get("deck")??"all",{listing:t}=I(),{page:n,pagination:i}=ae({data:t,resetter:a});return e.jsxs(e.Fragment,{children:[e.jsxs(C.Title,{level:2,children:["Listing - ",j.capitalize(a)," items (",t.length,")"]}),e.jsx(te,{pagination:i,className:"full-width",children:e.jsx(w,{gap:16,wrap:"wrap",children:n.map(o=>e.jsx(E,{item:o},o.id))})})]})}const _e={id:"",name:{en:"",pt:""},groups:[]};function He({isModalOpen:s,handleOk:a,handleCancel:t,newId:n}){const[i]=f.useState(j.cloneDeep({..._e,id:n}));return e.jsx(ke,{title:"Add new item",open:s,onOk:a,onCancel:t,children:e.jsx(E,{item:i,editMode:!0})})}function Je(){const[s,a]=f.useState(!1),{newId:t}=I(),n=()=>{a(!0)},i=()=>{a(!1)},o=()=>{a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(y,{block:!0,onClick:n,children:"Add New Item"}),s&&e.jsx(He,{isModalOpen:s,handleOk:i,handleCancel:o,newId:t},t)]})}function We(){const{isDirty:s,save:a,items:t,decks:n,itemsToUpdate:i,isSaving:o,hasFirestoreData:r}=I(),{queryParams:v,is:c,addParam:d}=D(),m=f.useMemo(()=>{const l=j.orderBy(n.map(({value:h})=>({label:j.capitalize(h),value:h})),"label"),p=l.map(({label:h,value:g})=>({label:`NOT ${h}`,value:`!${g}`}));return[...l,...p]},[n]);return e.jsxs(fe,{children:[e.jsxs(w,{vertical:!0,gap:6,children:[e.jsx(xe,{isDirty:s,dirt:JSON.stringify(i),onSave:a,isSaving:o}),e.jsx(q,{data:()=>qe(t),fileName:"items.json",disabled:s,hasNewData:r,block:!0})]}),e.jsx(R,{className:"my-4"}),e.jsx(C.Text,{type:"secondary",children:"Tools"}),e.jsx(P,{label:"Show Search",value:!c("hideSearch"),onChange:l=>d("hideSearch",l?"":"true",""),className:"full-width m-0"}),e.jsx(P,{label:"Show Randomizer",value:c("showRandomizer"),onChange:l=>d("showRandomizer",l?"true":"",""),className:"full-width m-0"}),e.jsx(C.Text,{type:"secondary",children:"Input"}),e.jsx(W,{label:"Hide Decks",value:c("hideDecks"),onChange:l=>d("hideDecks",l?"true":""),className:"full-width m-0"}),e.jsx(W,{label:"Hide Aliases",value:c("hideAliases"),onChange:l=>d("hideAliases",l?"true":""),className:"full-width m-0"}),e.jsx(C.Text,{type:"secondary",children:"Display"}),e.jsx(P,{label:"Simplified UI",value:c("simplified"),onChange:l=>d("simplified",l?"true":""),className:"full-width m-0"}),e.jsx(P,{label:"Deck Checkboxes",value:c("deckCheckboxes"),onChange:l=>d("deckCheckboxes",l?"true":""),className:"full-width m-0"}),e.jsx(P,{label:"Thing Verifier",value:c("showVerifyThing"),onChange:l=>d("showVerifyThing",l?"true":""),className:"full-width m-0",disabled:c("simplified")}),e.jsx(R,{className:"my-4"}),e.jsx(he,{label:"Deck",value:v.get("deck")??"all",onChange:l=>d("deck",l,"all"),options:[{label:"All",value:"all"},{label:"NSFW",value:"nsfw"},{label:"SFW",value:"!nsfw"},...m,{label:"No decks",value:"!all"}]}),e.jsx(R,{className:"my-4"}),e.jsx(Je,{}),e.jsx(R,{className:"my-4"}),e.jsx(q,{data:()=>Qe(t),fileName:"items-gpt.json",disabled:s,block:!0,icon:e.jsx(Pe,{}),children:"Open AI JSON"})]})}function qe(s){console.log("Preparing file for download...");const a=j.cloneDeep(s);return Object.values(a).reduce((t,n)=>(n.aliasesEn=Object.values(n.aliasesEn??{}).sort(),n.aliasesEn.length===0&&(n.aliasesEn=void 0),n.aliasesPt=Object.values(n.aliasesPt??{}).sort(),n.aliasesPt.length===0&&(n.aliasesPt=void 0),n.decks=Object.values((n==null?void 0:n.decks)??{}).sort(),n.decks.length===0&&(n.decks=void 0),t[n.id]=n,t),{}),G(je(a))}function Qe(s){return G(Object.values(j.cloneDeep(s)).reduce((a,t)=>{const n={id:t.id,names:{"en-US":t.name.en,"pt-BR":t.name.pt},aliases:{"en-US":t.aliasesEn,"pt-BR":t.aliasesPt}};return a[n.id]=n,a},{}))}function Ge(){const{listing:s}=I(),[a,t]=f.useState([]),n=B(),[i,o]=f.useState(5),r=()=>{t(j.sampleSize(s,i))},v=[{label:"Copy IDs",key:"copy_ids"},{label:"Copy Names EN",key:"copy_names_en"},{label:"Copy Names PT",key:"copy_names_pt"}],c=({key:m})=>{if(m==="copy_ids"){const l=a.map(p=>p.id);n(JSON.stringify(l));return}if(m==="copy_names_en"){const l=a.map(p=>p.name.en).join(", ");n(l);return}if(m==="copy_names_pt"){const l=a.map(p=>p.name.pt).join(", ");n(l);return}},d=()=>{const m=j.chunk(j.sampleSize(s,i*15),i).map(l=>l.filter(p=>!p.nsfw)).map(l=>l.map(p=>p.name.en).join(", ")).map((l,p)=>`${p+1}) ${l}`).join(`
`);n(m)};return e.jsxs("div",{children:[e.jsxs(C.Title,{level:2,children:["Randomized Sample"," ",e.jsx(y,{size:"small",icon:e.jsx(Q,{}),onClick:d,children:"MJ"})]}),e.jsxs(w,{gap:12,children:[e.jsx(U.Item,{label:"Quantity"}),e.jsx("div",{children:e.jsx(ge,{min:3,max:15,value:i,onChange:m=>o(Number(m)),style:{minWidth:"100px"}})}),e.jsx(y,{onClick:r,type:"primary",children:"Get Sample"}),e.jsx(be.Button,{menu:{items:v,onClick:c},disabled:a.length===0,onClick:()=>n(JSON.stringify(a,null,2)),icon:e.jsx(Q,{}),children:"Copy"})]}),e.jsx(z,{wrap:!0,className:"my-4",children:a.map(m=>e.jsx(E,{item:m,simplified:!0},m.id))})]})}function Ke(){const{items:s,isLoading:a,isSaving:t}=I(),[n,i]=f.useState(null),{queryParams:o,addParam:r}=D(),v=c=>{const d=Number(o.get("pageSize")??64),m=Number(c),l=Math.floor(m/d)+1;r("page",l.toString())};return e.jsxs(f.Fragment,{children:[e.jsx(C.Title,{level:2,children:"Search for an item"}),e.jsx("div",{children:e.jsx(ye,{items:s,isPending:a||t,onFinish:c=>i([s[c]]),onFinishMultiple:c=>i(ve(c).map(d=>s[d]))})}),n&&(n==null?void 0:n.length)>0&&e.jsxs(w,{gap:8,children:[e.jsxs(C.Paragraph,{className:"mt-1 italic",children:[n==null?void 0:n.length," items found"]}),e.jsx(y,{icon:e.jsx(re,{}),onClick:()=>i(null),size:"small",type:"text"})]}),e.jsx(w,{className:"my-4",gap:8,wrap:"wrap",children:n==null?void 0:n.map(c=>e.jsxs(z,{direction:"vertical",className:"my-4",children:[e.jsx(E,{item:c}),e.jsx(y,{onClick:()=>v(c.id),block:!0,icon:e.jsx(Ce,{}),children:"Find in listing"})]},c.id))})]},`item-search-${a}`)}function Xe(){const{isLoading:s,error:a,hasResponseData:t}=I(),{is:n}=D();return e.jsx(se,{title:"Items",subtitle:"Listing",children:e.jsxs(H,{hasSider:!0,children:[e.jsx(we,{children:e.jsx(We,{})}),e.jsx(H.Content,{className:"content",children:e.jsxs(ne,{isLoading:s,error:a,hasResponseData:t,children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs(z,{size:"large",align:"start",children:[!n("hideSearch")&&e.jsx(Ke,{}),n("showRandomizer")&&e.jsx(Ge,{})]}),e.jsx(R,{})]}),e.jsx(Ve,{})]})})]})})}function Vs(){return e.jsx(Ee,{children:e.jsx(Xe,{})})}export{Vs as default};
