import{r as N,j as y,u as P,L as b,H as S,D}from"./index-oik76Yce.js";import{l as C}from"./lodash-Vop7Mp14.js";import{S as M}from"./index-Do93bfhz.js";import"./gapSize-U1swVQyS.js";function U(t,o,e={}){const c=e.origin||"top-left",s=e.adjacency||"any",r=[];for(let a=0;a<o;a++)for(let l=0;l<t;l++)r.push({id:I(l,a),x:l,y:a,data:null,state:s==="any"?"available":"unavailable"});const n=e.defaultData;return n&&Array.isArray(n)?n.forEach(({x:a,y:l,data:d,state:h})=>{const i=r.find(u=>u.x===a&&u.y===l);i&&(i.data=d,i.state=h||"used")}):n&&r.forEach(a=>{a.data=n.data,a.state=n.state||"used"}),{width:t,height:o,origin:c,cells:r,adjacency:s}}function I(t,o){return`${t}-${o}`}function A(t){const[o,e]=t.split("-").map(Number);return{x:o,y:e}}function G(t,o,e){return t.width*e+o}function f(t,o,e){return t.cells.find(c=>c.x===o&&c.y===e)||null}function g(t,o){return t.cells.find(e=>e.id===o)||null}function k(t){const{width:o,height:e,origin:c}=t;let s,r;switch(c){case"top-left":s=0,r=0;break;case"top-right":s=o-1,r=0;break;case"bottom-left":s=0,r=e-1;break;case"bottom-right":s=o-1,r=e-1;break;case"center":s=Math.floor(o/2),r=Math.floor(e/2);break;default:s=0,r=0}return f(t,s,r)}function R(t){const o=k(t);return o?o.id:null}function B(t,o,e,c="used"){const s=[],r=o||t.adjacency;for(let n=0;n<t.height;n++)for(let a=0;a<t.width;a++){const l=f(t,a,n);l&&(!e||l.state===e)&&l.data===null&&(r==="any"?s.push({x:a,y:n}):r==="surrounding"&&w(t,a,n,c)?s.push({x:a,y:n}):r==="orthogonal"&&E(t,a,n,c)?s.push({x:a,y:n}):r==="diagonal"&&T(t,a,n,c)&&s.push({x:a,y:n}))}return s}function L(t,o,e,c="used"){const s=[],r=o||t.adjacency;for(let n=0;n<t.height;n++)for(let a=0;a<t.width;a++){const l=f(t,a,n);l&&(!e||l.state===e)&&l.data===null&&(r==="any"||r==="surrounding"&&w(t,a,n,c)||r==="orthogonal"&&E(t,a,n,c)||r==="diagonal"&&T(t,a,n,c))&&s.push(l.id)}return s}const v=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0}],O=[{dx:-1,dy:-1},{dx:1,dy:-1},{dx:-1,dy:1},{dx:1,dy:1}],j=[{dx:-1,dy:-1},{dx:0,dy:-1},{dx:1,dy:-1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:1},{dx:0,dy:1},{dx:1,dy:1}],m={orthogonal:v,diagonal:O,surrounding:j,any:j};function E(t,o,e,c){return v.some(({dx:s,dy:r})=>{var l;const n=o+s,a=e+r;return p(t,n,a)&&((l=f(t,n,a))==null?void 0:l.state)===c})}function T(t,o,e,c){return O.some(({dx:s,dy:r})=>{var l;const n=o+s,a=e+r;return p(t,n,a)&&((l=f(t,n,a))==null?void 0:l.state)===c})}function w(t,o,e,c="used"){return j.some(({dx:s,dy:r})=>{var l;const n=o+s,a=e+r;return p(t,n,a)&&((l=f(t,n,a))==null?void 0:l.state)===c})}function p(t,o,e){return o>=0&&o<t.width&&e>=0&&e<t.height}function H(t){return C.flatten(t.cells).filter(o=>o.data===null)}function $(t,o,e,c){const s=g(t,o);return s&&(e===null?(s.data=null,s.state=c||"available"):(s.data=e,s.state=s.state==="locked"?"locked":c||"used"),W(t,s.x,s.y)),t}function W(t,o,e){const c=t.adjacency,s=(n,a)=>{const l=f(t,n,a);l&&l.data===null&&l.state!=="locked"&&(l.state="available")};m[c].forEach(({dx:n,dy:a})=>s(o+n,e+a))}function X(t,o,e){const c=g(t,o);return c&&(c.state=e),t}function Y(t,o,e){const c=m[t.adjacency],s=[];for(const{dx:r,dy:n}of c){const a=o+r,l=e+n;if(p(t,a,l)){const d=f(t,a,l);d&&s.push(d.id)}}return s}function q(t,o,e,c){const{x:s,y:r}=A(o),n=m[e],a=[];for(const{dx:l,dy:d}of n){const h=s+l,i=r+d;if(p(t,h,i)){const u=f(t,h,i);u&&(!c||u.state===c)&&a.push(u.id)}}return a}function _(t,o,e,c={}){const{endId:s,allowRepetition:r=!1}=c,n=[e];let a=e;for(let l=1;l<o;l++){const d=g(t,a);if(!d)break;const i=Y(t,d.x,d.y).filter(F=>r||!n.includes(F));if(i.length===0)break;const u=l===o-1&&s&&i.includes(s)?s:C.sample(i)||null;if(!u)break;n.push(u),a=u}return n.length!==o||s&&n[n.length-1]!==s?null:{id:n.join(";;"),path:n}}function z(t,o,e,c,s=!1){const r=[];for(let n=0;n<o;n++){const a=e[n%e.length],l=_(t,c,a,{allowRepetition:s});l&&!r.some(d=>d.id===l.id)?r.push(l):n--}return r}const x={createGridMap:U,getCellById:g,getCellByCoordinates:f,updateCell:$,updateCellState:X,getEmptyCells:H,getOrigin:k,getOriginId:R,getAllAdjacentCoordinates:B,getAllAdjacentIds:L,getAdjacentIdsToCellId:q,createPath:_,createPaths:z,composeCellId:I,parseCellId:A,getCellIndex:G};function J(){const t=N.useMemo(()=>{const e=x.createGridMap(7,7,{origin:"center",adjacency:"surrounding"}),c=x.getOriginId(e);return console.log({originId:c}),x.updateCell(e,c??"","center"),x.updateCell(e,"4-4","here"),x.updateCell(e,"0-0","top","locked"),console.log(e),e},[]),o=e=>{switch(e){case"available":return"green";case"unavailable":return"red";case"visited":return"blue";case"used":return"yellow";default:return"inherit"}};return y.jsx(M,{direction:"vertical",children:t.cells.map(e=>y.jsx("div",{style:{width:50,height:50,border:"1px solid black",color:o(e.state)},children:e.data??e.id},e.id))})}function tt(){return P("Playground"),y.jsxs(b,{children:[y.jsx(S,{title:"Playground"}),y.jsx(D,{}),y.jsx(b.Content,{className:"content",children:y.jsx(J,{})})]})}export{tt as default};
