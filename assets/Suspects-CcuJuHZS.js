import{r as O,a as jr,_ as _r,j as n,T as S,g as wr,e as Sr,b as H,c as Tr,d as Pr,B as xe,I as Rr,D as Or,P as Ir,L as je}from"./index-3wVxZuaG.js";import{D as qr}from"./DataLoadingWrapper-6fNA41cL.js";import{l as q,P as Ar}from"./useBaseUrl-DC_5F-uw.js";import{u as Nr}from"./useCardWidth-CHSIxKJQ.js";import{u as Y}from"./useQueryParams-DWwQ1WxE.js";import{s as _e,a as kr}from"./index-DgIKOhKb.js";import{D as we}from"./EditableFields-rz83A4Yi.js";import{S as nr}from"./SuspectImageCard-BSJ7JdbS.js";import{u as Z}from"./useDebounce-DySOvZ4K.js";import{D as ar}from"./index-Dybp-dtj.js";import{F as I}from"./index-Bmxkh82F.js";import{S as V}from"./index-CDwmVdPk.js";import{I as or}from"./index-D5wKyk5o.js";import{R as Se}from"./index-PPfwJm5C.js";import{S as ir}from"./index-jla9GFPa.js";import{u as Mr}from"./useCopyToClipboardFunction-CoRhsE1Z.js";import{S as Te}from"./index-4IsNi3jv.js";import{T as Dr}from"./index-CPJA_5oE.js";import{R as Br,a as Er}from"./WomanOutlined-BO-CAiYT.js";import{R as Wr,a as Hr}from"./ColumnWidthOutlined-CP76bc1z.js";import{b as Fr,a as Pe}from"./FilterEntries-CMdImjvp.js";import{S as Lr}from"./SiderContent-UJPs99j4.js";import{D as zr}from"./DownloadButton-D3lWDg_Q.js";import{F as $r}from"./FirestoreConsoleLink-B_-Y_OCd.js";import{S as Gr}from"./SaveButton-BYRQz9LQ.js";import{S as Kr}from"./SuspectsStyleVariantSelector-0hj9VKHE.js";import{u as Vr}from"./useResourceFirestoreData-DmKRIoBN.js";import"./constants-DbfgZwql.js";import"./Item-4Y7ACGy0.js";import"./LanguageFlag-CE1b_Jfz.js";import"./FireFilled-o9iHEAXm.js";import"./IdcardOutlined-N1UUU0J4.js";import"./ImageCard-Fpz4__Mc.js";import"./gapSize-U1swVQyS.js";import"./Input-DmrVH3Eq.js";import"./index-CsEJLaiP.js";import"./index-DoxZLNvv.js";import"./moment-C5S46NFB.js";import"./SaveOutlined-BocHQR_4.js";import"./useGetFirestoreDoc-DEMKnJVl.js";import"./useTDResource-JJa_G7B-.js";import"./useUpdateFirestoreDoc-BwTZW_81.js";import"./useMutation-CpFGIL82.js";var Yr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},Ur=function(a,i){return O.createElement(jr,_r({},a,{ref:i,icon:Yr}))},Qr=O.forwardRef(Ur);const Jr=["18-21","21-30","30-40","40-50","50-60","60-70","70-80","80-90"].map(e=>({label:e,value:e})),Xr=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Non-binary",value:"non-binary"},{label:"Other",value:"other"}],Zr=[{label:"Caucasian",value:"caucasian"},{label:"Black",value:"black"},{label:"Asian",value:"asian"},{label:"Latino",value:"latino"},{label:"Indigenous",value:"indigenous"},{label:"Indian",value:"indian"},{label:"Middle Eastern",value:"middle-eastern"},{label:"Mixed",value:"mixed"},{label:"Other",value:"other"}];function et({data:e,addEntryToUpdate:a}){const{removeParam:i,queryParams:t}=Y(),o=t.get("suspectId"),r=e[o??""],[l,c]=O.useState((r==null?void 0:r.name.pt)||""),[p,u]=O.useState((r==null?void 0:r.name.en)||""),[f,y]=O.useState((r==null?void 0:r.note)||"");if(O.useEffect(()=>{r&&(c(r.name.pt),u(r.name.en),y(r.note||""))},[r==null?void 0:r.id]),Z(()=>{r&&l!==r.name.pt&&a(r.id,{...r,name:{...r.name,pt:l}})},500,[l]),Z(()=>{r&&p!==r.name.en&&a(r.id,{...r,name:{...r.name,en:p}})},500,[p]),Z(()=>{r&&f!==r.note&&a(r.id,{...r,note:f})},500,[f]),!r)return null;const v={pt:l,en:p};return n.jsx(ar,{title:r.name.pt,placement:"right",onClose:()=>i("suspectId"),open:!!r,width:400,children:n.jsxs("div",{className:"suspect__drawer",children:[n.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1.25fr"},children:[n.jsx(nr,{id:r.id,width:100}),n.jsxs(I,{vertical:!0,gap:4,children:[n.jsx(we,{value:v,language:"pt",onChange:s=>c(s.target.value)}),n.jsx(we,{value:v,language:"en",onChange:s=>u(s.target.value)}),n.jsx("div",{children:n.jsx(V,{placeholder:"Select Age",value:r.age,size:"small",onChange:s=>{a(r.id,{...r,age:s})},options:Jr,style:{width:80}})}),n.jsx("div",{children:n.jsx(V,{value:r.gender,size:"small",onChange:s=>{a(r.id,{...r,gender:s})},options:Xr,style:{width:120}})}),n.jsx("div",{children:n.jsx(V,{value:r.ethnicity,size:"small",onChange:s=>{a(r.id,{...r,ethnicity:s})},options:Zr,style:{width:150}})}),n.jsx("div",{children:n.jsx(or,{value:f,size:"small",onChange:s=>y(s.target.value)})})]},`${v.pt}-${v.en}`)]}),n.jsxs("div",{className:"grid grid-2",children:[n.jsxs(I,{vertical:!0,children:[n.jsx(S.Text,{strong:!0,children:"Build"}),n.jsx(Se.Group,{size:"small",value:r.build,onChange:s=>{a(r.id,{...r,build:s.target.value})},options:tt,style:{display:"flex",flexDirection:"column",gap:3}})]}),n.jsxs(I,{vertical:!0,children:[n.jsx(S.Text,{strong:!0,children:"Height"}),n.jsx(Se.Group,{size:"small",value:r.height,onChange:s=>{a(r.id,{...r,height:s.target.value})},options:nt,style:{display:"flex",flexDirection:"column",gap:3}})]})]}),n.jsx(rt,{suspect:r,addEntryToUpdate:a})]})})}function rt({suspect:e,addEntryToUpdate:a}){const i=e.features??[],t=o=>{const r=i.includes(o)?i.filter(l=>l!==o):[...i,o];a(e.id,{...e,features:r})};return n.jsx("div",{className:"grid grid-2",children:be.map(o=>n.jsxs("div",{className:"my-4",children:[n.jsx(S.Text,{strong:!0,children:o.title}),o.features.map(r=>n.jsxs(I,{className:"my-2",gap:4,children:[n.jsx(ir,{size:"small",checked:i.includes(r.id),onChange:()=>t(r.id)})," ",r.label]},r.id))]},o.title))})}const tt=["thin","average","muscular","large"],nt=["short","medium","tall"],be=[{title:"Hair Length",features:[{id:"shortHair",label:"Short Hair"},{id:"longHair",label:"Long Hair"},{id:"mediumHair",label:"Medium Hair"},{id:"bald",label:"Bald"}]},{title:"Hair Color",features:[{id:"blackHair",label:"Black Hair"},{id:"brownHair",label:"Brown Hair"},{id:"blondeHair",label:"Blonde Hair"},{id:"redHair",label:"Red Hair"},{id:"greyHair",label:"Grey Hair"},{id:"coloredHair",label:"Colored Hair"}]},{title:"Face",features:[{id:"beard",label:"Beard"},{id:"mustache",label:"Mustache"},{id:"goatee",label:"Goatee"},{id:"lipstick",label:"Lipstick"}]},{title:"Specific",features:[{id:"buttonShirt",label:"Button Shirt"},{id:"showTeeth",label:"Showing Teeth"},{id:"avoidingCamera",label:"Avoiding Camera"},{id:"hairyChest",label:"Exposed Hairy Chest"}]},{title:"Accessories",features:[{id:"noAccessories",label:"No Accessories"},{id:"glasses",label:"Glasses"},{id:"piercings",label:"Piercings"},{id:"earrings",label:"Earrings"},{id:"necklace",label:"Necklace"},{id:"hat",label:"Hat"},{id:"scarf",label:"Scarf"},{id:"hoodie",label:"Hoodie"},{id:"tie",label:"Tie"},{id:"headscarf",label:"Headscarf/Bandana"},{id:"bow",label:"Bow"},{id:"wearingFlowers",label:"Wearing Flowers"},{id:"hairTie",label:"Hair Tie"}]},{title:"Clothing",features:[{id:"whiteShirt",label:"White Shirt"},{id:"blackClothes",label:"Black Clothes"},{id:"blueClothes",label:"Blue Clothes"},{id:"redClothes",label:"Red Clothes"},{id:"greenClothes",label:"Green Clothes"},{id:"yellowClothes",label:"Yellow Clothes"},{id:"purpleClothes",label:"Purple Clothes"},{id:"pinkClothes",label:"Pink Clothes"},{id:"orangeClothes",label:"Orange Clothes"},{id:"brownClothes",label:"Brown Clothes"},{id:"patternedShirt",label:"Patterned Shirt"},{id:"wearingStripes",label:"Wearing Stripes"}]}],sr=q.orderBy(be.reduce((e,a)=>(a.features.forEach(i=>{e.push({value:i.id,label:i.label})}),e),[]),["label"],["asc"]);console.log("flatFeatures",sr.map(e=>e.value));function at(){const{addParam:e,queryParams:a}=Y();return n.jsxs(I,{gap:8,align:"center",className:"my-2",children:[n.jsx(S.Text,{children:"Feature Highlight:"})," ",n.jsx(V,{options:sr,style:{width:200},size:"small",value:a.get("activeFeature")||void 0,onChange:i=>e("activeFeature",i),allowClear:!0})]})}var k={},ee={exports:{}},re={exports:{}},Re;function U(){return Re||(Re=1,function(e){function a(i){"@babel/helpers - typeof";return e.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.__esModule=!0,e.exports.default=e.exports,a(i)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(re)),re.exports}var Oe;function Q(){return Oe||(Oe=1,function(e){var a=U().default;function i(o){if(typeof WeakMap!="function")return null;var r=new WeakMap,l=new WeakMap;return(i=function(p){return p?l:r})(o)}function t(o,r){if(!r&&o&&o.__esModule)return o;if(o===null||a(o)!="object"&&typeof o!="function")return{default:o};var l=i(r);if(l&&l.has(o))return l.get(o);var c={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in o)if(u!=="default"&&{}.hasOwnProperty.call(o,u)){var f=p?Object.getOwnPropertyDescriptor(o,u):null;f&&(f.get||f.set)?Object.defineProperty(c,u,f):c[u]=o[u]}return c.default=o,l&&l.set(o,c),c}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ee)),ee.exports}var te={exports:{}},Ie;function F(){return Ie||(Ie=1,function(e){function a(i){return i&&i.__esModule?i:{default:i}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(te)),te.exports}var ne={exports:{}},qe;function lr(){return qe||(qe=1,function(e){function a(){return e.exports=a=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)({}).hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports,a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(ne)),ne.exports}var $={},Ae;function ot(){if(Ae)return $;Ae=1,Object.defineProperty($,"__esModule",{value:!0});var e={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482.88 128c-84.35 0-156.58 52.8-185.68 126.98-60.89 8.13-115.3 43.63-146.6 97.84-42.16 73-32.55 161.88 17.14 224.16-23.38 56.75-19.85 121.6 11.42 175.78 42.18 73.02 124.1 109.15 202.94 97.23C419.58 898.63 477.51 928 540.12 928c84.35 0 156.58-52.8 185.68-126.98 60.89-8.13 115.3-43.62 146.6-97.84 42.16-73 32.55-161.88-17.14-224.16 23.38-56.75 19.85-121.6-11.42-175.78-42.18-73.02-124.1-109.15-202.94-97.23C603.42 157.38 545.49 128 482.88 128m0 61.54c35.6 0 68.97 13.99 94.22 37.74-1.93 1.03-3.92 1.84-5.83 2.94l-136.68 78.91a46.11 46.11 0 00-23.09 39.78l-.84 183.6-65.72-38.34V327.4c0-76 61.9-137.86 137.94-137.86m197.7 75.9c44.19 3.14 86.16 27.44 109.92 68.57 17.8 30.8 22.38 66.7 14.43 100.42-1.88-1.17-3.6-2.49-5.53-3.6l-136.73-78.91a46.23 46.23 0 00-46-.06l-159.47 91.1.36-76.02 144.5-83.41a137.19 137.19 0 0178.53-18.09m-396.92 55.4c-.07 2.2-.3 4.35-.3 6.56v157.75a46.19 46.19 0 0022.91 39.9l158.68 92.5-66.02 37.67-144.55-83.35c-65.86-38-88.47-122.53-50.45-188.34 17.78-30.78 46.55-52.69 79.73-62.68m340.4 79.93l144.54 83.35c65.86 38 88.47 122.53 50.45 188.34-17.78 30.78-46.55 52.69-79.73 62.68.07-2.19.3-4.34.3-6.55V570.85a46.19 46.19 0 00-22.9-39.9l-158.69-92.5zM511.8 464.84l54.54 31.79-.3 63.22-54.84 31.31-54.54-31.85.3-63.16zm100.54 58.65l65.72 38.35V728.6c0 76-61.9 137.86-137.94 137.86-35.6 0-68.97-13.99-94.22-37.74 1.93-1.03 3.92-1.84 5.83-2.94l136.68-78.9a46.11 46.11 0 0023.09-39.8zm-46.54 89.55l-.36 76.02-144.5 83.41c-65.85 38-150.42 15.34-188.44-50.48-17.8-30.8-22.38-66.7-14.43-100.42 1.88 1.17 3.6 2.5 5.53 3.6l136.74 78.91a46.23 46.23 0 0046 .06z"}}]},name:"open-a-i",theme:"outlined"};return $.default=e,$}var M={},ae={exports:{}},oe={exports:{}},Ne;function it(){return Ne||(Ne=1,function(e){function a(i){if(Array.isArray(i))return i}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(oe)),oe.exports}var ie={exports:{}},ke;function st(){return ke||(ke=1,function(e){function a(i,t){var o=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(o!=null){var r,l,c,p,u=[],f=!0,y=!1;try{if(c=(o=o.call(i)).next,t===0){if(Object(o)!==o)return;f=!1}else for(;!(f=(r=c.call(o)).done)&&(u.push(r.value),u.length!==t);f=!0);}catch(v){y=!0,l=v}finally{try{if(!f&&o.return!=null&&(p=o.return(),Object(p)!==p))return}finally{if(y)throw l}}return u}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(ie)),ie.exports}var se={exports:{}},le={exports:{}},Me;function lt(){return Me||(Me=1,function(e){function a(i,t){(t==null||t>i.length)&&(t=i.length);for(var o=0,r=Array(t);o<t;o++)r[o]=i[o];return r}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(le)),le.exports}var De;function ut(){return De||(De=1,function(e){var a=lt();function i(t,o){if(t){if(typeof t=="string")return a(t,o);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,o):void 0}}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(se)),se.exports}var ue={exports:{}},Be;function ct(){return Be||(Be=1,function(e){function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(ue)),ue.exports}var Ee;function ur(){return Ee||(Ee=1,function(e){var a=it(),i=st(),t=ut(),o=ct();function r(l,c){return a(l)||i(l,c)||t(l,c)||o()}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(ae)),ae.exports}var ce={exports:{}},de={exports:{}},fe={exports:{}},We;function dt(){return We||(We=1,function(e){var a=U().default;function i(t,o){if(a(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var l=r.call(t,o||"default");if(a(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(fe)),fe.exports}var He;function ft(){return He||(He=1,function(e){var a=U().default,i=dt();function t(o){var r=i(o,"string");return a(r)=="symbol"?r:r+""}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(de)),de.exports}var Fe;function cr(){return Fe||(Fe=1,function(e){var a=ft();function i(t,o,r){return(o=a(o))in t?Object.defineProperty(t,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[o]=r,t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(ce)),ce.exports}var pe={exports:{}},he={exports:{}},Le;function pt(){return Le||(Le=1,function(e){function a(i,t){if(i==null)return{};var o={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(t.includes(r))continue;o[r]=i[r]}return o}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(he)),he.exports}var ze;function dr(){return ze||(ze=1,function(e){var a=pt();function i(t,o){if(t==null)return{};var r,l,c=a(t,o);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(t);for(l=0;l<p.length;l++)r=p[l],o.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(c[r]=t[r])}return c}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(pe)),pe.exports}const fr=wr(Sr);var D={},$e;function pr(){if($e)return D;$e=1,Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var e=H(),a=(0,e.createContext)({});return D.default=a,D}var B={},me={exports:{}},Ge;function hr(){return Ge||(Ge=1,function(e){var a=cr();function i(o,r){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);r&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),l.push.apply(l,c)}return l}function t(o){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?i(Object(l),!0).forEach(function(c){a(o,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):i(Object(l)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(l,c))})}return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(me)),me.exports}var w={},A={},ve={exports:{}},Ke;function ht(){return Ke||(Ke=1,function(e){function a(i){return i&&i.__esModule?i:{default:i}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(ve)),ve.exports}var G={},Ve;function mt(){if(Ve)return G;Ve=1,Object.defineProperty(G,"__esModule",{value:!0}),G.default=e;function e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return G}var K={},Ye;function vt(){if(Ye)return K;Ye=1,Object.defineProperty(K,"__esModule",{value:!0}),K.default=e;function e(a,i){if(!a)return!1;if(a.contains)return a.contains(i);for(var t=i;t;){if(t===a)return!0;t=t.parentNode}return!1}return K}var Ue;function gt(){if(Ue)return A;Ue=1;var e=ht().default;Object.defineProperty(A,"__esModule",{value:!0}),A.clearContainerCache=C,A.injectCSS=f,A.removeCSS=v,A.updateCSS=g;var a=e(mt()),i=e(vt()),t="data-rc-order",o="rc-util-key",r=new Map;function l(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=m.mark;return x?x.startsWith("data-")?x:"data-".concat(x):o}function c(m){if(m.attachTo)return m.attachTo;var x=document.querySelector("head");return x||document.body}function p(m){return m==="queue"?"prependQueue":m?"prepend":"append"}function u(m){return Array.from((r.get(m)||m).children).filter(function(x){return x.tagName==="STYLE"})}function f(m){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,a.default)())return null;var d=x.csp,b=x.prepend,h=document.createElement("style");h.setAttribute(t,p(b)),d!=null&&d.nonce&&(h.nonce=d==null?void 0:d.nonce),h.innerHTML=m;var j=c(x),_=j.firstChild;if(b){if(b==="queue"){var T=u(j).filter(function(R){return["prepend","prependQueue"].includes(R.getAttribute(t))});if(T.length)return j.insertBefore(h,T[T.length-1].nextSibling),h}j.insertBefore(h,_)}else j.appendChild(h);return h}function y(m){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=c(x);return u(d).find(function(b){return b.getAttribute(l(x))===m})}function v(m){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=y(m,x);if(d){var b=c(x);b.removeChild(d)}}function s(m,x){var d=r.get(m);if(!d||!(0,i.default)(document,d)){var b=f("",x),h=b.parentNode;r.set(m,h),m.removeChild(b)}}function C(){r.clear()}function g(m,x){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=c(d);s(b,d);var h=y(x,d);if(h){var j,_;if((j=d.csp)!==null&&j!==void 0&&j.nonce&&h.nonce!==((_=d.csp)===null||_===void 0?void 0:_.nonce)){var T;h.nonce=(T=d.csp)===null||T===void 0?void 0:T.nonce}return h.innerHTML!==m&&(h.innerHTML=m),h}var R=f(m,d);return R.setAttribute(l(d),x),R}return A}var E={},Qe;function xt(){if(Qe)return E;Qe=1,Object.defineProperty(E,"__esModule",{value:!0}),E.getShadowRoot=i,E.inShadow=a;function e(t){var o;return t==null||(o=t.getRootNode)===null||o===void 0?void 0:o.call(t)}function a(t){return e(t)!==(t==null?void 0:t.ownerDocument)}function i(t){return a(t)?e(t):null}return E}var P={},Je;function bt(){if(Je)return P;Je=1,Object.defineProperty(P,"__esModule",{value:!0}),P.call=r,P.default=void 0,P.note=t,P.noteOnce=c,P.preMessage=void 0,P.resetWarned=o,P.warning=i,P.warningOnce=l;var e={},a=function(f){};P.preMessage=a;function i(u,f){}function t(u,f){}function o(){e={}}function r(u,f,y){!f&&!e[y]&&(u(!1,y),e[y]=!0)}function l(u,f){r(i,u,f)}function c(u,f){r(t,u,f)}l.preMessage=a,l.resetWarned=o,l.noteOnce=c;var p=l;return P.default=p,P}var Xe;function ye(){if(Xe)return w;Xe=1;var e=Q().default,a=F().default;Object.defineProperty(w,"__esModule",{value:!0}),w.generate=C,w.getSecondaryColor=g,w.iconStyles=void 0,w.isIconDefinition=v,w.normalizeAttrs=s,w.normalizeTwoToneColors=m,w.useInsertStyles=w.svgBaseProps=void 0,w.warning=y;var i=a(hr()),t=a(U()),o=fr,r=gt(),l=xt(),c=a(bt()),p=e(H()),u=a(pr());function f(d){return d.replace(/-(.)/g,function(b,h){return h.toUpperCase()})}function y(d,b){(0,c.default)(d,"[@ant-design/icons] ".concat(b))}function v(d){return(0,t.default)(d)==="object"&&typeof d.name=="string"&&typeof d.theme=="string"&&((0,t.default)(d.icon)==="object"||typeof d.icon=="function")}function s(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(d).reduce(function(b,h){var j=d[h];switch(h){case"class":b.className=j,delete b.class;break;default:delete b[h],b[f(h)]=j}return b},{})}function C(d,b,h){return h?p.default.createElement(d.tag,(0,i.default)((0,i.default)({key:b},s(d.attrs)),h),(d.children||[]).map(function(j,_){return C(j,"".concat(b,"-").concat(d.tag,"-").concat(_))})):p.default.createElement(d.tag,(0,i.default)({key:b},s(d.attrs)),(d.children||[]).map(function(j,_){return C(j,"".concat(b,"-").concat(d.tag,"-").concat(_))}))}function g(d){return(0,o.generate)(d)[0]}function m(d){return d?Array.isArray(d)?d:[d]:[]}w.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var x=w.iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;return w.useInsertStyles=function(b){var h=(0,p.useContext)(u.default),j=h.csp,_=h.prefixCls,T=h.layer,R=x;_&&(R=R.replace(/anticon/g,_)),T&&(R="@layer ".concat(T,` {
`).concat(R,`
}`)),(0,p.useEffect)(function(){var L=b.current,z=(0,l.getShadowRoot)(L);(0,r.updateCSS)(R,"@ant-design-icons",{prepend:!T,csp:j,attachTo:z})},[])},w}var Ze;function mr(){if(Ze)return B;Ze=1;var e=F().default,a=Q().default;Object.defineProperty(B,"__esModule",{value:!0}),B.default=void 0;var i=e(dr()),t=e(hr()),o=a(H()),r=ye(),l=["icon","className","onClick","style","primaryColor","secondaryColor"],c={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function p(y){var v=y.primaryColor,s=y.secondaryColor;c.primaryColor=v,c.secondaryColor=s||(0,r.getSecondaryColor)(v),c.calculated=!!s}function u(){return(0,t.default)({},c)}var f=function(v){var s=v.icon,C=v.className,g=v.onClick,m=v.style,x=v.primaryColor,d=v.secondaryColor,b=(0,i.default)(v,l),h=o.useRef(),j=c;if(x&&(j={primaryColor:x,secondaryColor:d||(0,r.getSecondaryColor)(x)}),(0,r.useInsertStyles)(h),(0,r.warning)((0,r.isIconDefinition)(s),"icon should be icon definiton, but got ".concat(s)),!(0,r.isIconDefinition)(s))return null;var _=s;return _&&typeof _.icon=="function"&&(_=(0,t.default)((0,t.default)({},_),{},{icon:_.icon(j.primaryColor,j.secondaryColor)})),(0,r.generate)(_.icon,"svg-".concat(_.name),(0,t.default)((0,t.default)({className:C,onClick:g,style:m,"data-icon":_.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},b),{},{ref:h}))};return f.displayName="IconReact",f.getTwoToneColors=u,f.setTwoToneColors=p,B.default=f,B}var W={},er;function yt(){if(er)return W;er=1;var e=F().default;Object.defineProperty(W,"__esModule",{value:!0}),W.getTwoToneColor=r,W.setTwoToneColor=o;var a=e(ur()),i=e(mr()),t=ye();function o(l){var c=(0,t.normalizeTwoToneColors)(l),p=(0,a.default)(c,2),u=p[0],f=p[1];return i.default.setTwoToneColors({primaryColor:u,secondaryColor:f})}function r(){var l=i.default.getTwoToneColors();return l.calculated?[l.primaryColor,l.secondaryColor]:l.primaryColor}return W}var rr;function Ct(){if(rr)return M;rr=1;var e=F().default,a=Q().default;Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var i=e(lr()),t=e(ur()),o=e(cr()),r=e(dr()),l=a(H()),c=e(Tr()),p=fr,u=e(pr()),f=e(mr()),y=yt(),v=ye(),s=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,y.setTwoToneColor)(p.blue.primary);var C=l.forwardRef(function(g,m){var x=g.className,d=g.icon,b=g.spin,h=g.rotate,j=g.tabIndex,_=g.onClick,T=g.twoToneColor,R=(0,r.default)(g,s),L=l.useContext(u.default),z=L.prefixCls,J=z===void 0?"anticon":z,vr=L.rootClassName,gr=(0,c.default)(vr,J,(0,o.default)((0,o.default)({},"".concat(J,"-").concat(d.name),!!d.name),"".concat(J,"-spin"),!!b||d.name==="loading"),x),X=j;X===void 0&&_&&(X=-1);var xr=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,br=(0,v.normalizeTwoToneColors)(T),Ce=(0,t.default)(br,2),yr=Ce[0],Cr=Ce[1];return l.createElement("span",(0,i.default)({role:"img","aria-label":d.name},R,{ref:m,tabIndex:X,onClick:_,className:gr}),l.createElement(f.default,{icon:d,primaryColor:yr,secondaryColor:Cr,style:xr}))});return C.displayName="AntdIcon",C.getTwoToneColor=y.getTwoToneColor,C.setTwoToneColor=y.setTwoToneColor,M.default=C,M}var tr;function jt(){if(tr)return k;tr=1;var e=Q().default,a=F().default;Object.defineProperty(k,"__esModule",{value:!0}),k.default=void 0;var i=a(lr()),t=e(H()),o=a(ot()),r=a(Ct()),l=function(u,f){return t.createElement(r.default,(0,i.default)({},u,{ref:f,icon:o.default}))},c=t.forwardRef(l);return k.default=c,k}var _t=jt();const wt=Pr(_t),ge="TD_ADMIN_SUSPECTS_PROMPT";function St(){const[e,a]=O.useState(localStorage.getItem(ge)??"Make a pixar version of this image, keep the Polaroid frame and aspect ratio at 2:3. It's a"),i=t=>{const o=t.target.value;a(o),localStorage.setItem(ge,o)};return n.jsxs(I,{gap:8,align:"center",className:"my-2",children:[n.jsx(S.Text,{children:"Prompt Prefix:"}),n.jsx(or,{value:e,onChange:i,placeholder:"AI Prompt",style:{width:320}})]})}function Tt({suspect:e}){const a=Mr(),i=()=>{const o=`${localStorage.getItem(ge)??""} ${e.prompt}`;a(o)};return n.jsx(xe,{size:"small",onClick:i,children:n.jsx(wt,{})})}function Pt({data:e,addEntryToUpdate:a}){const{addParam:i,queryParams:t}=Y(),o=t.get("variant")??"gb",r=t.get("sortBy")??"id",l=Number(t.get("cardsPerRow"))||10,c=t.get("activeFeature")||"",p=t.get("suspectId"),[u,f]=Nr(l,{margin:0,gap:8}),y=O.useMemo(()=>q.orderBy(Object.values(e),s=>r==="id"?Number(s.id.split("-").at(-1)):r==="name.pt"?_e(s.name.pt).toLowerCase():r==="name.en"?_e(s.name.en).toLowerCase():s[r]??s.id,["asc"]),[e,r]),v=(s,C)=>{const g=e[s];if(!g)return;const m=g.features||[];m.includes(C)?a(s,{...g,features:m.filter(x=>x!==C)}):a(s,{...g,features:[...m,C]})};return n.jsxs(n.Fragment,{children:[n.jsxs(S.Title,{level:2,children:["Deck ",o," (",y.length,")"]}),n.jsxs(Te,{children:[n.jsx(at,{})," ",n.jsx(St,{})]}),n.jsx(Rr.PreviewGroup,{children:n.jsx(Te,{ref:f,wrap:!0,className:"my-2",children:y.map(s=>{var C,g,m;return n.jsxs("div",{className:"suspect",style:{width:`${u}px`},children:[n.jsx(nr,{id:s.id,width:u,className:"suspect__image"}),n.jsxs("div",{className:"suspect__name",children:[n.jsxs(I,{gap:6,align:"center",children:[n.jsx(Dr,{children:s.id})," ",n.jsx(Tt,{suspect:s})]}),n.jsx(S.Text,{type:"secondary",italic:!0,children:n.jsx("small",{children:q.truncate(s.note||"-",{length:18})})}),n.jsxs("div",{children:["ðŸ‡§ðŸ‡· ",s.name.pt]}),n.jsxs("div",{children:["ðŸ‡ºðŸ‡¸ ",s.name.en]}),n.jsxs("div",{className:"suspect__info",style:Rt(s),children:[n.jsxs("div",{children:[n.jsxs("div",{children:[s.gender==="male"?n.jsx(Br,{}):n.jsx(Er,{})," ",s.age]}),n.jsx("div",{children:n.jsx("em",{children:s.ethnicity})})]}),n.jsxs("div",{className:"uppercase",children:[n.jsx(Wr,{}),n.jsx("br",{}),s.build.charAt(0)]}),n.jsxs("div",{className:"uppercase",children:[n.jsx(Hr,{}),n.jsx("br",{}),s.height.charAt(0)]}),n.jsxs("div",{children:[((C=s==null?void 0:s.features)==null?void 0:C.length)??0," features"]})]}),n.jsx(xe,{size:"small",block:!0,onClick:()=>i("suspectId",s.id),danger:!(s!=null&&s.features)||((g=s==null?void 0:s.features)==null?void 0:g.length)<2,children:n.jsx(Qr,{})}),!!c&&n.jsxs(I,{gap:8,className:"mt-2 mb-4",children:[n.jsxs(S.Text,{keyboard:!0,children:[c,":"]}),n.jsx(ir,{checked:(m=s.features)==null?void 0:m.includes(c),onChange:()=>v(s.id,c),checkedChildren:"âœ“",unCheckedChildren:"âœ—"})]})]})]},s.id)})},o)}),n.jsx(et,{data:e,addEntryToUpdate:a},p)]})}const Rt=e=>!e.build||!e.height||e.build.length===1||e.height.length===1?{borderColor:"red"}:{};function N(e,a){return q.orderBy(Object.entries(e).map(([i,t])=>({key:i,label:q.capitalize(i),value:t,percentage:Math.round(t/a*100)})),["percentage"],["desc"])}function Ot({data:e}){const[a,i]=O.useState(!1);return n.jsxs(n.Fragment,{children:[n.jsx(xe,{onClick:()=>i(!0),block:!0,children:"See Stats"}),a&&n.jsx(It,{data:e,open:a,onClose:()=>i(!1)})]})}function It({data:e,open:a,onClose:i}){const{ages:t,ethnicities:o,genders:r,builds:l,heights:c}=O.useMemo(()=>{const u={},f={},y={},v={},s={};Object.values(e).forEach(g=>{u[g.age]=(u[g.age]??0)+1,f[g.ethnicity]=(f[g.ethnicity]??0)+1,y[g.gender]=(y[g.gender]??0)+1,v[g.build||"?"]=(v[g.build||"?"]??0)+1,s[g.height||"?"]=(s[g.height||"?"]??0)+1});const C=Object.keys(e).length;return{ages:N(u,C),ethnicities:N(f,C),genders:N(y,C),builds:N(v,C),heights:N(s,C)}},[e]),p=O.useMemo(()=>{const u={};Object.values(e).forEach(v=>{var s;(s=v.features)==null||s.forEach(C=>{u[C]=(u[C]??0)+1})});const f=Object.keys(e).length,y=be.reduce((v,s)=>{const C=s.features.map(g=>g.id);return v.push(...C),v},[]);return q.orderBy(N(u,f),v=>y.findIndex(s=>s===v.key),["asc"])},[e]);return n.jsxs(ar,{title:"Suspects Statistics",placement:"right",onClose:i,open:a,width:400,children:[n.jsx(S.Text,{strong:!0,children:"Ethnicity"}),n.jsx("ul",{className:"statistic__list",children:o.map(u=>n.jsxs("li",{children:[n.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),n.jsx(S.Text,{strong:!0,children:"Gender"}),n.jsx("ul",{className:"statistic__list",children:r.map(u=>n.jsxs("li",{children:[n.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),n.jsx(S.Text,{strong:!0,children:"Age"}),n.jsx("ul",{className:"statistic__list",children:t.map(u=>n.jsxs("li",{children:[n.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),n.jsx(S.Text,{strong:!0,children:"Build"}),n.jsx("ul",{className:"statistic__list",children:l.map(u=>n.jsxs("li",{children:[n.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),n.jsx(S.Text,{strong:!0,children:"Height"}),n.jsx("ul",{className:"statistic__list",children:c.map(u=>n.jsxs("li",{children:[n.jsx("strong",{children:u.label})," - ",u.percentage,"%"]},u.key))}),n.jsx(S.Text,{strong:!0,children:"Features"}),n.jsx("ul",{className:"statistic__list",children:p.map(u=>n.jsxs("li",{children:[n.jsx("strong",{children:u.label})," - ",u.percentage,"% (",u.value,")"]},u.key))})]})}const qt=[{value:"ct",label:"Cartoon (deprecated)"},{value:"ai",label:"AI (deprecated)"},{value:"md",label:"Models (deprecated)"},{value:"wc",label:"Wacky (deprecated)"}],At=[{value:"id",label:"Id"},{value:"name.pt",label:"Name (PT)"},{value:"name.en",label:"Name (EN)"},{value:"ethnicity",label:"Ethnicity"},{value:"gender",label:"Gender"},{value:"age",label:"Age"},{value:"height",label:"Height"},{value:"build",label:"Build"}];function Nt({data:e,save:a,isDirty:i,isSaving:t,entriesToUpdate:o,hasFirestoreData:r}){const{addParam:l,queryParams:c}=Y();return n.jsxs(Lr,{children:[n.jsxs(I,{vertical:!0,gap:12,children:[n.jsx(Gr,{isDirty:i,onSave:a,isSaving:t,dirt:JSON.stringify(o)}),n.jsx(zr,{data:()=>kt(e),fileName:"suspects.json",disabled:i,hasNewData:r,block:!0}),n.jsx($r,{path:"tdr/suspects",className:"text-center"})]}),n.jsx(Or,{}),n.jsx(Kr,{}),n.jsx(Fr,{label:"Cards Per Row",value:Number(c.get("cardsPerRow")??"10"),onChange:p=>l("cardsPerRow",p),min:2,max:12}),n.jsx(Pe,{label:"Sort By",value:c.get("sortBy")??"id",onChange:p=>l("sortBy",p),options:At}),n.jsx(Pe,{label:"Other Versions",value:c.get("variant")??"gb",onChange:p=>l("variant",p),options:qt}),n.jsx(Ot,{data:e})]})}function kt(e){const a=q.cloneDeep(e);for(const i in a){const t=a[i];t.name.pt.endsWith(".")&&(t.name.pt=t.name.pt.slice(0,-1).trim()),t.name.en.endsWith(".")&&(t.name.en=t.name.en.slice(0,-1).trim()),Number(t.id.match(/\d+/))>114&&(t.gbExclusive=!0)}return kr(a,["gender","ethnicity","age","height","build","features"])}function Sn(){const e=Vr({tdrResourceName:"suspects",firestoreDataCollectionName:"suspects",serialize:!0});return n.jsx(Ir,{title:"Suspects",subtitle:"Information",children:n.jsxs(je,{hasSider:!0,children:[n.jsx(Ar,{children:n.jsx(Nt,{...e})}),n.jsx(je.Content,{className:"content",children:n.jsx(qr,{isLoading:e.isLoading,error:e.error,hasResponseData:!q.isEmpty(e.data),children:n.jsx(Pt,{...e})})})]})})}export{Sn as default};
