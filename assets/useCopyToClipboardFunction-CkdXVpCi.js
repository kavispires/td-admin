import{l as w}from"./lodash-Cne9hxq2.js";import{r as l,bt as D,bu as x,N as E}from"./index-DVQc80aL.js";function T(){var r=l.useRef(!1),a=l.useCallback(function(){return r.current},[]);return l.useEffect(function(){return r.current=!0,function(){r.current=!1}},[]),a}var S=function(r){r===void 0&&(r={});var a=l.useState(r),c=a[0],i=a[1],p=l.useCallback(function(t){i(function(e){return Object.assign({},e,t instanceof Function?t(e):t)})},[]);return[c,p]},g,v;function h(){if(v)return g;v=1;var r=D(),a={"text/plain":"Text","text/html":"Url",default:"Text"},c="Copy to clipboard: #{key}, Enter";function i(t){var e=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function p(t,e){var n,u,d,y,f,o,m=!1;e||(e={}),n=e.debug||!1;try{d=r(),y=document.createRange(),f=document.getSelection(),o=document.createElement("span"),o.textContent=t,o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(s){if(s.stopPropagation(),e.format)if(s.preventDefault(),typeof s.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=a[e.format]||a.default;window.clipboardData.setData(b,t)}else s.clipboardData.clearData(),s.clipboardData.setData(e.format,t);e.onCopy&&(s.preventDefault(),e.onCopy(s.clipboardData))}),document.body.appendChild(o),y.selectNodeContents(o),f.addRange(y);var C=document.execCommand("copy");if(!C)throw new Error("copy command was unsuccessful");m=!0}catch(s){n&&console.error("unable to copy using execCommand: ",s),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),m=!0}catch(b){n&&console.error("unable to copy using clipboardData: ",b),n&&console.error("falling back to prompt"),u=i("message"in e?e.message:c),window.prompt(u,t)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(y):f.removeAllRanges()),o&&document.body.removeChild(o),d()}return m}return g=p,g}var k=h();const R=x(k);var U=function(){var r=T(),a=S({value:void 0,error:void 0,noUserInteraction:!0}),c=a[0],i=a[1],p=l.useCallback(function(t){if(r()){var e,n;try{if(typeof t!="string"&&typeof t!="number"){var u=new Error("Cannot copy typeof "+typeof t+" to clipboard, must be a string");i({value:t,error:u,noUserInteraction:!0});return}else if(t===""){var u=new Error("Cannot copy empty string to clipboard.");i({value:t,error:u,noUserInteraction:!0});return}n=t.toString(),e=R(n),i({value:n,error:void 0,noUserInteraction:e})}catch(d){i({value:n,error:d,noUserInteraction:e})}}},[]);return[c,p]};function F(){const[r,a]=U(),{message:c}=E.useApp();return l.useEffect(()=>{r.value&&(r.value.length>20?c.info(`Copied to clipboard: ${w.truncate(r.value,{length:30,omission:"..."})}`):c.success("Copied"))},[r,c]),a}export{F as u};
