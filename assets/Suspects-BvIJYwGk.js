import{r as P,d as qe,_ as Ae,j as r,F as C,b as _r,T as S,av as Lr,aw as Hr,ax as V,ay as Wr,ak as zr,i as $r,B as ae,az as Gr,I as Kr,D as Z,c as Ur,P as Jr,L as Be}from"./index-DiQmi0MW.js";import{D as Vr}from"./DataLoadingWrapper--HsHTCr7.js";import{l as I,P as Yr}from"./useBaseUrl-D1bg9UhE.js";import{c as Ee}from"./clsx-B-dksMZM.js";import{u as Zr}from"./useCardWidth-BGZwx3On.js";import{u as H}from"./useQueryParams-Bm5JRIqF.js";import{s as X,a as wr}from"./index-CnEqHRKo.js";import{S as Ie}from"./SuspectImageCard-BZZduhtf.js";import{D as Tr}from"./index-BO9plV1R.js";import{S as Pr}from"./index-gJNRXt6U.js";import{S as ke}from"./index-DIkZ-_f4.js";import{S as ne}from"./index-C86ET2Oi.js";import{R as Xr}from"./index-BpL278_L.js";import{u as Qr}from"./useCopyToClipboardFunction-BsarqM11.js";import{T as Q}from"./index-D-O6YYgH.js";import{R as et}from"./AppstoreOutlined-Bh-J01QK.js";import{S as Le}from"./index-BChrpNcT.js";import{a as rt,R as tt}from"./WomanOutlined-3UKVjZB-.js";import{R as at,a as nt}from"./ColumnWidthOutlined-ByTi-d8N.js";import{F as it}from"./Table-UFZq6q3Y.js";import{c as ot,a as le}from"./FilterEntries-BH0hUhD6.js";import{S as st}from"./SiderContent-DMtv0EOo.js";import{D as He}from"./DownloadButton-D2n6yy6w.js";import{a as We}from"./FirestoreConsoleLink-DkC6SwSo.js";import{S as ze}from"./SaveButton-8wkk30KU.js";import{S as lt}from"./SuspectsStyleVariantSelector-BTIhxSLM.js";import{u as $e}from"./useResourceFirestoreData-D6OgMLa_.js";import"./constants-BVB4j3au.js";import"./Item-CYpZIcnt.js";import"./ImageCard-CrGHzcCA.js";import"./index-C-JmlTiL.js";import"./index-Dt0P6tWf.js";import"./scrollTo-DXc6dn10.js";import"./Pagination-DiltPt9P.js";import"./useMutation-BANqJ3Tn.js";import"./index-DOc6sdJx.js";import"./moment-BYTvHWBW.js";import"./SaveOutlined-CQiH_YKC.js";import"./useGetFirestoreDoc-ClJanLbV.js";import"./useTDResource-B7rQYhkN.js";import"./useUpdateFirestoreDoc-BhKL4jgK.js";var ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},ut=function(t,a){return P.createElement(qe,Ae({},t,{ref:a,icon:ct}))},Ge=P.forwardRef(ut),dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M910.5 553.2l-109-370.8c-6.8-20.4-23.1-34.1-44.9-34.1s-39.5 12.3-46.3 32.7l-72.2 215.4H386.2L314 181.1c-6.8-20.4-24.5-32.7-46.3-32.7s-39.5 13.6-44.9 34.1L113.9 553.2c-4.1 13.6 1.4 28.6 12.3 36.8l385.4 289 386.7-289c10.8-8.1 16.3-23.1 12.2-36.8z"}}]},name:"gitlab",theme:"filled"},pt=function(t,a){return P.createElement(qe,Ae({},t,{ref:a,icon:dt}))},ft=P.forwardRef(pt),ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.3 338.4a447.57 447.57 0 00-96.1-143.3 443.09 443.09 0 00-143-96.3A443.91 443.91 0 00512 64h-2c-60.5.3-119 12.3-174.1 35.9a444.08 444.08 0 00-141.7 96.5 445 445 0 00-95 142.8A449.89 449.89 0 0065 514.1c.3 69.4 16.9 138.3 47.9 199.9v152c0 25.4 20.6 46 45.9 46h151.8a447.72 447.72 0 00199.5 48h2.1c59.8 0 117.7-11.6 172.3-34.3A443.2 443.2 0 00827 830.5c41.2-40.9 73.6-88.7 96.3-142 23.5-55.2 35.5-113.9 35.8-174.5.2-60.9-11.6-120-34.8-175.6zM312.4 560c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.4 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48z"}}]},name:"message",theme:"filled"},gt=function(t,a){return P.createElement(qe,Ae({},t,{ref:a,icon:ht}))},vt=P.forwardRef(gt);const mt=["18-21","21-30","30-40","40-50","50-60","60-70","70-80","80-90"].map(e=>({label:e,value:e})),xt=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Non-binary",value:"non-binary"},{label:"Other",value:"other"}],bt=[{label:"White",value:"white"},{label:"Black",value:"black"},{label:"Asian",value:"asian"},{label:"Brown",value:"brown"},{label:"Indigenous",value:"indigenous"},{label:"Mixed",value:"mixed"},{label:"Other",value:"other"}],yt=["thin","average","muscular","large"].map(e=>({label:e,value:e})),jt=["short","medium","tall"].map(e=>({label:e,value:e})),Ct=["INTJ","INTP","ENTJ","ENTP","INFJ","INFP","ENFJ","ENFP","ISTJ","ISFJ","ESTJ","ESFJ","ISTP","ISFP","ESTP","ESFP"],St=["aries","taurus","gemini","cancer","leo","virgo","libra","scorpio","sagittarius","capricorn","aquarius","pisces"].map(e=>({label:I.capitalize(e),value:e})),_t=["lawful-good","neutral-good","chaotic-good","lawful-neutral","true-neutral","chaotic-neutral","lawful-evil","neutral-evil","chaotic-evil"].map(e=>({label:I.capitalize(e.replace("-"," ")),value:e})),wt=[{label:"Straight",value:"straight"},{label:"Gay",value:"gay"},{label:"Bisexual",value:"bisexual"},{label:"Other",value:"other"}],Tt=[{label:"None",value:"none"},{label:"Basic",value:"basic"},{label:"College",value:"college"},{label:"High Education",value:"high"}],Pt=[{label:"Lower",value:"lower"},{label:"Middle",value:"middle"},{label:"Upper",value:"upper"}];function Ot({suspects:e,suspectsExtendedInfos:t,addSuspectEntryToUpdate:a,addExtendedInfoEntryToUpdate:n}){const{removeParam:i,queryParams:s,addParam:c}=H(),d=s.get("suspectId"),p=s.get("drawerTab")||"Basic",l=e[d??""],g=(v,m,y)=>{const f=e[v];f&&f[m]!==y&&a(v,{...f,[m]:y})},x=(v,m,y)=>{const f=t[v];f&&f[m]!==y&&n(v,{...f,[m]:y})};return l?r.jsx(Tr,{onClose:()=>i("suspectId"),open:!!l,placement:"right",title:l.name.pt,width:400,children:r.jsxs("div",{className:"suspect__drawer",children:[r.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1.25fr",height:"100%",overflowY:"auto"},children:[r.jsx("div",{children:r.jsx("div",{style:{top:64,position:"fixed"},children:r.jsx(Ie,{cardId:l.id,cardWidth:100})})}),r.jsxs(C,{gap:4,vertical:!0,children:[r.jsx(Pr,{onChange:v=>c("drawerTab",v),options:["Basic","Features","Extended"],value:p}),r.jsx(M,{defaultValue:l.name.pt,label:"Name in PT",prefix:r.jsx("span",{children:"ðŸ‡§ðŸ‡·"}),suspect:l,suspectId:l.id,updater:a,valueKey:"name.pt"}),r.jsx(M,{defaultValue:l.name.en,label:"Name in EN",prefix:r.jsx("span",{children:"ðŸ‡ºðŸ‡¸"}),suspect:l,suspectId:l.id,updater:a,valueKey:"name.en"}),r.jsx("div",{children:r.jsx(ke,{onChange:v=>g(l.id,"age",v),options:mt,placeholder:"Select Age",style:{width:128},value:l.age})})]})]}),p==="Basic"&&r.jsx(It,{suspect:l,updateSuspectKeyValue:g},d),p==="Features"&&r.jsx(Nt,{addEntryToUpdate:a,suspect:l},d),p==="Extended"&&r.jsx(Rt,{addExtendedInfoEntryToUpdate:n,suspect:l,suspectExtendedInfo:t[l.id]||{},updateExtendedKeyValue:x},d)]})}):null}function M({label:e,defaultValue:t,suspect:a,suspectId:n,updater:i,valueKey:s,...c}){const[d,p]=P.useState(t||"");P.useEffect(()=>{t&&p(t)},[a.id]);const l=()=>{if(n&&d!==t){const g=I.cloneDeep(a);I.set(g,s,d),i(a.id,g)}};return r.jsx(_r,{onBlur:l,onChange:g=>p(g.target.value),placeholder:e?String(e):"",value:d,...c})}function F({label:e,suspectId:t,valueKey:a,value:n,options:i,updater:s}){return r.jsxs(C,{vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:e}),r.jsx(Xr.Group,{onChange:c=>s(t,a,c.target.value),options:i,size:"small",style:{display:"flex",flexDirection:"column",gap:3},value:n})]})}function ce({label:e,suspectId:t,valueKey:a,value:n,options:i,updater:s}){return r.jsxs(C,{vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:e}),r.jsx(ke,{onChange:c=>s(t,a,c),options:i,placeholder:typeof e=="string"?e:"",style:{width:"100%"},value:n})]})}function It({suspect:e,updateSuspectKeyValue:t}){return r.jsxs("div",{className:"grid grid-2 gap-4 my-4",children:[r.jsx(F,{label:"Gender",options:xt,suspectId:e.id,updater:t,value:e.gender,valueKey:"gender"}),r.jsx(F,{label:"Race",options:bt,suspectId:e.id,updater:t,value:e.race,valueKey:"race"}),r.jsx(F,{label:"Build",options:yt,suspectId:e.id,updater:t,value:e.build,valueKey:"build"}),r.jsx(F,{label:"Height",options:jt,suspectId:e.id,updater:t,value:e.height,valueKey:"height"})]})}function Rt({suspect:e,suspectExtendedInfo:t,updateExtendedKeyValue:a,addExtendedInfoEntryToUpdate:n}){return r.jsxs(r.Fragment,{children:[r.jsxs(C,{gap:8,vertical:!0,children:[r.jsx(S.Title,{level:5,children:"Extended Info"}),r.jsxs(C,{gap:4,vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:"Persona"}),r.jsx(M,{defaultValue:t.persona?.pt||"",label:"Persona in PT",prefix:r.jsx("span",{children:"ðŸ‡§ðŸ‡·"}),suspect:t,suspectId:e.id,updater:n,valueKey:"persona.pt"}),r.jsx(M,{defaultValue:t.persona?.en||"",label:"Persona in EN",prefix:r.jsx("span",{children:"ðŸ‡ºðŸ‡¸"}),suspect:t,suspectId:e.id,updater:n,valueKey:"persona.en"})]}),r.jsxs(C,{gap:4,vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:"Prompt"}),r.jsx(M,{defaultValue:t.prompt||"",label:"Prompt",suspect:t,suspectId:e.id,updater:n,valueKey:"prompt"})]}),r.jsxs(C,{gap:4,vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:"Description"}),r.jsx(M,{defaultValue:t.description||"",label:"Description",suspect:t,suspectId:e.id,updater:n,valueKey:"description"})]})]}),r.jsxs("div",{className:"grid grid-2 gap-4 my-4",children:[r.jsxs(C,{gap:6,vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:"Animal"}),r.jsx(M,{defaultValue:t.animal||"",label:"Animal",suspect:t,suspectId:e.id,updater:n,valueKey:"animal"})]}),r.jsxs(C,{gap:6,vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:"Occupation"}),r.jsx(M,{defaultValue:t.profession||"",label:"Occupation",suspect:t,suspectId:e.id,updater:n,valueKey:"profession"})]}),r.jsxs(C,{gap:6,vertical:!0,children:[r.jsx(S.Text,{strong:!0,children:"Ethnicity"}),r.jsx(M,{defaultValue:t.ethnicity||"",label:"Ethnicity",suspect:t,suspectId:e.id,updater:n,valueKey:"ethnicity"})]}),r.jsx(ce,{label:"Zodiac Sign",options:St,suspectId:e.id,updater:a,value:t.zodiacSign,valueKey:"zodiacSign"}),r.jsx(ce,{label:"Alignment",options:_t,suspectId:e.id,updater:a,value:t.alignment,valueKey:"alignment"}),r.jsx(ce,{label:"MBTI",options:Ct.map(i=>({label:i,value:i})),suspectId:e.id,updater:a,value:t.mbti,valueKey:"mbti"}),r.jsx(F,{label:"Sexual Orientation",options:wt,suspectId:e.id,updater:a,value:t.sexualOrientation,valueKey:"sexualOrientation"}),r.jsx(F,{label:"Economic Status",options:Pt,suspectId:e.id,updater:a,value:t.economicClass,valueKey:"economicClass"}),r.jsx(F,{label:"Education Level",options:Tt,suspectId:e.id,updater:a,value:t.educationLevel,valueKey:"educationLevel"}),r.jsx("div",{children:"TODO: Personality traits"})]})]})}function Nt({suspect:e,addEntryToUpdate:t}){const a=e.features??[],n=i=>{const s=a.includes(i)?a.filter(c=>c!==i):[...a,i];t(e.id,{...e,features:s})};return r.jsx("div",{className:"grid grid-2",children:Me.map(i=>r.jsxs("div",{className:"my-4",children:[r.jsx(S.Text,{strong:!0,children:i.title}),i.features.map(s=>r.jsxs(C,{className:"my-2",gap:4,children:[r.jsx(ne,{checked:a.includes(s.id),onChange:()=>n(s.id),size:"small"})," ",s.label]},s.id))]},i.title))})}const Me=[{title:"Hair Length",features:[{id:"shortHair",label:"Short Hair"},{id:"longHair",label:"Long Hair"},{id:"mediumHair",label:"Medium Hair"},{id:"bald",label:"Bald"}]},{title:"Hair Color",features:[{id:"blackHair",label:"Black Hair"},{id:"brownHair",label:"Brown Hair"},{id:"blondeHair",label:"Blonde Hair"},{id:"redHair",label:"Red Hair"},{id:"greyHair",label:"Grey Hair"},{id:"coloredHair",label:"Colored Hair"}]},{title:"Face",features:[{id:"beard",label:"Beard"},{id:"mustache",label:"Mustache"},{id:"goatee",label:"Goatee"},{id:"lipstick",label:"Lipstick"}]},{title:"Specific",features:[{id:"showTeeth",label:"Showing Teeth"},{id:"avoidingCamera",label:"Avoiding Camera"},{id:"hairyChest",label:"Exposed Hairy Chest"},{id:"shirtless",label:"Shirtless"},{id:"noHairInfo",label:"No Hair Info"}]},{title:"Accessories",features:[{id:"noAccessories",label:"No Accessories"},{id:"glasses",label:"Glasses"},{id:"piercings",label:"Piercings"},{id:"earrings",label:"Earrings"},{id:"necklace",label:"Necklace"},{id:"hat",label:"Hat"},{id:"scarf",label:"Scarf"},{id:"hoodie",label:"Hoodie"},{id:"tie",label:"Tie"},{id:"headscarf",label:"Headscarf/Bandana"},{id:"bow",label:"Bow"},{id:"wearingFlowers",label:"Wearing Flowers"},{id:"hairTie",label:"Hair Tie"}]},{title:"Clothing",features:[{id:"whiteShirt",label:"White Shirt"},{id:"blackClothes",label:"Black Clothes"},{id:"blueClothes",label:"Blue Clothes"},{id:"redClothes",label:"Red Clothes"},{id:"greenClothes",label:"Green Clothes"},{id:"yellowClothes",label:"Yellow Clothes"},{id:"purpleClothes",label:"Purple Clothes"},{id:"pinkClothes",label:"Pink Clothes"},{id:"orangeClothes",label:"Orange Clothes"},{id:"brownClothes",label:"Brown Clothes"},{id:"patternedShirt",label:"Patterned Shirt"},{id:"wearingStripes",label:"Wearing Stripes"},{id:"buttonShirt",label:"Button Shirt"}]}],Or=I.orderBy(Me.reduce((e,t)=>(t.features.forEach(a=>{e.push({value:a.id,label:`${t.title}: ${a.label}`})}),e),[]),["label"],["asc"]);console.log("flatFeatures",Or.map(e=>e.value));function qt(){const{addParam:e,queryParams:t}=H();return r.jsxs(C,{align:"center",className:"my-2",gap:8,children:[r.jsx(S.Text,{children:"Feature Highlight:"})," ",r.jsx(ke,{allowClear:!0,onChange:a=>e("activeFeature",a),options:Or,size:"small",style:{width:275},value:t.get("activeFeature")||void 0})]})}var z={},ue={exports:{}},de={exports:{}},Ke;function ie(){return Ke||(Ke=1,function(e){function t(a){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(de)),de.exports}var Ue;function oe(){return Ue||(Ue=1,function(e){var t=ie().default;function a(i){if(typeof WeakMap!="function")return null;var s=new WeakMap,c=new WeakMap;return(a=function(p){return p?c:s})(i)}function n(i,s){if(!s&&i&&i.__esModule)return i;if(i===null||t(i)!="object"&&typeof i!="function")return{default:i};var c=a(s);if(c&&c.has(i))return c.get(i);var d={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in i)if(l!=="default"&&{}.hasOwnProperty.call(i,l)){var g=p?Object.getOwnPropertyDescriptor(i,l):null;g&&(g.get||g.set)?Object.defineProperty(d,l,g):d[l]=i[l]}return d.default=i,c&&c.set(i,d),d}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ue)),ue.exports}var pe={exports:{}},Je;function Y(){return Je||(Je=1,function(e){function t(a){return a&&a.__esModule?a:{default:a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(pe)),pe.exports}var fe={exports:{}},Ve;function Ir(){return Ve||(Ve=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)({}).hasOwnProperty.call(i,s)&&(a[s]=i[s])}return a},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(fe)),fe.exports}var ee={},Ye;function At(){if(Ye)return ee;Ye=1,Object.defineProperty(ee,"__esModule",{value:!0});var e={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482.88 128c-84.35 0-156.58 52.8-185.68 126.98-60.89 8.13-115.3 43.63-146.6 97.84-42.16 73-32.55 161.88 17.14 224.16-23.38 56.75-19.85 121.6 11.42 175.78 42.18 73.02 124.1 109.15 202.94 97.23C419.58 898.63 477.51 928 540.12 928c84.35 0 156.58-52.8 185.68-126.98 60.89-8.13 115.3-43.62 146.6-97.84 42.16-73 32.55-161.88-17.14-224.16 23.38-56.75 19.85-121.6-11.42-175.78-42.18-73.02-124.1-109.15-202.94-97.23C603.42 157.38 545.49 128 482.88 128m0 61.54c35.6 0 68.97 13.99 94.22 37.74-1.93 1.03-3.92 1.84-5.83 2.94l-136.68 78.91a46.11 46.11 0 00-23.09 39.78l-.84 183.6-65.72-38.34V327.4c0-76 61.9-137.86 137.94-137.86m197.7 75.9c44.19 3.14 86.16 27.44 109.92 68.57 17.8 30.8 22.38 66.7 14.43 100.42-1.88-1.17-3.6-2.49-5.53-3.6l-136.73-78.91a46.23 46.23 0 00-46-.06l-159.47 91.1.36-76.02 144.5-83.41a137.19 137.19 0 0178.53-18.09m-396.92 55.4c-.07 2.2-.3 4.35-.3 6.56v157.75a46.19 46.19 0 0022.91 39.9l158.68 92.5-66.02 37.67-144.55-83.35c-65.86-38-88.47-122.53-50.45-188.34 17.78-30.78 46.55-52.69 79.73-62.68m340.4 79.93l144.54 83.35c65.86 38 88.47 122.53 50.45 188.34-17.78 30.78-46.55 52.69-79.73 62.68.07-2.19.3-4.34.3-6.55V570.85a46.19 46.19 0 00-22.9-39.9l-158.69-92.5zM511.8 464.84l54.54 31.79-.3 63.22-54.84 31.31-54.54-31.85.3-63.16zm100.54 58.65l65.72 38.35V728.6c0 76-61.9 137.86-137.94 137.86-35.6 0-68.97-13.99-94.22-37.74 1.93-1.03 3.92-1.84 5.83-2.94l136.68-78.9a46.11 46.11 0 0023.09-39.8zm-46.54 89.55l-.36 76.02-144.5 83.41c-65.85 38-150.42 15.34-188.44-50.48-17.8-30.8-22.38-66.7-14.43-100.42 1.88 1.17 3.6 2.5 5.53 3.6l136.74 78.91a46.23 46.23 0 0046 .06z"}}]},name:"open-a-i",theme:"outlined"};return ee.default=e,ee}var $={},he={exports:{}},ge={exports:{}},Ze;function kt(){return Ze||(Ze=1,function(e){function t(a){if(Array.isArray(a))return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ge)),ge.exports}var ve={exports:{}},Xe;function Mt(){return Xe||(Xe=1,function(e){function t(a,n){var i=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(i!=null){var s,c,d,p,l=[],g=!0,x=!1;try{if(d=(i=i.call(a)).next,n===0){if(Object(i)!==i)return;g=!1}else for(;!(g=(s=d.call(i)).done)&&(l.push(s.value),l.length!==n);g=!0);}catch(v){x=!0,c=v}finally{try{if(!g&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(x)throw c}}return l}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ve)),ve.exports}var me={exports:{}},xe={exports:{}},Qe;function Dt(){return Qe||(Qe=1,function(e){function t(a,n){(n==null||n>a.length)&&(n=a.length);for(var i=0,s=Array(n);i<n;i++)s[i]=a[i];return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(xe)),xe.exports}var er;function Ft(){return er||(er=1,function(e){var t=Dt();function a(n,i){if(n){if(typeof n=="string")return t(n,i);var s={}.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(n,i):void 0}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(me)),me.exports}var be={exports:{}},rr;function Bt(){return rr||(rr=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(be)),be.exports}var tr;function Rr(){return tr||(tr=1,function(e){var t=kt(),a=Mt(),n=Ft(),i=Bt();function s(c,d){return t(c)||a(c,d)||n(c,d)||i()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}(he)),he.exports}var ye={exports:{}},je={exports:{}},Ce={exports:{}},ar;function Et(){return ar||(ar=1,function(e){var t=ie().default;function a(n,i){if(t(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var c=s.call(n,i||"default");if(t(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ce)),Ce.exports}var nr;function Lt(){return nr||(nr=1,function(e){var t=ie().default,a=Et();function n(i){var s=a(i,"string");return t(s)=="symbol"?s:s+""}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(je)),je.exports}var ir;function Nr(){return ir||(ir=1,function(e){var t=Lt();function a(n,i,s){return(i=t(i))in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s,n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(ye)),ye.exports}var Se={exports:{}},_e={exports:{}},or;function Ht(){return or||(or=1,function(e){function t(a,n){if(a==null)return{};var i={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(n.includes(s))continue;i[s]=a[s]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_e)),_e.exports}var sr;function qr(){return sr||(sr=1,function(e){var t=Ht();function a(n,i){if(n==null)return{};var s,c,d=t(n,i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(n);for(c=0;c<p.length;c++)s=p[c],i.includes(s)||{}.propertyIsEnumerable.call(n,s)&&(d[s]=n[s])}return d}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Se)),Se.exports}const Ar=Lr(Hr);var G={},lr;function kr(){if(lr)return G;lr=1,Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var e=V(),t=(0,e.createContext)({});return G.default=t,G}var K={},we={exports:{}},cr;function Mr(){return cr||(cr=1,function(e){var t=Nr();function a(i,s){var c=Object.keys(i);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);s&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),c.push.apply(c,d)}return c}function n(i){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?a(Object(c),!0).forEach(function(d){t(i,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach(function(d){Object.defineProperty(i,d,Object.getOwnPropertyDescriptor(c,d))})}return i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(we)),we.exports}var O={},D={},Te={exports:{}},ur;function Wt(){return ur||(ur=1,function(e){function t(a){return a&&a.__esModule?a:{default:a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Te)),Te.exports}var Pe={exports:{}},Oe={exports:{}},dr;function zt(){return dr||(dr=1,function(e){function t(a,n,i){return n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Oe)),Oe.exports}var pr;function $t(){return pr||(pr=1,function(e){var t=zt();function a(i,s){var c=Object.keys(i);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);s&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),c.push.apply(c,d)}return c}function n(i){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?a(Object(c),!0).forEach(function(d){t(i,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach(function(d){Object.defineProperty(i,d,Object.getOwnPropertyDescriptor(c,d))})}return i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Pe)),Pe.exports}var re={},fr;function Gt(){if(fr)return re;fr=1,Object.defineProperty(re,"__esModule",{value:!0}),re.default=e;function e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return re}var te={},hr;function Kt(){if(hr)return te;hr=1,Object.defineProperty(te,"__esModule",{value:!0}),te.default=e;function e(t,a){if(!t)return!1;if(t.contains)return t.contains(a);for(var n=a;n;){if(n===t)return!0;n=n.parentNode}return!1}return te}var gr;function Ut(){if(gr)return D;gr=1;var e=Wt().default;Object.defineProperty(D,"__esModule",{value:!0}),D.clearContainerCache=k,D.injectCSS=v,D.removeCSS=y,D.updateCSS=q;var t=e($t()),a=e(Gt()),n=e(Kt()),i="data-rc-order",s="data-rc-priority",c="rc-util-key",d=new Map;function p(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.mark;return u?u.startsWith("data-")?u:"data-".concat(u):c}function l(o){if(o.attachTo)return o.attachTo;var u=document.querySelector("head");return u||document.body}function g(o){return o==="queue"?"prependQueue":o?"prepend":"append"}function x(o){return Array.from((d.get(o)||o).children).filter(function(u){return u.tagName==="STYLE"})}function v(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,a.default)())return null;var h=u.csp,b=u.prepend,j=u.priority,w=j===void 0?0:j,T=g(b),A=T==="prependQueue",_=document.createElement("style");_.setAttribute(i,T),A&&w&&_.setAttribute(s,"".concat(w)),h!=null&&h.nonce&&(_.nonce=h?.nonce),_.innerHTML=o;var R=l(u),B=R.firstChild;if(b){if(A){var W=(u.styles||x(R)).filter(function(E){if(!["prepend","prependQueue"].includes(E.getAttribute(i)))return!1;var se=Number(E.getAttribute(s)||0);return w>=se});if(W.length)return R.insertBefore(_,W[W.length-1].nextSibling),_}R.insertBefore(_,B)}else R.appendChild(_);return _}function m(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=l(u);return(u.styles||x(h)).find(function(b){return b.getAttribute(p(u))===o})}function y(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=m(o,u);if(h){var b=l(u);b.removeChild(h)}}function f(o,u){var h=d.get(o);if(!h||!(0,n.default)(document,h)){var b=v("",u),j=b.parentNode;d.set(o,j),o.removeChild(b)}}function k(){d.clear()}function q(o,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=l(h),j=x(b),w=(0,t.default)((0,t.default)({},h),{},{styles:j});f(b,w);var T=m(u,w);if(T){var A,_;if((A=w.csp)!==null&&A!==void 0&&A.nonce&&T.nonce!==((_=w.csp)===null||_===void 0?void 0:_.nonce)){var R;T.nonce=(R=w.csp)===null||R===void 0?void 0:R.nonce}return T.innerHTML!==o&&(T.innerHTML=o),T}var B=v(o,w);return B.setAttribute(p(w),u),B}return D}var U={},vr;function Jt(){if(vr)return U;vr=1,Object.defineProperty(U,"__esModule",{value:!0}),U.getShadowRoot=a,U.inShadow=t;function e(n){var i;return n==null||(i=n.getRootNode)===null||i===void 0?void 0:i.call(n)}function t(n){return e(n)instanceof ShadowRoot}function a(n){return t(n)?e(n):null}return U}var N={},mr;function Vt(){if(mr)return N;mr=1,Object.defineProperty(N,"__esModule",{value:!0}),N.call=s,N.default=void 0,N.note=n,N.noteOnce=d,N.preMessage=void 0,N.resetWarned=i,N.warning=a,N.warningOnce=c;var e={},t=N.preMessage=function(l){};function a(p,l){}function n(p,l){}function i(){e={}}function s(p,l,g){!l&&!e[g]&&(p(!1,g),e[g]=!0)}function c(p,l){s(a,p,l)}function d(p,l){s(n,p,l)}return c.preMessage=t,c.resetWarned=i,c.noteOnce=d,N.default=c,N}var xr;function De(){if(xr)return O;xr=1;var e=oe().default,t=Y().default;Object.defineProperty(O,"__esModule",{value:!0}),O.generate=y,O.getSecondaryColor=f,O.iconStyles=void 0,O.isIconDefinition=v,O.normalizeAttrs=m,O.normalizeTwoToneColors=k,O.useInsertStyles=O.svgBaseProps=void 0,O.warning=x;var a=t(Mr()),n=t(ie()),i=Ar,s=Ut(),c=Jt(),d=t(Vt()),p=e(V()),l=t(kr());function g(o){return o.replace(/-(.)/g,function(u,h){return h.toUpperCase()})}function x(o,u){(0,d.default)(o,"[@ant-design/icons] ".concat(u))}function v(o){return(0,n.default)(o)==="object"&&typeof o.name=="string"&&typeof o.theme=="string"&&((0,n.default)(o.icon)==="object"||typeof o.icon=="function")}function m(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(o).reduce(function(u,h){var b=o[h];switch(h){case"class":u.className=b,delete u.class;break;default:delete u[h],u[g(h)]=b}return u},{})}function y(o,u,h){return h?p.default.createElement(o.tag,(0,a.default)((0,a.default)({key:u},m(o.attrs)),h),(o.children||[]).map(function(b,j){return y(b,"".concat(u,"-").concat(o.tag,"-").concat(j))})):p.default.createElement(o.tag,(0,a.default)({key:u},m(o.attrs)),(o.children||[]).map(function(b,j){return y(b,"".concat(u,"-").concat(o.tag,"-").concat(j))}))}function f(o){return(0,i.generate)(o)[0]}function k(o){return o?Array.isArray(o)?o:[o]:[]}O.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var q=O.iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;return O.useInsertStyles=function(u){var h=(0,p.useContext)(l.default),b=h.csp,j=h.prefixCls,w=h.layer,T=q;j&&(T=T.replace(/anticon/g,j)),w&&(T="@layer ".concat(w,` {
`).concat(T,`
}`)),(0,p.useEffect)(function(){var A=u.current,_=(0,c.getShadowRoot)(A);(0,s.updateCSS)(T,"@ant-design-icons",{prepend:!w,csp:b,attachTo:_})},[])},O}var br;function Dr(){if(br)return K;br=1;var e=Y().default,t=oe().default;Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var a=e(qr()),n=e(Mr()),i=t(V()),s=De(),c=["icon","className","onClick","style","primaryColor","secondaryColor"],d={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function p(x){var v=x.primaryColor,m=x.secondaryColor;d.primaryColor=v,d.secondaryColor=m||(0,s.getSecondaryColor)(v),d.calculated=!!m}function l(){return(0,n.default)({},d)}var g=function(v){var m=v.icon,y=v.className,f=v.onClick,k=v.style,q=v.primaryColor,o=v.secondaryColor,u=(0,a.default)(v,c),h=i.useRef(),b=d;if(q&&(b={primaryColor:q,secondaryColor:o||(0,s.getSecondaryColor)(q)}),(0,s.useInsertStyles)(h),(0,s.warning)((0,s.isIconDefinition)(m),"icon should be icon definiton, but got ".concat(m)),!(0,s.isIconDefinition)(m))return null;var j=m;return j&&typeof j.icon=="function"&&(j=(0,n.default)((0,n.default)({},j),{},{icon:j.icon(b.primaryColor,b.secondaryColor)})),(0,s.generate)(j.icon,"svg-".concat(j.name),(0,n.default)((0,n.default)({className:y,onClick:f,style:k,"data-icon":j.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},u),{},{ref:h}))};return g.displayName="IconReact",g.getTwoToneColors=l,g.setTwoToneColors=p,K.default=g,K}var J={},yr;function Yt(){if(yr)return J;yr=1;var e=Y().default;Object.defineProperty(J,"__esModule",{value:!0}),J.getTwoToneColor=s,J.setTwoToneColor=i;var t=e(Rr()),a=e(Dr()),n=De();function i(c){var d=(0,n.normalizeTwoToneColors)(c),p=(0,t.default)(d,2),l=p[0],g=p[1];return a.default.setTwoToneColors({primaryColor:l,secondaryColor:g})}function s(){var c=a.default.getTwoToneColors();return c.calculated?[c.primaryColor,c.secondaryColor]:c.primaryColor}return J}var jr;function Zt(){if(jr)return $;jr=1;var e=Y().default,t=oe().default;Object.defineProperty($,"__esModule",{value:!0}),$.default=void 0;var a=e(Ir()),n=e(Rr()),i=e(Nr()),s=e(qr()),c=t(V()),d=e(Wr()),p=Ar,l=e(kr()),g=e(Dr()),x=Yt(),v=De(),m=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,x.setTwoToneColor)(p.blue.primary);var y=c.forwardRef(function(f,k){var q=f.className,o=f.icon,u=f.spin,h=f.rotate,b=f.tabIndex,j=f.onClick,w=f.twoToneColor,T=(0,s.default)(f,m),A=c.useContext(l.default),_=A.prefixCls,R=_===void 0?"anticon":_,B=A.rootClassName,W=(0,d.default)(B,R,(0,i.default)((0,i.default)({},"".concat(R,"-").concat(o.name),!!o.name),"".concat(R,"-spin"),!!u||o.name==="loading"),q),E=b;E===void 0&&j&&(E=-1);var se=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,Fr=(0,v.normalizeTwoToneColors)(w),Fe=(0,n.default)(Fr,2),Br=Fe[0],Er=Fe[1];return c.createElement("span",(0,a.default)({role:"img","aria-label":o.name},T,{ref:k,tabIndex:E,onClick:j,className:W}),c.createElement(g.default,{icon:o,primaryColor:Br,secondaryColor:Er,style:se}))});return y.displayName="AntdIcon",y.getTwoToneColor=x.getTwoToneColor,y.setTwoToneColor=x.setTwoToneColor,$.default=y,$}var Cr;function Xt(){if(Cr)return z;Cr=1;var e=oe().default,t=Y().default;Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var a=t(Ir()),n=e(V()),i=t(At()),s=t(Zt()),c=function(l,g){return n.createElement(s.default,(0,a.default)({},l,{ref:g,icon:i.default}))},d=n.forwardRef(c);return z.default=d,z}var Qt=Xt();const ea=zr(Qt),Re="TD_ADMIN_SUSPECTS_PROMPT",Ne="TD_ADMIN_SUSPECTS_PROMPT_SUFFIX",ra={ghibli:"Make this picture ghibli style in 2:3 aspect-ratio. It's a",fox:"Now make the image in the Family Guy style, aspect ratio at 2:3. It's a",pixar:"Now make the image in the 3d Pixar style, aspect ratio at 2:3. It's a",realistic:"Make this image realistic style, keep the Polaroid frame (don't make the image granular) and aspect ratio at 2:3. It's a",zootopia:"Make this image to look like a character from Zootopia, keep the Polaroid frame (don't make the image granular) and aspect ratio at 2:3. It's a"};function ta(){const[e,t]=P.useState(localStorage.getItem(Re)??"Make a pixar version of this image, keep the Polaroid frame and aspect ratio at 2:3. It's a"),[a,n]=P.useState(localStorage.getItem(Ne)==="true"),{queryParams:i}=H(),s=d=>{const p=d.target.value;t(p),localStorage.setItem(Re,p)},c=d=>{n(d),localStorage.setItem(Ne,d?"true":"false")};return r.jsxs(C,{align:"center",className:"my-2",gap:8,children:[r.jsx(S.Text,{children:"Custom Prompt:"}),r.jsx(_r,{disabled:i.has("prompt"),onChange:s,placeholder:"AI Prompt",style:{width:320},value:e}),r.jsx(ne,{checked:a,checkedChildren:"Include Features",onChange:c,unCheckedChildren:"No Features"})]})}function Sr({suspect:e,extendedInfo:t}){const a=Qr(),{notification:n}=$r.useApp(),{queryParams:i}=H(),s=i.get("prompt"),c=()=>{console.log("promptQP",s);let d=s?ra[s]:localStorage.getItem(Re)??"";if(s==="zootopia"){if(!t.animal){n.error({message:"Error",description:"Suspect does not have an animal type defined."});return}d+=`${t.animal} `}if(!t.prompt){n.error({message:"Error",description:"Suspect does not have a prompt defined."});return}let p=`${d} ${t.prompt}`;localStorage.getItem(Ne)==="true"&&(p+=` make sure it has the following features: ${e.features.join(", ")}`),console.log(p),a(p)};return r.jsx(ae,{onClick:c,size:"small",children:r.jsx(ea,{})})}function aa({suspectsQuery:e,suspectsExtendedInfoQuery:t}){const a=e.data,n=t.data,{addParam:i,queryParams:s}=H(),[c,d]=P.useState("cards"),p=s.get("variant")??"gb",l=s.get("sortBy")??"id",g=Number(s.get("cardsPerRow"))||10,x=s.get("activeFeature")||"",v=s.get("suspectId"),[m,y]=Zr(g,{margin:0,gap:8}),f=P.useMemo(()=>I.orderBy(Object.values(a),o=>l==="name.pt"?X(o.name.pt).toLowerCase():l==="name.en"?X(o.name.en).toLowerCase():o[l]??o.id,["asc"]),[a,l]),k=(o,u)=>{const h=a[o];if(!h)return;const b=h.features||[];b.includes(u)?e.addEntryToUpdate(o,{...h,features:b.filter(j=>j!==u)}):e.addEntryToUpdate(o,{...h,features:[...b,u]})},q=P.useMemo(()=>[{title:"ID",dataIndex:"id",key:"id",width:80,sorter:(o,u)=>Number(o.id.split("-").at(-1))-Number(u.id.split("-").at(-1)),render:(o,u)=>r.jsxs(C,{align:"center",gap:4,vertical:!0,children:[r.jsxs(C,{align:"center",gap:6,children:[r.jsx(Q,{children:o})," ",r.jsx(Sr,{extendedInfo:n[u.id],suspect:u})]}),r.jsx(Ie,{cardId:u.id,cardWidth:m/1.5,className:"suspect__image"})]})},{title:"Name (PT)",dataIndex:["name","pt"],key:"name.pt",sorter:(o,u)=>X(o.name.pt.toLocaleLowerCase()).localeCompare(X(u.name.pt.toLocaleLowerCase())),render:(o,u)=>r.jsxs(C,{vertical:!0,children:[r.jsx(S.Text,{children:u.name.pt}),r.jsx(S.Text,{children:u.name.en})]})},{title:"Gender",dataIndex:"gender",key:"gender",sorter:(o,u)=>o.gender.localeCompare(u.gender)},{title:"Age",dataIndex:"age",key:"age",render:o=>r.jsx(Q,{children:o}),sorter:(o,u)=>o.age.localeCompare(u.age)},{title:"Race",dataIndex:"race",key:"race",sorter:(o,u)=>o.race.localeCompare(u.race)},{title:"Build",dataIndex:"build",key:"build",sorter:(o,u)=>o.build.localeCompare(u.build)},{title:"Height",dataIndex:"height",key:"height",sorter:(o,u)=>o.height.localeCompare(u.height)},{title:"Features",dataIndex:"features",key:"features",sorter:(o,u)=>o.features.length-u.features.length,render:(o,u)=>r.jsxs(C,{gap:8,vertical:!0,children:[r.jsx(C,{gap:8,wrap:"wrap",children:o.map(h=>r.jsx(Q,{children:h},h))}),!!x&&r.jsxs(C,{className:"mt-2 mb-4",gap:8,children:[r.jsxs(S.Text,{keyboard:!0,children:[x,":"]}),r.jsx(ne,{checked:o?.includes(x),checkedChildren:"âœ“",onChange:()=>k(u.id,x),unCheckedChildren:"âœ—"})]})]})},{title:"Edit",dataIndex:"id",key:"edit",width:80,render:o=>r.jsx(ae,{block:!0,onClick:()=>i("suspectId",o),size:"small",children:r.jsx(Ge,{})})}],[x,m]);return r.jsxs(r.Fragment,{children:[r.jsxs(C,{align:"center",justify:"space-between",children:[r.jsxs(S.Title,{level:2,children:["Total Suspects: ",f.length]}),r.jsx(Pr,{onChange:o=>d(o),options:[{value:"cards",icon:r.jsx(et,{})},{value:"table",icon:r.jsx(Gr,{})}]})]}),r.jsxs(Le,{style:{position:"sticky",top:0,background:"black",zIndex:1,width:"100%"},children:[r.jsx(qt,{})," ",r.jsx(ta,{})]}),r.jsxs(Kr.PreviewGroup,{children:[c==="cards"&&r.jsx(Le,{className:"my-2",ref:y,wrap:!0,children:f.map(o=>{const u=n[o.id];return r.jsxs("div",{className:"suspect",style:{width:`${m}px`},children:[r.jsx(Ie,{cardId:o.id,cardWidth:m,className:"suspect__image"}),r.jsxs("div",{className:"suspect__name",children:[r.jsxs(C,{align:"center",gap:3,children:[r.jsx(Q,{children:o.id})," ",r.jsx(Sr,{extendedInfo:u,suspect:o})," ",!u.prompt&&r.jsx(vt,{style:{color:"red"}})," ",!!u.animal&&r.jsx(ft,{style:{color:"sandybrown"}})]}),r.jsxs("div",{style:{backgroundColor:o.name.pt?"transparent":"red"},children:["ðŸ‡§ðŸ‡· ",o.name.pt]}),r.jsx(S.Text,{className:Ee({"missing-value":!u.persona.pt}),ellipsis:!0,italic:!0,type:"secondary",children:r.jsx("small",{children:I.truncate(u.persona.pt||"-",{length:18})})}),r.jsxs("div",{style:{backgroundColor:o.name.en?"transparent":"red"},children:["ðŸ‡ºðŸ‡¸ ",o.name.en]}),r.jsx(S.Text,{className:Ee({"missing-value":!u.persona.en}),ellipsis:!0,italic:!0,type:"secondary",children:r.jsx("small",{children:I.truncate(u.persona.en||"-",{length:18})})}),r.jsxs("div",{className:"suspect__info",style:na(o),children:[r.jsxs("div",{children:[r.jsxs("div",{children:[o.gender==="male"?r.jsx(rt,{}):r.jsx(tt,{})," ",o.age]}),r.jsx("div",{children:r.jsx("em",{children:o.race})})]}),r.jsxs("div",{className:"uppercase",children:[r.jsx(at,{}),r.jsx("br",{}),o.build.charAt(0)]}),r.jsxs("div",{className:"uppercase",children:[r.jsx(nt,{}),r.jsx("br",{}),o.height.charAt(0)]}),r.jsxs("div",{children:[o?.features?.length??0," features"]})]}),r.jsx(ae,{block:!0,danger:!o?.features||o?.features?.length<2,onClick:()=>i("suspectId",o.id),size:"small",children:r.jsx(Ge,{})}),!!x&&r.jsxs(C,{className:"mt-2 mb-4",gap:8,children:[r.jsxs(S.Text,{keyboard:!0,children:[x,":"]}),r.jsx(ne,{checked:o.features?.includes(x),checkedChildren:"âœ“",onChange:()=>k(o.id,x),unCheckedChildren:"âœ—"})]})]})]},o.id)})},p),c==="table"&&r.jsx(it,{columns:q,dataSource:f,pagination:!1,rowKey:"id"})]}),r.jsx(Ot,{addExtendedInfoEntryToUpdate:t.addEntryToUpdate,addSuspectEntryToUpdate:e.addEntryToUpdate,suspects:a,suspectsExtendedInfos:t.data},v)]})}const na=e=>!e.build||!e.height||e.build.length===1||e.height.length===1?{borderColor:"red"}:{};function L(e,t){return I.orderBy(Object.entries(e).map(([a,n])=>({key:a,label:I.capitalize(a),value:n,percentage:Math.round(n/t*100)})),["percentage"],["desc"])}function ia({data:e}){const[t,a]=P.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(ae,{block:!0,onClick:()=>a(!0),children:"See Stats"}),t&&r.jsx(oa,{data:e,onClose:()=>a(!1),open:t})]})}function oa({data:e,open:t,onClose:a}){const{ages:n,ethnicities:i,genders:s,builds:c,heights:d}=P.useMemo(()=>{const l={},g={},x={},v={},m={};Object.values(e).forEach(f=>{f.age||console.log("ðŸŽ‚ Missing age for suspect:",f.id),l[f.age]=(l[f.age]??0)+1,f.ethnicity||console.log("ðŸŒ Missing ethnicity for suspect:",f.id),g[f.ethnicity]=(g[f.ethnicity]??0)+1,f.gender||console.log("âš§ï¸ Missing gender for suspect:",f.id),x[f.gender]=(x[f.gender]??0)+1,f.build||console.log("ðŸ’ª Missing build for suspect:",f.id),v[f.build||"?"]=(v[f.build||"?"]??0)+1,f.height||console.log("ðŸ“ Missing height for suspect:",f.id),m[f.height||"?"]=(m[f.height||"?"]??0)+1});const y=Object.keys(e).length;return{ages:L(l,y),ethnicities:L(g,y),genders:L(x,y),builds:L(v,y),heights:L(m,y)}},[e]),p=P.useMemo(()=>{const l={};Object.values(e).forEach(v=>{v.features?.forEach(m=>{l[m]=(l[m]??0)+1})});const g=Object.keys(e).length,x=Me.reduce((v,m)=>{const y=m.features.map(f=>f.id);return v.push(...y),v},[]);return I.orderBy(L(l,g),v=>x.findIndex(m=>m===v.key),["asc"])},[e]);return r.jsxs(Tr,{onClose:a,open:t,placement:"right",title:"Suspects Statistics",width:400,children:[r.jsx(S.Text,{strong:!0,children:"Ethnicity"}),r.jsx("ul",{className:"statistic__list",children:i.map(l=>r.jsxs("li",{children:[r.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),r.jsx(S.Text,{strong:!0,children:"Gender"}),r.jsx("ul",{className:"statistic__list",children:s.map(l=>r.jsxs("li",{children:[r.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),r.jsx(S.Text,{strong:!0,children:"Age"}),r.jsx("ul",{className:"statistic__list",children:n.map(l=>r.jsxs("li",{children:[r.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),r.jsx(S.Text,{strong:!0,children:"Build"}),r.jsx("ul",{className:"statistic__list",children:c.map(l=>r.jsxs("li",{children:[r.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),r.jsx(S.Text,{strong:!0,children:"Height"}),r.jsx("ul",{className:"statistic__list",children:d.map(l=>r.jsxs("li",{children:[r.jsx("strong",{children:l.label})," - ",l.percentage,"%"]},l.key))}),r.jsx(S.Text,{strong:!0,children:"Features"}),r.jsx("ul",{className:"statistic__list",children:p.map(l=>r.jsxs("li",{children:[r.jsx("strong",{children:l.label})," - ",l.percentage,"% (",l.value,")"]},l.key))})]})}const sa=[{value:"ct",label:"Cartoon (deprecated)"},{value:"ai",label:"AI (deprecated)"},{value:"md",label:"Models (deprecated)"},{value:"wc",label:"Wacky (deprecated)"}],la=[{value:"id",label:"Id"},{value:"name.pt",label:"Name (PT)"},{value:"name.en",label:"Name (EN)"},{value:"ethnicity",label:"Ethnicity"},{value:"gender",label:"Gender"},{value:"age",label:"Age"},{value:"height",label:"Height"},{value:"build",label:"Build"}],ca=[{value:"",label:"No Prompt/Custom"},{value:"ghibli",label:"Ghibli Style"},{value:"realistic",label:"Realistic Style"},{value:"pixar",label:"Pixar Style"},{value:"fox",label:"Fox Style"},{value:"zootopia",label:"Zootopia Style"}];function ua({suspectsQuery:e,suspectsExtendedInfoQuery:t}){const{addParam:a,queryParams:n}=H();return r.jsxs(st,{children:[r.jsxs(C,{gap:12,vertical:!0,children:[r.jsx(ze,{dirt:JSON.stringify(e.entriesToUpdate),isDirty:e.isDirty,isSaving:e.isSaving,onSave:e.save,children:"Save Suspects"}),r.jsx(He,{block:!0,data:()=>da(e.data),disabled:e.isDirty,fileName:"suspects.json",hasNewData:e.hasFirestoreData}),r.jsx(C,{justify:"center",children:r.jsx(We,{docId:"suspects",path:"tdr",queryKey:["tdr","suspects"]})})]}),r.jsx(Z,{}),r.jsxs(C,{gap:12,vertical:!0,children:[r.jsx(ze,{dirt:JSON.stringify(t.entriesToUpdate),isDirty:t.isDirty,isSaving:t.isSaving,onSave:t.save,children:"Save Extended"}),r.jsx(He,{block:!0,data:()=>pa(t.data),disabled:t.isDirty,fileName:"suspects-extended-info.json",hasNewData:t.hasFirestoreData}),r.jsx(C,{justify:"center",children:r.jsx(We,{docId:"suspectsExtendedInfo",path:"tdr",queryKey:["tdr","suspectsExtendedInfo"]})})]}),r.jsx(Z,{}),r.jsx(lt,{}),r.jsx(Z,{}),r.jsxs(Ur,{layout:"vertical",children:[r.jsx(ot,{label:"Cards Per Row",max:12,min:2,onChange:i=>a("cardsPerRow",i),value:Number(n.get("cardsPerRow")??"10")}),r.jsx(le,{label:"Sort By",onChange:i=>a("sortBy",i),options:la,value:n.get("sortBy")??"id"}),r.jsx(le,{label:"Other Versions",onChange:i=>a("variant",i),options:sa,value:n.get("variant")??"gb"}),r.jsx(le,{label:"Prompt Style",onChange:i=>a("prompt",i),options:ca,value:n.get("prompt")??""})]}),r.jsx(Z,{}),r.jsx(ia,{data:e.data})]})}function da(e){const t=I.cloneDeep(e);return wr(t,["id","name","gender","race","ethnicity","age","height","build","features","gbExclusive"])}function pa(e){return wr(e,["id","persona","prompt","description"])}function en(){const e=$e({tdrResourceName:"suspects",firestoreDataCollectionName:"suspects",serialize:!0}),t=$e({tdrResourceName:"suspects-extended-info",firestoreDataCollectionName:"suspectsExtendedInfo",serialize:!0});return r.jsx(Jr,{subtitle:"Information",title:"Suspects",children:r.jsxs(Be,{hasSider:!0,children:[r.jsx(Yr,{children:r.jsx(ua,{suspectsExtendedInfoQuery:t,suspectsQuery:e})}),r.jsx(Be.Content,{className:"content",children:r.jsx(Vr,{error:e.error||t.error,hasResponseData:!I.isEmpty(e.data)&&!I.isEmpty(t.data),isLoading:e.isLoading||t.isLoading,children:r.jsx(aa,{suspectsExtendedInfoQuery:t,suspectsQuery:e})})})]})})}export{en as default};
