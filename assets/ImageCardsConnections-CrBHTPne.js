import{r as u,d as C,_ as R,a3 as w,j as e,I as v,F as y,c as b,B as F,P as L,L as f}from"./index-Mpn7fKLo.js";import{D as P}from"./DataLoadingWrapper-DJ85WKe8.js";import{l as g,P as z}from"./useBaseUrl-CX18PvAw.js";import{I as E}from"./ImageCard-CaSgcmZb.js";import{u as I,R as D,I as k}from"./RelationshipsStats-Cz0ZMQF2.js";import{F as M}from"./Table-C2GnM8lx.js";import{S}from"./index-De3Jpewb.js";import{T as N}from"./index-Dkpz02iF.js";import{b as _,a as j}from"./FilterEntries-CscBbHYS.js";import{R as B}from"./ResponseState-DS0k9oIf.js";import{D as T}from"./DownloadButton-WLo36Aa7.js";import{S as x}from"./SiderContent-CA_Mx0qK.js";import{g as q,C as O}from"./constants-Bvs7f2Uv.js";import"./clsx-B-dksMZM.js";import"./hooks-Da4iPDng.js";import"./useMutation-BmIwR3V_.js";import"./useQueryParams-i-yD5Lix.js";import"./index-D29QDRdy.js";import"./index-BAyL2y2L.js";import"./index-C8_OtA8I.js";import"./index-DGNTcQev.js";import"./index-wSWHTulM.js";import"./scrollTo-DFvfQX28.js";import"./Pagination-BTUVIioT.js";import"./index-0aqywvkc.js";import"./index-p6w2fwio.js";import"./Item-Cz8Li8m1.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm154.7 454.5l-246 178c-5.3 3.8-12.7 0-12.7-6.5v-46.9c0-10.2 4.9-19.9 13.2-25.9L566.6 512 421.2 406.8c-8.3-6-13.2-15.6-13.2-25.9V334c0-6.5 7.4-10.3 12.7-6.5l246 178c4.4 3.2 4.4 9.8 0 13z"}}]},name:"right-circle",theme:"filled"},W=function(n,r){return u.createElement(C,R({},n,{ref:r,icon:G}))},$=u.forwardRef(W);function A(){const{query:{data:c,...n},randomGroups:{cardIds:r},showIds:m,cardSize:h}=I(),[l,{width:s}]=w(),[,d]=u.useMemo(()=>{const t=Math.floor(s/h)+1,i=Math.floor(s/t);return[t,i]},[h,s]),p=[{title:"Length",dataIndex:"length",key:"length"},{title:"Relationships",dataIndex:"relationships",key:"relationship",render:(t,i)=>e.jsx(v.PreviewGroup,{children:e.jsx(y,{gap:2,wrap:"wrap",children:t.map(a=>e.jsxs(S,{children:[e.jsxs(S,{direction:"vertical",children:[e.jsx(E,{cardId:a,cardWidth:d}),m&&e.jsx(N,{children:a})]}),t[t.length-1]!==a&&e.jsx($,{})]},`${i.origin}-${a}`))})})}],o=u.useMemo(()=>g.orderBy(r.map(t=>{const i=Z(t,c,"longest",10);return{key:t,origin:t,length:i.length,relationships:i}}),["length"],["desc"]),[r,c]);return e.jsx(P,{error:n.error,hasResponseData:!0,isLoading:n.isLoading,children:e.jsx("div",{className:"my-6",ref:l,children:e.jsx(M,{columns:p,dataSource:o})})})}const Z=g.memoize((c,n,r,m)=>{const h=new Set,l=[];let s=[],d=0;for(l.push({currentId:c,path:[],depth:0});l.length>0&&d<100;){d++;const{currentId:p,path:o,depth:t}=l.pop()??{currentId:"",path:[],depth:0};if(h.add(p),o.push(p),r==="longest"&&o.length>s.length&&(s=[...o]),r==="shortest"&&(s.length===0||o.length<s.length)&&(s=[...o]),r==="any"&&s.length===0&&(s=[...o]),!(t>=m))for(const i of n[p]||[])h.has(i)||l.push({currentId:i,path:[...o],depth:t+1})}return s});function V(){const{query:{isDirty:c,isSaving:n,data:r,isLoading:m,isError:h},showIds:l,setShowIds:s,sampleSize:d,setSampleSize:p,cardSize:o,setCardSize:t,randomGroups:{nextSet:i}}=I();return e.jsxs(z,{children:[e.jsx(B,{hasResponseData:!g.isEmpty(r),isDirty:c,isError:h,isLoading:m||n}),e.jsxs(x,{children:[e.jsx(_,{label:"Show Ids",onChange:a=>s(a),value:l}),e.jsxs(b,{layout:"vertical",children:[e.jsx(j,{label:"Sample Size",onChange:a=>p(a),options:q,value:d}),e.jsx(j,{label:"Card Size",onChange:a=>t(a),options:O,value:o})]}),e.jsx(F,{block:!0,onClick:i,type:"primary",children:"New Random Sample"})]}),e.jsx(x,{children:e.jsx(D,{})}),e.jsx(x,{children:e.jsx(T,{block:!0,data:r,disabled:g.isEmpty(r),fileName:"imageCardsRelationships.json",loading:n})})]})}function Ie(){return e.jsx(L,{subtitle:"Connections",title:"Image Cards",children:e.jsx(k,{children:e.jsxs(f,{hasSider:!0,children:[e.jsx(V,{}),e.jsx(f.Content,{className:"content",children:e.jsx(A,{})})]})})})}export{Ie as default};
