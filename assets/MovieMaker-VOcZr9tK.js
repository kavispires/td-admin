import{j as e,T as x,r as f,B as C,F as R,D,b as T,P as E,L as $}from"./index-pwMPEs54.js";import{R as N}from"./ResponseState-Bs5RiG-8.js";import{D as L}from"./DataLoadingWrapper-DJZ3_At8.js";import{l as u,P as A}from"./useBaseUrl-BpXt1jR3.js";import{C as y}from"./CopyToClipboardButton-lSOeN-2D.js";import{I as M}from"./ImageCard-Q4fXt6Ww.js";import{u as q}from"./useCardWidth-NU-lpur-.js";import{T as b}from"./index-C4wsaYe3.js";import{a as O,R as G}from"./WomanOutlined-CR6RwKlO.js";import{R as Q,a as _}from"./ColumnWidthOutlined-C4yE84OB.js";import{S as k}from"./index-DYCvexJQ.js";import{u as z}from"./useQueryParams-D2a7bf1a.js";import{u as g,a as B}from"./useTDResource-BoO3ytz8.js";import"./SiderContent-BKF51Ly4.js";import"./useCopyToClipboardFunction-C2HVkMau.js";function V({role:s,language:t}){const[a]=q(8);return e.jsxs("div",{children:[e.jsx(x.Title,{level:3,children:s.title[t]}),e.jsxs("div",{className:"suspect",style:{width:`${a}px`},children:[e.jsx(M,{cardId:s.actor.id,cardWidth:a,className:"suspect__image"}),e.jsxs("div",{className:"suspect__name",children:[e.jsx("div",{children:e.jsx(b,{children:s.actor.id})}),e.jsxs("div",{children:["üáßüá∑ ",s.actor.name.pt]}),e.jsxs("div",{children:["üá∫üá∏ ",s.actor.name.en]}),e.jsxs("div",{className:"suspect__info",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[s.actor.gender==="male"?e.jsx(O,{}):e.jsx(G,{})," ",s.actor.age]}),e.jsx("div",{children:e.jsx("em",{children:s.actor.ethnicity})})]}),e.jsxs("div",{children:[e.jsx(Q,{}),e.jsx("br",{}),s.actor.build]}),e.jsxs("div",{children:[e.jsx(_,{}),e.jsx("br",{}),s.actor.height]})]})]})]}),e.jsx("br",{}),e.jsx("strong",{children:"Traits:"}),e.jsx("ul",{children:s.traits.map(n=>e.jsx("li",{children:n},n))})]},s.id)}function W({movieTitles:s,movieGenres:t,movieActors:a,characterTraits:n,items:i,language:c}){const[r,m]=f.useState({movieTitle:"",genre:{id:"",name:{pt:"",en:""},rating:0,rolesIds:[]},subGenre:{id:"",name:{pt:"",en:""},rating:0,rolesIds:[]},castingRoles:[],features:[],rating:0,props:[]}),l=f.useMemo(()=>U(r),[r]),p=f.useMemo(()=>H(r),[r]),h=()=>m(K(s,t,a,n,i));return e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:h,children:"Create Feature Film"}),!!r&&e.jsxs(e.Fragment,{children:[e.jsx(x.Title,{level:2,children:r.movieTitle||"?"}),e.jsxs(x.Paragraph,{children:[e.jsx("strong",{children:"Genre:"})," ",r.genre.name[c],e.jsx("br",{}),e.jsx("strong",{children:"Sub-genre:"})," ",r.subGenre.name[c],e.jsx("br",{}),e.jsx("strong",{children:"Rating:"})," ",r.rating,e.jsx("br",{}),e.jsxs(R,{children:[e.jsx("strong",{children:"Features:"}),r.features.map(d=>e.jsx(b,{children:d.name[c]},d.id))]}),e.jsxs(R,{children:[e.jsx("strong",{children:"Key Objects:"}),r.props.map(d=>e.jsx(b,{children:d.name[c]},d.id))]})]}),e.jsx(k,{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",alignItems:"flex-start"},children:r.castingRoles.map(d=>e.jsx(V,{language:c,role:d},d.id))}),e.jsx(D,{}),e.jsxs(x.Title,{level:2,children:["Movie Prompt ",e.jsx(y,{content:l})]}),e.jsx(T.TextArea,{autoSize:{minRows:3,maxRows:10},value:l}),e.jsxs(x.Title,{level:2,children:["TV Series Prompt ",e.jsx(y,{content:p})]}),e.jsx(T.TextArea,{autoSize:{minRows:3,maxRows:10},value:p})]})]})}const K=(s,t,a,n,i)=>{const c=u.sampleSize(s,2).map((o,j)=>j%2===0?o.prefix:o.suffix).join(" ");let r=0;const m=u.sample(Object.values(t.genres??{}));if(!m)throw new Error("No genre found");r+=m.rating;const l=u.sample(Object.values(t.subGenres??{}));if(!l)throw new Error("No sub-genre found");r+=l.rating;const p=[];Object.values(t.features??{}).forEach(o=>{Math.random()<o.probability&&(p.push(o),r+=o.rating)});const h=[];m.rolesIds.forEach(o=>{h.push(t.roles[o])}),l.rolesIds.forEach(o=>{h.push(t.roles[o])});const d=J(h,5),v=u.sampleSize(a,d.length),I=u.cloneDeep(u.shuffle(n)),P=d.map((o,j)=>({...o,actor:{...v[j],id:X(v[j].id)},traits:I.splice(0,o.complexity).map(w=>w.answer)}));return{movieTitle:c,genre:m,subGenre:l,castingRoles:P,features:p,rating:r,props:u.sampleSize(i,8)}},U=s=>{let t=`Escreva o resumo de um filme de ${s.genre.name.pt}/${s.subGenre.name.pt} entitulado "${s.movieTitle}"`;return s.features.length>0&&(t+=` que contenha os seguintes elementos: ${s.features.map(a=>a.name.pt).join(", ")}`),t+=`. Incorpore os personagens as suas caracter√≠sticas na trama, seja criativo e tamb√©m incorpore esses objetos na trama: ${s.props.slice(0,3).map(a=>a.name.pt).join(", ")}. Para a idade, escolha um n√∫mero aleat√≥rio dentre a faixa dada, por exemplo 20-30, diga 26 anos. N√£o use parenteses no texto. Adicione um plot twist inesperado. Aqui v√£o os personagens: 
`,s.castingRoles.forEach(a=>{t+=`
${a.title.pt}: ${a.actor.name.pt.split(" ")[0]}, ${a.actor.age} anos, ${F[a.actor.gender]}, ${S[a.actor.ethnicity]}, com as caracter√≠sticas: ${a.traits.join(", ")}.
`}),t},H=s=>{let t=`Escreva o resumo de cada um dos 8 epis√≥dios d√° s√©rie de ${s.genre.name.pt}/${s.subGenre.name.pt} entitulada "${s.movieTitle}"`;return s.features.length>0&&(t+=` que contenha os seguintes elementos: ${s.features.map(a=>a.name.pt).join(", ")}`),t+=`. Incorpore o t√≠tulo da s√©rie e todos os personagens as suas caracter√≠sticas na trama, seja criativo e tamb√©m incorpore esses objetos na trama: ${s.props.map(a=>a.name.pt).join(", ")}. Para a idade, escolha um n√∫mero aleat√≥rio dentre a faixa dada, por exemplo 20-30, diga 26 anos. N√£o use parenteses no texto. Cada epis√≥dio deve terminar com um cliffhanger e o pr√≥ximo epis√≥dio deve continuar desse cliffhanger. Aqui v√£o os personagens: 
`,s.castingRoles.forEach(a=>{t+=`
${a.title.pt}: ${a.actor.name.pt.split(" ")[0]}, ${a.actor.age} anos, ${F[a.actor.gender]}, ${S[a.actor.ethnicity]}, com as caracter√≠sticas: ${a.traits.join(", ")}.
`}),t},F={female:"mulher",male:"homem"},S={asian:"asi√°tico",black:"negro",caucasian:"branco",latino:"latino",mixed:"mesti√ßo","middle-eastern":"oriente-m√©dio","native-american":"nativo-americano",indian:"indiano"};function J(s,t){const a=[],n=new Set;for(const i of s)if(!n.has(i.id)&&(a.push(i),n.add(i.id),a.length===t))break;return a}function X(s){return s.split("-").join("-gb-")}function ue(){const{queryParams:s}=z({language:"pt"}),t=s.get("language")??"pt",a=g(`movies-${t}`),n=B("movie-genres"),i=g("suspects"),c=g(`testimony-questions-${t}`),r=g("items"),m=a.hasResponseData&&n.hasResponseData&&i.hasResponseData&&r.hasResponseData&&c.hasResponseData,l=a.isLoading||n.isLoading||i.isLoading||r.isLoading||c.isLoading,p=a.error||n.error||i.error||c.error;return e.jsx(E,{title:"Movie Maker",children:e.jsxs($,{hasSider:!0,children:[e.jsx(A,{children:e.jsx(N,{error:p,hasResponseData:m,isLoading:l})}),e.jsx($.Content,{className:"content",children:e.jsx(L,{error:p,hasResponseData:m,isLoading:l,children:e.jsx(W,{characterTraits:Object.values(c.data),items:Object.values(r.data),language:t,movieActors:Object.values(i.data),movieGenres:n.data,movieTitles:Object.values(a.data)})})})]})})}export{ue as default};
