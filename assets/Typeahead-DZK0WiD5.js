import{r as u,j as h,a as w}from"./index-D37itX2d.js";import{l as x}from"./useBaseUrl-BRxm3gcj.js";import{u as A}from"./useDebounce-DGApTwHz.js";import{A as R}from"./index-B5mthAFs.js";function k({data:s,isPending:l,onFinish:i,style:C,placeholder:y,parser:S,...v}){const{dict:r,options:g}=u.useMemo(()=>{if(console.log("Recomputing typeahead..."),!s||l)return{dict:{},options:[]};const e=S(s),t=x.orderBy(Object.keys(e),[o=>o.toLowerCase()]).map(o=>({value:o}));return{dict:e,options:t}},[s,l]),[p,d]=u.useState([]),[n,E]=u.useState("");A(()=>{n?O(n):i(null)},500,[n]);const O=e=>{if(!e){d([]);return}const t=e.trim().toUpperCase(),o=g.filter(a=>String(a?.value??"").toUpperCase().includes(t)),U=x.orderBy(o,[a=>{const c=String(a?.value??"").toUpperCase();if(c===t)return 0;const f=c.match(/\((.*?)\)/);if(f&&f[1]===t)return 1;const m=c.indexOf(t);return m===0?2:m>0?3:4}]);d(U)},j=()=>{if(p.length>0){const e=p[0].value;r[e]!==void 0&&i(r[e])}},T=e=>{r[e]!==void 0&&i(r[e])};return h.jsx(R,{allowClear:!0,filterOption:(e,t)=>String(t?.value??"").toUpperCase().indexOf(e?.toUpperCase())!==-1,notFoundContent:n.length>0?"No entries found":"Type to search...",onSearch:E,onSelect:T,options:p,placeholder:y,style:{width:250,...C},...v,children:h.jsx(w,{onPressEnter:j})})}export{k as T};
