import{a as K,c as Z,u as F,D as X}from"./useParsedHistory-BLAYCUDo.js";import{l as o}from"./useBaseUrl-Df4Xj3M9.js";import{s as B}from"./index-DYbc2yc2.js";import{u as w}from"./useTDResource-BRz6Jgmi.js";import{r as ee}from"./index-B2IufO9d.js";const h="|",q="abcdefghijklmnopqrstuvwxyz",E="bcdfghjklmnpqrstvwxyz",g="aeiou",te=/[áéíóúãẽĩõũâêîôûàèìòùäëïöü]/,s=o.memoize(e=>B(e).toLowerCase()),y=e=>s(e).length,R=e=>s(e).split("").filter(t=>g.includes(t)).length,L=e=>s(e).split("").filter(t=>E.includes(t)).length,se=e=>e.toLowerCase().split("").filter(t=>te.test(t)).length,m=e=>e.split(" ").length,fe={"ddr-7-pt":e=>q.indexOf(s(e)[0])<q.indexOf(s(e)[1]),"ddr-72-pt":e=>y(e)===3,"ddr-8-pt":e=>y(e)===4,"ddr-9-pt":e=>y(e)===5,"ddr-10-pt":e=>y(e)===6,"ddr-11-pt":e=>y(e)===7,"ddr-12-pt":e=>y(e)===8,"ddr-73-pt":e=>y(e)===9,"ddr-74-pt":e=>y(e)===10,"ddr-75-pt":e=>y(e)>10,"ddr-13-pt":e=>m(e)>1,"ddr-14-pt":e=>{const t=s(e).split("").filter(n=>g.includes(n));return new Set(t).size>=2},"ddr-15-pt":e=>new Set(s(e).split("")).size<=4,"ddr-16-pt":e=>L(e)>R(e),"ddr-17-pt":e=>R(e)>L(e),"ddr-53-pt":e=>R(e)===L(e),"ddr-18-pt":e=>{const t=s(e)[0];return s(e).slice(1).includes(t)},"ddr-70-pt":e=>{const t=s(e).slice(-1);return s(e).slice(0,-1).includes(t)},"ddr-19-pt":e=>s(e).split("").some((t,n)=>s(e).slice(n+1).includes(t)),"ddr-20-pt":e=>s(e).split("").some((t,n)=>g.includes(t)&&s(e).slice(n+1).includes(t)),"ddr-21-pt":e=>s(e).split("").some((t,n)=>E.includes(t)&&s(e).slice(n+1).includes(t)),"ddr-22-pt":e=>s(e).split("").some((t,n)=>g.includes(t)&&g.includes(e[n+1])),"ddr-23-pt":e=>"abcdefghijklm".includes(s(e)[0]),"ddr-24-pt":e=>"nopqrstuvwxyz".includes(s(e)[0]),"ddr-25-pt":e=>g.includes(s(e)[0]),"ddr-26-pt":e=>E.includes(s(e)[0]),"ddr-27-pt":e=>s(e).split("").some((t,n)=>E.includes(t)&&e[n+1]===t),"ddr-28-pt":e=>s(e).includes("a"),"ddr-54-pt":e=>s(e).includes("b"),"ddr-32-pt":e=>s(e).includes("c")||s(e).includes("ç"),"ddr-55-pt":e=>s(e).includes("d"),"ddr-29-pt":e=>s(e).includes("e"),"ddr-56-pt":e=>s(e).includes("f"),"ddr-57-pt":e=>s(e).includes("g"),"ddr-34-pt":e=>s(e).includes("h"),"ddr-47-pt":e=>s(e).includes("i"),"ddr-52-pt":e=>s(e).includes("j"),"ddr-58-pt":e=>s(e).includes("l"),"ddr-64-pt":e=>s(e).includes("m"),"ddr-65-pt":e=>s(e).includes("n"),"ddr-48-pt":e=>s(e).includes("o"),"ddr-59-pt":e=>s(e).includes("p"),"ddr-31-pt":e=>s(e).includes("q"),"ddr-60-pt":e=>s(e).includes("r"),"ddr-66-pt":e=>s(e).includes("s"),"ddr-61-pt":e=>s(e).includes("t"),"ddr-30-pt":e=>s(e).includes("u"),"ddr-62-pt":e=>s(e).includes("v"),"ddr-49-pt":e=>s(e).includes("x"),"ddr-63-pt":e=>s(e).includes("z"),"ddr-36-pt":e=>s(e).includes("k")||s(e).includes("w")||s(e).includes("y"),"ddr-37-pt":e=>se(e)>0,"ddr-33-pt":e=>s(e).split("").some((t,n)=>!!(["m","n"].includes(t)&&E.includes(e[n+1]))),"ddr-35-pt":e=>s(e).split("").some((t,n)=>!!(t==="h"&&E.includes(e[n-1]))),"ddr-38-pt":e=>g.includes(s(e).slice(-1)),"ddr-39-pt":e=>E.includes(s(e).slice(-1)),"ddr-40-pt":e=>s(e).slice(-1)==="s","ddr-67-pt":e=>new Set(s(e).split("").filter(t=>g.includes(t))).size===1,"ddr-76-pt":e=>s(e).split("").some((t,n,i)=>t===i[n+1]&&t===i[n+2])},he={"ddr-3-pt":(e,t)=>m(e)===1&&t.split(h).length===2,"ddr-4-pt":(e,t)=>m(e)===1&&t.split(h).length===3,"ddr-22-pt":(e,t)=>m(e)===1&&t.split(h).length===4,"ddr-71-pt":(e,t)=>m(e)===1&&t.split(h).length===5,"ddr-41-pt":(e,t)=>m(e)===1&&t.split(h).some(n=>n.split("").some((i,a)=>!!(g.includes(i)&&g.includes(n[a+1])))),"ddr-42-pt":(e,t)=>t.split(h).some((n,i)=>i===0?!1:n[0]===t.split(h)[i-1].slice(-1)),"ddr-46-pt":(e,t,n)=>m(e)===1&&!n&&t.split(h).length===1,"ddr-68-pt":(e,t)=>m(e)===1&&t.split(h)[0].length===3,"ddr-69-pt":(e,t)=>m(e)===1&&t.split(h)[0].length===1},ge={"ddr-43-pt":(e,t,n)=>m(e)===1&&n===0,"ddr-44-pt":(e,t,n)=>m(e)===1&&n===1,"ddr-45-pt":(e,t,n)=>m(e)===1&&n===2},ne=e=>Object.values(e).reduce((t,n)=>Math.max(t,n.updatedAt),0),G=(e,t)=>t>e.updatedAt;function ye(e){const t=/([^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*[aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]{1,3}[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*)(?=[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]|$)/gi;return e.replace(t,"$1|").slice(0,-1).replace(/\s/g,"")}const Ee=(e,t,n,i)=>{const[a]=F(X.TEORIA_DE_CONJUNTOS,i),p=w("daily-diagram-items",e),f=w("daily-diagram-rules",e);return{entries:ee.useMemo(()=>!e||!a||!p.isSuccess||!f.isSuccess?{}:re(n,a,f.data,p.data),[e,n,a,f.dataUpdatedAt,p.dataUpdatedAt]),isLoading:p.isLoading||f.isLoading}},W=8,re=(e,t,n,i)=>{console.count("Creating Teoria de Conjuntos...");let a=t.latestDate;const p=[...t.used],f=ne(n),u=(()=>{const c=Object.values(n).reduce((l,d)=>(l[d.id]=[],l),{});return Object.values(i).forEach(l=>{G(l,f)||l.rules.forEach(d=>{c[d].push(l.itemId)})}),c})(),I={};for(let c=0;c<e;c++){const l=K(a),v=Z(l)?W+2:W;a=l,I[l]={id:l,type:"teoria-de-conjuntos",number:t.latestNumber+c+1,...de(i,u,n,p,f,v)}}return I};function de(e,t,n,i,a,p){const f=o.shuffle(Object.keys(e).filter(r=>!i.includes(r)&&!G(e[r],a))),u=o.sample(f);if(!u)throw new Error("No available things to choose from");i.push(u);const I={id:u,name:e[u].name},c=e[u].rules.reduce((r,U)=>{const D=n[U].type;return r[D]||(r[D]=[]),r[D].push(U),r},{});Object.keys(c).forEach(r=>{c[r].length<2&&delete c[r]});const l=o.sampleSize(Object.keys(c),2);if(l.length!==2)throw new Error("No types found for this thing");const d=[o.sample(c[l[0]]),o.sample(c[l[1]])];if(!d[0]||!d[1])throw new Error("No rules found for this thing");const v=[d[0],d[1]].sort().join("-");i.push(v);const V=n[d[0]].level+n[d[1]].level-1,N=o.shuffle(o.difference(t[d[0]],t[d[1]])),x=o.shuffle(o.difference(t[d[1]],t[d[0]])),M=o.shuffle(o.intersection(t[d[0]],t[d[1]])),O=N.pop();if(!O)throw new Error("No only in rule 1 things to choose from");const j={id:d[0],text:n[d[0]].title,level:n[d[0]].level,thing:{id:O,name:e[O].name}},S=x.pop();if(!S)throw new Error("No only in rule 2 things to choose from");const C={id:d[1],text:n[d[1]].title,level:n[d[1]].level,thing:{id:S,name:e[S].name}},b=new Set([u,O,S]),P=M.filter(r=>!b.has(r)),Y=N.filter(r=>!b.has(r)),H=x.filter(r=>!b.has(r)),k=o.sampleSize(P,p/2),_=o.sampleSize(Y,p),z=o.sampleSize(H,p),T={};k.forEach(r=>{T[r]=0}),_.forEach(r=>{T[r]=1}),z.forEach(r=>{T[r]=2});const Q=ie(k,_,z,p).map(r=>({id:r,name:e[r].name,rule:T[r]})),A={contains:"Inclusão",starts:"Inicialização",ends:"Terminação",grammar:"Gramática",order:"Sequência",count:"Contagem",comparison:"Comparação",repetition:"Repetição"},$=[(A==null?void 0:A[n[j.id].type])??"Desconhecido",(A==null?void 0:A[n[C.id].type])??"Desconhecido"].join(" vs "),J=[j.id,C.id].sort().join("::");return{title:$,setId:J,level:V,rule1:j,rule2:C,intersectingThing:I,things:Q}}function ie(e,t,n,i){const a=e.slice(0,3),p=t.slice(0,3),f=n.slice(0,3);let u=o.sampleSize([...a,...p,...f],i);if(u.length<i){const I=e.slice(3),c=t.slice(3),l=n.slice(3),d=o.shuffle([...I,...c,...l]);u=[...u,...d]}return u.slice(0,i)}export{h as S,ge as a,ye as b,re as c,he as s,Ee as u,fe as v};
