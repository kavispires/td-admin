import{r as x,a as H,_ as B,j as n,T as F,B as q,Z as se,a0 as ne,aW as Ae,aj as L,af as Se,D as Ce,aX as Ee,aY as we,Y as Oe,X as Te,$ as le,P as Le,L as ce}from"./index-CL7ZgB_t.js";import{u as ue}from"./useQueryParams-D18ivquu.js";import{R as me,c as Ne}from"./useTestimoniesResource-C6WN7H3W.js";import{a as Me,C as Re,u as pe}from"./useArteRuimDrawings-CpJ05MOr.js";import{u as he}from"./useMutation-C_-B8jNM.js";import{g as Ye,u as Ue}from"./useGetFirestoreDoc-BjB8aPiq.js";import{h as k}from"./moment-C5S46NFB.js";import{a as re,m as ke,j as Ge,r as _e}from"./index-CxTFAdG3.js";import{F as D}from"./index-CRghe_PI.js";import{S as Q}from"./index-BQPHuWNZ.js";import{I as ie}from"./index-f3lOx8Id.js";import{T as Qe,a as ee,F as Pe}from"./FilterEntries-B43n70DE.js";import{T as $}from"./index-oQsHII9L.js";import{S as qe}from"./index-VajtuZzC.js";import{F as Ve}from"./FirestoreConsoleLink-BdZhHLmm.js";import{C as Fe}from"./CopyToClipboardButton-Cd9xnDg5.js";import{I as te}from"./ImageCard-D_0g8_uX.js";import{f as $e,W as He,d as P,g as K}from"./constants-CpqFoyR7.js";import{I as V}from"./Item-DFsV0HVC.js";import{l as p,P as Be}from"./useBaseUrl-DvS4m1Km.js";import{g as We,u as G,D as j,a as _,c as fe,L as ge}from"./constants-D0FhWmUe.js";import{R as ze,a as Je}from"./DoubleRightOutlined-B43x6n7k.js";import{F as xe}from"./Table-DK0q2yVs.js";import{D as Ke}from"./DataLoadingWrapper-DFoSirT7.js";import{u as w}from"./useTDResource-f6RZMqvS.js";import{u as ae}from"./useLoadWordLibrary-BthQV6hy.js";import{g as je}from"./utils-BJs5IqRz.js";import{u as Ze}from"./daily-teoria-de-conjuntos-3CDprbQj.js";import{u as Ie}from"./useDailyHistoryQuery-BkX2Uwrv.js";import{R as Xe}from"./SaveOutlined-CivnzahG.js";import{S as et}from"./SiderContent-CD3lXP0U.js";import"./useResourceFirestoreData-DPEI0iyJ.js";import"./useUpdateFirestoreDoc-BuJkMzpT.js";import"./gapSize-U1swVQyS.js";import"./Input-DoEhzlJK.js";import"./index-CaNMvDnb.js";import"./index-Ckumnh5W.js";import"./index-CwEfDMC_.js";import"./useCopyToClipboardFunction-Bn6Ribz5.js";import"./CopyOutlined-DDORRaHW.js";import"./Pagination-Cw_LU7Ud.js";import"./index-Qm2xHDyK.js";import"./index-X4BaIBK0.js";import"./scrollTo-BgR-D5RO.js";import"./extendsObject-keMuGWqj.js";var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},st={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"},at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M396 512a112 112 0 10224 0 112 112 0 10-224 0zm546.2-25.8C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}}]},name:"eye",theme:"filled"},it=function(a,r){return x.createElement(H,B({},a,{ref:r,icon:tt}))},ot=x.forwardRef(it),lt=function(a,r){return x.createElement(H,B({},a,{ref:r,icon:st}))},ct=x.forwardRef(lt),dt=function(a,r){return x.createElement(H,B({},a,{ref:r,icon:nt}))},ut=x.forwardRef(dt),mt=function(a,r){return x.createElement(H,B({},a,{ref:r,icon:rt}))},pt=x.forwardRef(mt),ht=function(a,r){return x.createElement(H,B({},a,{ref:r,icon:at}))},ft=x.forwardRef(ht);function gt(){const[e,a]=x.useState(""),[r,o]=x.useState(7),[s,t]=x.useState(!1),[i,l]=x.useState(!1),[c,d]=x.useState(""),{isLoading:m,isError:u,data:g}=xt(e,r,i),h=y=>{t(!1),l(!1),a(y.trim())},I=y=>{l(!1),o(y)},C=()=>{const y=k(e,"YYYY-MM-DD",!0).isValid();t(y),l(y)},S=x.useMemo(()=>{if(!g||Object.keys(g).length===0)return{};if(!c)return g;const y=c;if(!Object.values(g).every(v=>v==null?void 0:v[y]))return g;const A={};return Object.values(g).forEach(v=>{const f=v==null?void 0:v[y],N=f==null?void 0:f.number;A[N]&&console.error(`Duplicate entry for game ${y} with number ${N}`),A[N]=re(f,["number","language","text"])}),A},[g,c]);return n.jsxs("div",{children:[n.jsx(F.Title,{level:2,children:"Data Archive"}),n.jsxs(D,{justify:"space-between",align:"center",className:"mb-6",children:[n.jsxs(D,{gap:12,align:"center",children:[n.jsxs(Q.Compact,{children:[n.jsx(ie,{placeholder:"YYYY-MM-DD",value:e,onChange:y=>h(y.target.value)}),n.jsx(Qe,{min:1,max:100,value:r,onChange:y=>I(y??1)}),n.jsx(q,{type:"primary",onClick:C,disabled:!e||!k(e,"YYYY-MM-DD",!0).isValid(),children:"Load"})]}),e&&n.jsxs("span",{children:[n.jsx($,{children:e}),r>1&&n.jsxs(n.Fragment,{children:["to"," ",n.jsx($,{children:k(e).add(r-1,"days").format("YYYY-MM-DD")})]})]}),n.jsx("span",{children:n.jsx($,{color:m?"blue":u?"red":s?"green":"gray",children:m?"Loading...":u?"Error":s?"Valid":"Ready"})})]}),n.jsxs(D,{gap:12,align:"center",children:[n.jsx(jt,{}),n.jsx(qe,{style:{width:200},placeholder:"Filter by game",allowClear:!0,onChange:y=>d(y),options:[{value:"",label:"All games"},{value:"aqui-o",label:"Aqui Ó"},{value:"arte-ruim",label:"Arte Ruim"},{value:"artista",label:"Artista"},{value:"comunicacao-alienigena",label:"Comunicação Alienígena"},{value:"controle-de-estoque",label:"Controle de Estoque"},{value:"filmaco",label:"Filmaço"},{value:"palavreado",label:"Palavreado"},{value:"portais-magicos",label:"Portais Mágicos"},{value:"quartetos",label:"Quartetos"},{value:"ta-na-cara",label:"Tá na Cara"},{value:"teoria-de-conjuntos",label:"Teoria de Conjuntos"}]})]})]}),n.jsx(me,{src:S,theme:"twilight",collapsed:1})]})}const xt=(e,a,r)=>{const o=x.useMemo(()=>{if(!r||!k(e,"YYYY-MM-DD",!0).isValid())return[];const c=[],d=k(e);for(let m=0;m<a;m++){const u=d.clone().add(m,"days").format("YYYY-MM-DD");c.push({queryKey:["firebase","diario",u],queryFn:Ye("diario",u),enabled:!0})}return c},[e,a,r]),s=Me({queries:o}),t=s.some(c=>c.isLoading),i=s.some(c=>c.isError),l=x.useMemo(()=>t||i?{}:s.reduce((c,d,m)=>{if(d.data&&Object.keys(d.data).length>0){const u=k(e).add(m,"days").format("YYYY-MM-DD");c[u]=d.data}return c},{}),[s,e,t,i]);return{isLoading:t,isError:i,data:l,results:s}};function jt(){const e=he({mutationFn:async()=>{const a="2024-01-01",r="2024-04-30";try{const o=k(a),s=k(r);for(let t=0;t<=s.diff(o,"days");t++){const i=o.clone().add(t,"days").format("YYYY-MM-DD"),l=se(ne,"diario",i);await Ae(l)}}catch(o){throw new Error(o)}},onError:a=>{console.error("Error deleting documents:",a)},onSuccess:()=>{console.log(" Documents deleted successfully")}});return n.jsx(q,{danger:!0,onClick:()=>e.mutate(),loading:e.isPending,disabled:!0,children:"Delete secured documents"})}function M({children:e}){return n.jsx(Q,{direction:"vertical",style:{maxWidth:120},children:e})}function R({children:e}){return n.jsxs($,{color:"cyan",children:["#",e]})}function E({label:e,children:a}){return n.jsxs(F.Text,{children:[n.jsxs("strong",{children:[e,":"]})," ",a]})}function Y({children:e}){return n.jsx(Se,{trigger:"click",content:e,title:"Sneak Peek",children:n.jsx(q,{icon:n.jsx(ft,{})})})}const ye=[{title:"Id",dataIndex:"id",key:"id",fixed:"left"},{title:"Arte Ruim",dataIndex:"arte-ruim",key:"arte-ruim",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,cardId:r,text:o,drawings:s}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"CardId",children:r}),n.jsx(E,{label:"Drawings",children:s.length}),n.jsx(Y,{children:n.jsxs(D,{gap:6,vertical:!0,children:[n.jsxs("div",{children:['"',o.split("").map((t,i)=>i<2||t===" "?t:"⏹").join(""),'"']}),n.jsx(Q,{wrap:!0,children:s.map(t=>n.jsx(Re,{drawing:t,width:75,height:75,className:"canvas"},t))})]})})]})}},{title:"Aqui O",dataIndex:"aqui-o",key:"aqui-o",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,setId:r,title:o,itemsIds:s}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"SetId",children:r}),n.jsx(E,{label:"Title",children:o.pt}),n.jsx(E,{label:"Items",children:s.length}),n.jsx(Y,{children:n.jsx(D,{gap:6,wrap:!0,style:{maxWidth:500},children:s.map(t=>n.jsx(V,{id:t,width:50},t))})})]})}},{title:"Alienígena",dataIndex:"comunicacao-alienigena",key:"comunicacao-alienigena",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,itemsIds:r,attributes:o}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"Items",children:r.length}),n.jsx(Y,{children:n.jsxs(D,{gap:6,style:{maxWidth:"300px"},vertical:!0,children:[n.jsx(Q,{wrap:!0,children:o.map(s=>n.jsx($e,{id:`sign-${s.spriteId}`,width:50},s.spriteId))}),n.jsx(Q,{wrap:!0,children:r.map(s=>n.jsx(V,{id:s,width:50},s))})]})})]})}},{title:"Conjuntos",dataIndex:"teoria-de-conjuntos",key:"teoria-de-conjuntos",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,rule1:r,intersectingThing:o,rule2:s,title:t,things:i}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"Title",children:t}),n.jsx(Y,{children:n.jsxs(D,{vertical:!0,gap:6,children:[n.jsxs(D,{gap:6,children:[n.jsx(V,{id:r.thing.id,width:50}),n.jsx(V,{id:o.id,width:50}),n.jsx(V,{id:s.thing.id,width:50})]}),n.jsx(D,{gap:6,children:i.map(l=>n.jsx(V,{id:l.id,width:35},l.id))})]})})]})}},{title:"Estoque",dataIndex:"controle-de-estoque",key:"controle-de-estoque",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,title:r,goods:o}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"Title",children:r}),n.jsx(E,{label:"Goods",children:o.length}),n.jsx(Y,{children:n.jsx(D,{gap:6,wrap:!0,style:{maxWidth:245},children:o.map(s=>n.jsx(He,{id:s,width:50},s))})})]})}},{title:"Filmaço",dataIndex:"filmaco",key:"filmaco",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,setId:r,title:o,year:s}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"SetId",children:r}),n.jsx(Y,{children:n.jsxs(D,{gap:6,vertical:!0,children:[n.jsxs("span",{children:["Year: ",s]}),n.jsxs("span",{children:["Title:"," ",o.split("").map((t,i)=>i<1||t===" "?t:"⏹").join("")]})]})})]})}},{title:"Palavreado",dataIndex:"palavreado",key:"palavreado",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,letters:r,keyword:o,words:s}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"Letters",children:r.length}),n.jsx(E,{label:"Keyword",children:o}),n.jsx(Y,{children:n.jsx(Q,{direction:"vertical",children:s.map((t,i)=>n.jsx("span",{children:t.split("").map((l,c)=>c===i||l===" "?l:"⏹").join("")},`${a}-${t}`))})})]})}},{title:"Portais",dataIndex:"portais-magicos",key:"portais-magicos",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,setId:r,corridors:o}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"SetId",children:p.truncate(r,{length:9})}),n.jsx(Y,{children:n.jsx(D,{gap:6,vertical:!0,children:o.map(s=>n.jsxs(D,{gap:6,vertical:!0,children:[n.jsxs("span",{children:["Passcode: ",s.passcode]}),n.jsx(D,{children:s.imagesIds.map(t=>n.jsx(te,{id:t,width:50},t))})]},s.passcode))})})]})}},{title:"Quartetos",dataIndex:"quartetos",key:"quartetos",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,setId:r,sets:o}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"SetId",children:p.truncate(r,{length:9})}),n.jsx(Y,{children:n.jsx(D,{gap:6,children:o.map(s=>n.jsx(D,{gap:6,vertical:!0,children:s.itemsIds.map(t=>n.jsx(V,{id:t,width:50},t))},s.id))})})]})}},{title:"Picaço",dataIndex:"artista",key:"artista",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,cards:r}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"Cards",children:r.length}),n.jsx(Y,{children:n.jsx(D,{gap:6,vertical:!0,style:{maxHeight:500,overflowY:"auto"},children:r.map((o,s)=>n.jsx("span",{children:o.text},`${o.id}-${s}`))})})]})}},{title:"Tá Na Cara",dataIndex:"ta-na-cara",key:"ta-na-cara",render:e=>{if(!e)return n.jsx(L,{message:"No entry",type:"error"});const{number:a,suspectsIds:r,testimonies:o}=e;return n.jsxs(M,{children:[n.jsx(R,{children:a}),n.jsx(E,{label:"Suspects",children:r==null?void 0:r.length}),n.jsx(E,{label:"Questions",children:o.length}),n.jsx(Y,{children:n.jsxs(D,{vertical:!0,children:[n.jsx(Q,{direction:"vertical",style:{maxHeight:100,overflowY:"auto"},children:o.map(s=>{var t;return n.jsxs(D,{vertical:!0,children:[n.jsx("span",{children:s.question}),n.jsx(D,{children:(t=s.suspectsIds)==null?void 0:t.map(i=>n.jsx(te,{id:i,width:48},i))})]},s.testimonyId)})}),n.jsx(Q,{wrap:!0,style:{maxHeight:200,maxWidth:"500px",overflowY:"auto"},children:r==null?void 0:r.map(s=>n.jsx(te,{id:s,width:48},s))})]})})]})}}];function It(){const[e,a]=x.useState(""),[r,o]=x.useState(!1),{isLoading:s,data:t}=Ue("diario",e,{enabled:!!e&&r}),i=x.useMemo(()=>t?[re(t,["number"])]:[],[t]),l=u=>{o(!1),a(u.trim())},c=()=>{o(k(e,"YYYY-MM-DD",!0).isValid())},d=()=>{const u=k(e).subtract(1,"days").format("YYYY-MM-DD");a(u)},m=()=>{const u=k(e).add(1,"days").format("YYYY-MM-DD");a(u)};return x.useEffect(()=>{!s&&t&&console.log(re(t))},[t]),n.jsxs("div",{children:[n.jsx(F.Title,{level:2,children:"Data Verification"}),n.jsx(D,{justify:"space-between",align:"center",className:"mb-6",children:n.jsxs(D,{gap:12,align:"center",children:[n.jsxs(Q.Compact,{children:[n.jsx(ie,{placeholder:"YYYY-MM-DD",onChange:u=>l(u.target.value)}),n.jsx(q,{type:"primary",onClick:c,children:"Load"})]}),e&&n.jsxs(D,{gap:6,align:"center",children:[n.jsx(q,{icon:n.jsx(ze,{}),onClick:d}),n.jsx("span",{children:n.jsx($,{children:e})}),n.jsx(q,{icon:n.jsx(Je,{}),onClick:m,disabled:e===We()})]}),n.jsx("span",{children:n.jsx($,{color:s?"blue":r?"green":"red",children:s?"Loading...":r?"Valid":"Invalid"})}),n.jsx(Ve,{path:`/diario/${e}`,disabled:!t})]})}),n.jsx(xe,{loading:s,columns:ye,dataSource:i,scroll:{x:"max-content"}}),n.jsx(Ce,{}),n.jsxs(D,{justify:"space-between",align:"center",className:"mb-4",wrap:!0,children:[n.jsx(Fe,{content:JSON.stringify(i[0],null,2),shape:"default",className:"mb-4",disabled:!t,children:"Copy to Clipboard"}),n.jsx(yt,{data:t})]}),n.jsx(me,{src:i[0]??{},theme:"twilight"})]})}const de=(e,a)=>{if(!e||!a||a.length<2)return[];const r=[],o=a.toLowerCase(),s=(t,i=[])=>{t&&typeof t=="object"&&Object.entries(t).forEach(([l,c])=>{l.toLowerCase().includes(o)&&r.push([...i,l].join(".")),typeof c=="string"&&c.toLowerCase().includes(o)&&r.push([...i,l].join(".")),typeof c=="object"&&c!==null&&s(c,[...i,l])})};return s(e),r};function yt({data:e}){const[a,r]=x.useState([]),o=i=>{if(t(i),i.trim().length>1){const l=de(e,i.trim());r(l)}else r([])},[s,t]=x.useState("");return x.useEffect(()=>{if(e&&s.trim().length>1){const i=de(e,s.trim());r(i)}else r([])},[e]),n.jsxs(D,{vertical:!0,gap:8,children:[n.jsx(ie.Search,{placeholder:"Search in data...",allowClear:!0,onChange:i=>o(i.target.value),onSearch:o,style:{width:250}}),a.length>0&&n.jsxs("div",{children:[n.jsxs(F.Text,{children:["Found ",a.length," matches:"]}),n.jsx("ul",{style:{maxHeight:"200px",overflow:"auto",margin:"4px 0"},children:a.map((i,l)=>n.jsx("li",{children:n.jsx(F.Text,{code:!0,copyable:!0,children:i})},l))})]})]})}const J=new we({}),oe=(e,a)=>{J.setState(r=>({...r,[e]:a}))},Dt=()=>{J.setState(()=>({}))},vt=()=>Ee(J,()=>J.state),bt=(e,a,r,o)=>{const[s]=G(j.AQUI_O,o),t=w("items",e),i=w("daily-disc-sets",e);return{entries:x.useMemo(()=>!e||!i.isSuccess||!s||!t.isSuccess?{}:At(r,s,i.data,t.data),[e,i.dataUpdatedAt,t.dataUpdatedAt,s,r]),isLoading:t.isLoading||i.isLoading}},At=(e,a,r,o)=>{console.count("Creating Aqui Ó...");const s=p.shuffle(Object.values(r).filter(d=>d.itemsIds.filter(Boolean).length>=20)),t=s.filter(d=>!a.used.includes(d.id));t.length<e&&(console.log("🔆 Not enough aqui-o sets left, shuffling..."),oe("aqui-o","Not enough aqui-o sets left"),t.push(...p.shuffle(s)));const i=Object.values(o).filter(d=>d!=null&&d.nsfw?!1:p.intersection(d.decks??[],["alien","dream","thing"]).length>0);let l=a.latestDate;const c={};for(let d=0;d<e;d++){const m=t[d];m||console.error("No aqui-o sets left");const u=_(l),g=fe(u);l=u,g?c[u]={id:u,type:"aqui-o",number:a.latestNumber+d+1,setId:"special",title:{pt:"Especial Fim de Semana",en:"Weekend Special"},itemsIds:["0",...p.sampleSize(i,45).map(h=>h.id)]}:c[u]={id:u,type:"aqui-o",number:a.latestNumber+d+1,setId:m.id,title:m.title,itemsIds:["0",...p.sampleSize(m.itemsIds,20)]}}return c},St=(e,a,r,o)=>{const[s]=G(j.ARTE_RUIM,o),t=pe(e,a);return{entries:x.useMemo(()=>!e||t.isLoading||!s?[]:Ct(r,s,t,a),[e,t.dataUpdatedAt,a,s,r]),isLoading:t.isLoading}},Ct=(e,a,r,o)=>{console.count("Creating Arte Ruim...");const s=Object.values(r.drawings).filter(c=>!(a.used.includes(c.id)||c.drawings.length<3)).map(c=>({id:c.id,type:"arte-ruim",language:o??"pt",cardId:c.id,text:c.text,drawings:c.drawings.map(d=>d.drawing),number:0,dataIds:c.drawings.map(d=>d.id)})),t=p.sampleSize(p.shuffle(s),e);let i=a.latestDate;return t.map((c,d)=>{const m=_(i);return i=m,{...c,id:m,number:a.latestNumber+d+1}})},Et=(e,a,r,o,s)=>{const[t]=G(j.ARTISTA,o),[i]=G(j.ARTE_RUIM,o),l=w(`arte-ruim-cards-${a}`,e),c=pe(e,a);return{entries:x.useMemo(()=>{if(!e||!l.isSuccess||!c.hasResponseData||!t)return{};const m=s.map(u=>u.cardId);return wt(r,t,i,l.data,m,c.drawings)},[e,l.dataUpdatedAt,i,t,r,s,c.dataUpdatedAt,c.hasResponseData]),isLoading:l.isLoading||c.isLoading}},wt=(e,a,r,o,s,t)=>{console.count("Creating Artista...");let i=a.latestDate;const l={};for(let c=0;c<e;c++){const d=_(i),m=Object.keys(o??{}).filter(g=>{var h,I;return!r.used.includes(g)&&!s.includes(g)&&((I=(h=t==null?void 0:t[g])==null?void 0:h.drawings)==null?void 0:I.length)<3}),u=p.sampleSize(m,20).map(g=>o[g]);i=d,l[d]={id:d,type:"artista",number:a.latestNumber+c+1,cards:u}}return l},Ot=(e,a,r,o)=>{const[s]=G(j.COMUNICACAO_ALIENIGENA,o),t=w("items",e),i=w("items-attributes",e),l=w("items-attribute-values",e);return{entries:x.useMemo(()=>!e||!s||!i.isSuccess||!l.isSuccess||!t.isSuccess?{}:Tt(r,s,i.data,l.data,t.data),[e,r,s,s,i.dataUpdatedAt,l.dataUpdatedAt,t.dataUpdatedAt]),isLoading:t.isLoading||i.isLoading||l.isLoading}},Tt=(e,a,r,o,s)=>{console.count("Creating Comunicacao Alienigena...");let t=a.latestDate;const i=p.values(r),l=p.values(o).filter(u=>{var g;return u.complete&&((g=s==null?void 0:s[u.id])==null?void 0:g.nsfw)!==!0}),c={};let d=0;for(;p.keys(c).length<e&&d<100;){const u=Lt(i,l);if(u.valid&&!c[u.setId]&&!a.used.includes(u.setId)&&(c[u.setId]=u),p.keys(c).length>=e)break;d+=1}console.log(`🔆 Generating this batch took ${d} tries`),d>=100&&oe("comunicacao-alienigena","Not enough valid comunicacao alienigena games (over 100 attempts)");const m={};return Object.values(c).forEach((u,g)=>{const h=_(t);t=h,m[h]={...u,id:h,number:a.latestNumber+g+1}}),m},Lt=(e,a)=>{const r=p.shuffle(a),o=p.shuffle(ke(50,0)),s=p.sampleSize(e,3).map(f=>({...f,spriteId:`${o.pop()}`})),t=[],i=[],l=[],c=[],d=[],m=[],u=[],g=[];r.forEach(f=>{const N=[P.DETERMINISTIC,P.RELATED],b=f.attributes[s[0].id]===P.DETERMINISTIC,O=N.includes(f.attributes[s[0].id]),T=f.attributes[s[0].id]===P.UNRELATED,ve=f.attributes[s[1].id]===P.DETERMINISTIC,Z=N.includes(f.attributes[s[1].id]),W=f.attributes[s[1].id]===P.UNRELATED,be=f.attributes[s[2].id]===P.DETERMINISTIC,X=N.includes(f.attributes[s[2].id]),z=f.attributes[s[2].id]===P.UNRELATED;if(T&&W&&z)return g.push(f.id);b&&W&&z&&t.push(f.id),T&&ve&&z&&i.push(f.id),T&&W&&be&&l.push(f.id),O&&Z&&z&&c.push(f.id),O&&W&&X&&d.push(f.id),T&&Z&&X&&m.push(f.id),O&&Z&&X&&u.push(f.id)});const h=s.map(f=>({id:f.id,name:f.name.pt,description:f.description.pt,spriteId:f.spriteId,itemsIds:[]}));h[0].itemsIds=p.sampleSize(t,t.length>3?3:Math.max(t.length-1,1)),h[1].itemsIds=p.sampleSize(i,i.length>3?3:Math.max(t.length-1,1)),h[2].itemsIds=p.sampleSize(l,l.length>3?3:Math.max(t.length-1,1));const I=[];h.forEach(f=>{I.push(...f.itemsIds)});const C=[];c.length>0&&C.push({spritesIds:[s[0].spriteId,s[1].spriteId],itemId:p.sample(c)??""}),d.length>0&&C.push({spritesIds:[s[0].spriteId,s[2].spriteId],itemId:p.sample(d)??""}),m.length>0&&C.push({spritesIds:[s[1].spriteId,s[2].spriteId],itemId:p.sample(m)??""}),u.length>0&&C.push({spritesIds:s.map(f=>f.spriteId),itemId:p.sample(u)??""});const S=[];t.length>0&&S.push({spritesIds:[s[0].spriteId],itemId:t.filter(f=>!I.includes(f))[0]}),i.length>0&&S.push({spritesIds:[s[1].spriteId],itemId:i.filter(f=>!I.includes(f))[0]}),l.length>0&&S.push({spritesIds:[s[2].spriteId],itemId:l.filter(f=>!I.includes(f))[0]});let y=p.sampleSize(C,4);y.length<3&&y.push(...p.sampleSize(S,4-y.length)),y.length<4&&console.log("🔆 Not enough requests for an alien communication, marking it as invalid"),y=p.shuffle(y);const A=y.map(f=>f.itemId),v={id:"0000-00-00",setId:h.map(f=>f.id).sort().join("-"),number:0,type:"comunicação-alienígena",attributes:h,requests:y,solution:A.join("-"),itemsIds:p.shuffle([...A,...p.sampleSize([g[0],g[1],g[2],g[3]],p.random(1,3))]).filter(Boolean),valid:!1};return v.valid=[v.attributes.length===3,v.requests.length===4,v.itemsIds.length>4,v.attributes.every(f=>f.itemsIds.length>0),v.requests.every(f=>f.itemId)].every(Boolean),v},Nt=(e,a,r,o)=>{const[s]=G(j.CONTROLE_DE_ESTOQUE,o);return{entries:x.useMemo(()=>!e||!s?{}:Mt(r,s),[e,r,s]),isLoading:!1}},Mt=(e,a)=>{console.count("Creating Controle de Estoque...");let r=a.latestDate;const o={};for(let s=0;s<e;s++){const t=_(r);r=t,o[t]=Gt(t,a.latestNumber+s+1)}return o},Rt=256,Yt=16,Ut=4,kt=1,Gt=(e,a)=>{const[r,o,s]=e.split("-").map(Number),i=new Date(r,o-1,s).getDay(),l=["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"][i],c={id:e,number:a,type:"controle-de-estoque",language:"pt",title:l,goods:[],orders:[]},d=p.sampleSize(Array(Rt).fill("").map((u,g)=>`good-${g+1}`),Yt+kt),m=d.pop();if(c.goods=d,c.orders=p.sampleSize(c.goods,Ut),!m)throw new Error("No out of stock good");return c.orders.push(m),c.orders=p.shuffle(c.orders),c},_t=(e,a,r,o)=>{const[s]=G(j.FILMACO,o),t=w("daily-movie-sets",e);return{entries:x.useMemo(()=>!e||!t.isSuccess||!s?{}:(Object.values(t.data).filter(c=>c.itemsIds.length>0&&!s.used.includes(c.id)).length<=r&&oe("filmaco","Not enough unused films"),Qt(r,s,t.data)),[e,t.dataUpdatedAt,s,r]),isLoading:t.isLoading}},Qt=(e,a,r)=>{console.count("Creating Filmaço...");const o=p.shuffle(Object.values(r).filter(l=>l.itemsIds.filter(Boolean).length>0)),s=o.filter(l=>!a.used.includes(l.id));s.length<e&&s.push(...p.shuffle(o));let t=a.latestDate;const i={};for(let l=0;l<e;l++){const c=s[l];if(!c){console.error("No filmaço sets left");break}const d=_(t);t=d,i[d]={id:d,type:"filmaco",number:a.latestNumber+l+1,setId:c.id,title:c.title,itemsIds:c.itemsIds,year:c.year}}return i},Pt=(e,a,r,o)=>{const[s]=G(j.PALAVREADO,o),t=ae(4,a,e),i=ae(5,a,e);return{entries:x.useMemo(()=>!e||!t.data||!t.data.length||!i.data||!i.data.length||!s?{}:qt(r,s,t.data,i.data),[e,t.dataUpdatedAt,i.dataUpdatedAt,s,r]),isLoading:t.isLoading||i.isLoading}},qt=(e,a,r,o)=>{console.count("Creating Palavreado...");let s=a.latestDate;const t=[],i={};for(let l=0;l<e;l++){const c=_(s),d=fe(c),m=d?5:4;s=c,i[c]={id:c,type:"palavreado",number:a.latestNumber+l+1,...Vt(d?o:r,[...Object.values(i).map(u=>u.keyword),...a.used],t,m)}}return i},Vt=(e,a,r,o=4,s)=>{let t=p.shuffle(p.difference(e,r,a));const i=s||(t.pop()??""),l=[];for(let c=0;c<o;c++){const d=Ft(e,i,l,c);l.push(d)}return r.push(i,...l),{keyword:i,words:l,letters:$t(l,i.length)}},Ft=(e,a,r,o)=>{const s=p.uniq([...p.flatMap(r.map(l=>l.split(""))),...a.split("")]),t=p.shuffle(e.filter(l=>l[o]===a[o]&&!r.includes(l)));return p.sortBy(t,l=>p.intersection(l.split(""),s).length)[0]},$t=(e,a)=>{const r=p.flatMap(e.map(i=>i.split(""))),o=a===4?[0,5,10,15]:[0,6,12,18,24],s=p.shuffle(r.filter((i,l)=>!o.includes(l))),t=[];for(let i=0;i<r.length;i++)o.includes(i)?t.push(r[i]):t.push(s.shift()??"");return t},Ht=(e,a,r,o)=>{const[s]=G(j.PORTAIS_MAGICOS,o),t=w("daily-passcode-sets",e),i=ae(3,a,e);return{entries:x.useMemo(()=>{if(!e||!t.isSuccess||!i.isSuccess||!s)return{};const c=i.data.reduce((d,m)=>(m.split("").forEach(u=>{d[u]||(d[u]=[]),d[u].push(m)}),d),{" ":["  "],"-":[" - "]});return Bt(r,s,t.data,c)},[e,r,t.dataUpdatedAt,i.isSuccess,i.dataUpdatedAt,s]),isLoading:t.isLoading||i.isLoading}},Bt=(e,a,r,o)=>{console.count("Creating Portais Mágicos...");let s=a.latestDate;const t=a.used,i={};let l=p.shuffle(Object.values(r).filter(d=>d.imageCardsIds.length>0));const c={};for(let d=0;d<e;d++){const m=_(s),u=[];let g=[...l];const h=[];for(;h.length<3;){const I=g.pop();if(!I)throw new Error("Not enough sets available");const C=p.sample(I.passcode.filter(v=>v.length<=12&&!t.includes(v)))||"";if(!C)continue;const S=h.length+1;u.push(I.id),i[I.id]=!0;const y=C.split("").map(v=>p.sample(o[v])||` ${v} `),A=p.sampleSize(I.imageCardsIds,S);h.push({passcode:C,imagesIds:A,words:y}),g=g.filter(v=>!i[v.id]&&v.imageCardsIds.length>S)}s=m,c[m]={id:m,type:"portais-magicos",setId:u.join(K),number:a.latestNumber+d+1,corridors:h.reverse()},l=l.filter(I=>!i[I.id])}return c},Wt=(e,a,r,o)=>{const[s]=G(j.QUARTETOS,o),t=w("daily-quartet-sets",e),i=w("items-groups",e);return{entries:x.useMemo(()=>!e||t.isLoading||i.isLoading||!s?{}:zt(r,s,a,t.data,i.data),[e,a,s,r,t.dataUpdatedAt,i.dataUpdatedAt]),isLoading:t.isLoading||i.isLoading}},zt=(e,a,r,o,s)=>{console.count("Creating Quartetos...");let t=Object.values(o).filter(c=>c.itemsIds.length>=4&&!a.used.includes(c.id)&&!c.flagged),i=a.latestDate;const l={};return Array.from({length:e}).forEach((c,d)=>{const m=[],u={};let g=p.cloneDeep(t),h=0;for(;m.length<3&&h<500;){const b=p.sample(g);if(!b)throw Error("No potential set found for Quartetos game");g=g.filter(T=>T.id!==b.id);const O=p.orderBy(p.sampleSize(b.itemsIds,4),T=>Number(T));if(O.some(T=>u[T])){h++;continue}b.itemsIds.forEach(T=>{u[T]=!0}),m.push({id:b.id,title:b.title,itemsIds:O,level:b.level??1}),h=0}const I=m.map(b=>b.id);t=t.filter(b=>!I.includes(b.id));const C=Object.values(s).filter(b=>b.itemsIds.some(O=>!u[O])&&b.itemsIds.length>=4&&b.nsfw!==!0),S=p.sample(C);if(!S)throw Error("No eligible group found for Quartetos game");m.push({id:S.id,title:p.capitalize(S.name[r]),itemsIds:p.sampleSize(S.itemsIds,4),level:1});const y=Math.ceil(m.reduce((b,O)=>b+O.level,0)/m.length),A=p.orderBy(m,["level"],["desc"]).map((b,O)=>(b.level=O,b)),v=m.map(b=>b.id).join(K),f=p.shuffle(m.flatMap(b=>b.itemsIds)),N=_(i);i=N,l[N]={id:N,number:a.latestNumber+d+1,setId:v,type:"quartetos",grid:f,difficulty:y,sets:A}}),l},Jt=(e,a,r,o)=>{const[s]=G(j.TA_NA_CARA,o),t=w("suspects",e),i=w(`testimony-questions-${a}`,e),l=w("testimony-answers",e);return{entries:x.useMemo(()=>{if(!e||!t.isSuccess||!i.isSuccess||!s||!l.isSuccess)return{};const d=ss(i.data,l.data,t.data),m=Object.keys(t.data).map(u=>je(u,"gb"));return Zt(r,s,m,i.data,d)},[e,t.dataUpdatedAt,i.dataUpdatedAt,l.dataUpdatedAt,s,r]),isLoading:t.isLoading||i.isLoading}},Kt=15,De=7,Zt=(e,a,r,o,s)=>{console.count("Creating Tá Na Cara...");let t=0,i=a.latestDate;const l={};for(let c=0;c<e;c++){const d=_(i);i=d;const m=[];for(let h=0;h<Kt;h++){t>=s.length&&(t=0);const I=s[t];m.push(Xt(I,o[I.testimonyId])),t+=1}const u=Ge(m.flatMap(h=>h.suspectsIds||[])),g=p.shuffle(r.filter(h=>!u[h])).slice(0,De);l[d]={id:d,type:"ta-na-cara",number:a.latestNumber+c+1,suspectsIds:g,testimonies:m}}return l},Xt=(e,a)=>{const r=[...p.shuffle(e.counts[3]),...p.shuffle(e.counts[2]),...e.counts[1],...e.counts[0],...e.counts[5]].slice(0,De).map(o=>je(o,"gb"));return{testimonyId:a.id,question:a.question,nsfw:!!a.nsfw,suspectsIds:r}},es=e=>e.reduce((a,r)=>{const o=r.split(K),s=o[0],t=Number(o[1]);if(s.startsWith("us")){const i=s.split("-"),l=`${i[0]}-${i[2]}`;return l.includes("undefined")||(a[l]=t||0),a}return a[s]=t||0,a},{}),ts=(e,a)=>{const r=es(e);return a.forEach(o=>{var s;o.testimonies.forEach(t=>{r[t.testimonyId]===void 0&&(r[t.testimonyId]=0),r[t.testimonyId]+=1}),(s=o.suspectsIds)==null||s.forEach(t=>{const i=t.split("-"),l=`${i[0]}-${i[2]}`;r[l]===void 0&&(r[l]=0),r[l]+=1})}),Object.entries(r).map(([o,s])=>`${o}${K}${s}`)},ss=(e,a,r)=>{const o={};return Object.keys(e).forEach(t=>{o[t]===void 0&&(o[t]={0:[],1:[],2:[],3:[],4:[],5:[]});const i=a[t]||{};Object.keys(r).forEach(l=>{const c=i[l]||[],d=Ne(c);d>=5?o[t][5].push(l):o[t][d].push(l)})}),p.orderBy(Object.keys(o).map(t=>({testimonyId:t,counts:o[t]})),[t=>t.counts[3].length,t=>t.counts[2].length,t=>t.counts[1].length,t=>t.counts[0].length],["desc"])};function ns(e,a,r){const o=ge.DAILY[a??"pt"],s=Ie(o,{enabled:e});x.useEffect(()=>{Dt()},[r,a]);const t=e&&s.isSuccess,i=bt(t,a,r,s.data??{}),l=St(t,a,r,s.data??{}),c=Ot(t,a,r,s.data??{}),d=Nt(t,a,r,s.data??{}),m=_t(t,a,r,s.data??{}),u=Pt(t,a,r,s.data??{}),g=Wt(t,a,r,s.data??{}),h=Ze(t,a,r,s.data??{}),I=Ht(t,a,r,s.data??{}),C=Et(t,a,r,s.data??{},l.entries),S=Jt(t,a,r,s.data??{}),y=x.useMemo(()=>l.entries.length===0?[]:(console.count("Bundling entries..."),l.entries.map(A=>({id:A.id,"arte-ruim":A,"aqui-o":i.entries[A.id],"comunicacao-alienigena":c.entries[A.id],"controle-de-estoque":d.entries[A.id],filmaco:m.entries[A.id],palavreado:u.entries[A.id],"portais-magicos":I.entries[A.id],quartetos:g.entries[A.id],"teoria-de-conjuntos":h.entries[A.id],artista:C.entries[A.id],"ta-na-cara":S.entries[A.id]}))),[l.entries,i.entries,m.entries,c.entries,d.entries,u.entries,I.entries,g.entries,h.entries,C.entries,S.entries]);return{isLoading:s.isLoading||i.isLoading||l.isLoading||c.isLoading||d.isLoading||m.isLoading||u.isLoading||I.isLoading||g.isLoading||h.isLoading||C.isLoading||S.isLoading,entries:y}}function rs(e){const{notification:a}=Oe.useApp(),r=Te(),o=ge.DAILY[e??"pt"],[s,t]=x.useState(!1),i=Ie(o,{enabled:!!o}),l=he({mutationFn:async c=>{const d=c.map(h=>{const I=se(ne,`${o}/${h.id}`);return le(I,h)}),m=se(ne,`${o}/history`),u=i.data;if(!u)throw new Error("No previous history");const g={...u,[j.AQUI_O]:U(j.AQUI_O,u,c,h=>h.setId),[j.ARTE_RUIM]:U(j.ARTE_RUIM,u,c,h=>h.cardId),[j.ARTISTA]:U(j.ARTISTA,u,c,null),[j.COMUNICACAO_ALIENIGENA]:U(j.COMUNICACAO_ALIENIGENA,u,c,h=>h.setId),[j.CONTROLE_DE_ESTOQUE]:U(j.CONTROLE_DE_ESTOQUE,u,c,null),[j.FILMACO]:U(j.FILMACO,u,c,h=>h.setId),[j.PALAVREADO]:U(j.PALAVREADO,u,c,h=>h.keyword),[j.PORTAIS_MAGICOS]:U(j.PORTAIS_MAGICOS,u,c,h=>h.corridors.map(I=>I.passcode)),[j.TA_NA_CARA]:U(j.TA_NA_CARA,u,c,null,ts),[j.QUARTETOS]:U(j.QUARTETOS,u,c,h=>h.sets.map(I=>I.id)),[j.TEORIA_DE_CONJUNTOS]:U(j.TEORIA_DE_CONJUNTOS,u,c,h=>[h.intersectingThing.id,h.setId])};return le(m,g),Promise.all(d)},onSuccess:()=>{a.info({message:"Data saved",placement:"bottomLeft"}),r.invalidateQueries({queryKey:[o,"history"]}),t(!1)},onError:()=>{a.error({message:"Error saving data",placement:"bottomLeft"})}});return{isDirty:s,setIsDirty:t,save:l.mutateAsync,isPending:l.isPending}}const U=(e,a,r,o,s)=>{var i;const t=JSON.parse(((i=a[e])==null?void 0:i.used)??"[]");return s?{latestDate:r[r.length-1].id,latestNumber:r[r.length-1][e].number,used:JSON.stringify(s(t,r.map(l=>l[e])))}:o===null?{latestDate:r[r.length-1].id,latestNumber:r[r.length-1][e].number,used:"[]"}:{latestDate:r[r.length-1].id,latestNumber:r[r.length-1][e].number,used:JSON.stringify(_e([...t,...r.map(l=>l[e]).map(o)]).flat())}},as="pt";function is(){const[e,a]=x.useState(""),[r,o]=x.useState(3),[s,t]=x.useState(7),[i,l]=x.useState(Date.now());return n.jsxs("div",{children:[n.jsx(F.Title,{level:2,children:"Data Population"}),n.jsxs(D,{gap:12,children:[n.jsx(ee,{label:"Language",value:e,onChange:a,options:[as],placeholder:"Select a language"}),n.jsx(ee,{label:"Minimum Drawings",value:r,onChange:o,options:[2,3,4],placeholder:"Select a number"}),n.jsx(ee,{label:"Batch Size",value:s,onChange:t,options:[3,7,14,21,28],placeholder:"Select a number"}),n.jsx(q,{onClick:()=>{l(Date.now())},icon:n.jsx(ct,{})})]}),n.jsx(os,{language:e,batchSize:s},i)]})}function os({language:e,batchSize:a}){const r=e,o=ns(!!r,r,a),s=vt();x.useEffect(()=>{p.isEmpty(s)||console.log(s)},[s]);const{save:t,isPending:i}=rs(r??"pt");return n.jsxs(Ke,{isLoading:o.isLoading,error:null,hasResponseData:!o.isLoading,children:[n.jsxs(D,{justify:"space-between",align:"center",children:[n.jsxs(F.Title,{level:4,children:["Total: ",o.entries.length]}),n.jsx(q,{onClick:()=>t(o.entries),loading:i,disabled:(o.entries??[]).length===0,type:"primary",size:"large",icon:n.jsx(Xe,{}),children:"Save"})]}),Object.values(s).map(l=>n.jsx(L,{message:l,type:"warning",showIcon:!0,banner:!0},l)),n.jsx(xe,{columns:ye,dataSource:o.entries??[],scroll:{x:"max-content"}})]})}function ls(){const{queryParams:e}=ue();return e.get("display")==="archive"?n.jsx(gt,{}):e.get("display")==="check"?n.jsx(It,{}):n.jsx(is,{})}function cs(){const{queryParams:e,addParams:a}=ue();return n.jsx(n.Fragment,{children:n.jsx(et,{children:n.jsx(Pe,{label:"Display",value:e.get("display")??"population",onChange:r=>a({display:r}),options:[{title:"Population",icon:n.jsx(ut,{}),value:"population"},{title:"Check",icon:n.jsx(ot,{}),value:"check"},{title:"Archive",icon:n.jsx(pt,{}),value:"archive"}]})})})}function tn(){return n.jsx(Le,{title:"Daily Setup",children:n.jsxs(ce,{hasSider:!0,children:[n.jsx(Be,{children:n.jsx(cs,{})}),n.jsx(ce.Content,{className:"content",children:n.jsx(ls,{})})]})})}export{tn as default};
