import{r as v,a as G,_ as O,j as e,T as p,I as T,B,D as E,P as L,L as w}from"./index-DKldGYC9.js";import{D as A}from"./DataLoadingWrapper-LoQ1HTAc.js";import{l as f,P as z}from"./useBaseUrl-CzvQiwMK.js";import{I as R}from"./ImageCard-NSdofaP6.js";import{u as M}from"./useCardWidth-KBGXSvfD.js";import{u as H}from"./useQueryParams-BmcEa7HG.js";import{s as C,a as y}from"./index-CS8tCY7i.js";import{D as I}from"./EditableFields-D5KcSahw.js";import{g as P}from"./utils-wPPXcPLE.js";import{D}from"./index-BE9mv6BD.js";import{F as S}from"./index-BCTNeYxA.js";import{S as N}from"./index-DMoY3GTb.js";import{R as _}from"./index-yNfdQCVO.js";import{S as W}from"./index-BZDnQ0XM.js";import{S as $}from"./index-BhPX-fbT.js";import{T as q}from"./index-Blh6VZwa.js";import{R as Y,a as J}from"./WomanOutlined-CN17XDgr.js";import{R as Q,a as V}from"./ColumnWidthOutlined-CpYiqP7S.js";import{a as k,b as K}from"./FilterEntries-DIaYCgoN.js";import{S as X}from"./SiderContent-CWBPdBJr.js";import{D as Z}from"./DownloadButton-BZ-e2rgf.js";import{S as U}from"./SaveButton-BjTzOZtG.js";import{u as ee}from"./useResourceFirestoreData-DQgzOFEq.js";import"./constants-DMr5cfhV.js";import"./Item-B05TLgZt.js";import"./useCopyToClipboardFunction-DWGmznFF.js";import"./LanguageFlag-D7IZGTjh.js";import"./index-CkmH3Du8.js";import"./Input-D9WiqoRz.js";import"./FireFilled-CCZISRwv.js";import"./IdcardOutlined-C4JWG2cO.js";import"./gapSize-U1swVQyS.js";import"./index-D0d9pyAM.js";import"./index-CmcbUsyL.js";import"./moment-C5S46NFB.js";import"./SaveOutlined-DODUybLq.js";import"./useGetFirestoreDoc-C17LBNOx.js";import"./useTDResource-DZouQedq.js";import"./useUpdateFirestoreDoc-Du_MLqGh.js";import"./useMutation-C2U8foqc.js";var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},ae=function(t,r){return v.createElement(G,O({},t,{ref:r,icon:se}))},ie=v.forwardRef(ae);const le=["18-21","21-30","30-40","40-50","50-60","50-70"].map(s=>({label:s,value:s})),te=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Non-binary",value:"non-binary"},{label:"Other",value:"other"}],re=[{label:"Caucasian",value:"caucasian"},{label:"Black",value:"black"},{label:"Asian",value:"asian"},{label:"Latino",value:"latino"},{label:"Indigenous",value:"indigenous"},{label:"Indian",value:"indian"},{label:"Middle Eastern",value:"middle-eastern"},{label:"Mixed",value:"mixed"},{label:"Other",value:"other"}];function ne({data:s,addEntryToUpdate:t}){const{removeParam:r,queryParams:n}=H(),d=n.get("suspectId"),c=n.get("version")??"gb",a=s[d??""];return a?e.jsx(D,{title:a.name.pt,placement:"right",onClose:()=>r("suspectId"),open:!!a,width:400,children:e.jsxs("div",{className:"suspect__drawer",children:[e.jsxs("div",{className:"grid grid-2",children:[e.jsx(R,{id:P(a.id,c),width:100}),e.jsxs(S,{vertical:!0,gap:4,children:[e.jsx(I,{value:a.name,language:"pt",onChange:o=>{t(a.id,{...a,name:{...a.name,pt:o.target.value}})}}),e.jsx(I,{value:a.name,language:"en",onChange:o=>{t(a.id,{...a,name:{...a.name,en:o.target.value}})}}),e.jsx("div",{children:e.jsx(N,{placeholder:"Select Age",value:a.age,size:"small",onChange:o=>{t(a.id,{...a,age:o})},options:le,style:{width:80}})}),e.jsx("div",{children:e.jsx(N,{value:a.gender,size:"small",onChange:o=>{t(a.id,{...a,gender:o})},options:te,style:{width:120}})}),e.jsx("div",{children:e.jsx(N,{value:a.ethnicity,size:"small",onChange:o=>{t(a.id,{...a,ethnicity:o})},options:re,style:{width:150}})})]})]}),e.jsxs("div",{className:"grid grid-2",children:[e.jsxs(S,{vertical:!0,children:[e.jsx(p.Text,{strong:!0,children:"Build"}),e.jsx(_.Group,{size:"small",value:a.build,onChange:o=>{t(a.id,{...a,build:o.target.value})},options:ce,style:{display:"flex",flexDirection:"column",gap:3}})]}),e.jsxs(S,{vertical:!0,children:[e.jsx(p.Text,{strong:!0,children:"Height"}),e.jsx(_.Group,{size:"small",value:a.height,onChange:o=>{t(a.id,{...a,height:o.target.value})},options:de,style:{display:"flex",flexDirection:"column",gap:3}})]})]}),e.jsx(oe,{suspect:a,addEntryToUpdate:t})]})}):null}function oe({suspect:s,addEntryToUpdate:t}){const r=s.features??[],n=d=>{const c=r.includes(d)?r.filter(a=>a!==d):[...r,d];t(s.id,{...s,features:c})};return e.jsx("div",{className:"grid grid-2",children:F.map(d=>e.jsxs("div",{className:"my-4",children:[e.jsx(p.Text,{strong:!0,children:d.title}),d.features.map(c=>e.jsxs(S,{className:"my-2",gap:4,children:[e.jsx(W,{size:"small",checked:r.includes(c.id),onChange:()=>n(c.id)})," ",c.label]},c.id))]},d.title))})}const ce=["thin","average","muscular","large"],de=["short","medium","tall"],F=[{title:"Hair Length",features:[{id:"shortHair",label:"Short Hair"},{id:"longHair",label:"Long Hair"},{id:"mediumHair",label:"Medium Hair"},{id:"bald",label:"Bald"}]},{title:"Hair Color",features:[{id:"blackHair",label:"Black Hair"},{id:"brownHair",label:"Brown Hair"},{id:"blondeHair",label:"Blonde Hair"},{id:"redHair",label:"Red Hair"},{id:"greyHair",label:"Grey Hair"},{id:"coloredHair",label:"Colored Hair"}]},{title:"Face",features:[{id:"beard",label:"Beard"},{id:"mustache",label:"Mustache"},{id:"goatee",label:"Goatee"},{id:"lipstick",label:"Lipstick"}]},{title:"Accessories",features:[{id:"glasses",label:"Glasses"},{id:"piercings",label:"Piercings"},{id:"earrings",label:"Earrings"},{id:"necklace",label:"Necklace"},{id:"hat",label:"Hat"},{id:"scarf",label:"Scarf"},{id:"hoodie",label:"Hoodie"},{id:"tie",label:"Tie"},{id:"headscarf",label:"Headscarf/Bandana"}]}];function ue({data:s,addEntryToUpdate:t}){const{addParam:r,queryParams:n}=H(),d=n.get("version")??"gb",c=n.get("sortBy")??"id",a=Number(n.get("cardsPerRow"))||8,[o,x]=M(a),i=v.useMemo(()=>f.orderBy(Object.values(s),l=>c==="id"?Number(l.id.split("-").at(-1)):c==="name.pt"?C(l.name.pt).toLowerCase():c==="name.en"?C(l.name.en).toLowerCase():l[c]??l.id,["asc"]),[s,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(p.Title,{level:2,children:["Deck ",d," (",i.length,")"]}),e.jsx(T.PreviewGroup,{children:e.jsx($,{ref:x,wrap:!0,className:"my-2",children:i.map(l=>{var j,u;return e.jsxs("div",{className:"suspect",style:{width:`${o}px`},children:[e.jsx(R,{id:P(l.id,d),width:o,className:"suspect__image"}),e.jsxs("div",{className:"suspect__name",children:[e.jsx("div",{children:e.jsx(q,{children:l.id})}),e.jsxs("div",{children:["ðŸ‡§ðŸ‡· ",l.name.pt]}),e.jsxs("div",{children:["ðŸ‡ºðŸ‡¸ ",l.name.en]}),e.jsxs("div",{className:"suspect__info",style:me(l),children:[e.jsxs("div",{children:[e.jsxs("div",{children:[l.gender==="male"?e.jsx(Y,{}):e.jsx(J,{})," ",l.age]}),e.jsx("div",{children:e.jsx("em",{children:l.ethnicity})})]}),e.jsxs("div",{className:"uppercase",children:[e.jsx(Q,{}),e.jsx("br",{}),l.build.charAt(0)]}),e.jsxs("div",{className:"uppercase",children:[e.jsx(V,{}),e.jsx("br",{}),l.height.charAt(0)]}),e.jsxs("div",{children:[((j=l==null?void 0:l.features)==null?void 0:j.length)??0," features"]})]}),e.jsx(B,{size:"small",block:!0,onClick:()=>r("suspectId",l.id),danger:!(l!=null&&l.features)||((u=l==null?void 0:l.features)==null?void 0:u.length)<2,children:e.jsx(ie,{})})]})]},l.id)})},d)}),e.jsx(ne,{data:s,addEntryToUpdate:t})]})}const me=s=>!s.build||!s.height||s.build.length===1||s.height.length===1?{borderColor:"red"}:{};function b(s,t){return f.orderBy(Object.entries(s).map(([r,n])=>({key:r,label:f.capitalize(r),value:n,percentage:Math.round(n/t*100)})),["percentage"],["desc"])}function he({data:s}){const[t,r]=v.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(B,{onClick:()=>r(!0),block:!0,children:"See Stats"}),t&&e.jsx(ge,{data:s,open:t,onClose:()=>r(!1)})]})}function ge({data:s,open:t,onClose:r}){const{ages:n,ethnicities:d,genders:c,builds:a,heights:o}=v.useMemo(()=>{const i={},l={},j={},u={},h={};Object.values(s).forEach(m=>{i[m.age]=(i[m.age]??0)+1,l[m.ethnicity]=(l[m.ethnicity]??0)+1,j[m.gender]=(j[m.gender]??0)+1,u[m.build||"?"]=(u[m.build||"?"]??0)+1,h[m.height||"?"]=(h[m.height||"?"]??0)+1});const g=Object.keys(s).length;return{ages:b(i,g),ethnicities:b(l,g),genders:b(j,g),builds:b(u,g),heights:b(h,g)}},[s]),x=v.useMemo(()=>{const i={};Object.values(s).forEach(u=>{var h;(h=u.features)==null||h.forEach(g=>{i[g]=(i[g]??0)+1})});const l=Object.keys(s).length,j=F.reduce((u,h)=>{const g=h.features.map(m=>m.id);return u.push(...g),u},[]);return f.orderBy(b(i,l),u=>j.findIndex(h=>h===u.key),["asc"])},[s]);return e.jsxs(D,{title:"Suspects Statistics",placement:"right",onClose:r,open:t,width:400,children:[e.jsx(p.Text,{strong:!0,children:"Ethnicity"}),e.jsx("ul",{className:"statistic__list",children:d.map(i=>e.jsxs("li",{children:[e.jsx("strong",{children:i.label})," - ",i.percentage,"%"]},i.key))}),e.jsx(p.Text,{strong:!0,children:"Gender"}),e.jsx("ul",{className:"statistic__list",children:c.map(i=>e.jsxs("li",{children:[e.jsx("strong",{children:i.label})," - ",i.percentage,"%"]},i.key))}),e.jsx(p.Text,{strong:!0,children:"Age"}),e.jsx("ul",{className:"statistic__list",children:n.map(i=>e.jsxs("li",{children:[e.jsx("strong",{children:i.label})," - ",i.percentage,"%"]},i.key))}),e.jsx(p.Text,{strong:!0,children:"Build"}),e.jsx("ul",{className:"statistic__list",children:a.map(i=>e.jsxs("li",{children:[e.jsx("strong",{children:i.label})," - ",i.percentage,"%"]},i.key))}),e.jsx(p.Text,{strong:!0,children:"Height"}),e.jsx("ul",{className:"statistic__list",children:o.map(i=>e.jsxs("li",{children:[e.jsx("strong",{children:i.label})," - ",i.percentage,"%"]},i.key))}),e.jsx(p.Text,{strong:!0,children:"Features"}),e.jsx("ul",{className:"statistic__list",children:x.map(i=>e.jsxs("li",{children:[e.jsx("strong",{children:i.label})," - ",i.percentage,"% (",i.value,")"]},i.key))})]})}const pe=[{value:"ct",label:"Cartoon"},{value:"gb",label:"Ghibli"},{value:"ai",label:"AI"},{value:"md",label:"Models"},{value:"wc",label:"Wacky"}],xe=[{value:"id",label:"Id"},{value:"name.pt",label:"Name (PT)"},{value:"name.en",label:"Name (EN)"},{value:"ethnicity",label:"Ethnicity"},{value:"gender",label:"Gender"},{value:"age",label:"Age"},{value:"height",label:"Height"},{value:"build",label:"Build"}];function je({data:s,save:t,isDirty:r,isSaving:n,entriesToUpdate:d,hasFirestoreData:c}){const{addParam:a,queryParams:o}=H();return e.jsxs(X,{children:[e.jsxs(S,{vertical:!0,gap:12,children:[e.jsx(U,{isDirty:r,onSave:t,isSaving:n,dirt:JSON.stringify(d)}),e.jsx(Z,{data:()=>be(s),fileName:"suspects.json",disabled:r,hasNewData:c,block:!0})]}),e.jsx(E,{}),e.jsx(k,{label:"Version",value:o.get("version")??"gb",onChange:x=>a("version",x),options:pe}),e.jsx(K,{label:"Cards Per Row",value:Number(o.get("cardsPerRow")??"8"),onChange:x=>a("cardsPerRow",x),min:2,max:12}),e.jsx(k,{label:"Sort By",value:o.get("sortBy")??"id",onChange:x=>a("sortBy",x),options:xe}),e.jsx(he,{data:s})]})}function be(s){const t=f.cloneDeep(s);for(const r in t){const n=t[r];n.name.pt.endsWith(".")&&(n.name.pt=n.name.pt.slice(0,-1).trim()),n.name.en.endsWith(".")&&(n.name.en=n.name.en.slice(0,-1).trim())}return y(t,["gender","ethnicity","age","height","build","features"])}function ts(){const s=ee({tdrResourceName:"suspects",firestoreDataCollectionName:"suspects",serialize:!0});return e.jsx(L,{title:"Suspects",subtitle:"Information",children:e.jsxs(w,{hasSider:!0,children:[e.jsx(z,{children:e.jsx(je,{...s})}),e.jsx(w.Content,{className:"content",children:e.jsx(A,{isLoading:s.isLoading,error:s.error,hasResponseData:!f.isEmpty(s.data),children:e.jsx(ue,{...s})})})]})})}export{ts as default};
