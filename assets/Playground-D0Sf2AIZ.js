import{j as u,r as x,u as j,L as p,H as v,D as N}from"./index-vmFFRzn7.js";import{S as R}from"./index-pGrZ8HBU.js";import{u as D,D as k,g as I}from"./constants-BUcqTHBQ.js";import{u as y}from"./useTDResource-DRi3U-Lt.js";import{l as f}from"./useBaseUrl-Dv2lNNaz.js";import{a as G}from"./warnings-pi7vOk3g.js";import{R as b}from"./main-DXitZaNU.js";import{I as w}from"./Item-CuGkd1uQ.js";import"./gapSize-U1swVQyS.js";import"./moment-C5S46NFB.js";function E(){return u.jsx(R,{direction:"vertical",children:u.jsx("div",{children:"?"})})}const L=(s,e,r,a)=>{const[n]=D(k.ORGANIKU,a),t=y("items-groups",s);return{entries:x.useMemo(()=>t.isLoading||!n?{}:O(r,n,e,t.data),[s,e,n,r,t.dataUpdatedAt]),isLoading:t.isLoading}},O=(s,e,r,a)=>{console.count("Creating Organiku...");const n=f.shuffle(Object.values(a).filter(o=>o.itemsIds.length>5&&e.used.includes(o.id)===!1));n.length<s&&G("organiku","Not enough organiku groups left");let t=e.latestDate;const i={};for(let o=0;o<s;o++){const c=I(t);t=c;const l=n[o],d=f.sampleSize(l.itemsIds,5),m=S(d),g=P(m,d,1);console.log({defaultRevealedIndexes:g}),i[c]={id:c,number:e.latestNumber+o+1,setId:l.id,type:"organiku",title:f.capitalize(l.name[r]),grid:m,defaultRevealedIndexes:g,itemsIds:d}}return i};function P(s,e,r){const a=new Set,n={};s.forEach((t,i)=>{n[t]||(n[t]=[]),n[t].push(i)});for(const t of e){const i=n[t]??[],c=i.length%2===0?2:1,l=f.shuffle(i);for(let d=0;d<c&&d<l.length;d++)a.add(l[d])}for(let t=0;t<r;t++){const i=e[t%e.length],o=(n[i]??[]).filter(l=>!a.has(l)),c=f.shuffle(o);for(let l=0;l<2&&l<c.length;l++)a.add(c[l])}return Array.from(a)}function S(s){const e=s.length,r=[];r.push(f.shuffle(s));function a(t,i){for(let o=0;o<e;o++)for(let c=0;c<i;c++)if(r[c][o]===t[o])return!1;return!0}function n(t){if(t===e)return!0;const i=h(s);for(;i.length>0;){const o=i.splice(Math.floor(Math.random()*i.length),1)[0];if(a(o,t)){if(r.push(o),n(t+1))return!0;r.pop()}}return!1}return n(1),r.flat()}function h(s){if(s.length<=1)return[s.slice()];const e=[];for(let r=0;r<s.length;r++){const a=[...s.slice(0,r),...s.slice(r+1)];for(const n of h(a))e.push([s[r],...n])}return e}function $(){var r;j("Playground");const{entries:s}=L(!0,"pt",1,{}),e=(r=Object.values(s??{}))==null?void 0:r[0];return u.jsxs(p,{children:[u.jsx(v,{title:"Playground"}),u.jsx(N,{}),u.jsxs(p.Content,{className:"content",children:[u.jsx(E,{}),u.jsxs("div",{className:"grid grid-2",children:[u.jsx(b,{src:s??{},theme:"twilight",collapsed:3}),u.jsx("div",{children:e&&u.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:((e==null?void 0:e.grid)??[]).map((a,n)=>u.jsx("div",{className:"grid-item",children:u.jsx(w,{id:a||"0",width:64,className:e!=null&&e.defaultRevealedIndexes.includes(n)?"red-border":""})},`${a}-${n}`))})})]})]})]})}export{$ as default};
