import{u as H,D as Q,g as $}from"./constants-CBiiz0lX.js";import{l as o}from"./lodash-BfoqcgmA.js";import{s as J}from"./index-B7Pvm-Wi.js";import{u as k}from"./useTDResource-BYFeggIw.js";import{r as K}from"./index-BeoNBKs9.js";const h="|",U="abcdefghijklmnopqrstuvwxyz",g="bcdfghjklmnpqrstvwxyz",m="aeiou",Z=/[áéíóúãẽĩõũâêîôûàèìòùäëïöü]/,s=o.memoize(e=>J(e).toLowerCase()),O=e=>s(e).length,D=e=>s(e).split("").filter(t=>m.includes(t)).length,N=e=>s(e).split("").filter(t=>g.includes(t)).length,F=e=>e.toLowerCase().split("").filter(t=>Z.test(t)).length,f=e=>e.split(" ").length,ce={"ddr-7-pt":e=>U.indexOf(s(e)[0])<U.indexOf(s(e)[1]),"ddr-8-pt":e=>O(e)<=4,"ddr-9-pt":e=>O(e)===5,"ddr-10-pt":e=>O(e)===6,"ddr-11-pt":e=>O(e)===7,"ddr-12-pt":e=>O(e)>7,"ddr-13-pt":e=>f(e)>1,"ddr-14-pt":e=>{const t=s(e).split("").filter(n=>m.includes(n));return new Set(t).size>=2},"ddr-15-pt":e=>new Set(s(e).split("")).size<=4,"ddr-16-pt":e=>N(e)>D(e),"ddr-17-pt":e=>D(e)>N(e),"ddr-53-pt":e=>D(e)===N(e),"ddr-18-pt":e=>{const t=s(e)[0];return s(e).slice(1).includes(t)},"ddr-19-pt":e=>s(e).split("").some((t,n)=>s(e).slice(n+1).includes(t)),"ddr-20-pt":e=>s(e).split("").some((t,n)=>m.includes(t)&&s(e).slice(n+1).includes(t)),"ddr-21-pt":e=>s(e).split("").some((t,n)=>g.includes(t)&&s(e).slice(n+1).includes(t)),"ddr-22-pt":e=>s(e).split("").some((t,n)=>m.includes(t)&&m.includes(e[n+1])),"ddr-23-pt":e=>"abcdefghijklm".includes(s(e)[0]),"ddr-24-pt":e=>"nopqrstuvwxyz".includes(s(e)[0]),"ddr-25-pt":e=>m.includes(s(e)[0]),"ddr-26-pt":e=>g.includes(s(e)[0]),"ddr-27-pt":e=>s(e).split("").some((t,n)=>g.includes(t)&&e[n+1]===t),"ddr-28-pt":e=>s(e).includes("a"),"ddr-54-pt":e=>s(e).includes("b"),"ddr-32-pt":e=>s(e).includes("c")||s(e).includes("ç"),"ddr-55-pt":e=>s(e).includes("d"),"ddr-29-pt":e=>s(e).includes("e"),"ddr-56-pt":e=>s(e).includes("f"),"ddr-57-pt":e=>s(e).includes("g"),"ddr-34-pt":e=>s(e).includes("h"),"ddr-47-pt":e=>s(e).includes("i"),"ddr-52-pt":e=>s(e).includes("j"),"ddr-58-pt":e=>s(e).includes("l"),"ddr-64-pt":e=>s(e).includes("m"),"ddr-65-pt":e=>s(e).includes("n"),"ddr-48-pt":e=>s(e).includes("o"),"ddr-59-pt":e=>s(e).includes("p"),"ddr-31-pt":e=>s(e).includes("q"),"ddr-60-pt":e=>s(e).includes("r"),"ddr-66-pt":e=>s(e).includes("s"),"ddr-61-pt":e=>s(e).includes("t"),"ddr-30-pt":e=>s(e).includes("u"),"ddr-62-pt":e=>s(e).includes("v"),"ddr-49-pt":e=>s(e).includes("x"),"ddr-63-pt":e=>s(e).includes("z"),"ddr-36-pt":e=>s(e).includes("k")||s(e).includes("w")||s(e).includes("y"),"ddr-37-pt":e=>F(e)>0,"ddr-33-pt":e=>s(e).split("").some((t,n)=>!!(["m","n"].includes(t)&&g.includes(e[n+1]))),"ddr-35-pt":e=>s(e).split("").some((t,n)=>!!(t==="h"&&g.includes(e[n-1]))),"ddr-38-pt":e=>m.includes(s(e).slice(-1)),"ddr-39-pt":e=>g.includes(s(e).slice(-1)),"ddr-40-pt":e=>s(e).slice(-1)==="s","ddr-67-pt":e=>new Set(s(e).split("").filter(t=>m.includes(t))).size===1},ue={"ddr-3-pt":(e,t)=>f(e)===1&&t.split(h).length===2,"ddr-4-pt":(e,t)=>f(e)===1&&t.split(h).length===3,"ddr-22-pt":(e,t)=>f(e)===1&&t.split(h).length===4,"ddr-41-pt":(e,t)=>f(e)===1&&t.split(h).some(n=>n.split("").some((l,c)=>!!(m.includes(l)&&m.includes(n[c+1])))),"ddr-42-pt":(e,t)=>t.split(h).some((n,l)=>l===0?!1:n[0]===t.split(h)[l-1].slice(-1)),"ddr-46-pt":(e,t,n)=>f(e)===1&&!n&&t.split(h).length===1},pe={"ddr-43-pt":(e,t,n)=>f(e)===1&&n===0,"ddr-44-pt":(e,t,n)=>f(e)===1&&n===1,"ddr-45-pt":(e,t,n)=>f(e)===1&&n===2},X=e=>Object.values(e).reduce((t,n)=>Math.max(t,n.updatedAt),0),q=(e,t)=>t>e.updatedAt;function ae(e){const t=/([^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*[aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]{1,3}[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]*)(?=[^aeiouáéíóúâêîôûàèìòùãõäëïöüAEIOUÁÉÍÓÚÂÊÎÔÛÀÈÌÒÙÃÕÄËÏÖÜ]|$)/gi;return e.replace(t,"$1|").slice(0,-1).replace(/\s/g,"")}const me=(e,t,n,l)=>{const[c]=H(Q.TEORIA_DE_CONJUNTOS,l),a=k("daily-diagram-items",e),d=k("daily-diagram-rules",e);return{entries:K.useMemo(()=>!e||!c||!a.isSuccess||!d.isSuccess?{}:B(n,c,d.data,a.data),[e,n,c,d,a]),isLoading:a.isLoading||d.isLoading}},S=8,B=(e,t,n,l)=>{console.count("Creating Teoria de Conjuntos...");let c=t.latestDate;const a=[...t.used],d=X(n),y=(()=>{const u=Object.values(n).reduce((r,A)=>(r[A.id]=[],r),{});return Object.values(l).forEach(r=>{q(r,d)||r.rules.forEach(A=>{u[A].push(r.itemId)})}),u})(),p={};for(let u=0;u<e;u++){const r=$(c);c=r,p[r]={id:r,type:"teoria-de-conjuntos",number:t.latestNumber+u+1,...ee(l,y,n,a,d)}}return p};function ee(e,t,n,l,c){const a=o.shuffle(Object.keys(e).filter(i=>!l.includes(i)&&!q(e[i],c))),d=o.sample(a);if(!d)throw new Error("No available things to choose from");l.push(d);const y={id:d,name:e[d].name},p=e[d].rules.reduce((i,w)=>{const C=n[w].type;return i[C]||(i[C]=[]),i[C].push(w),i},{});Object.keys(p).forEach(i=>{p[i].length<2&&delete p[i]});const u=o.sampleSize(Object.keys(p),2);if(u.length!==2)throw new Error("No types found for this thing");const r=[o.sample(p[u[0]]),o.sample(p[u[1]])];if(!r[0]||!r[1])throw new Error("No rules found for this thing");const A=[r[0],r[1]].sort().join("-");l.push(A);const G=n[r[0]].level+n[r[1]].level-1,V=o.cloneDeep(t);delete V[d];const z=o.shuffle(o.difference(t[r[0]],t[r[1]])),L=o.shuffle(o.difference(t[r[1]],t[r[0]])),M=o.shuffle(o.intersection(t[r[0]],t[r[1]])),v=z.pop();if(!v)throw new Error("No only in rule 1 things to choose from");const I={id:r[0],text:n[r[0]].title,level:n[r[0]].level,thing:{id:v,name:e[v].name}},j=L.pop();if(!j)throw new Error("No only in rule 2 things to choose from");const b={id:r[1],text:n[r[1]].title,level:n[r[1]].level,thing:{id:j,name:e[j].name}},R=o.sampleSize(M,S/2),x=o.sampleSize(z,S),_=o.sampleSize(L,S),T={};R.forEach(i=>{T[i]=0}),x.forEach(i=>{T[i]=1}),_.forEach(i=>{T[i]=2});const P=te(R,x,_).map(i=>({id:i,name:e[i].name,rule:T[i]})),E={contains:"Inclusão",starts:"Inicialização",ends:"Terminação",grammar:"Gramática",order:"Sequência",count:"Contagem",comparison:"Comparação",repetition:"Repetição"},W=[(E==null?void 0:E[n[I.id].type])??"Desconhecido",(E==null?void 0:E[n[b.id].type])??"Desconhecido"].join(" vs "),Y=[I.id,b.id].sort().join("::");return{title:W,setId:Y,level:G,rule1:I,rule2:b,intersectingThing:y,things:P}}function te(e,t,n){const l=e.slice(0,3),c=t.slice(0,3),a=n.slice(0,3);let d=o.sampleSize([...l,...c,...a],S);if(d.length<S){const y=e.slice(3),p=t.slice(3),u=n.slice(3),r=o.shuffle([...y,...p,...u]);d=[...d,...r]}return d.slice(0,S)}export{h as S,ue as a,pe as b,B as c,ae as s,me as u,ce as v};
