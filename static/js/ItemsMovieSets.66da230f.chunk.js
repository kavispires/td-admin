(self.webpackChunktdr=self.webpackChunktdr||[]).push([[250],{7018:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var r=n(2556),i=n(5850),s=n(184);function o(e){let{data:t,fileName:n,loading:o,...a}=e;return(0,s.jsx)(r.ZP,{onClick:()=>(0,i.ZN)("function"===typeof t?t():t,n),loading:o,...a,children:"Download JSON"})}},8178:(e,t,n)=>{"use strict";n.d(t,{i:()=>d});var r=n(5),i=n(1105),s=n(5529),o=n(763),a=n(2791),l=n(184);function d(e){let{items:t,isPending:n,style:d,size:c,placeholder:u,allowClear:v,onFinish:h,...f}=e;const m=(0,s.N)("items",!Boolean(t)&&!n),{namesDict:p,options:g}=(0,a.useMemo)((()=>{var e;console.log("Recomputing item names typeahead...");const n=Object.values(null!==(e=null!==t&&void 0!==t?t:m.data)&&void 0!==e?e:{}).reduce(((e,t)=>{const n="".concat(t.name.en," (").concat(t.id,")"),r="".concat(t.name.pt," (").concat(t.id,")");return e[n]=t.id,e[r]=t.id,e}),{});return{namesDict:n,options:(0,o.orderBy)(Object.keys(n),[e=>e.toLowerCase()]).map((e=>({value:e})))}}),[t,n]),[x,y]=(0,a.useState)([]);return(0,l.jsx)(r.Z,{options:g,style:{width:250,...d},allowClear:null===v||void 0===v||v,placeholder:null!==u&&void 0!==u?u:"Search by name or id...",filterOption:(e,t)=>{var n;return-1!==String(null!==(n=null===t||void 0===t?void 0:t.value)&&void 0!==n?n:"").toUpperCase().indexOf(null===e||void 0===e?void 0:e.toUpperCase())},onSearch:e=>{const t=e.trim(),n=g.filter((e=>{var n;return String(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"").toUpperCase().includes(t)})),r=(0,o.orderBy)(n,[e=>{var n;const r=String(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"");if(r.includes("".concat(t," ")))return-1;const i=r.toUpperCase().indexOf(t);return 0===i?-1:-1===i?r.length:i}]);y(r)},notFoundContent:"No items found",onSelect:e=>{void 0!==p[e]&&h(p[e])},...f,children:(0,l.jsx)(i.Z,{onPressEnter:()=>{if(x.length>0){const e=x[0].value;void 0!==p[e]&&h(p[e])}}})})}},7134:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(4747),i=n(763),s=n(2791),o=n(3250);function a(){const[e,t]=(0,o.Z)(),{message:n}=r.Z.useApp();return(0,s.useEffect)((()=>{e.value&&(e.value.length>20?n.info("Copied to clipboard: ".concat((0,i.truncate)(e.value,{length:30,omission:"..."}))):n.success("Copied"))}),[e,n]),t}},7020:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ItemsMovieSets:()=>B,default:()=>M});var r=n(3990),i=n(2128),s=n(4520),o=n(2556),a=n(7018),l=n(1958),d=n(5850),c=n(184);function u(e){let{data:t,save:n,isDirty:r,isSaving:i}=e;return(0,c.jsx)(l.Pd,{children:(0,c.jsxs)(s.Z,{vertical:!0,gap:12,children:[(0,c.jsx)(o.ZP,{block:!0,danger:!0,type:"primary",loading:i,disabled:!r,onClick:n,size:"large",children:"Save"}),(0,c.jsx)(a.o,{data:()=>{return e=t,(0,d.Tj)(e);var e},fileName:"daily-movie-sets.json",disabled:r,block:!0})]})})}var v=n(2979),h=n(4031),f=n(1046),m=n(1082),p=n(7134),g=n(763),x=n(8178),y=n(7462),j=n(2791);const b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};var Z=n(4186),w=function(e,t){return j.createElement(Z.Z,(0,y.Z)({},e,{ref:t,icon:b}))};const C=j.forwardRef(w);var I=n(5529),S=n(6020);function N(e){let{data:t,addEntryToUpdate:n}=e;const r=t?(i=Object.values(t),(0,g.orderBy)(i,[e=>e.title]).map((e=>({...e,itemsIds:(0,g.orderBy)(e.itemsIds,(e=>Number(e)))})))):[];var i;const o=(0,p._)(),a=(0,I.N)("items"),l=[{title:"Title",dataIndex:"title",render:e=>(0,c.jsx)("span",{children:e},e)},{title:"Year",dataIndex:"year",render:e=>(0,c.jsx)("span",{children:e})},v.Z.EXPAND_COLUMN,{title:"Items",dataIndex:"itemsIds",key:"itemsIds",render:(e,t)=>(0,c.jsx)(s.Z,{gap:6,wrap:"wrap",children:e.map((e=>(0,c.jsxs)(s.Z,{gap:2,vertical:!0,children:[(0,c.jsx)(S.ck,{id:e,width:60}),(0,c.jsxs)(s.Z,{justify:"center",children:[(0,c.jsx)(h.Z.Text,{onClick:()=>o(e),children:e}),(0,c.jsx)(E,{movie:t,addEntryToUpdate:n,itemId:e})]})]},"".concat(t.title,"-").concat(e))))},"items-".concat(t.title))},{title:"Count",dataIndex:"itemsIds",render:e=>(0,d.R1)(e).filter(Boolean).length}];return(0,c.jsx)(f.Z,{direction:"vertical",children:(0,c.jsx)(v.Z,{columns:l,rowKey:"id",dataSource:r,expandable:{expandedRowRender:e=>(0,c.jsx)(k,{movie:e,addEntryToUpdate:n}),rowExpandable:()=>a.isSuccess}})})}function k(e){let{movie:t,addEntryToUpdate:n}=e;return(0,c.jsx)("div",{children:(0,c.jsx)(x.i,{onFinish:e=>{n(t.id,{...t,itemsIds:[...t.itemsIds,e]})}})})}function E(e){let{movie:t,addEntryToUpdate:n,itemId:r}=e;return(0,c.jsx)(m.Z,{title:"Are you sure you want to remove this item?",onConfirm:()=>{n(t.id,{...t,itemsIds:t.itemsIds.filter((e=>e!==r))})},okText:"Yes",cancelText:"No",children:(0,c.jsx)(o.ZP,{icon:(0,c.jsx)(C,{}),size:"small",type:"text",ghost:!0})})}var T=n(4562),U=n(8938);function B(){const e=(0,U.i)({tdrResourceName:"daily-movie-sets",firebaseDataCollectionName:"movieSets"});return(0,c.jsx)(l.Xg,{title:"Items",subtitle:"Movie Sets",children:(0,c.jsxs)(r.Z,{hasSider:!0,children:[(0,c.jsx)(T.p,{children:(0,c.jsx)(u,{...e})}),(0,c.jsx)(r.Z.Content,{className:"content",children:(0,c.jsx)(i.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!(0,g.isEmpty)(e.data),children:(0,c.jsx)(N,{...e})})})]})})}const M=B},1291:e=>{function t(e,t){if((e=e.replace(/\s+/g,""))===(t=t.replace(/\s+/g,"")))return 1;if(e.length<2||t.length<2)return 0;let n=new Map;for(let i=0;i<e.length-1;i++){const t=e.substring(i,i+2),r=n.has(t)?n.get(t)+1:1;n.set(t,r)}let r=0;for(let i=0;i<t.length-1;i++){const e=t.substring(i,i+2),s=n.has(e)?n.get(e):0;s>0&&(n.set(e,s-1),r++)}return 2*r/(e.length+t.length-2)}e.exports={compareTwoStrings:t,findBestMatch:function(e,n){if(!function(e,t){return"string"===typeof e&&(!!Array.isArray(t)&&(!!t.length&&!t.find((function(e){return"string"!==typeof e}))))}(e,n))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const r=[];let i=0;for(let o=0;o<n.length;o++){const s=n[o],a=t(e,s);r.push({target:s,rating:a}),a>r[i].rating&&(i=o)}const s=r[i];return{ratings:r,bestMatch:s,bestMatchIndex:i}}}},3733:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{Z:()=>i});const i=function(){for(var e,t,n=0,i="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}}}]);
//# sourceMappingURL=ItemsMovieSets.66da230f.chunk.js.map