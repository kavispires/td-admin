"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[5718],{537:(e,t,s)=>{s.d(t,{Y:()=>o});var i=s(1413),a=s(4747),n=s(8027),r=s(2791),l=s(2010),d=s(2592);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{notification:s}=a.Z.useApp(),o=(0,l.a)((0,i.Z)({queryKey:[e,"history"],queryFn:(0,n.A)(e,"history")},t));return(0,r.useEffect)((()=>{o.isSuccess&&(0,d.tS)("Loaded daily/history")}),[o.isSuccess]),(0,r.useEffect)((()=>{o.isError&&s.error({message:"Error loading daily/history",placement:"bottomLeft"})}),[o.isError]),o}},4609:(e,t,s)=>{s.d(t,{J:()=>n});var i=s(2791),a=s(6728);function n(e,t){const s=(0,i.useMemo)((()=>{var s;return null!==(s=null===t||void 0===t?void 0:t[e])&&void 0!==s?s:{latestDate:(0,a.hD)(),latestNumber:0,used:"[]"}}),[t,e]);return[(0,i.useMemo)((()=>{var e,t,i;return{latestNumber:null!==(e=null===s||void 0===s?void 0:s.latestNumber)&&void 0!==e?e:0,latestDate:null!==(t=null===s||void 0===s?void 0:s.latestDate)&&void 0!==t?t:(0,a.hD)(),used:JSON.parse(null!==(i=null===s||void 0===s?void 0:s.used)&&void 0!==i?i:"[]")}}),[s]),s]}},9079:(e,t,s)=>{s.d(t,{C:()=>i,Y:()=>a});const i={SUFFIX_DATA:{pt:"drawingsPT",en:"drawingsEN"},DAILY:{pt:"diario",en:"daily"}},a={ARTE_RUIM:"arte-ruim",ARTISTA:"artista",AQUI_O:"aqui-o",COMUNICACAO_ALIENIGENA:"comunicacao-alienigena",CONTROLE_DE_ESTOQUE:"controle-de-estoque",FILMACO:"filmaco",PALAVREADO:"palavreado",TEORIA_DE_CONJUNTOS:"teoria-de-conjuntos"}},9825:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var i=s(1790),a=s(6178),n=s(8357),r=s(1046),l=s(4520),d=s(9263),o=s(9475),c=s(2786),u=s(184);const h=e=>{var t,s;let{drawing:i="",className:a="",width:n=250,height:r,strokeWidth:l="medium",viewBox:d="0 0 500 500"}=e;const o=JSON.parse(i),c=o.map((e=>{let t="";for(let s=0,i=1;i<e.length;s+=2,i+=2)e[s+2]&&e[i+2]&&(t+="M".concat(e[s],",").concat(e[i]," L").concat(e[s+2],",").concat(e[i+2]));return t}));const h=null!==(t=null===(s={small:3,medium:5,large:7})||void 0===s?void 0:s[l])&&void 0!==t?t:5;return(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:d,overflow:"hidden",className:a,style:{width:"".concat(n,"px"),height:"".concat(r||n,"px")},children:[(0,u.jsx)("defs",{}),c.map(((e,t)=>(0,u.jsx)("path",{d:e,fill:"none",stroke:"#000",strokeWidth:h,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"},"".concat(i,"-").concat(t))))]})};var m=s(2997),p=s(7375),g=s(9631),I=s(2592),f=s(9079),v=s(537),N=s(4747),x=s(8027),A=s(2791),S=s(2010),E=s(7342);var j=s(1413),b=s(763),y=s(2606);function O(e,t){var s;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0;const{getUrl:n}=(0,y.n)("resources"),r=a?"words-".concat(e,"-letters-selected-").concat(t):"words-".concat(e,"-letters-").concat(t),l=(0,S.a)({queryKey:[r],queryFn:async()=>{const e=await fetch(n("".concat(r,".json")));return await e.json()},enabled:i&&!!e&&!!t}),d=!(0,b.isEmpty)(l.data);return(0,j.Z)((0,j.Z)({},l),{},{data:null!==(s=l.data)&&void 0!==s?s:[],hasResponseData:d})}var L=s(5529),C=s(6728);var w=s(5850),D=s(6591);const T=(e,t)=>{const s=(0,b.shuffle)(t),i=(0,b.shuffle)((0,w.R9)(38,0)),a=(0,b.sampleSize)(e,3).map((e=>(0,j.Z)((0,j.Z)({},e),{},{spriteId:"".concat(i.pop())}))),n=[],r=[],l=[],d=[],o=[],c=[],u=[],h=[];s.forEach((e=>{const t=[D.NL.DETERMINISTIC,D.NL.RELATED],s=e.attributes[a[0].id]===D.NL.DETERMINISTIC,i=t.includes(e.attributes[a[0].id]),m=e.attributes[a[0].id]===D.NL.UNRELATED,p=e.attributes[a[1].id]===D.NL.DETERMINISTIC,g=t.includes(e.attributes[a[1].id]),I=e.attributes[a[1].id]===D.NL.UNRELATED,f=e.attributes[a[2].id]===D.NL.DETERMINISTIC,v=t.includes(e.attributes[a[2].id]),N=e.attributes[a[2].id]===D.NL.UNRELATED;if(m&&I&&N)return h.push(e.id);s&&I&&N&&n.push(e.id),m&&p&&N&&r.push(e.id),m&&I&&f&&l.push(e.id),i&&g&&N&&d.push(e.id),i&&I&&v&&o.push(e.id),m&&g&&v&&c.push(e.id),i&&g&&v&&u.push(e.id)}));const m=a.map((e=>({id:e.id,name:e.name.pt,description:e.description.pt,spriteId:e.spriteId,itemsIds:[]})));m[0].itemsIds=(0,b.sampleSize)(n,n.length>3?3:Math.max(n.length-1,1)),m[1].itemsIds=(0,b.sampleSize)(r,r.length>3?3:Math.max(n.length-1,1)),m[2].itemsIds=(0,b.sampleSize)(l,l.length>3?3:Math.max(n.length-1,1));const p=[];m.forEach((e=>{p.push(...e.itemsIds)}));const g=[];var I,f,v,N;d.length>0&&g.push({spritesIds:[a[0].spriteId,a[1].spriteId],itemId:null!==(I=(0,b.sample)(d))&&void 0!==I?I:""});o.length>0&&g.push({spritesIds:[a[0].spriteId,a[2].spriteId],itemId:null!==(f=(0,b.sample)(o))&&void 0!==f?f:""});c.length>0&&g.push({spritesIds:[a[1].spriteId,a[2].spriteId],itemId:null!==(v=(0,b.sample)(c))&&void 0!==v?v:""});u.length>0&&g.push({spritesIds:a.map((e=>e.spriteId)),itemId:null!==(N=(0,b.sample)(u))&&void 0!==N?N:""});const x=[];n.length>0&&x.push({spritesIds:[a[0].spriteId],itemId:n.filter((e=>!p.includes(e)))[0]}),r.length>0&&x.push({spritesIds:[a[1].spriteId],itemId:r.filter((e=>!p.includes(e)))[0]}),l.length>0&&x.push({spritesIds:[a[2].spriteId],itemId:l.filter((e=>!p.includes(e)))[0]});let A=(0,b.sampleSize)(g,4);A.length<3&&A.push(...(0,b.sampleSize)(x,4-A.length)),A.length<4&&console.log("\ud83d\udd06 Not enough requests for an alien communication, marking as invalid"),A=(0,b.shuffle)(A);const S=A.map((e=>e.itemId)),E={id:"0000-00-00",setId:m.map((e=>e.id)).sort().join("-"),number:0,type:"comunica\xe7\xe3o-alien\xedgena",attributes:m,requests:A,solution:S.join("-"),itemsIds:(0,b.shuffle)([...S,...(0,b.sampleSize)([h[0],h[1],h[2],h[3]],(0,b.random)(1,3))]).filter(Boolean),valid:!1};return E.valid=[3===E.attributes.length,4===E.requests.length,E.itemsIds.length>4,E.attributes.every((e=>e.itemsIds.length>0)),E.requests.every((e=>e.itemId))].every(Boolean),E},R=(e,t)=>{const[s,i,a]=e.split("-").map(Number),n={id:e,number:t,type:"controle-de-estoque",language:"pt",title:["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"][new Date(s,i-1,a).getDay()],goods:[],orders:[]},r=(0,b.sampleSize)(Array(256).fill("").map(((e,t)=>"good-".concat(t+1))),17),l=r.pop();if(n.goods=r,n.orders=(0,b.sampleSize)(n.goods,4),!l)throw new Error("No out of stock good");return n.orders.push(l),n.orders=(0,b.shuffle)(n.orders),n},Y=function(e,t,s){var i;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,n=arguments.length>4?arguments[4]:void 0,r=(0,b.shuffle)((0,b.difference)(e,s,t));const l=n||(null!==(i=r.pop())&&void 0!==i?i:"");n&&(r=(0,b.difference)(r,[n]));const d=[];for(let o=0;o<a;o++){const t=_(e,l,d,o);d.push(t)}return s.push(l,...d),{keyword:l,words:d,letters:M(d,l.length)}},_=(e,t,s,i)=>{const a=(0,b.uniq)([...(0,b.flatMap)(s.map((e=>e.split("")))),...t.split("")]),n=(0,b.shuffle)(e.filter((e=>e[i]===t[i]&&!s.includes(e))));return(0,b.sortBy)(n,(e=>(0,b.intersection)(e.split(""),a).length))[0]},M=(e,t)=>{const s=(0,b.flatMap)(e.map((e=>e.split("")))),i=4===t?[0,5,10,15]:[0,6,12,18,24],a=(0,b.shuffle)(s.filter(((e,t)=>!i.includes(t)))),n=[];for(let l=0;l<s.length;l++){var r;if(i.includes(l))n.push(s[l]);else n.push(null!==(r=a.shift())&&void 0!==r?r:"")}return n};var Z=s(2082),k=s(4609);function U(e,t,s,i){const a=f.C.DAILY[null!==t&&void 0!==t?t:"pt"],n=(0,v.Y)(a,{enabled:e}),[r,l]=(0,A.useState)([]),d=e=>{l((t=>[...t,e]))};(0,A.useEffect)((()=>{l([])}),[i,t]);const o=function(e,t){var s,i;const{notification:a}=N.Z.useApp(),n=(0,S.a)({queryKey:["data","suffixCounts"],queryFn:(0,x.A)("data","suffixCounts"),enabled:e});(0,A.useEffect)((()=>{n.isSuccess&&(0,I.tS)("Loaded data/suffixCounts")}),[n.isSuccess]),(0,A.useEffect)((()=>{n.isError&&a.error({message:"Error loading data/suffixCounts",placement:"bottomLeft"})}),[n.isError]);const r=f.C.SUFFIX_DATA[null!==t&&void 0!==t?t:"pt"],l=null!==(s=null===(i=n.data)||void 0===i?void 0:i[r])&&void 0!==s?s:0,d="drawings".concat("pt"===t?"PT":"EN"),o=(0,A.useMemo)((()=>new Array(l).fill(0).map(((t,s)=>({queryKey:["data","".concat(d).concat(s+1)],queryFn:(0,x.A)("data","".concat(d).concat(s+1)),enabled:e&&Boolean(l),onSuccess:()=>{a.info({message:"Data Drawings ".concat(d).concat(s+1," loaded"),placement:"bottomLeft"})}})))),[l,d,e]);return(0,E.h)({queries:o})}(e,null!==t&&void 0!==t?t:"pt"),c=o.some((e=>e.isLoading)),[u]=(0,k.J)(f.Y.ARTE_RUIM,n.data),h=(0,A.useMemo)((()=>c||!n.isSuccess?[]:((e,t,s,i,a)=>{console.count("Creating Arte Ruim...");const n=(null!==s&&void 0!==s?s:[]).reduce(((e,s)=>{var a;const n=null!==(a=s.data)&&void 0!==a?a:{};return Object.entries(n).forEach((s=>{var a;let[n,r]=s;const l=null!==(a=r.cardId)&&void 0!==a?a:r.id;return null!==l&&void 0!==l&&l.includes("--")||t.used.includes(l)?e:r.drawing.trim().length<10?(console.log("\ud83d\udd06 Empty drawing",l),e):void(void 0===e[l]?e[l]={id:l,type:"arte-ruim",language:null!==i&&void 0!==i?i:"pt",cardId:l,text:r.text,drawings:[r.drawing],number:0,dataIds:[n]}:(e[l].drawings.push(r.drawing),e[l].dataIds.push(n)))})),e}),{}),r=Object.values(n).filter((e=>{var t;return e.drawings.length>=a&&e.cardId&&!(null!==(t=e.cardId)&&void 0!==t&&t.includes("--"))})),l=(0,b.sampleSize)((0,b.shuffle)(r),e);let d=t.latestDate;return l.map(((e,s)=>{const i=(0,C.ao)(d);return d=i,(0,j.Z)((0,j.Z)({},e),{},{id:i,number:t.latestNumber+s+1})}))})(i,u,o,t,s)),[o,t,u,i,s,c,n.isSuccess]),m=(0,L.N)("daily-disc-sets",e),[p]=(0,k.J)(f.Y.AQUI_O,n.data),g=(0,A.useMemo)((()=>m.isSuccess&&n.isSuccess?((e,t,s,i)=>{console.count("Creating Aqui \xd3...");const a=(0,b.shuffle)(Object.values(s).filter((e=>e.itemsIds.filter(Boolean).length>=20))),n=a.filter((e=>!t.used.includes(e.id)));n.length<e&&(console.log("\ud83d\udd06 Not enough aqui-o sets left, shuffling..."),i("Not enough aqui-o sets left"),n.push(...(0,b.shuffle)(a)));let r=t.latestDate;const l={};for(let d=0;d<e;d++){const e=n[d];e||console.error("No aqui-o sets left");const s=(0,C.ao)(r);r=s,l[s]={id:s,type:"aqui-o",number:t.latestNumber+d+1,setId:e.id,title:e.title,itemsIds:["0",...(0,b.sampleSize)(e.itemsIds,20)]}}return l})(i,p,m.data,d):{}),[m,p,i,n.isSuccess]),y=O(4,t,!0,!0),w=O(5,t,!0,!0),[D]=(0,k.J)(f.Y.PALAVREADO,n.data),_=(0,A.useMemo)((()=>y.data&&y.data.length&&w.data&&w.data.length&&n.isSuccess?((e,t,s,i)=>{console.count("Creating Palavreado...");let a=t.latestDate;const n=[],r={};for(let l=0;l<e;l++){const e=(0,C.ao)(a),d=(0,C.A5)(e),o=d?5:4;a=e,r[e]=(0,j.Z)({id:e,type:"palavreado",number:t.latestNumber+l+1},Y(d?i:s,[...Object.values(r).map((e=>e.keyword)),...t.used],n,o))}return r})(i,D,y.data,w.data):{}),[y,w,D,i,n.isSuccess]),M=(0,L.N)("arte-ruim-cards-".concat(t),e),[U]=(0,k.J)(f.Y.ARTISTA,n.data),q=(0,A.useMemo)((()=>{if(!M.isSuccess||!n.isSuccess)return{};const e=h.map((e=>e.cardId));return((e,t,s,i,a)=>{console.count("Creating Artista...");let n=t.latestDate;const r={};for(let l=0;l<e;l++){const e=(0,C.ao)(n),d=Object.keys(null!==i&&void 0!==i?i:{}).filter((e=>!s.used.includes(e)&&!a.includes(e))),o=(0,b.sampleSize)(d,15).map((e=>i[e]));n=e,r[e]={id:e,type:"artista",number:t.latestNumber+l+1,cards:o}}return r})(i,U,u,M.data,e)}),[M,u,U,i,n.isSuccess,h]),J=(0,L.N)("daily-movie-sets",e),[z]=(0,k.J)(f.Y.FILMACO,n.data),F=(0,A.useMemo)((()=>J.isSuccess&&n.isSuccess?((e,t,s)=>{console.count("Creating Filma\xe7o...");const i=(0,b.shuffle)(Object.values(s).filter((e=>e.itemsIds.filter(Boolean).length>0))),a=i.filter((e=>!t.used.includes(e.id)));a.length<e&&a.push(...(0,b.shuffle)(i));let n=t.latestDate;const r={};for(let l=0;l<e;l++){const e=a[l];if(!e){console.error("No filma\xe7o sets left");break}const s=(0,C.ao)(n);n=s,r[s]={id:s,type:"filmaco",number:t.latestNumber+l+1,setId:e.id,title:e.title,itemsIds:e.itemsIds,year:e.year}}return r})(i,z,J.data):{}),[J,z,i,n.isSuccess]),[P]=(0,k.J)(f.Y.CONTROLE_DE_ESTOQUE,n.data),B=(0,A.useMemo)((()=>n.isSuccess?((e,t)=>{console.count("Creating Controle de Estoque...");let s=t.latestDate;const i={};for(let a=0;a<e;a++){const e=(0,C.ao)(s);s=e,i[e]=R(e,t.latestNumber+a+1)}return i})(i,P):{}),[i,n.isSuccess,P]),[Q]=(0,k.J)(f.Y.TEORIA_DE_CONJUNTOS,n.data),G=(0,L.N)("daily-diagram-items",e),K=(0,L.N)("daily-diagram-rules",e),V=(0,A.useMemo)((()=>n.isSuccess&&G.isSuccess&&K.isSuccess?(0,Z.h)(i,Q,K.data,G.data):{}),[i,n.isSuccess,Q,K,G]),[X]=(0,k.J)(f.Y.COMUNICACAO_ALIENIGENA,n.data),W=(0,L.N)("items-attributes",e),$=(0,L.N)("items-attribute-values",e),H=(0,A.useMemo)((()=>n.isSuccess&&W.isSuccess&&$.isSuccess?((e,t,s,i,a)=>{console.count("Creating Comunicacao Alienigena...");let n=t.latestDate;const r=(0,b.values)(s).filter((e=>!e.limited&&"sol"!==e.id)),l=(0,b.values)(i).filter((e=>e.complete)),d={};let o=0;for(;(0,b.keys)(d).length<e&&o<100;){const s=T(r,l);if(!s.valid||d[s.setId]||t.used.includes(s.setId)||(d[s.setId]=s),(0,b.keys)(d).length>=e)break;o+=1}console.log("\ud83d\udd06 Generating this batch took ".concat(o," tries")),o>=100&&a("Not enough valid comunicacao alienigena games (over 100 attempts)");const c={};return Object.values(d).forEach(((e,s)=>{const i=(0,C.ao)(n);n=i,c[i]=(0,j.Z)((0,j.Z)({},e),{},{id:i,number:t.latestNumber+s+1})})),c})(i,X,W.data,$.data,d):{}),[i,n.isSuccess,X,W,$]),ee=(0,A.useMemo)((()=>0===h.length?[]:(console.count("Bundling entries..."),h.map((e=>({id:e.id,"arte-ruim":e,"aqui-o":g[e.id],palavreado:_[e.id],artista:q[e.id],filmaco:F[e.id],"controle-de-estoque":B[e.id],"teoria-de-conjuntos":V[e.id],"comunicacao-alienigena":H[e.id]}))))),[h,g,_,q,F,B,V,H]);return{isLoading:c||n.isLoading||y.isLoading||w.isLoading||M.isLoading||m.isLoading||J.isLoading||G.isLoading||K.isLoading||W.isLoading||$.isLoading,entries:ee,warnings:r}}var q=s(3713),J=s(8556);function z(e){var t,s;let{language:i,dataLoad:a}=e;const n=i,x=[{title:"Id",dataIndex:"id",key:"id"},{title:"Arte Ruim",dataIndex:"arte-ruim",key:"arte-ruim",render:e=>{let{number:t,cardId:s,text:i,drawings:a}=e;return(0,u.jsxs)(r.Z,{direction:"vertical",children:[(0,u.jsxs)(r.Z,{children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsxs)("span",{children:["CardId: ",s]}),(0,u.jsxs)("span",{children:["Count: ",a.length]})]}),(0,u.jsxs)("div",{children:['"',i.split("").map(((e,t)=>t<2||" "===e?e:"\u23f9")).join(""),'"']}),(0,u.jsx)(r.Z,{wrap:!0,children:a.map((e=>(0,u.jsx)(h,{drawing:e,width:75,height:75,className:"canvas"},e)))})]})}},{title:"Aqui O",dataIndex:"aqui-o",key:"aqui-o",render:e=>{let{number:t,setId:s,title:a,itemsIds:n}=e;return(0,u.jsxs)(r.Z,{direction:"vertical",children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsxs)("span",{children:["SetId: ",s]}),(0,u.jsxs)("span",{children:["Title: ",a[i]]}),(0,u.jsxs)(l.Z,{gap:6,wrap:!0,children:[(0,u.jsx)(m.ck,{id:n[1],width:50}),(0,u.jsx)(m.ck,{id:n[5],width:50}),(0,u.jsx)(m.ck,{id:n[10],width:50})]})]})}},{title:"Palavreado",dataIndex:"palavreado",key:"palavreado",render:e=>{let{number:t,words:s,letters:i,keyword:a}=e;return(0,u.jsxs)(r.Z,{direction:"vertical",children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsxs)("span",{children:["Letters: ",i.length]}),(0,u.jsxs)("span",{children:["Keyword: ",a]}),(0,u.jsx)(r.Z,{direction:"vertical",children:s.map(((e,s)=>(0,u.jsx)("span",{children:e.split("").map(((e,t)=>t===s||" "===e?e:"\u23f9")).join("")},"".concat(t,"-").concat(e))))})]})}},{title:"Filma\xe7o",dataIndex:"filmaco",key:"filmaco",render:e=>{let{number:t,setId:s,year:i,title:a}=e;return(0,u.jsxs)(r.Z,{direction:"vertical",children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsxs)("span",{children:["SetId: ",s]}),(0,u.jsxs)("span",{children:["Year: ",i]}),(0,u.jsxs)("span",{children:["Title:"," ",a.split("").map(((e,t)=>t<1||" "===e?e:"\u23f9")).join("")]})]})}},{title:"Controle de Estoque",dataIndex:"controle-de-estoque",key:"controle-de-estoque",render:e=>{let{number:t,title:s,goods:i}=e;return(0,u.jsxs)(r.Z,{direction:"vertical",children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsxs)("span",{children:["Title: ",s]}),(0,u.jsxs)(l.Z,{gap:6,wrap:!0,children:[(0,u.jsx)(p.y,{id:i[0],width:50}),(0,u.jsx)(p.y,{id:i[1],width:50}),(0,u.jsx)(p.y,{id:i[2],width:50})]})]})}},{title:"Teoria de Conjuntos",dataIndex:"teoria-de-conjuntos",key:"teoria-de-conjuntos",render:e=>{let{number:t,title:s,intersectingThing:i}=e;return(0,u.jsxs)(r.Z,{direction:"vertical",children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsxs)("span",{children:["Title: ",s]}),(0,u.jsx)(l.Z,{gap:6,wrap:!0,children:(0,u.jsx)(m.ck,{id:i.id,width:50})})]})}},{title:"Comunica\xe7\xe3o Alien\xedgena",dataIndex:"comunicacao-alienigena",key:"comunicacao-alienigena",render:e=>e?(0,u.jsxs)(r.Z,{direction:"vertical",children:[(0,u.jsxs)("span",{children:["#",e.number]}),(0,u.jsxs)("span",{children:[e.itemsIds.length," items"]}),(0,u.jsxs)(r.Z,{children:[(0,u.jsx)(r.Z,{direction:"vertical",children:e.attributes.map((e=>(0,u.jsx)(m.o$,{id:"sign-".concat(e.spriteId),width:50},e.spriteId)))}),(0,u.jsx)(r.Z,{direction:"vertical",children:e.itemsIds.map((e=>(0,u.jsx)(m.ck,{id:e,width:50},e)))})]})]}):(0,u.jsx)(d.Z,{message:"No entry",type:"error"})},{title:"Artista",dataIndex:"artista",key:"artista",render:e=>{let{number:t,cards:s}=e;return(0,u.jsxs)(r.Z,{direction:"vertical",style:{maxHeight:200,overflowY:"auto"},children:[(0,u.jsxs)("span",{children:["#",t]}),s.map(((e,t)=>(0,u.jsx)("span",{children:e.text},"".concat(e.id,"-").concat(t))))]})}}],{save:S,isPending:E}=function(e){const{notification:t}=N.Z.useApp(),s=(0,q.NL)(),i=f.C.DAILY[null!==e&&void 0!==e?e:"pt"],[a,n]=(0,A.useState)(!1),r=(0,v.Y)(i,{enabled:Boolean(i)}),l=(0,J.D)({mutationFn:async e=>{var t,s,a,n,l,d,o;const c=e.map((e=>{const t=(0,g.JU)(I.RZ,"".concat(i,"/").concat(e.id));return(0,g.pl)(t,e)})),u=(0,g.JU)(I.RZ,"".concat(i,"/history")),h=r.data;if(!h)throw new Error("No previous history");const m=(0,j.Z)((0,j.Z)({},h),{},{[f.Y.ARTE_RUIM]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.ARTE_RUIM].number,used:JSON.stringify((0,w.R1)([...JSON.parse(h[f.Y.ARTE_RUIM].used),...e.map((e=>e[f.Y.ARTE_RUIM].cardId))]))},[f.Y.AQUI_O]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.AQUI_O].number,used:JSON.stringify((0,w.R1)([...JSON.parse(null!==(t=h[f.Y.AQUI_O].used)&&void 0!==t?t:"[]"),...e.map((e=>e[f.Y.AQUI_O].setId))]))},[f.Y.PALAVREADO]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.PALAVREADO].number,used:JSON.stringify((0,w.R1)([...JSON.parse(h.palavreado.used),...e.map((e=>e[f.Y.PALAVREADO].keyword))]))},[f.Y.ARTISTA]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.ARTISTA].number,used:"[]"},[f.Y.FILMACO]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.FILMACO].number,used:JSON.stringify((0,w.R1)([...JSON.parse(null!==(s=null===h||void 0===h||null===(a=h[f.Y.FILMACO])||void 0===a?void 0:a.used)&&void 0!==s?s:"[]"),...e.map((e=>e[f.Y.FILMACO].setId))]))},[f.Y.CONTROLE_DE_ESTOQUE]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.CONTROLE_DE_ESTOQUE].number,used:"[]"},[f.Y.TEORIA_DE_CONJUNTOS]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.TEORIA_DE_CONJUNTOS].number,used:JSON.stringify((0,w.R1)([...JSON.parse(null!==(n=null===h||void 0===h||null===(l=h[f.Y.TEORIA_DE_CONJUNTOS])||void 0===l?void 0:l.used)&&void 0!==n?n:"[]"),...e.map((e=>e[f.Y.TEORIA_DE_CONJUNTOS].setId)),...e.map((e=>e[f.Y.TEORIA_DE_CONJUNTOS].intersectingThing.id))]))},[f.Y.COMUNICACAO_ALIENIGENA]:{latestDate:e[e.length-1].id,latestNumber:e[e.length-1][f.Y.COMUNICACAO_ALIENIGENA].number,used:JSON.stringify((0,w.R1)([...JSON.parse(null!==(d=null===h||void 0===h||null===(o=h[f.Y.COMUNICACAO_ALIENIGENA])||void 0===o?void 0:o.used)&&void 0!==d?d:"[]"),...e.map((e=>e[f.Y.COMUNICACAO_ALIENIGENA].setId))]))}});return(0,g.pl)(u,m),Promise.all(c)},onSuccess:()=>{t.info({message:"Data saved",placement:"bottomLeft"}),s.invalidateQueries({queryKey:[i,"history"]}),n(!1)},onError:()=>{t.error({message:"Error saving data",placement:"bottomLeft"})}});return{isDirty:a,setIsDirty:n,save:l.mutateAsync,isPending:l.isPending}}(null!==n&&void 0!==n?n:"pt");return(0,u.jsxs)("div",{children:[a.isLoading&&(0,u.jsx)("div",{children:"Loading..."}),a.warnings.map((e=>(0,u.jsx)(d.Z,{message:e,type:"warning",showIcon:!0},e))),(0,u.jsxs)(l.Z,{justify:"space-between",align:"center",children:[(0,u.jsxs)("h1",{children:["Total: ",a.entries.length]}),(0,u.jsx)(o.ZP,{onClick:()=>S(a.entries),loading:E,disabled:0===(null!==(t=a.entries)&&void 0!==t?t:[]).length,type:"primary",size:"large",children:"Save"})]}),(0,u.jsx)(c.Z,{columns:x,dataSource:null!==(s=a.entries)&&void 0!==s?s:[]})]})}var F=s(7965);function P(e){let{language:t,setLanguage:s,drawingsCount:i,setDrawingsCount:a,batchSize:r,setBatchSize:l}=e;return(0,u.jsxs)(F.Pd,{children:[(0,u.jsx)(n.zE,{label:"Language",value:t,onChange:s,options:[D.k$],placeholder:"Select a language"}),(0,u.jsx)(n.zE,{label:"Minimum Drawings",value:i,onChange:a,options:[2,3,4],placeholder:"Select a number"}),(0,u.jsx)(n.zE,{label:"Batch Size",value:r,onChange:l,options:[3,7,14,21,28],placeholder:"Select a number"})]})}var B=s(2128),Q=s(4562);const G=function(){const[e,t]=(0,A.useState)(""),[s,r]=(0,A.useState)(3),[l,d]=(0,A.useState)(7),o=U(Boolean(e),e,s,l);return(0,u.jsx)(F.Xg,{title:"Daily Setup",children:(0,u.jsxs)(i.Z,{hasSider:!0,children:[(0,u.jsxs)(Q.p,{children:[(0,u.jsx)(n.Th,{isLoading:o.isLoading,error:null,hasResponseData:!o.isLoading}),(0,u.jsx)(P,{language:e,setLanguage:t,drawingsCount:s,setDrawingsCount:r,batchSize:l,setBatchSize:d})]}),(0,u.jsx)(i.Z.Content,{className:"content",children:(0,u.jsxs)(B.T,{isLoading:o.isLoading,error:null,hasResponseData:!o.isLoading,children:[(0,u.jsx)(a.Z.Title,{level:2,children:"Data Population"}),(0,u.jsx)(z,{language:e,dataLoad:o})]})})]})})}}}]);
//# sourceMappingURL=DailySetup.cef0077f.chunk.js.map