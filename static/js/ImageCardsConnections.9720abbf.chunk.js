(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[7286],{2043:(e,t,n)=>{"use strict";n.d(t,{Do:()=>p,H:()=>f,tj:()=>g,xh:()=>h,zE:()=>u});var a=n(3070),s=n(906),r=n(9793),l=n(5922),c=n(9862),o=n(4248),i=n(1431),d=n(184);function u(e){let{label:t,value:n,onChange:r,options:l,placeholder:c}=e;return(0,d.jsx)(a.Z.Item,{label:t,children:(0,d.jsxs)(s.Z,{style:{minWidth:"150px"},onChange:r,value:n,children:[c&&(0,d.jsx)(s.Z.Option,{value:"",disabled:!0,children:"placeholder"}),l.map((e=>"object"===typeof e?(0,d.jsx)(s.Z.Option,{value:e.value,children:e.label},"".concat(t,"-").concat(e.value)):(0,d.jsx)(s.Z.Option,{value:e,children:e},"".concat(t,"-").concat(e))))]})})}function h(e){let{label:t,value:n,onChange:s,min:l=0,max:c=100,step:o}=e;return(0,d.jsx)(a.Z.Item,{label:t,children:(0,d.jsx)(r.Z,{min:l,max:c,value:n,onChange:e=>s(null!==e&&void 0!==e?e:c),style:{minWidth:"150px",width:"100%"},step:o})})}function p(e){let{label:t,value:n,onChange:s,className:r,disabled:c}=e;return(0,d.jsx)(a.Z.Item,{label:t,valuePropName:"checked",className:r,children:(0,d.jsx)(l.Z,{checked:n,onChange:s,size:"small",disabled:c})})}function g(e){let{label:t,value:n,onChange:s,disabled:r,className:l}=e;return(0,d.jsx)(a.Z.Item,{label:t,valuePropName:"checked",className:l,children:(0,d.jsx)(c.Z,{checked:n,onChange:e=>s(e.target.checked),disabled:r})})}function f(e){let{value:t,label:n,onChange:s,options:r}=e;return(0,d.jsx)(a.Z.Item,{label:n,layout:r.length>2?"vertical":"horizontal",children:(0,d.jsx)(o.Z,{block:!0,value:t,onChange:s,options:r.map((e=>({label:(0,d.jsx)(i.Z,{arrow:!0,trigger:"hover",title:e.title,children:e.icon}),value:e.value})))})})}},8866:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var a=n(1413),s=n(4925),r=n(6178),l=n(184);const c=["children","level"];function o(e){let{children:t,level:n}=e,o=(0,s.Z)(e,c);return(0,l.jsx)(r.Z.Title,(0,a.Z)((0,a.Z)({level:null!==n&&void 0!==n?n:3},o),{},{children:t}))}},8357:(e,t,n)=>{"use strict";n.d(t,{tj:()=>i.tj,xh:()=>i.xh,H:()=>i.H,zE:()=>i.zE,Do:()=>i.Do,Th:()=>g,F6:()=>o});n(8866);var a=n(1413),s=n(4925),r=n(3733),l=n(184);const c=["children","active","activeClass","className","hoverType"],o=e=>{let{children:t,active:n=!1,activeClass:o="",className:i="",hoverType:d="scale"}=e,u=(0,s.Z)(e,c);return(0,l.jsx)("button",(0,a.Z)((0,a.Z)({className:(0,r.Z)("transparent-button","transparent-button--".concat(d),n&&(o||"transparent-button--active"),i)},u),{},{children:t}))};var i=n(2043),d=n(952),u=n(3070),h=n(7965);function p(e){let{isLoading:t,isIdle:n,error:a,isDirty:s,isError:r,hasResponseData:c}=e;return n?(0,l.jsx)(d.Z,{children:"No Data yet"}):t?(0,l.jsx)(d.Z,{color:"blue",children:"Loading..."}):a||r?(0,l.jsx)(d.Z,{color:"red",children:"Error"}):s?(0,l.jsx)(d.Z,{color:"orange",children:"Modified"}):c?(0,l.jsx)(d.Z,{color:"green",children:"Loaded"}):(0,l.jsx)(d.Z,{children:"No Data"})}function g(e){return(0,l.jsx)(h.Pd,{children:(0,l.jsx)(u.Z.Item,{label:"Status",children:(0,l.jsx)(p,(0,a.Z)({},e))})})}},145:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var a=n(2402),s=n(3733),r=n(2606),l=n(184);const c=e=>{let{id:t,width:n=200,className:c="",preview:o=!0,fileExtension:i="jpg"}=e;const{getUrl:d}=(0,r.n)("images"),u=t.replace(/-/g,"/");return(0,l.jsx)("div",{className:(0,s.Z)("image-card",c),children:(0,l.jsx)(a.Z,{width:n,src:d("".concat(u,".").concat(i)),fallback:d("back/default.jpg"),preview:o})})}},7166:(e,t,n)=>{"use strict";n.d(t,{P:()=>c,l:()=>o});var a=n(2791),s=n(2671),r=n(184);const l=(0,a.createContext)({}),c=e=>{let{children:t}=e;const n=(0,s.AZ)(),[c,o]=(0,a.useState)(15),[i,d]=(0,a.useState)(5),[u,h]=(0,a.useState)(150),[p,g]=(0,a.useState)(!1),f=(0,s.IN)(n.data,n.setDirty,c,i);return(0,r.jsx)(l.Provider,{value:{sampleSize:c,setSampleSize:o,tagThreshold:i,setTagThreshold:d,cardSize:u,setCardSize:h,showIds:p,setShowIds:g,randomGroups:f,query:n},children:t})},o=()=>(0,a.useContext)(l)},9936:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(8622),s=n(3070),r=n(9367),l=n(7166),c=n(184);function o(){const{query:{stats:e}}=(0,l.l)();return(0,c.jsx)(s.Z.Item,{label:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.C,{icon:(0,c.jsx)(a.Z,{}),shape:"square",size:"small",style:{marginRight:6}}),"Stats"]}),children:(0,c.jsxs)("ul",{className:"statistic__list",children:[(0,c.jsxs)("li",{children:["Completion: ",Math.floor(100*e.total/2520),"%"]}),(0,c.jsxs)("li",{children:["Total Relationships: ",e.total]}),(0,c.jsxs)("li",{children:["Complete: ",e.complete]}),(0,c.jsxs)("li",{children:["Overdone: ",e.overdone]}),(0,c.jsxs)("li",{children:["Single Match: ",e.single]})]})})}},2671:(e,t,n)=>{"use strict";n.d(t,{AZ:()=>m,gU:()=>f,IN:()=>v});var a=n(4747),s=n(9631),r=n(763),l=n(2791),c=n(2592),o=n(5850),i=n(3713),d=n(2010),u=n(8556),h=n(4766);const p=()=>(0,r.padStart)(String((0,r.random)(1,252)),2,"0"),g=()=>(0,r.random)(1,12);function f(e,t){var n,a,s;const[r,c]=(0,l.useState)(g()),[i,d]=(0,l.useState)(p()),[u,f]=(0,l.useState)(g()),[m,v]=(0,l.useState)(p()),x="td-d".concat(r,"-").concat(i),j="td-d".concat(u,"-").concat(m),[y,b]=(0,l.useState)(0),{queryParams:S}=(0,h.K)(),Z=Number(null!==(n=S.get("cycle"))&&void 0!==n?n:3),C=null!==(a=null===e||void 0===e?void 0:e[x])&&void 0!==a?a:[],w=null!==(s=null===e||void 0===e?void 0:e[j])&&void 0!==s?s:[],E=()=>{b(0),c(g()),d(p()),f(g()),v(p())};return(0,l.useEffect)((()=>{x===j&&v(p())}),[x,j]),{cardAId:x,cardA:C,cardBId:j,cardB:w,relate:()=>{b(0),C.push(j),e[x]=(0,o.R1)(C),w.push(x),e[j]=(0,o.R1)(w),t(!0),c(u),d(m),f(g()),v(p())},unrelate:()=>{y>=Z?(b(0),E()):(b((e=>e+1)),f(g()),v(p()))},areRelated:C.includes(j),onRandomCards:E}}function m(){const[e,t]=(0,l.useState)(!1),n=["data/imageCardsRelationships"],r=(0,i.NL)(),{notification:o}=a.Z.useApp(),[h,p]=(0,l.useState)({total:0,overdone:0,complete:0,single:0}),{data:g={},isLoading:f,isSuccess:m,isError:v,error:x,isFetched:j,isRefetching:y,refetch:b}=(0,d.a)({queryKey:n,queryFn:async()=>{var e;const t=(0,s.JU)(c.RZ,"data/imageCardsRelationships");return null!==(e=(await(0,s.QT)(t)).data())&&void 0!==e?e:{}}}),{isPending:S,isError:Z,isSuccess:C,mutate:w}=(0,u.D)({mutationKey:n,mutationFn:async()=>{const e=(0,s.JU)(c.RZ,"data/imageCardsRelationships");return await(0,s.pl)(e,g),g},onSuccess:()=>{o.success({message:"Saved",placement:"bottomLeft"}),r.refetchQueries({queryKey:n}),t(!1)}});return(0,l.useEffect)((()=>{if(!y&&j){const e=Object.keys(g).length;let t=0,n=0,a=0;Object.values(g).forEach((e=>{e.length>8&&(t+=1),1===e.length&&(a+=1),e.length>2&&(n+=1)})),p({total:e,overdone:t,complete:n,single:a})}}),[j,y]),{data:g,isLoading:f,isSuccess:m,isError:v,error:x,hasData:m&&Object.keys(g).length>0,refetch:b,isSaving:S,isMutationError:Z,isSaved:C,save:w,setDirty:t,isDirty:e,stats:h}}function v(e,t,n,a){const[s,r]=(0,l.useState)([]),[c,i]=(0,l.useState)([]),[d,u]=(0,l.useState)([]),[h,f]=(0,l.useState)(0),[m,v]=(0,l.useState)(!0),[x,j]=(0,l.useState)([]),y=t=>{i((null!==t&&void 0!==t?t:s).map((t=>{var n;return null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:[]})))},b=()=>{const t=[...x];let s=0;const l=d.length<2e3?d:[];let c=0;for(;c<400&&t.length<n;){var o;const n="td-d".concat(g(),"-").concat(p()),r=null!==(o=e[n])&&void 0!==o?o:[],i=!(a>0)||r.length<a,d=!!m&&l.includes(n);t.includes(n)||d||!i||(t.push(n),s+=1),c+=1}r(t),u((e=>[...e,...t])),y(t),f((e=>e+s))};(0,l.useEffect)((()=>{0===s.length&&b()}),[s]);return{cardIds:s,cards:c,selection:x,onSelect:e=>{j((t=>{const n=[...t],a=n.indexOf(e);return a>-1?n.splice(a,1):n.push(e),n}))},relate:()=>{x.forEach((t=>{var n;const a=null!==(n=e[t])&&void 0!==n?n:[];a.push(...x.filter((e=>e!==t))),e[t]=(0,o.R1)(a)})),t(!0),j([]),y(),u([]),f(0)},nextSet:b,deselectAll:()=>{j([])},cycles:h,filters:{useCycles:m,toggleUseCycles:()=>{v((e=>!e))}}}}},8741:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var a=n(1790),s=n(4925),r=n(2402),l=n(4520),c=n(1046),o=n(952),i=n(5625),d=n(2128),u=n(763),h=n(2791),p=n(7415),g=n(7460);const f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm154.7 454.5l-246 178c-5.3 3.8-12.7 0-12.7-6.5v-46.9c0-10.2 4.9-19.9 13.2-25.9L566.6 512 421.2 406.8c-8.3-6-13.2-15.6-13.2-25.9V334c0-6.5 7.4-10.3 12.7-6.5l246 178c4.4 3.2 4.4 9.8 0 13z"}}]},name:"right-circle",theme:"filled"};var m=n(4790),v=function(e,t){return h.createElement(m.Z,(0,g.Z)({},e,{ref:t,icon:f}))};const x=h.forwardRef(v);var j=n(145),y=n(7166),b=n(184);const S=["isDirty","isSaving","save","stats","data"];function Z(){const e=(0,y.l)(),{query:{isDirty:t,isSaving:n,save:a,stats:g,data:f},randomGroups:{cardIds:m},showIds:v,cardSize:Z}=e,w=(0,s.Z)(e.query,S),[E,{width:I}]=(0,p.Z)(),[,N]=(0,h.useMemo)((()=>{const e=Math.floor(I/Z)+1;return[e,Math.floor(I/e)]}),[Z,I]),z=[{title:"Length",dataIndex:"length",key:"length"},{title:"Relationships",dataIndex:"relationships",key:"relationship",render:(e,t)=>(0,b.jsx)(r.Z.PreviewGroup,{children:(0,b.jsx)(l.Z,{wrap:"wrap",gap:2,children:e.map((n=>(0,b.jsxs)(c.Z,{children:[(0,b.jsxs)(c.Z,{direction:"vertical",children:[(0,b.jsx)(j.f,{id:n,width:N}),v&&(0,b.jsx)(o.Z,{children:n})]}),e[e.length-1]!==n&&(0,b.jsx)(x,{})]},"".concat(t.origin,"-").concat(n))))})})}],O=(0,h.useMemo)((()=>(0,u.orderBy)(m.map((e=>{const t=C(e,f,"longest",10);return{key:e,origin:e,length:t.length,relationships:t}})),["length"],["desc"])),[m,f]);return(0,b.jsx)(d.T,{isLoading:w.isLoading,error:w.error,hasResponseData:!0,children:(0,b.jsx)("div",{ref:E,className:"my-6",children:(0,b.jsx)(i.Z,{dataSource:O,columns:z})})})}const C=(0,u.memoize)(((e,t,n,a)=>{const s=new Set,r=[];let l=[],c=0;for(r.push({currentId:e,path:[],depth:0});r.length>0&&c<100;){var o;c++;const{currentId:e,path:i,depth:d}=null!==(o=r.pop())&&void 0!==o?o:{currentId:"",path:[],depth:0};if(s.add(e),i.push(e),"longest"===n&&i.length>l.length&&(l=[...i]),"shortest"===n&&(0===l.length||i.length<l.length)&&(l=[...i]),"any"===n&&0===l.length&&(l=[...i]),!(d>=a))for(const n of t[e]||[])s.has(n)||r.push({currentId:n,path:[...i],depth:d+1})}return l}));var w=n(9475),E=n(8357),I=n(7018),N=n(7965),z=n(6591),O=n(9936);function R(){const{query:{isDirty:e,isSaving:t,data:n,isLoading:a,isError:s},showIds:r,setShowIds:l,sampleSize:c,setSampleSize:o,cardSize:i,setCardSize:d,randomGroups:{nextSet:h}}=(0,y.l)();return(0,b.jsxs)(N.p3,{children:[(0,b.jsx)(E.Th,{isLoading:a||t,isDirty:e,isError:s,hasResponseData:!(0,u.isEmpty)(n)}),(0,b.jsxs)(N.Pd,{children:[(0,b.jsx)(E.Do,{label:"Show Ids",value:r,onChange:e=>l(e)}),(0,b.jsx)(E.zE,{onChange:e=>o(e),value:c,options:z.ZI,label:"Sample Size"}),(0,b.jsx)(E.zE,{onChange:e=>d(e),value:i,options:z.Hn,label:"Card Size"}),(0,b.jsx)(w.ZP,{onClick:h,block:!0,type:"primary",children:"New Random Sample"})]}),(0,b.jsx)(N.Pd,{children:(0,b.jsx)(O.A,{})}),(0,b.jsx)(N.Pd,{children:(0,b.jsx)(I.o,{data:n,fileName:"imageCardsRelationships.json",loading:t,disabled:(0,u.isEmpty)(n),block:!0})})]})}const k=function(){return(0,b.jsx)(N.Xg,{title:"Image Cards",subtitle:"Connections",children:(0,b.jsx)(y.P,{children:(0,b.jsxs)(a.Z,{hasSider:!0,children:[(0,b.jsx)(R,{}),(0,b.jsx)(a.Z.Content,{className:"content",children:(0,b.jsx)(Z,{})})]})})})}},8622:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(7460),s=n(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};var l=n(4790),c=function(e,t){return s.createElement(l.Z,(0,a.Z)({},e,{ref:t,icon:r}))};const o=s.forwardRef(c)},398:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(7460),s=n(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};var l=n(4790),c=function(e,t){return s.createElement(l.Z,(0,a.Z)({},e,{ref:t,icon:r}))};const o=s.forwardRef(c)},6384:(e,t,n)=>{"use strict";function a(e){return["small","middle","large"].includes(e)}function s(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}n.d(t,{T:()=>s,n:()=>a})},4520:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var a=n(2791),s=n(9809),r=n.n(s),l=n(1498),c=n(6384),o=n(1929),i=n(6428),d=n(4628);const u=["wrap","nowrap","wrap-reverse"],h=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];const g=function(e,t){return r()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{["".concat(e,"-wrap-").concat(n)]:n&&u.includes(n)}})(e,t)),((e,t)=>{const n={};return p.forEach((a=>{n["".concat(e,"-align-").concat(a)]=t.align===a})),n["".concat(e,"-align-stretch")]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return h.forEach((a=>{n["".concat(e,"-justify-").concat(a)]=t.justify===a})),n})(e,t)))},f=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},m=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},v=e=>{const{componentCls:t}=e,n={};return u.forEach((e=>{n["".concat(t,"-wrap-").concat(e)]={flexWrap:e}})),n},x=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n["".concat(t,"-align-").concat(e)]={alignItems:e}})),n},j=e=>{const{componentCls:t}=e,n={};return h.forEach((e=>{n["".concat(t,"-justify-").concat(e)]={justifyContent:e}})),n},y=(0,i.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:a}=e,s=(0,d.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:a});return[f(s),m(s),v(s),x(s),j(s)]}),(()=>({})),{resetStyle:!1});var b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const S=a.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:s,className:i,style:d,flex:u,gap:h,children:p,vertical:f=!1,component:m="div"}=e,v=b(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:x,direction:j,getPrefixCls:S}=a.useContext(o.E_),Z=S("flex",n),[C,w,E]=y(Z),I=null!==f&&void 0!==f?f:null===x||void 0===x?void 0:x.vertical,N=r()(i,s,null===x||void 0===x?void 0:x.className,Z,w,E,g(Z,e),{["".concat(Z,"-rtl")]:"rtl"===j,["".concat(Z,"-gap-").concat(h)]:(0,c.n)(h),["".concat(Z,"-vertical")]:I}),z=Object.assign(Object.assign({},null===x||void 0===x?void 0:x.style),d);return u&&(z.flex=u),h&&!(0,c.n)(h)&&(z.gap=h),C(a.createElement(m,Object.assign({ref:t,className:N,style:z},(0,l.Z)(v,["justify","wrap","align"])),p))}));const Z=S},1291:e=>{function t(e,t){if((e=e.replace(/\s+/g,""))===(t=t.replace(/\s+/g,"")))return 1;if(e.length<2||t.length<2)return 0;let n=new Map;for(let s=0;s<e.length-1;s++){const t=e.substring(s,s+2),a=n.has(t)?n.get(t)+1:1;n.set(t,a)}let a=0;for(let s=0;s<t.length-1;s++){const e=t.substring(s,s+2),r=n.has(e)?n.get(e):0;r>0&&(n.set(e,r-1),a++)}return 2*a/(e.length+t.length-2)}e.exports={compareTwoStrings:t,findBestMatch:function(e,n){if(!function(e,t){return"string"===typeof e&&(!!Array.isArray(t)&&(!!t.length&&!t.find((function(e){return"string"!==typeof e}))))}(e,n))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const a=[];let s=0;for(let l=0;l<n.length;l++){const r=n[l],c=t(e,r);a.push({target:r,rating:c}),c>a[s].rating&&(s=l)}const r=a[s];return{ratings:a,bestMatch:r,bestMatchIndex:s}}}}}]);
//# sourceMappingURL=ImageCardsConnections.9720abbf.chunk.js.map