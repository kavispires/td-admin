"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[2718],{2043:(e,n,t)=>{t.d(n,{Do:()=>v,H:()=>g,tj:()=>f,xh:()=>h,zE:()=>u});var r=t(3070),a=t(906),i=t(9793),s=t(5922),c=t(9862),o=t(4248),l=t(1431),d=t(184);function u(e){let{label:n,value:t,onChange:i,options:s,placeholder:c}=e;return(0,d.jsx)(r.Z.Item,{label:n,children:(0,d.jsxs)(a.Z,{style:{minWidth:"150px"},onChange:i,value:t,children:[c&&(0,d.jsx)(a.Z.Option,{value:"",disabled:!0,children:"placeholder"}),s.map((e=>"object"===typeof e?(0,d.jsx)(a.Z.Option,{value:e.value,children:e.label},"".concat(n,"-").concat(e.value)):(0,d.jsx)(a.Z.Option,{value:e,children:e},"".concat(n,"-").concat(e))))]})})}function h(e){let{label:n,value:t,onChange:a,min:s=0,max:c=100,step:o}=e;return(0,d.jsx)(r.Z.Item,{label:n,children:(0,d.jsx)(i.Z,{min:s,max:c,value:t,onChange:e=>a(null!==e&&void 0!==e?e:c),style:{minWidth:"150px",width:"100%"},step:o})})}function v(e){let{label:n,value:t,onChange:a,className:i,disabled:c}=e;return(0,d.jsx)(r.Z.Item,{label:n,valuePropName:"checked",className:i,children:(0,d.jsx)(s.Z,{checked:t,onChange:a,size:"small",disabled:c})})}function f(e){let{label:n,value:t,onChange:a,disabled:i,className:s}=e;return(0,d.jsx)(r.Z.Item,{label:n,valuePropName:"checked",className:s,children:(0,d.jsx)(c.Z,{checked:t,onChange:e=>a(e.target.checked),disabled:i})})}function g(e){let{value:n,label:t,onChange:a,options:i}=e;return(0,d.jsx)(r.Z.Item,{label:t,layout:i.length>2?"vertical":"horizontal",children:(0,d.jsx)(o.Z,{block:!0,value:n,onChange:a,options:i.map((e=>({label:(0,d.jsx)(l.Z,{arrow:!0,trigger:"hover",title:e.title,children:e.icon}),value:e.value})))})})}},8384:(e,n,t)=>{t.d(n,{x:()=>u});var r=t(1413),a=t(4925),i=t(732),s=t(6473),c=t(9475),o=t(3733),l=t(184);const d=["open","onClose"];function u(e){let{open:n,onClose:t}=e,u=(0,a.Z)(e,d);return(0,l.jsx)(s.Z,(0,r.Z)({className:(0,o.Z)("full-screen-modal",!n&&"full-screen-modal--hidden"),bordered:!1,extra:(0,l.jsx)(c.ZP,{onClick:t,type:"text",shape:"circle",icon:(0,l.jsx)(i.Z,{})})},u))}},7340:(e,n,t)=>{t.d(n,{k:()=>f});var r=t(1413),a=t(4925),i=t(9475),s=t(2426),c=t.n(s),o=t(2791),l=t(8211),d=t(4483),u=t(4841),h=t(184);const v=["isDirty","onSave","isSaving","dirt","interval"];function f(e){let{isDirty:n,onSave:t,isSaving:s,dirt:f,interval:g=6e5}=e,m=(0,a.Z)(e,v);const{togglePendingSave:x}=(0,u.b)(),[,j,p]=(0,l.Z)((()=>{n&&t()}),g);return(0,o.useEffect)((()=>{n?(x(!0),console.log("Save Reset",c()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),p()):(x(!1),j())}),[n,p,j,f]),(0,o.useEffect)((()=>{const e=e=>{if(n){const n="You have unsaved changes, are you sure you want to leave?";return e.returnValue=n,n}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[n]),(0,h.jsx)(i.ZP,(0,r.Z)((0,r.Z)({type:"primary",size:"large",icon:(0,h.jsx)(d.Z,{}),onClick:t,disabled:!n,loading:s,danger:!0,block:!0},m),{},{children:"Save"}))}},8866:(e,n,t)=>{t.d(n,{N:()=>o});var r=t(1413),a=t(4925),i=t(6178),s=t(184);const c=["children","level"];function o(e){let{children:n,level:t}=e,o=(0,a.Z)(e,c);return(0,s.jsx)(i.Z.Title,(0,r.Z)((0,r.Z)({level:null!==t&&void 0!==t?t:3},o),{},{children:n}))}},8357:(e,n,t)=>{t.d(n,{tj:()=>l.tj,xh:()=>l.xh,H:()=>l.H,zE:()=>l.zE,Do:()=>l.Do,Th:()=>f,F6:()=>o});t(8866);var r=t(1413),a=t(4925),i=t(3733),s=t(184);const c=["children","active","activeClass","className","hoverType"],o=e=>{let{children:n,active:t=!1,activeClass:o="",className:l="",hoverType:d="scale"}=e,u=(0,a.Z)(e,c);return(0,s.jsx)("button",(0,r.Z)((0,r.Z)({className:(0,i.Z)("transparent-button","transparent-button--".concat(d),t&&(o||"transparent-button--active"),l)},u),{},{children:n}))};var l=t(2043),d=t(952),u=t(3070),h=t(7965);function v(e){let{isLoading:n,isIdle:t,error:r,isDirty:a,isError:i,hasResponseData:c}=e;return t?(0,s.jsx)(d.Z,{children:"No Data yet"}):n?(0,s.jsx)(d.Z,{color:"blue",children:"Loading..."}):r||i?(0,s.jsx)(d.Z,{color:"red",children:"Error"}):a?(0,s.jsx)(d.Z,{color:"orange",children:"Modified"}):c?(0,s.jsx)(d.Z,{color:"green",children:"Loaded"}):(0,s.jsx)(d.Z,{children:"No Data"})}function f(e){return(0,s.jsx)(h.Pd,{children:(0,s.jsx)(u.Z.Item,{label:"Status",children:(0,s.jsx)(v,(0,r.Z)({},e))})})}},145:(e,n,t)=>{t.d(n,{f:()=>c});var r=t(2402),a=t(3733),i=t(2606),s=t(184);const c=e=>{let{id:n,width:t=200,className:c="",preview:o=!0,fileExtension:l="jpg"}=e;const{getUrl:d}=(0,i.n)("images"),u=n.replace(/-/g,"/");return(0,s.jsx)("div",{className:(0,a.Z)("image-card",c),children:(0,s.jsx)(r.Z,{width:t,src:d("".concat(u,".").concat(l)),fallback:d("back/default.jpg"),preview:o})})}},4249:(e,n,t)=>{t.d(n,{c:()=>s});var r=t(1492),a=t(952),i=t(184);function s(e){let{card:n}=e;const t=n.length>10?"red":n.length>5?"blue":n.length>0?"green":void 0;return(0,i.jsx)("div",{children:(0,i.jsxs)(a.Z,{color:t,icon:(0,i.jsx)(r.Z,{}),children:[" ",n.length]})})}},2671:(e,n,t)=>{t.d(n,{AZ:()=>m,gU:()=>g,IN:()=>x});var r=t(4747),a=t(9631),i=t(763),s=t(2791),c=t(2592),o=t(5850),l=t(3713),d=t(2010),u=t(8556),h=t(4766);const v=()=>(0,i.padStart)(String((0,i.random)(1,252)),2,"0"),f=()=>(0,i.random)(1,12);function g(e,n){var t,r,a;const[i,c]=(0,s.useState)(f()),[l,d]=(0,s.useState)(v()),[u,g]=(0,s.useState)(f()),[m,x]=(0,s.useState)(v()),j="td-d".concat(i,"-").concat(l),p="td-d".concat(u,"-").concat(m),[Z,y]=(0,s.useState)(0),{queryParams:b}=(0,h.K)(),w=Number(null!==(t=b.get("cycle"))&&void 0!==t?t:3),C=null!==(r=null===e||void 0===e?void 0:e[j])&&void 0!==r?r:[],S=null!==(a=null===e||void 0===e?void 0:e[p])&&void 0!==a?a:[],k=()=>{y(0),c(f()),d(v()),g(f()),x(v())};return(0,s.useEffect)((()=>{j===p&&x(v())}),[j,p]),{cardAId:j,cardA:C,cardBId:p,cardB:S,relate:()=>{y(0),C.push(p),e[j]=(0,o.R1)(C),S.push(j),e[p]=(0,o.R1)(S),n(!0),c(u),d(m),g(f()),x(v())},unrelate:()=>{Z>=w?(y(0),k()):(y((e=>e+1)),g(f()),x(v()))},areRelated:C.includes(p),onRandomCards:k}}function m(){const[e,n]=(0,s.useState)(!1),t=["data/imageCardsRelationships"],i=(0,l.NL)(),{notification:o}=r.Z.useApp(),[h,v]=(0,s.useState)({total:0,overdone:0,complete:0,single:0}),{data:f={},isLoading:g,isSuccess:m,isError:x,error:j,isFetched:p,isRefetching:Z,refetch:y}=(0,d.a)({queryKey:t,queryFn:async()=>{var e;const n=(0,a.JU)(c.RZ,"data/imageCardsRelationships");return null!==(e=(await(0,a.QT)(n)).data())&&void 0!==e?e:{}}}),{isPending:b,isError:w,isSuccess:C,mutate:S}=(0,u.D)({mutationKey:t,mutationFn:async()=>{const e=(0,a.JU)(c.RZ,"data/imageCardsRelationships");return await(0,a.pl)(e,f),f},onSuccess:()=>{o.success({message:"Saved",placement:"bottomLeft"}),i.refetchQueries({queryKey:t}),n(!1)}});return(0,s.useEffect)((()=>{if(!Z&&p){const e=Object.keys(f).length;let n=0,t=0,r=0;Object.values(f).forEach((e=>{e.length>8&&(n+=1),1===e.length&&(r+=1),e.length>2&&(t+=1)})),v({total:e,overdone:n,complete:t,single:r})}}),[p,Z]),{data:f,isLoading:g,isSuccess:m,isError:x,error:j,hasData:m&&Object.keys(f).length>0,refetch:y,isSaving:b,isMutationError:w,isSaved:C,save:S,setDirty:n,isDirty:e,stats:h}}function x(e,n,t,r){const[a,i]=(0,s.useState)([]),[c,l]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[h,g]=(0,s.useState)(0),[m,x]=(0,s.useState)(!0),[j,p]=(0,s.useState)([]),Z=n=>{l((null!==n&&void 0!==n?n:a).map((n=>{var t;return null!==(t=null===e||void 0===e?void 0:e[n])&&void 0!==t?t:[]})))},y=()=>{const n=[...j];let a=0;const s=d.length<2e3?d:[];let c=0;for(;c<400&&n.length<t;){var o;const t="td-d".concat(f(),"-").concat(v()),i=null!==(o=e[t])&&void 0!==o?o:[],l=!(r>0)||i.length<r,d=!!m&&s.includes(t);n.includes(t)||d||!l||(n.push(t),a+=1),c+=1}i(n),u((e=>[...e,...n])),Z(n),g((e=>e+a))};(0,s.useEffect)((()=>{0===a.length&&y()}),[a]);return{cardIds:a,cards:c,selection:j,onSelect:e=>{p((n=>{const t=[...n],r=t.indexOf(e);return r>-1?t.splice(r,1):t.push(e),t}))},relate:()=>{j.forEach((n=>{var t;const r=null!==(t=e[n])&&void 0!==t?t:[];r.push(...j.filter((e=>e!==n))),e[n]=(0,o.R1)(r)})),n(!0),p([]),Z(),u([]),g(0)},nextSet:y,deselectAll:()=>{p([])},cycles:h,filters:{useCycles:m,toggleUseCycles:()=>{x((e=>!e))}}}}},9946:(e,n,t)=>{t.d(n,{m:()=>i});var r=t(2791),a=t(7415);function i(e,n){const[t,{width:i}]=(0,a.Z)(),{gap:s=32,minWidth:c=120,maxWidth:o=300,margin:l=0}=null!==n&&void 0!==n?n:{};return[(0,r.useMemo)((()=>{const n=Math.min(Math.max(Math.floor((i-l)/e)-s,c),o);return Number.isNaN(n)?c:n}),[i,e,s,c,o,l]),t]}},5305:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var r=t(1790),a=t(2128),i=t(9475),s=t(2402),c=t(4520),o=t(952),l=t(9946),d=t(4766),u=t(2791),h=t(263);const v=function(e){var n=(0,u.useRef)(e);n.current=e,(0,h.Z)((function(){return function(){return n.current()}}))};const f=function(e){var n=(0,u.useRef)(0),t=(0,u.useState)(e),r=t[0],a=t[1],i=(0,u.useCallback)((function(e){cancelAnimationFrame(n.current),n.current=requestAnimationFrame((function(){a(e)}))}),[]);return v((function(){cancelAnimationFrame(n.current)})),[r,i]};var g=t(7136);const m=function(e){var n=void 0===e?{}:e,t=n.initialWidth,r=void 0===t?1/0:t,a=n.initialHeight,i=void 0===a?1/0:a,s=n.onChange,c=f({width:g.jU?window.innerWidth:r,height:g.jU?window.innerHeight:i}),o=c[0],l=c[1];return(0,u.useEffect)((function(){if(g.jU){var e=function(){var e=window.innerWidth,n=window.innerHeight;l({width:e,height:n}),s&&s(e,n)};return(0,g.on)(window,"resize",e),function(){(0,g.S1)(window,"resize",e)}}}),[]),o};var x=g.jU?window:null,j=function(e){return!!e.addEventListener},p=function(e){return!!e.on};const Z=function(e,n,t,r){void 0===t&&(t=x),(0,u.useEffect)((function(){if(n&&t)return j(t)?(0,g.on)(t,e,n,r):p(t)&&t.on(e,n,r),function(){j(t)?(0,g.S1)(t,e,n,r):p(t)&&t.off(e,n,r)}}),[e,n,t,JSON.stringify(r)])};const y=function(e,n,t,r){void 0===n&&(n=g.ZT),void 0===t&&(t={}),void 0===r&&(r=[e]);var a=t.event,i=void 0===a?"keydown":a,s=t.target,c=t.options,o=(0,u.useMemo)((function(){var t,r="function"===typeof(t=e)?t:"string"===typeof t?function(e){return e.key===t}:t?function(){return!0}:function(){return!1};return function(e){if(r(e))return n(e)}}),r);Z(i,o,s,c)};var b=t(145),w=t(4249),C=t(2671),S=t(8384),k=t(184);function E(e){let{query:n}=e;const{width:t}=m(),[a]=(0,l.m)(1,{minWidth:t/3}),{data:u,setDirty:h}=n,{cardAId:v,cardA:f,cardBId:g,cardB:x,relate:j,unrelate:p}=(0,C.gU)(u,h),{addParam:Z,is:E}=(0,d.K)(),N=E("open");return y("1",(()=>{N&&p()})),y("2",(()=>{N&&j()})),(0,k.jsxs)(r.Z.Content,{className:"dev-content py-4",children:[(0,k.jsx)(i.ZP,{block:!0,onClick:()=>Z("open","true"),children:"Open Modal"}),(0,k.jsx)(S.x,{title:"Card A: ".concat(v," vs Card B: ").concat(g),open:N,onClose:()=>Z("open","false"),actions:[(0,k.jsx)(i.ZP,{onClick:p,size:"large",block:!0,children:"Unrelated"},"1"),(0,k.jsx)(i.ZP,{onClick:j,size:"large",block:!0,type:"primary",children:"Related"},"2")],children:(0,k.jsx)(s.Z.PreviewGroup,{children:(0,k.jsxs)(c.Z,{className:"center",wrap:"wrap",justify:"center",children:[(0,k.jsxs)(c.Z,{vertical:!0,children:[(0,k.jsx)(b.f,{id:v,width:a}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(w.c,{card:f}),(0,k.jsx)(o.Z,{children:v})]})]}),(0,k.jsxs)(c.Z,{vertical:!0,children:[(0,k.jsx)(b.f,{id:g,width:a}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(w.c,{card:x}),(0,k.jsx)(o.Z,{children:g})]})]})]})})})]})}var N=t(7128),R=t(8357),D=t(7018),z=t(7340),L=t(7965),P=t(763);function M(e){let{query:n}=e;const{data:t,isDirty:r,isSaving:a,save:s,isLoading:o,isError:l}=n,{queryParams:u,addParam:h}=(0,d.K)();return(0,k.jsxs)(L.p3,{children:[(0,k.jsx)(L.Pd,{children:(0,k.jsxs)(c.Z,{vertical:!0,gap:6,children:[(0,k.jsx)(z.k,{isDirty:r,dirt:JSON.stringify(t),onSave:()=>s({}),isSaving:a}),(0,k.jsx)(D.o,{data:t,fileName:"imageCardsRelationships.json",loading:a,disabled:(0,P.isEmpty)(t),block:!0})]})}),(0,k.jsx)(R.Th,{isLoading:o||a,isDirty:r,isError:l,hasResponseData:!(0,P.isEmpty)(t)}),(0,k.jsxs)(L.Pd,{children:[(0,k.jsx)(i.ZP,{block:!0,onClick:()=>h("open","true"),children:"Open Modal"}),(0,k.jsx)(N.Z,{}),(0,k.jsx)(R.zE,{label:"Cycle Threshold",value:u.get("cycle")||3,onChange:e=>h("cycle",e),options:[1,3,5,10]})]})]})}const I=function(){const e=(0,C.AZ)();return(0,k.jsx)(L.Xg,{title:"Image Cards",subtitle:"Comparator",children:(0,k.jsx)(a.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!(0,P.isEmpty)(e.data),children:(0,k.jsxs)(r.Z,{hasSider:!0,children:[(0,k.jsx)(M,{query:e}),(0,k.jsx)(r.Z.Content,{className:"content",children:(0,k.jsx)(E,{query:e})})]})})})}},4483:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7460),a=t(2791);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var s=t(4790),c=function(e,n){return a.createElement(s.Z,(0,r.Z)({},e,{ref:n,icon:i}))};const o=a.forwardRef(c)},1492:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7460),a=t(2791);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm122.7-533.4c18.7-18.7 49.1-18.7 67.9 0 18.7 18.7 18.7 49.1 0 67.9-18.7 18.7-49.1 18.7-67.9 0-18.7-18.7-18.7-49.1 0-67.9zm283.8 282.9l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"filled"};var s=t(4790),c=function(e,n){return a.createElement(s.Z,(0,r.Z)({},e,{ref:n,icon:i}))};const o=a.forwardRef(c)},8211:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(2791);function a(e,n){void 0===n&&(n=0);var t=(0,r.useRef)(!1),a=(0,r.useRef)(),i=(0,r.useRef)(e),s=(0,r.useCallback)((function(){return t.current}),[]),c=(0,r.useCallback)((function(){t.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){t.current=!0,i.current()}),n)}),[n]),o=(0,r.useCallback)((function(){t.current=null,a.current&&clearTimeout(a.current)}),[]);return(0,r.useEffect)((function(){i.current=e}),[e]),(0,r.useEffect)((function(){return c(),o}),[n]),[s,o,c]}}}]);
//# sourceMappingURL=ImageCardsComparator.c1e7a51b.chunk.js.map