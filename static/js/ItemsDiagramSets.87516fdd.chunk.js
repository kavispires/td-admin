"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[9479],{7340:(e,t,s)=>{s.d(t,{k:()=>o});var n=s(2556),i=s(2426),d=s.n(i),a=s(2791),l=s(8211),r=s(4483),c=s(184);function o(e){let{isDirty:t,onSave:s,isSaving:i,dirt:o,interval:u=6e5,...h}=e;const[,p,m]=(0,l.Z)((()=>{t&&s()}),u);return(0,a.useEffect)((()=>{t?(console.log("Save Reset",d()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),m()):p()}),[t,m,p,o]),(0,a.useEffect)((()=>{const e=e=>{if(t){const t="You have unsaved changes, are you sure you want to leave?";return e.returnValue=t,t}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t]),(0,c.jsx)(n.ZP,{type:"primary",size:"large",icon:(0,c.jsx)(r.Z,{}),onClick:s,disabled:!t,loading:i,danger:!0,block:!0,...h,children:"Save"})}},8027:(e,t,s)=>{s.d(t,{A:()=>l,X:()=>r});var n=s(2481),i=s(2748),d=s(2010),a=s(5850);function l(e,t){return async()=>{var s;console.log("%cQuerying ".concat(e,"/").concat(t," from firebase: ").concat((0,a.xE)()),"color: #f0f");const d=(0,n.JU)(i.RZ,"".concat(e,"/").concat(t));return null!==(s=(await(0,n.QT)(d)).data())&&void 0!==s?s:{}}}function r(e,t,s){return(0,d.a)({queryKey:["firebase",e,t],queryFn:l(e,t),...s})}},4766:(e,t,s)=>{s.d(t,{K:()=>d});var n=s(2791),i=s(1087);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,s]=(0,i.lr)(),d=(e,n,i)=>{void 0===n||""===n||n===i?t.delete(e):t.set(e,String(n)),s(t)},a=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(e).forEach((e=>{let[s,i]=e;n[s]===i?t.delete(s):t.set(s,String(i))})),s(t)},l=e=>{t.delete(e),s(t)},r=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true";return t.get(e)===String(s)};return(0,n.useEffect)((()=>{Object.entries(e).forEach((e=>{let[s,n]=e;t.has(s)||d(s,n)}))}),[]),{addParam:d,addParams:a,removeParam:l,queryParams:t,is:r}}},8938:(e,t,s)=>{s.d(t,{i:()=>u});var n=s(4747),i=s(763),d=s(2791),a=s(3713),l=s(8027),r=s(5529),c=s(2233),o=s(5850);function u(e){let{tdrResourceName:t,firebaseDataCollectionName:s,serialize:u}=e;const{notification:h}=n.Z.useApp(),p=(0,a.NL)(),m=(0,r.N)(t),g=(0,l.X)("tdr",s,{select:u?o.d_:void 0}),[v,j]=(0,d.useState)({}),f=(0,c.B)("tdr",s,{onSuccess:()=>{h.success({message:"".concat(s," updated")}),p.refetchQueries({queryKey:["firebase","tdr",s]}),j({})},onError:e=>{h.error({message:"".concat(s," update failed"),description:e.message})}}),x=(0,d.useMemo)((()=>{var e,n;return m.isLoading||g.isLoading||f.isPending?{}:(console.log("%cMerging ".concat(t,"+").concat(s," data..."),"color: #f0f"),(0,i.cloneDeep)({...null!==(e=m.data)&&void 0!==e?e:{},...null!==(n=g.data)&&void 0!==n?n:{},...v}))}),[t,s,m.data,g.data,m.isLoading,g.isLoading,f.isPending,v]),y=!(0,i.isEmpty)(v),b=g.data;return{data:x,isLoading:m.isLoading||g.isLoading,error:m.error||g.error,firebaseData:b,isSaving:f.isPending,save:()=>{f.mutate(u?(0,o.aS)(v):v)},addEntryToUpdate:(e,t)=>{j((s=>({...s,[e]:t})))},entriesToUpdate:v,isDirty:y}}},5529:(e,t,s)=>{s.d(t,{N:()=>a,Y:()=>l});var n=s(763),i=s(2010),d=s(2606);function a(e){var t;let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getUrl:a}=(0,d.n)("resources"),l=(0,i.a)({queryKey:[e],queryFn:async()=>{const t=await fetch(a("".concat(e,".json")));return await t.json()},enabled:s}),r=!(0,n.isEmpty)(l.data);return{...l,data:null!==(t=l.data)&&void 0!==t?t:{},hasResponseData:r}}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getUrl:s}=(0,d.n)("resources"),a=(0,i.a)({queryKey:[e],queryFn:async()=>{const t=await fetch(s("".concat(e,".json")));return await t.json()},enabled:t}),l=!(0,n.isEmpty)(a.data);return{...a,data:a.data,hasResponseData:l}}},2233:(e,t,s)=>{s.d(t,{B:()=>l});var n=s(2481),i=s(2748),d=s(8556);function a(e,t,s){console.log("%cUpdating ".concat(e,"/").concat(t," from firebase"),"color: #f00");const d=(0,n.JU)(i.RZ,"".concat(e,"/").concat(t));return(0,n.r7)(d,s)}function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,d.D)({mutationFn:async s=>a(e,t,s),...s})}},7716:(e,t,s)=>{s.r(t),s.d(t,{ItemsDiagramSets:()=>_,default:()=>G});var n=s(3990),i=s(4520),d=s(2128),a=s(3660),l=s(9197),r=s(7128),c=s(6173),o=s(7018),u=s(7340),h=s(1958),p=s(4766),m=s(5850),g=s(184);function v(e){var t;let{data:s,save:n,isDirty:d,isSaving:v,entriesToUpdate:j}=e;const{addParams:f,queryParams:x}=(0,p.K)();return(0,g.jsxs)(h.Pd,{children:[(0,g.jsxs)(i.Z,{vertical:!0,gap:12,children:[(0,g.jsx)(u.k,{isDirty:d,onSave:n,isSaving:v,dirt:JSON.stringify(j)}),(0,g.jsx)(o.o,{data:()=>{return e=s,(0,m.Tj)(e);var e},fileName:"daily-diagram-items.json",disabled:d,block:!0})]}),(0,g.jsx)(r.Z,{}),(0,g.jsx)(c.H,{label:"Display",value:null!==(t=x.get("display"))&&void 0!==t?t:"rule",onChange:e=>f({display:e,page:1},{page:1}),options:[{title:"By Rule",icon:(0,g.jsx)(a.Z,{}),value:"rule"},{title:"By Thing",icon:(0,g.jsx)(l.Z,{}),value:"thing"}]})]})}var j=s(4031),f=s(2791),x=s(5529),y=s(1046),b=s(7415),Z=s(4747),T=s(2556),w=s(5225),k=s(959),E=s(1105),I=s(7305),O=s(5922),S=s(4424),D=s(763);const P="abcdefghijklmnopqrstuvwxyz",L="bcdfghjklmnpqrstvwxyz",C="aeiou",N=/[\xe1\xe9\xed\xf3\xfa\xe3\u1ebd\u0129\xf5\u0169\xe2\xea\xee\xf4\xfb\xe0\xe8\xec\xf2\xf9\xe4\xeb\xef\xf6\xfc]/,R=(0,D.memoize)((e=>(0,m.bU)(e).toLowerCase())),F=e=>R(e).length,U=e=>R(e).split("").filter((e=>C.includes(e))).length,z=e=>R(e).split("").filter((e=>L.includes(e))).length,M={"ddr-7-pt":e=>P.indexOf(R(e)[0])<P.indexOf(R(e)[1]),"ddr-8-pt":e=>F(e)<=5,"ddr-9-pt":e=>5===F(e),"ddr-10-pt":e=>F(e)>=4&&F(e)<=6,"ddr-11-pt":e=>F(e)>=6&&F(e)<=8,"ddr-12-pt":e=>F(e)>7,"ddr-13-pt":e=>e.split(" ").length>1,"ddr-14-pt":e=>{const t=R(e).split("").filter((e=>C.includes(e)));return new Set(t).size>=2},"ddr-15-pt":e=>new Set(R(e).split("")).size<=4,"ddr-16-pt":e=>z(e)>U(e),"ddr-17-pt":e=>U(e)>z(e),"ddr-18-pt":e=>{const t=R(e)[0];return R(e).slice(1).includes(t)},"ddr-19-pt":e=>R(e).split("").some(((t,s)=>R(e).slice(s+1).includes(t))),"ddr-20-pt":e=>R(e).split("").some(((t,s)=>C.includes(t)&&R(e).slice(s+1).includes(t))),"ddr-21-pt":e=>R(e).split("").some(((t,s)=>L.includes(t)&&R(e).slice(s+1).includes(t))),"ddr-22-pt":e=>R(e).split("").some(((t,s)=>C.includes(t)&&C.includes(e[s+1]))),"ddr-23-pt":e=>"abcdefghijklm".includes(R(e)[0]),"ddr-24-pt":e=>"nopqrstuvwxyz".includes(R(e)[0]),"ddr-25-pt":e=>C.includes(R(e)[0]),"ddr-26-pt":e=>L.includes(R(e)[0]),"ddr-27-pt":e=>e.split("").some(((t,s)=>t===e[s+1])),"ddr-28-pt":e=>R(e).includes("a"),"ddr-29-pt":e=>R(e).includes("r"),"ddr-30-pt":e=>R(e).includes("u"),"ddr-31-pt":e=>R(e).includes("q")||R(e).includes("j"),"ddr-32-pt":e=>R(e).includes("c")||R(e).includes("\xe7"),"ddr-33-pt":e=>R(e).includes("m"),"ddr-34-pt":e=>R(e).includes("h"),"ddr-35-pt":e=>R(e).includes("p")||R(e).includes("b"),"ddr-36-pt":e=>R(e).includes("k")||R(e).includes("w")||R(e).includes("y"),"ddr-37-pt":e=>(e=>e.toLowerCase().split("").filter((e=>N.test(e))).length)(e)>0,"ddr-38-pt":e=>!["a","o"].includes(R(e).slice(-1)),"ddr-39-pt":e=>L.includes(R(e).slice(-1)),"ddr-40-pt":e=>"s"===R(e).slice(-1),"ddr-41-pt":e=>{const t=R(e).split("").filter((e=>C.includes(e)));return new Set(t).size===t.length},"ddr-42-pt":e=>{const t=R(e).split("").filter((e=>L.includes(e)));return new Set(t).size===t.length}};var A=s(2997);function q(e){let{addEntryToUpdate:t,availableThings:s,rules:n,width:i}=e;const{notification:d}=Z.Z.useApp(),[a,l]=(0,f.useState)(null),r=()=>{var e;l(null!==(e=(0,D.sample)(s))&&void 0!==e?e:null)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(T.ZP,{size:"large",onClick:r,children:"Classify New Item"}),!!a&&(0,g.jsx)(V,{isModalOpen:null!==a,onAddItem:async e=>{if(!a)return;e.name&&e.itemId||d.error({message:"Name and Item ID are required"});const{itemId:s,name:n,updatedAt:i,...c}=e,o={itemId:s,name:n,updatedAt:i,rules:Object.keys(c).filter((e=>!0===c[e]))};t(s,o),console.log("COMPLETED SAVE"),l(null),await(0,m.Dc)(500),r()},handleCancel:()=>l(null),item:a,rules:n,width:.9*i})]})}function V(e){var t;let{isModalOpen:s,onAddItem:n,handleCancel:d,item:a,rules:l,width:r}=e;const c=(0,f.useMemo)((()=>{const e=(e=>{return 1===e.name.pt.split(" ").length?e.name.pt:e.aliasesPt&&null!==(t=e.aliasesPt.find((e=>1===e.split(" ").length)))&&void 0!==t?t:e.name.pt;var t})(a);return{itemId:a.id,name:e,updatedAt:Date.now(),...Object.keys(l).reduce(((t,s)=>(M[s]?t[s]=M[s](e):t[s]=void 0,t)),{})}}),[a,l]),[o]=w.Z.useForm(),u=w.Z.useWatch([],o),h=!u||Object.values(null!==u&&void 0!==u?u:{}).some((e=>void 0===e)),p=w.Z.useWatch("name",o);(0,f.useEffect)((()=>{console.log("Name changed",p),p&&Object.keys(l).forEach((e=>{M[e]?o.setFieldsValue({[e]:M[e](p)}):o.setFieldsValue({[e]:void 0})}))}),[p]);const m=o.getFieldValue("ddr-1-pt");(0,f.useEffect)((()=>{!0===m&&o.setFieldsValue({"ddr-2-pt":!1})}),[m]);const v=o.getFieldValue("ddr-2-pt");(0,f.useEffect)((()=>{!0===v&&o.setFieldsValue({"ddr-1-pt":!1})}),[v]);const j=o.getFieldValue("ddr-3-pt");(0,f.useEffect)((()=>{!0===j&&o.setFieldsValue({"ddr-4-pt":!1})}),[j]);const x=o.getFieldValue("ddr-4-pt");(0,f.useEffect)((()=>{!0===x&&o.setFieldsValue({"ddr-3-pt":!1})}),[x]),(0,f.useEffect)((()=>{(null===p||void 0===p?void 0:p.includes("-"))&&o.setFieldsValue({"ddr-5-pt":!0})}),[p]);return(0,g.jsx)(k.Z,{width:r,title:"Evaluate Random item",open:s,onOk:o.submit,onCancel:d,maskClosable:!1,okButtonProps:{disabled:h,htmlType:"submit",size:"large"},okText:"Add Item",children:(0,g.jsxs)(w.Z,{form:o,name:"new-item-".concat(a.id),onFinish:e=>{console.log("Received values:",e),n(e)},autoComplete:"off",initialValues:c,layout:"vertical",size:"small",labelWrap:!0,children:[(0,g.jsxs)("div",{className:"diagram-container",children:[(0,g.jsx)("div",{children:(0,g.jsx)(A.ck,{id:a.id,width:50})}),(0,g.jsx)(w.Z.Item,{name:"name",label:"Name",children:(0,g.jsx)(E.Z,{})}),(0,g.jsx)(w.Z.Item,{name:"itemId",label:"Item",children:(0,g.jsx)(E.Z,{readOnly:!0})}),(0,g.jsx)(w.Z.Item,{name:"updatedAt",label:"Updated At",children:(0,g.jsx)(E.Z,{readOnly:!0})}),(0,g.jsxs)("div",{children:["Options: ",a.name.pt," ",null===(t=a.aliasesPt)||void 0===t?void 0:t.join(", ")]}),(0,g.jsx)("div",{children:(0,g.jsx)(I.Z,{offsetTop:50,children:(0,g.jsx)(i.Z,{justify:"center",align:"center",children:(0,g.jsx)(T.ZP,{type:"primary",htmlType:"submit",size:"large",disabled:h,children:"Add Item"})})})})]}),(0,g.jsx)("div",{className:"diagram-container",children:Object.values(l).map((e=>e.auto&&M[e.id]?(0,g.jsx)(w.Z.Item,{name:e.id,label:e.title,valuePropName:"checked",children:(0,g.jsx)(O.Z,{checkedChildren:"\u2705",unCheckedChildren:"\u274c",disabled:!0})},e.id):(0,g.jsx)(w.Z.Item,{name:e.id,label:e.title,children:(0,g.jsxs)(S.ZP.Group,{optionType:"button",buttonStyle:"solid",children:[(0,g.jsx)(S.ZP,{value:!0,children:"\u2705"}),(0,g.jsx)(S.ZP,{value:!1,children:"\u274c"})]})},e.id)))})]})})}function B(e){let{data:t,addEntryToUpdate:s,availableThings:n,rules:i,thingsByRules:d}=e;const[a,{width:l}]=(0,b.Z)();return(0,g.jsxs)(y.Z,{direction:"vertical",ref:a,children:[(0,g.jsxs)(j.Z.Title,{level:5,children:["Rules By Items (Added: ",Object.keys(t).length," | ",n.length,")"]}),(0,g.jsx)(q,{addEntryToUpdate:s,availableThings:n,rules:i,width:l})]})}var K=s(952),Y=s(913),Q=s(122);function H(e){let{data:t,addEntryToUpdate:s,availableThings:n,rules:i,thingsByRules:d}=e;const[a,{width:l}]=(0,b.Z)(),c=(0,f.useMemo)((()=>{const e=Object.values(d).map((e=>e.length));return{maxThings:Math.max(...e),minThings:Math.min(...e),averageThings:Math.round(Object.values(d).reduce(((e,t)=>e+t.length),0)/Object.keys(d).length)}}),[d]),o=[{title:"Id",dataIndex:"id",key:"id",sorter:(e,t)=>Number(e.id.split("-")[1])-Number(t.id.split("-")[1]),render:e=>(0,g.jsx)(j.Z.Text,{children:e})},{title:"Rule",dataIndex:"title",key:"title",sorter:(e,t)=>e.title.localeCompare(t.title),render:e=>(0,g.jsx)(j.Z.Text,{children:e})},{title:"Things",dataIndex:"id",key:"id",render:e=>(0,g.jsxs)(y.Z,{size:"small",children:[(0,g.jsx)(K.Z,{children:d[e].length}),(0,g.jsx)(y.Z,{size:"small",wrap:!0,children:d[e].map((e=>(0,g.jsxs)("div",{children:[(0,g.jsx)(A.ck,{id:e,width:50}),(0,g.jsx)(j.Z.Text,{code:!0,children:t[e].name},e)]},e)))})]})},{title:"Level",dataIndex:"level",key:"level",sorter:(e,t)=>e.level-t.level,render:e=>(0,g.jsx)(Y.Z,{value:e,count:3,disabled:!0})}];return(0,g.jsxs)(y.Z,{direction:"vertical",ref:a,children:[(0,g.jsxs)(j.Z.Title,{level:4,children:["Things By Rule (Added: ",Object.keys(t).length," | ",n.length,")"]}),(0,g.jsxs)(y.Z,{split:(0,g.jsx)(r.Z,{type:"vertical"}),children:[(0,g.jsx)(q,{addEntryToUpdate:s,availableThings:n,rules:i,width:l}),(0,g.jsxs)(j.Z.Text,{strong:!0,children:["Average Things: ",(0,g.jsx)(K.Z,{children:c.averageThings})]}),(0,g.jsxs)(j.Z.Text,{strong:!0,children:["Max Things: ",(0,g.jsx)(K.Z,{children:c.maxThings})]}),(0,g.jsxs)(j.Z.Text,{strong:!0,children:["Min Things: ",(0,g.jsx)(K.Z,{children:c.minThings})]})]}),(0,g.jsx)(Q.Z,{dataSource:Object.values(i),columns:o})]})}function J(e){let{data:t,addEntryToUpdate:s}=e;const n=(0,x.N)("items"),i=(0,x.N)("daily-diagram-rules"),a=(0,f.useMemo)((()=>{var e;return Object.values(null!==(e=n.data)&&void 0!==e?e:{}).filter((e=>{var s,n,i;if(t&&void 0!==t[e.id])return!1;if(null!==(s=e.decks)&&void 0!==s&&s.includes("thing"))return!0;const d=1===e.name.pt.split(" ").length;return!(null===(n=e.decks)||void 0===n||!n.includes("alien")||!d)||!(null===(i=e.decks)||void 0===i||!i.includes("manufactured")||!d)}))}),[t,n.data]),l=(0,f.useMemo)((()=>{var e;return null!==(e=i.data)&&void 0!==e?e:{}}),[i.data]),r=(0,f.useMemo)((()=>{const e=Object.values(l).reduce(((e,t)=>(e[t.id]=[],e)),{});return Object.values(t).forEach((t=>{t.rules.forEach((s=>{e[s].push(t.itemId)}))})),e}),[t,l]),{is:c,queryParams:o}=(0,p.K)();return n.isLoading||i.isLoading?(0,g.jsx)(j.Z.Text,{children:"Loading..."}):(0,g.jsxs)(d.T,{isLoading:n.isLoading||i.isLoading,hasResponseData:n.hasResponseData||i.hasResponseData,children:[(c("display","rule")||!o.has("display"))&&(0,g.jsx)(H,{data:t,addEntryToUpdate:s,availableThings:a,rules:l,thingsByRules:r}),c("display","thing")&&(0,g.jsx)(B,{data:t,addEntryToUpdate:s,availableThings:a,rules:l,thingsByRules:r})]})}var W=s(4562),X=s(8938);function _(){const e=(0,X.i)({tdrResourceName:"daily-diagram-items",firebaseDataCollectionName:"diagramItems",serialize:!0});return(0,g.jsx)(h.Xg,{title:"Items",subtitle:"Quartet Sets",children:(0,g.jsxs)(n.Z,{hasSider:!0,children:[(0,g.jsx)(W.p,{children:(0,g.jsx)(v,{...e})}),(0,g.jsx)(n.Z.Content,{className:"content",children:(0,g.jsx)(d.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!0,children:(0,g.jsx)(i.Z,{vertical:!0,gap:24,children:(0,g.jsx)(J,{...e})})})})]})})}const G=_}}]);
//# sourceMappingURL=ItemsDiagramSets.87516fdd.chunk.js.map