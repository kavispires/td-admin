"use strict";(self.webpackChunktdr=self.webpackChunktdr||[]).push([[404],{7018:(e,t,a)=>{a.d(t,{o:()=>i});var s=a(2556),n=a(5850),r=a(184);function i(e){let{data:t,fileName:a,loading:i,...l}=e;return(0,r.jsx)(s.ZP,{onClick:()=>(0,n.ZN)("function"===typeof t?t():t,a),loading:i,...l,children:"Download JSON"})}},2999:(e,t,a)=>{a.d(t,{R:()=>l,T:()=>o});var s=a(952),n=a(5225),r=a(1958),i=a(184);function l(e){let{isLoading:t,isIdle:a,error:n,isDirty:r,isError:l,hasResponseData:o}=e;return a?(0,i.jsx)(s.Z,{children:"No Data yet"}):t?(0,i.jsx)(s.Z,{color:"blue",children:"Loading..."}):n||l?(0,i.jsx)(s.Z,{color:"red",children:"Error"}):r?(0,i.jsx)(s.Z,{color:"orange",children:"Modified"}):o?(0,i.jsx)(s.Z,{color:"green",children:"Loaded"}):(0,i.jsx)(s.Z,{children:"No Data"})}function o(e){return(0,i.jsx)(r.Pd,{children:(0,i.jsx)(n.Z.Item,{label:"Status",children:(0,i.jsx)(l,{...e})})})}},8866:(e,t,a)=>{a.d(t,{N:()=>r});var s=a(4031),n=a(184);function r(e){let{children:t,level:a,...r}=e;return(0,n.jsx)(s.Z.Title,{level:null!==a&&void 0!==a?a:3,...r,children:t})}},6173:(e,t,a)=>{a.d(t,{xh:()=>d,zE:()=>c,Do:()=>m,Th:()=>g.T,F6:()=>r});a(8866);var s=a(3733),n=a(184);const r=e=>{let{children:t,active:a=!1,activeClass:r="",className:i="",hoverType:l="scale",...o}=e;return(0,n.jsx)("button",{className:(0,s.Z)("transparent-button","transparent-button--".concat(l),a&&(r||"transparent-button--active"),i),...o,children:t})};var i=a(5225),l=a(7765),o=a(2326),u=a(5922);function c(e){let{label:t,value:a,onChange:s,options:r,placeholder:o}=e;return(0,n.jsx)(i.Z.Item,{label:t,children:(0,n.jsxs)(l.Z,{style:{minWidth:"150px"},onChange:s,value:a,children:[o&&(0,n.jsx)(l.Z.Option,{value:"",disabled:!0,children:"placeholder"}),r.map((e=>"object"===typeof e?(0,n.jsx)(l.Z.Option,{value:e.value,children:e.label},"".concat(t,"-").concat(e.value)):(0,n.jsx)(l.Z.Option,{value:e,children:e},"".concat(t,"-").concat(e))))]})})}function d(e){let{label:t,value:a,onChange:s,min:r=0,max:l=100,step:u}=e;return(0,n.jsx)(i.Z.Item,{label:t,children:(0,n.jsx)(o.Z,{min:r,max:l,value:a,onChange:e=>s(null!==e&&void 0!==e?e:l),style:{minWidth:"150px",width:"100%"},step:u})})}function m(e){let{label:t,value:a,onChange:s,className:r}=e;return(0,n.jsx)(i.Z.Item,{label:t,valuePropName:"checked",className:r,children:(0,n.jsx)(u.Z,{checked:a,onChange:s,size:"small"})})}var g=a(2999)},8027:(e,t,a)=>{a.d(t,{A:()=>l,X:()=>o});var s=a(2481),n=a(2748),r=a(2010),i=a(5850);function l(e,t){return async()=>{var a;console.log("%cQuerying ".concat(e,"/").concat(t," from firebase: ").concat((0,i.xE)()),"color: #f0f");const r=(0,s.JU)(n.RZ,"".concat(e,"/").concat(t));return null!==(a=(await(0,s.QT)(r)).data())&&void 0!==a?a:{}}}function o(e,t,a){return(0,r.a)({queryKey:["firebase",e,t],queryFn:l(e,t),...a})}},2233:(e,t,a)=>{a.d(t,{B:()=>l});var s=a(2481),n=a(2748),r=a(8556);function i(e,t,a){console.log("%cUpdating ".concat(e,"/").concat(t," from firebase"),"color: #f00");const r=(0,s.JU)(n.RZ,"".concat(e,"/").concat(t));return(0,s.r7)(r,a)}function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,r.D)({mutationFn:async a=>i(e,t,a),...a})}},9881:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Se});var s=a(3990),n=a(2128),r=a(1087);function i(){var e;const[t,a]=(0,r.lr)();return{view:null!==(e=t.get("view"))&&void 0!==e?e:"classifier",setView:e=>a({view:e}),addQueryParam:(e,s)=>{t.set(e,"".concat(s)),a(t)},removeQueryParam:e=>{t.delete(e),a(t)},searchParams:t}}var l=a(731),o=a(4031),u=a(2556),c=a(7305),d=a(4520),m=a(7128),g=a(1046),p=a(4747),h=a(763),b=a(2791),x=a(5850),j=a(3713),v=a(8027),E=a(5529),I=a(2233);const N={};var T=a(184);const y=(0,b.createContext)({getItem:()=>(0,x.VL)(),getItemAttributeValues:()=>(0,x.dK)(),isLoading:!0,error:null,hasResponseData:!1,isDirty:!1,jumpToItem:()=>{},activeItem:(0,x.VL)(),itemAttributeValues:(0,x.dK)(),onAttributeChange:()=>{},isSaving:!1,save:()=>{},attributesList:[],availableItemIds:[],addAttributesToUpdate:()=>{},addMultipleAttributesToUpdate:()=>{},prepareItemsAttributesFileForDownload:()=>({}),attributes:{}}),S=e=>{let{children:t}=e;const{getItem:a,getItemAttributeValues:s,availableItemIds:n,isLoading:r,error:i,isSaving:l,save:o,addAttributesToUpdate:u,isDirty:c,attributes:d,addMultipleAttributesToUpdate:m}=function(){var e;const{notification:t,message:a}=p.Z.useApp(),s=(0,j.NL)(),n=(0,E.N)("items"),r=(0,E.N)("items-attributes"),i=(0,E.N)("items-attribute-values"),l=(0,v.X)("data","itemsAttributeValues",{select:x.d_}),[o,u]=(0,b.useState)({}),c=(0,I.B)("data","itemsAttributeValues",{onSuccess:()=>{t.success({message:"itemsAttributeValues updated"}),s.refetchQueries({queryKey:["firebase","data","itemsAttributeValues"]}),u({})},onError:e=>{t.error({message:"itemsAttributeValues update failed",description:e.message})}}),d=(0,b.useMemo)((()=>{var e,t;return{...null!==(e=i.data)&&void 0!==e?e:{},...null!==(t=l.data)&&void 0!==t?t:{}}}),[i.data,l.data]),m=!(0,h.isEmpty)(o),g=l.data;return{availableItemIds:(0,b.useMemo)((()=>{var e;const t=null!==(e=n.data)&&void 0!==e?e:{};return(0,h.orderBy)(Object.keys(t).filter((e=>{var a,s;return(null!==(a=null===(s=t[e])||void 0===s?void 0:s.categories)&&void 0!==a?a:[]).includes("alien")})),(e=>Number(e)),"asc")}),[n.data]),getItem:e=>{var t,s;return null!==(t=null!==(s=n.data)&&void 0!==s?s:{})&&void 0!==t&&t[e]?n.data[e]:(e&&a.info("Item ".concat(e," not found in TDR. Creating a new item...")),(0,x.VL)({id:e}))},getItemAttributeValues:e=>{var t,a,s;const n=null!==(t=null===d||void 0===d?void 0:d[e])&&void 0!==t?t:{},r=null!==(a=o[e])&&void 0!==a?a:{};return(0,h.isEmpty)(n)&&(0,h.isEmpty)(r)?(N[e]=(0,x.dK)({id:e}),N[e]):(0,h.merge)(null!==(s=null===N||void 0===N?void 0:N[e])&&void 0!==s?s:{},n,r)},attributes:null!==(e=r.data)&&void 0!==e?e:{},isLoading:n.isLoading||r.isLoading||i.isLoading||l.isLoading,error:n.error||r.error||i.error||l.error,firebaseData:g,isSaving:c.isPending,save:()=>{c.mutate((0,x.aS)({...g,...o}))},addAttributesToUpdate:(e,t)=>{u((a=>({...a,[e]:{...t,updatedAt:Date.now()}})))},addMultipleAttributesToUpdate:e=>{u((t=>({...t,...(0,h.mapKeys)(e.map((e=>({...e,updatedAt:Date.now()}))),"id")})))},attributesToUpdate:o,isDirty:m}}(),{message:g}=p.Z.useApp(),[S,A]=(0,b.useState)((0,h.random)(0,n.length-1)),f=a(n[S]),C=s(f.id),Z=(0,b.useMemo)((()=>(0,h.orderBy)(Object.values(d),"name.en","asc")),[d]);return(0,T.jsx)(y.Provider,{value:{getItem:a,getItemAttributeValues:s,availableItemIds:n,isLoading:r,error:i,hasResponseData:n.length>0&&!(0,h.isEmpty)(d),isDirty:c,itemAttributeValues:C,jumpToItem:(e,t)=>{if("next"===e&&A((e=>(e+1)%n.length)),"previous"===e&&A((e=>(e-1+n.length)%n.length)),"random"===e&&A((0,h.random)(0,n.length-1)),"first"===e&&A(0),"last"===e&&A(n.length-1),"next10"===e&&A((e=>(e+10)%n.length)),"previous10"===e&&A((e=>(e-10+n.length)%n.length)),"goTo"===e&&void 0!==t){const e=n.indexOf(t);-1!==e?A(e):g.error("Item ".concat(t," is not available for attribution."))}},activeItem:f,onAttributeChange:(e,t)=>{u(f.id,{...C,attributes:{...C.attributes,[e]:t}})},isSaving:l,save:o,attributes:d,attributesList:Z,addAttributesToUpdate:u,addMultipleAttributesToUpdate:m,prepareItemsAttributesFileForDownload:()=>(0,x.Tj)(n.reduce(((e,t)=>{const a=s(t);return(0,h.isEmpty)(a.attributes)||(Object.keys(a.attributes).length===Z.length?a.complete=!0:delete a.complete,e[a.id]=a),e}),{}))},children:t})},A=()=>(0,b.useContext)(y);var f=a(4424),C=a(1431),Z=a(9501),w=a(8835),L=a(6591);const D=[{label:"Opposite",value:L.NL.OPPOSITE},{label:"Unrelated",value:L.NL.UNRELATED},{label:"Unclear",value:L.NL.UNCLEAR},{label:"Related",value:L.NL.RELATED},{label:"Deterministic",value:L.NL.DETERMINISTIC}],O=[{label:"Opposite",value:L.NL.OPPOSITE},{label:"Unrelated",value:L.NL.UNRELATED},{label:"Unclear",value:L.NL.UNCLEAR},{label:"Related",value:L.NL.RELATED},{label:"Deterministic",value:L.NL.DETERMINISTIC,disabled:!0}];function R(e){let{attribute:t,value:a,onChange:s,onlyButtons:n}=e;return t?n?(0,T.jsx)(f.ZP.Group,{options:t.limited?O:D,onChange:e=>{let{target:{value:a}}=e;return s(t.id,a)},value:a,optionType:"button",buttonStyle:"solid"}):(0,T.jsxs)("div",{className:"attribute-button-container__row",children:[(0,T.jsxs)("span",{className:"attribute-button-container__label",children:[t.name.en," ",(0,T.jsx)(C.Z,{title:t.description.en,children:(0,T.jsx)(Z.Z,{})})]}),(0,T.jsx)(f.ZP.Group,{options:t.limited?O:D,onChange:e=>{let{target:{value:a}}=e;return s(t.id,a)},value:a,optionType:"button",buttonStyle:"solid"}),(0,T.jsx)("span",{children:(0,T.jsx)(w.Z,{style:{color:a&&a>7?"green":"transparent"}})})]},t.id):(0,T.jsx)(T.Fragment,{})}var P=a(3733),U=a(6173),M=a(6020);function _(e){let{itemAttributeValues:t,attributes:a}=e;const{searchParams:s,addQueryParam:n}=i(),r="true"===s.get("showUnclear"),l="true"===s.get("showUnrelated"),o=(0,b.useMemo)((()=>(0,x.tt)((0,x.Mg)(t,a),r,l)),[t,a,r,l]),u="true"===s.get("signs")?k:V;return(0,T.jsxs)(d.Z,{gap:6,vertical:!0,children:[(0,T.jsx)(U.Do,{label:"Show Unrelated",value:"true"===s.get("showUnrelated"),onChange:e=>n("showUnrelated",e?"true":""),className:"full-width m-0"}),(0,T.jsx)(U.Do,{label:"Show Unclear",value:"true"===s.get("showUnclear"),onChange:e=>n("showUnclear",e?"true":""),className:"full-width m-0"}),(0,T.jsx)(U.Do,{label:"Alien Sings",value:"true"===s.get("signs"),onChange:e=>n("signs",e?"true":""),className:"full-width m-0"}),(0,T.jsx)(d.Z,{gap:6,wrap:"wrap",className:"item-attribute-value-statement",children:o.map(((e,t,s)=>(0,T.jsx)(u,{keyVariant:e,attributes:a,firstElement:0===t,lastElement:t===s.length-1},e)))})]})}function k(e){let{keyVariant:t,attributes:a,withText:s}=e;const{key:n,className:r,text:i}=(0,x.sB)(t);return(0,T.jsxs)(d.Z,{vertical:!0,align:"center",children:[(0,T.jsx)(M.o$,{width:50,id:a[n].spriteId,className:(0,P.Z)("item-attribute-alien-sign","item-attribute-alien-sign--".concat(r))}),s&&(0,T.jsxs)(d.Z,{wrap:"wrap",justify:"center",align:"center",style:{maxWidth:50,textAlign:"center",wordBreak:"break-word"},children:[i," ",a[n].name.en.toLowerCase()]})]})}function V(e){let{keyVariant:t,attributes:a,firstElement:s,lastElement:n}=e;const{key:r,text:i}=(0,x.sB)(t),l=s?"It's ":"",o=n?".":", ";return(0,T.jsxs)(T.Fragment,{children:[l,i," ",a[r].name.en.toLowerCase(),o]})}var z=a(1532),F=a(4587),G=a(952);function B(e){let{label:t,children:a}=e;return(0,T.jsxs)(o.Z.Text,{children:[t," ",(0,T.jsx)(G.Z,{children:a})]})}function Q(e){let{attributesList:t,itemAttributeValues:a}=e;const{completion:s,isDeterministic:n,value:r,isOpposing:i,relevancy:l}=(0,b.useMemo)((()=>{const e=t.length,s=Object.keys(a.attributes).length,n=Math.floor(s/e*100);let r=!1,i=!1,l=0;const o=Object.values(a.attributes).reduce(((e,t)=>t<=0?(t===L.NL.UNCLEAR&&(l+=1),t===L.NL.OPPOSITE&&(i=!0),e):(t===L.NL.DETERMINISTIC&&(r=!0),e+t)),0),u=Math.floor((s-l)/e*100);return{completion:n,isDeterministic:r,value:o,isOpposing:i,relevancy:u}}),[t,a.attributes]);return(0,T.jsxs)("div",{children:[(0,T.jsx)(o.Z.Text,{strong:!0,children:"Completion"}),(0,T.jsx)(F.Z,{percent:s,size:"small"}),(0,T.jsx)(o.Z.Text,{strong:!0,children:"Stats"}),(0,T.jsxs)(d.Z,{vertical:!0,children:[(0,T.jsx)(B,{label:"Deterministic",children:n?(0,T.jsx)(w.Z,{style:{color:"green"}}):(0,T.jsx)(z.Z,{style:{color:"red"}})}),(0,T.jsx)(B,{label:"Opposing",children:i?(0,T.jsx)(w.Z,{style:{color:"CornflowerBlue"}}):(0,T.jsx)(z.Z,{style:{color:"grey"}})}),(0,T.jsx)(B,{label:"Value",children:r}),(0,T.jsxs)(B,{label:"Reliability",children:[l,"%"]})]})]})}var q=a(8158);function W(){const{activeItem:e,attributesList:t,itemAttributeValues:a,onAttributeChange:s,jumpToItem:n,attributes:r}=A(),{searchParams:p,removeQueryParam:h}=i(),x=p.get("itemId");(0,b.useEffect)((()=>{x&&(h("itemId"),n("goTo",x))}),[x,n,h]);const j="unset"===p.get("scope"),v=(0,b.useMemo)((()=>j?t.filter((e=>!a.attributes[e.id])):t),[j,e.id]);return e?(0,T.jsx)(l.Z,{children:(0,T.jsxs)("div",{className:"item-attribution-card",children:[(0,T.jsx)(c.Z,{offsetTop:120,className:"item-attribution-card__item",children:(0,T.jsxs)(d.Z,{vertical:!0,gap:6,children:[(0,T.jsx)(q.xL,{item:e,width:150}),(0,T.jsx)(q.bN,{item:e}),(0,T.jsx)(q.CQ,{item:e,language:"en"}),(0,T.jsx)(q.CQ,{item:e,language:"pt"}),(0,T.jsx)(m.Z,{className:"my-2"}),(0,T.jsx)(Q,{attributesList:t,itemAttributeValues:a}),(0,T.jsx)(m.Z,{className:"my-2"}),(0,T.jsx)(o.Z.Text,{type:"secondary",children:(0,T.jsx)(_,{itemAttributeValues:a,attributes:r})})]})}),(0,T.jsx)(g.Z,{size:"small",direction:"vertical",className:"my-4 attribute-button-container",wrap:!0,children:v.map(((e,t)=>(0,T.jsx)(R,{attribute:e,value:a.attributes[e.id],onChange:s},e.id)))})]},"".concat(e.id))}):(0,T.jsx)(l.Z,{children:(0,T.jsxs)(o.Z.Text,{type:"secondary",children:["No item selected."," ",(0,T.jsx)(u.ZP,{size:"small",type:"primary",onClick:()=>n("random"),children:"Random Item"})]})})}var J=a(9228),H=a(9515),K=a(5812),X=a(5354),Y=a(7074),$=a(992),ee=a(6588),te=a(8178);function ae(){const{jumpToItem:e}=A();return(0,T.jsxs)(u.ZP.Group,{className:"my-4",children:[(0,T.jsx)(u.ZP,{onClick:()=>e("first"),icon:(0,T.jsx)(H.Z,{}),children:"First"}),(0,T.jsx)(u.ZP,{onClick:()=>e("previous10"),icon:(0,T.jsx)(K.Z,{}),children:"Previous 10"}),(0,T.jsx)(u.ZP,{onClick:()=>e("previous"),icon:(0,T.jsx)(X.Z,{}),children:"Previous"}),(0,T.jsxs)(u.ZP,{onClick:()=>e("next"),children:["Next ",(0,T.jsx)(Y.Z,{})]}),(0,T.jsxs)(u.ZP,{onClick:()=>e("next10"),children:["Next 10 ",(0,T.jsx)($.Z,{})]}),(0,T.jsxs)(u.ZP,{onClick:()=>e("last"),children:["Last ",(0,T.jsx)(ee.Z,{})]}),(0,T.jsx)(J.Z,{content:(0,T.jsx)(se,{}),title:"Title",children:(0,T.jsx)(u.ZP,{children:"Go To"})})]})}function se(){const{jumpToItem:e}=A();return(0,T.jsx)(te.i,{isPending:!1,onFinish:t=>e("goTo",t)})}var ne=a(4664);function re(){const{getItem:e,getItemAttributeValues:t}=A(),{sampleIds:a,attribute:s,onGetSample:n,updateAttributeValue:r}=function(){const{attributesList:e,availableItemIds:t,addAttributesToUpdate:a,getItemAttributeValues:s}=A(),{searchParams:n}=i(),[r,l]=(0,b.useState)([]),[o,u]=(0,b.useState)();return{sampleIds:r,attribute:o,onGetSample:()=>{var a,r,i,o;const c=null!==(a=null!==(r=n.get("attribute"))&&void 0!==r?r:null===(i=(0,h.sample)(e))||void 0===i?void 0:i.id)&&void 0!==a?a:"ali",d=null!==(o=e.find((e=>e.id===c)))&&void 0!==o?o:(0,h.sample)(e),m=Number(n.get("size"))||9,g=[],p=(0,h.shuffle)(t);for(let e=0;e<p.length&&g.length!==m;e++){const t=p[e];s(t).attributes[c]||g.push(t)}u(d),l(g)},updateAttributeValue:(e,t,n)=>{const r=s(e);a(e,{...r,attributes:{...r.attributes,[t]:n}})}}}();return(0,h.isEmpty)(a)&&(0,h.isEmpty)(s)?(0,T.jsx)(l.Z,{className:"my-4",children:(0,T.jsxs)(o.Z.Text,{type:"secondary",children:["No sample has been generated. Tweak options and"," ",(0,T.jsx)(u.ZP,{size:"small",type:"primary",onClick:n,children:"Get Sample"})]})}):(0,T.jsx)(l.Z,{className:"my-4",title:(0,T.jsx)(o.Z.Text,{children:null===s||void 0===s?void 0:s.name.en}),actions:[(0,T.jsx)(u.ZP,{type:"primary",block:!0,ghost:!0,onClick:n,children:"Get New Sample"})],extra:(0,T.jsx)(u.ZP,{type:"primary",size:"small",onClick:n,children:"Get New Sample"}),children:(0,T.jsx)(d.Z,{vertical:!0,gap:6,children:a.map((a=>{const n=t(a),i=e(a);return(0,T.jsxs)(b.Fragment,{children:[(0,T.jsxs)(d.Z,{gap:6,children:[(0,T.jsx)(q.xL,{item:i,width:75}),(0,T.jsxs)(d.Z,{vertical:!0,gap:6,children:[(0,T.jsxs)(d.Z,{gap:6,children:[(0,T.jsx)(q.bN,{item:i}),(0,T.jsx)(q.cw,{item:i})]}),(0,T.jsx)(q.CQ,{item:i,language:"en"}),(0,T.jsx)(q.CQ,{item:i,language:"pt"})]}),(0,T.jsx)(R,{attribute:s,value:n.attributes[s.id],onChange:(e,t)=>r(i.id,e,t)})]}),(0,T.jsx)(m.Z,{className:"my-1"})]},"".concat(a,"-").concat(n.updatedAt))}))})})}var ie=a(8528),le=a(1082),oe=a(8149);function ue(e){const[t,a]=(0,b.useState)(!1),s=()=>{a(window.pageYOffset>300)};return(0,b.useEffect)((()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)})),[]),(0,T.jsx)(u.ZP,{className:"go-to-top-button ".concat(t?"visible":""),onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},icon:(0,T.jsx)(oe.Z,{}),...e,children:"Go to Top"})}var ce=a(1503);function de(){const{getItem:e,getItemAttributeValues:t}=A(),{attribute:a,pageIds:s,group:n,updateAttributeValue:r,updatePageItemsAsUnrelated:c,pagination:m}=function(){var e,t,a,s;const{attributesList:n,addAttributesToUpdate:r,getItemAttributeValues:l,availableItemIds:o,addMultipleAttributesToUpdate:u}=A(),{searchParams:c,addQueryParam:d}=i(),m=null!==(e=c.get("attribute"))&&void 0!==e?e:"ali",g=null!==(t=c.get("scope"))&&void 0!==t?t:"unset",p=null!==(a=c.get("page"))&&void 0!==a?a:"1",x=null!==(s=c.get("pageSize"))&&void 0!==s?s:"12",[j,v]=(0,b.useState)("ali"),[E,I]=(0,b.useState)("unset"),N=(0,b.useMemo)((()=>{const e=o.map((e=>l(e))),t="unset"===g?void 0:L.NL[g.toUpperCase()],a=e.filter((e=>{var a;return(null===(a=e.attributes)||void 0===a?void 0:a[m])===t})).map((e=>e.id));return(0,h.orderBy)(a,[e=>{var t;return null===(t=l(e))||void 0===t?void 0:t.updatedAt},e=>Number(e)],["desc","asc"])}),[m,g]),T=(0,b.useMemo)((()=>{if(j!==m||E!==g)return v(m),I(g),d("page","1"),N.slice(0,Number(x));const e=(Number(p)-1)*Number(x),t=e+Number(x);return N.slice(e,t)}),[p,x,N]),y=n.find((e=>e.id===m));return{group:N,pageIds:T,attribute:y,updateAttributeValue:(e,t,a)=>{const s=l(e);r(e,{...s,attributes:{...s.attributes,[t]:a}})},updatePageItemsAsUnrelated:()=>{u(T.map((e=>{const t=l(e);return t.attributes[m]||(t.attributes[m]=L.NL.UNRELATED),t})))},pagination:{total:N.length,current:Number(p),pageSize:Number(x),onChange:e=>d("page",String(e)),onShowSizeChange:(e,t)=>d("pageSize",String(t)),pageSizeOptions:[12,24,48,96]}}}(),{searchParams:g}=i(),p=(0,ce.Z)("(max-width: 1024px)");if((0,h.isEmpty)(a))return(0,T.jsx)(l.Z,{className:"my-4",children:(0,T.jsx)(o.Z.Text,{type:"secondary",children:"No group attribute has been selected."})});const x=(0,T.jsx)(ie.Z,{onChange:m.onChange,current:m.current,total:m.total,pageSizeOptions:m.pageSizeOptions,pageSize:m.pageSize,onShowSizeChange:m.onShowSizeChange},"pagination"),j=("unset"===g.get("scope")||!g.get("scope"))&&(0,T.jsx)(le.Z,{title:"Are you sure everything is unrelated to ".concat(a.name.en,"?"),onConfirm:c,children:(0,T.jsx)(u.ZP,{type:"primary",danger:!0,disabled:0===s.length,children:"Unrelate Unset Items on Page"})},"unrelate-button");return(0,T.jsx)(l.Z,{className:"my-4",title:(0,T.jsxs)(o.Z.Text,{children:[null===a||void 0===a?void 0:a.name.en," (",n.length,")"]}),extra:x,actions:[j,(0,T.jsx)(ue,{},"go-to-top"),x].filter(Boolean),children:s.map((s=>{const n=t(s),i=e(s);return(0,T.jsx)(l.Z.Grid,{style:{width:p?"50%":"25%"},children:(0,T.jsxs)(d.Z,{gap:6,children:[(0,T.jsxs)(d.Z,{vertical:!0,gap:6,children:[(0,T.jsx)(q.xL,{item:i,width:75}),(0,T.jsx)(q.bN,{item:i}),(0,T.jsx)(q.cw,{item:i}),(0,T.jsx)(q.CQ,{item:i,language:"en"}),(0,T.jsx)(q.CQ,{item:i,language:"pt"})]}),(0,T.jsx)(R,{attribute:a,value:n.attributes[a.id],onlyButtons:!0,onChange:(e,t)=>r(i.id,e,t)})]})},"".concat(s,"-").concat(n.updatedAt))}))})}var me=a(2979);function ge(){const{attributes:e}=A(),{itemMessages:t,grouping:a}=function(){const{attributes:e,getItemAttributeValues:t,availableItemIds:a,getItem:s,isLoading:n}=A(),{searchParams:r}=i(),l="true"===r.get("showComplete"),o="true"===r.get("showUnclear"),u="true"===r.get("showUnrelated"),{itemMessages:c,itemMessagesDict:d,grouping:m}=(0,b.useMemo)((()=>{if(n)return{itemMessages:[],itemMessagesDict:{},grouping:{}};console.log("useItemsComparator");const r=(0,h.orderBy)(a.map((a=>{const n=t(a),r=(0,x.Mg)(n,e);return{item:s(a),itemAttributesValues:n,message:(0,x.tt)(r,o,u),fullMessage:r}})).filter((e=>{let{itemAttributesValues:t}=e;return!l||t.complete})),["message"],["asc"]),i=r.reduce(((e,t)=>{let{message:a,item:{id:s}}=t;const n=a.join(" ");return void 0===e[n]&&(e[n]=[]),e[n].push(s),e}),{}),c=Object.values(i).filter((e=>e.length>1));return c.length>0&&console.log("More than one",c),console.log(i),{itemMessages:r,itemMessagesDict:(0,h.keyBy)(r,"item.id"),grouping:i}}),[e,a,t,s,n,l,o,u]);return{itemMessages:c,itemMessagesDict:d,grouping:m}}(),s=[{title:"Item Id",dataIndex:"item",key:"id",render:e=>(0,T.jsxs)("div",{children:[(0,T.jsx)(q.bN,{item:e}),(0,T.jsx)(q.cw,{item:e})]}),sorter:(e,t)=>Number(e.item.id)-Number(t.item.id)},{title:"Sprite",dataIndex:"item",key:"sprite",render:e=>(0,T.jsx)(q.xL,{item:e,width:75})},{title:"Name",dataIndex:"item",key:"name",render:e=>(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(q.CQ,{item:e,language:"en"}),(0,T.jsx)(q.CQ,{item:e,language:"pt"})]}),sorter:(e,t)=>e.item.name.en.localeCompare(t.item.name.en)},{title:"Address",dataIndex:"message",key:"message",render:(t,a)=>{let{item:s}=a;return(0,T.jsx)(d.Z,{gap:6,children:t.map(((t,a,n)=>(0,T.jsx)(k,{keyVariant:t,attributes:e,firstElement:0===a,lastElement:a===n.length-1,withText:!0},"".concat(t,"-").concat(s.id))))})},sorter:(e,t)=>e.message.join(" ").localeCompare(t.message.join(" "))},{title:"Complete",dataIndex:"itemAttributesValues",key:"complete",render:e=>e.complete?"Yes":"No"},{title:"Identical",dataIndex:"message",key:"identical",render:e=>{var t;const s=null!==(t=a[e.join(" ")])&&void 0!==t?t:[];return(0,T.jsx)(T.Fragment,{children:s.length>1?s.length:""})},sorter:(e,t)=>{var s,n;const r=null!==(s=a[e.message.join(" ")])&&void 0!==s?s:[];return(null!==(n=a[t.message.join(" ")])&&void 0!==n?n:[]).length-r.length}}];return(0,T.jsxs)("div",{className:"my-4",children:[(0,T.jsx)(o.Z.Title,{level:5,children:"Item Comparator"}),(0,T.jsx)(me.Z,{dataSource:t,columns:s})]})}function pe(){const{view:e}=i();return"classifier"===e?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(ae,{}),(0,T.jsx)(W,{}),(0,T.jsx)(d.Z,{justify:"flex-end",className:"my-4",children:(0,T.jsx)(ue,{})})]}):"sampler"===e?(0,T.jsx)(re,{}):"grouping"===e?(0,T.jsx)(de,{}):"comparator"===e?(0,T.jsx)(ge,{}):(0,T.jsx)(ne.Z,{className:"my-10",description:"Unknown view has been selected"})}var he=a(7018),be=a(1958);function xe(){const{getItemAttributeValues:e,availableItemIds:t,attributesList:a}=A(),{total:s,complete:n,completionPercentage:r,hasDataCount:i,initiatedPercentage:l,progress:u,progressTotal:c,currentProgress:g}=(0,b.useMemo)((()=>{const s=t.length;let n=0,r=0,i=0;t.map((t=>e(t))).forEach((e=>{let{complete:t,attributes:s}=e;(0,h.isEmpty)(s)||(n+=1),Object.values(s).length===a.length&&(r+=1),i+=Object.values(s).length}));const l=Object.values(a).length*t.length;return{total:s,complete:r,completionPercentage:s>0?(r/s*100).toFixed(1):0,hasDataCount:n,initiatedPercentage:s>0?Math.floor(n/s*100):0,progress:(i/l*100).toFixed(1),currentProgress:i,progressTotal:l}}),[a,t,e]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(d.Z,{vertical:!0,children:[(0,T.jsx)(o.Z.Text,{strong:!0,className:"mb-2",children:"Items Stats"}),(0,T.jsx)(B,{label:"Total",children:s}),(0,T.jsxs)(B,{label:"Complete",children:[n," (",r,"%)"]}),(0,T.jsxs)(B,{label:"Initiated",children:[i," (",l,"%)"]}),(0,T.jsx)(o.Z.Text,{strong:!0,className:"mt-4 mb-2",children:"Attributes Stats"}),(0,T.jsx)(B,{label:"Total",children:c}),(0,T.jsx)(B,{label:"Set",children:g}),(0,T.jsxs)(B,{label:"Progress",children:[u,"%"]})]}),(0,T.jsx)(m.Z,{})]})}function je(){const{jumpToItem:e}=A(),{searchParams:t,addQueryParam:a}=i();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(u.ZP,{block:!0,onClick:()=>e("random"),type:"primary",children:"Random Item"}),(0,T.jsx)(U.Do,{label:"Unset Only",value:"unset"===t.get("scope"),onChange:e=>a("scope",e?"unset":""),className:"mt-4"})]})}function ve(){const{searchParams:e,addQueryParam:t}=i(),{attributesList:a}=A(),s=(0,b.useMemo)((()=>[{label:"Random Attribute",value:"random"},...a.map((e=>{let{id:t,name:a}=e;return{label:a.en,value:t}}))]),[a]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(U.zE,{label:"Sampler Attribute",value:e.get("attribute")||"random",onChange:e=>t("attribute",e),options:s}),(0,T.jsx)(U.xh,{label:"Sample Size",value:Number(e.get("size")||9),onChange:e=>t("size",String(e)),min:3,max:21,step:3})]})}function Ee(){const{searchParams:e,addQueryParam:t}=i(),{attributesList:a}=A(),s=(0,b.useMemo)((()=>a.map((e=>{let{id:t,name:a}=e;return{label:a.en,value:t}}))),[a]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(U.zE,{label:"Attribute",value:e.get("attribute")||"ali",onChange:e=>t("attribute",e),options:s}),(0,T.jsx)(U.zE,{label:"Scope",value:e.get("scope")||"unset",onChange:e=>t("scope",e),options:[{value:"unset",label:"Unset"},...L.Ud]}),(0,T.jsx)(U.zE,{label:"Results per page",value:e.get("pageSize")||12,onChange:e=>t("pageSize",e),options:[12,24,48,96]})]})}function Ie(){const{searchParams:e,addQueryParam:t}=i();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(U.Do,{label:"Only Complete",value:"true"===e.get("showComplete"),onChange:e=>t("showComplete",e?"true":""),className:"full-width m-0"}),(0,T.jsx)(U.Do,{label:"Show Unrelated",value:"true"===e.get("showUnrelated"),onChange:e=>t("showUnrelated",e?"true":""),className:"full-width m-0"}),(0,T.jsx)(U.Do,{label:"Show Unclear",value:"true"===e.get("showUnclear"),onChange:e=>t("showUnclear",e?"true":""),className:"full-width m-0"})]})}function Ne(){const{isDirty:e,save:t,prepareItemsAttributesFileForDownload:a}=A(),{view:s,setView:n}=i();return(0,T.jsxs)(be.Pd,{children:[(0,T.jsxs)(d.Z,{vertical:!0,gap:12,children:[(0,T.jsx)(u.ZP,{block:!0,danger:!0,type:"primary",disabled:!e,onClick:t,size:"large",children:"Save"}),(0,T.jsx)(he.o,{data:()=>a(),fileName:"items-attribute-values.json",disabled:e,block:!0})]}),(0,T.jsx)(m.Z,{}),(0,T.jsx)(xe,{}),(0,T.jsx)(U.zE,{label:"View",value:s,onChange:n,options:["classifier","sampler","grouping","comparator"]}),(0,T.jsx)(m.Z,{}),"classifier"===s&&(0,T.jsx)(je,{}),"sampler"===s&&(0,T.jsx)(ve,{}),"grouping"===s&&(0,T.jsx)(Ee,{}),"comparator"===s&&(0,T.jsx)(Ie,{})]})}var Te=a(4562);function ye(){const{isLoading:e,error:t,hasResponseData:a}=A();return(0,T.jsx)(be.Xg,{title:"Items",subtitle:"Attribution",children:(0,T.jsxs)(s.Z,{hasSider:!0,children:[(0,T.jsx)(Te.p,{children:(0,T.jsx)(Ne,{})}),(0,T.jsx)(s.Z.Content,{className:"content",children:(0,T.jsx)(n.T,{isLoading:e,error:t,hasResponseData:a,children:(0,T.jsx)(pe,{})})})]})})}const Se=function(){return(0,T.jsx)(S,{children:(0,T.jsx)(ye,{})})}},6591:(e,t,a)=>{a.d(t,{Hn:()=>g,NL:()=>p,S:()=>l,Ud:()=>b,VC:()=>d,ZI:()=>m,_9:()=>h,a2:()=>o,bs:()=>c,dX:()=>r,mj:()=>i,pZ:()=>u});var s=a(6020),n=a(763);const r=2,i={ADJECTIVES:"adjectives",ALIEN_ITEMS:"alien-items",ARTE_RUIM_CARDS:"arte-ruim-cards",ARTE_RUIM_GROUPS:"arte-ruim-groups",ARTE_RUIM_PAIRS:"arte-ruim-pairs",CATEGORIES:"categories",CHALLENGES:"challenges",CHARACTERS:"characters",CHOICES:"choices",CONCEPTS:"concepts",CONTENDERS:"contenders",CRIME_EVIDENCE:"crime-evidence",CRIME_TILES:"crime-tiles",CRIME_WEAPONS:"crime-weapons",DATING_CANDIDATE:"dating-candidate",DATING_CANDIDATE_BODIES:"dating-candidate-bodies",DATING_CANDIDATE_HEADS:"dating-candidate-heads",DIAGRAM_TOPICS:"diagram-topics",DILEMMAS:"dilemmas",DRAWING_WORDS:"drawing-words",GROUP_QUESTIONS:"group-questions",ITEMS_ATTRIBUTES:"items-attributes",MONSTER_ORIENTATION:"monster-orientation",MOVIE_REVIEWS:"movie-reviews",MOVIES:"movies",NAMING_PROMPTS:"naming-prompts",OBJECT_FEATURES:"object-features",QUANTITATIVE_QUESTIONS:"quantitative-questions",SCENARIOS:"scenarios",SPECTRUMS:"spectrums",SINGLE_WORDS:"single-words",SPY_LOCATIONS:"spy-locations",SPY_QUESTIONS:"spy-questions",SUSPECTS:"suspects",TESTIMONY_QUESTIONS:"testimony-questions",THEME_WORDS:"theme-words",THING_PROMPTS:"thing-prompts",THINGS_QUALITIES:"things-qualities",TOPICS:"topics",TREE_WORDS:"tree-words",TWEETS:"tweets"},l=[i.ALIEN_ITEMS,i.CONTENDERS,i.CRIME_EVIDENCE,i.CRIME_TILES,i.CRIME_WEAPONS,i.DATING_CANDIDATE_BODIES,i.DATING_CANDIDATE_HEADS,i.ITEMS_ATTRIBUTES,i.MONSTER_ORIENTATION,i.OBJECT_FEATURES,i.SUSPECTS],o=["pt","en"],u={adjectives:"text","arte-ruim-cards":"text","arte-ruim-groups":"theme","arte-ruim-pairs":"values",categories:"text",challenges:"text",characters:"text",contenders:"","crime-tiles":"","diagram-topics":"text","galeria-de-sonhos":"text","group-questions":"text","linhas-cruzadas":"text","naming-prompts":"text",spectrums:"","single-words":"text","spy-locations":"","spy-questions":"","testimony-questions":"question","thing-prompts":"text",topics:"text"},c=(0,n.keyBy)([{key:"alien-signs",name:"Alien Signs",prefix:"sign",quantity:38,startAt:0,component:s.o$},{key:"emojis",name:"Emojis",prefix:"emoji",quantity:30,startAt:1,component:s.dy},{key:"glyphs",name:"Glyphs",prefix:"glyph",quantity:365,startAt:1,component:s.rZ}],"key"),d=[{label:"Any",value:""},{label:"= 0",value:0},{label:"< 3",value:3},{label:"< 5",value:5},{label:"< 10",value:10}],m=[{label:"9",value:9},{label:"15",value:15},{label:"30",value:30},{label:"50",value:50},{label:"100",value:100}],g=[{label:"Small",value:100},{label:"Medium",value:150},{label:"Large",value:200},{label:"X-Large",value:250}],p={OPPOSITE:-10,UNRELATED:-3,UNCLEAR:-1,RELATED:5,DETERMINISTIC:10},h=((0,n.invert)(p),{OPPOSITE:"^",UNRELATED:"!",UNCLEAR:"~",RELATED:"",DETERMINISTIC:"+"}),b=Object.keys(p).map((e=>({value:e.toLowerCase(),label:(0,n.capitalize)(e)})))},5850:(e,t,a)=>{a.d(t,{Kn:()=>u,Mg:()=>j,R1:()=>c,Tj:()=>m,VL:()=>b,ZN:()=>d,aS:()=>p,bU:()=>l,dK:()=>x,d_:()=>g,sB:()=>v,tt:()=>E,xE:()=>h,zJ:()=>o});var s=a(763),n=a(6591),r=a(1291),i=a.n(r);function l(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";const a={},s={};return Object.values(e).forEach((e=>{e[t]||console.error("Property ".concat(t," does not exist in ").concat(e));const n=l(e[t].toLowerCase());a[n]?(void 0===s[n]&&(s[n]=[a[n].id]),s[n].push(e.id)):a[n]=e})),s},u=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";const s={},r=l(e.trim().toLowerCase());return!r||r.length<n.dX?{}:(Object.values(t).forEach((t=>{const n="string"===typeof t[a]?t[a]:JSON.stringify(t[a]),o=l(n.toLowerCase());(o.includes(r)||i().compareTwoStrings(e,o)>.5)&&(s[t.id]=n)})),s)},c=e=>Array.from(new Set(e));function d(e,t){const a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=document.createElement("a");s.href=window.URL.createObjectURL(a),s.download=t,s.click(),window.URL.revokeObjectURL(s.href)}const m=e=>function e(t){if((0,s.isObject)(t)&&!Array.isArray(t)){const a=Object.keys(t).filter((e=>["id","name","title","type"].includes(e))).concat(Object.keys(t).filter((e=>!["id","name","title","type"].includes(e))).sort());return(0,s.chain)(t).toPairs().sortBy((e=>{let[t,s]=e;return a.indexOf(t)})).map((t=>{let[a,s]=t;return[a,e(s)]})).fromPairs().value()}return t}(e),g=e=>Object.keys(e).reduce(((t,a)=>(t[a]=JSON.parse(e[a]),t)),{}),p=e=>Object.keys(e).reduce(((t,a)=>(t[a]=JSON.stringify(e[a]),t)),{}),h=()=>{const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");return"".concat(t,"/").concat(a,"/").concat(s," ").concat(n,":").concat(r)},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.cloneDeep)((0,s.merge)({id:"",name:{en:"",pt:""},groups:[],attributes:{}},e))},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.cloneDeep)((0,s.merge)({id:"",attributes:{}},e))},j=(e,t)=>{const a=(0,s.orderBy)(Object.values(t),["priority","id"],["asc","asc"]).map((e=>e.id));function r(e,t){return(0,s.orderBy)(e,(e=>a.indexOf(e)),["asc"]).map((e=>"".concat(t).concat(e)))}let i=[],l=[],o=[],u=[],c=[];return Object.entries(e.attributes).forEach((e=>{let[a,s]=e;if(t[a])switch(s){case n.NL.OPPOSITE:i.push(a);break;case n.NL.DETERMINISTIC:l.push(a);break;case n.NL.RELATED:o.push(a);break;case n.NL.UNRELATED:u.push(a);break;case n.NL.UNCLEAR:default:c.push(a)}})),[...r(i,n._9.OPPOSITE),...r(l,n._9.DETERMINISTIC),...r(o,n._9.RELATED),...r(u,n._9.UNRELATED),...r(c,n._9.UNCLEAR)]},v=(0,s.memoize)((e=>{if(3===e.length)return{key:e,className:"",text:""};const t=e[0];return{key:e.slice(1,4),className:{[n._9.DETERMINISTIC]:"deterministic",[n._9.UNRELATED]:"unrelated",[n._9.UNCLEAR]:"unclear",[n._9.OPPOSITE]:"opposite"}[t],text:{[n._9.DETERMINISTIC]:"very",[n._9.UNRELATED]:"not",[n._9.UNCLEAR]:"maybe",[n._9.OPPOSITE]:"very not"}[t]}})),E=(e,t,a)=>e.filter((e=>!(!t&&e.includes(n._9.UNCLEAR))&&!(!a&&e.includes(n._9.UNRELATED))))}}]);
//# sourceMappingURL=ItemsAttribution.af0352e1.chunk.js.map