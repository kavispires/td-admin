{"version":3,"file":"static/js/SingleWordsExpander.56f137f7.chunk.js","mappings":"qSAgBA,MAAM,KAAEA,GAASC,EAAAA,EA2HjB,QAzHA,YAEEC,EAAAA,EAAAA,GAAe,CAAEC,aAAcC,EAAAA,GAAAA,aAA6BC,SAAU,OAEtE,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,CAAC,IAC/BC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,CAAC,IACvCG,EAAWC,IAAgBJ,EAAAA,EAAAA,UAAmC,CAAC,GAChEK,EAAW,QAEX,SAAER,EAAF,UAAYS,EAAZ,MAAuBC,EAAvB,gBAA8BC,EAA9B,SAA+CC,IAAaC,EAAAA,EAAAA,GAAiB,CACjFd,EAAAA,GAAAA,eA2DF,OAxDAe,EAAAA,EAAAA,YAAU,KACR,GAAIF,EAAU,CACZ,MAAMG,EAA2B,CAAC,EAC5BC,EAAkC,CAAC,EACnCC,EAAWC,OAAOC,OAAOP,GAC5BQ,QAAQC,IACP,MAAMC,GAAeC,EAAAA,EAAAA,IAAoBF,EAAMG,MAAMC,cACrD,OAAIV,EAAMO,IACRN,EAAcK,EAAMK,IAAML,EAAMG,MACzB,IAETT,EAAMO,IAAgB,GACf,EAAP,IAEDK,KAAI,CAACC,EAAaC,KAAd,IACAD,EACHF,GAAG,MAAD,OAAQG,EAAI,EAAZ,YAAiB7B,OAEpB8B,QAAO,CAACC,EAA+BV,KACtCU,EAAIV,EAAMK,IAAML,EACTU,IACN,CAAC,GAENxB,EAAaU,GAEbZ,EAAcW,GACdd,EAAUe,EACX,IACA,CAACL,EAAUZ,KA6BZ,SAAC,KAAD,CAAYgC,MAAM,uBAAuBC,SAAUC,QAAQlC,GAAR,UAAuBA,GAAa,GAAvF,UACE,UAAC,IAAD,CAAQmC,UAAQ,EAAhB,WACE,UAAC,IAAD,YACE,SAAC,KAAD,CAAexB,gBAAiBA,EAAiBF,UAAWA,EAAWC,MAAOA,KAC9E,SAAC,IAAD,CAA0B0B,cAAe,CAACrC,EAAAA,GAAAA,oBAG5C,SAAC,YAAD,CAAgBsC,UAAU,UAA1B,UACE,SAAC,IAAD,CAAoB5B,UAAWA,EAAWC,MAAOA,EAAOC,gBAAiBA,EAAzE,UACE,iBAAK0B,UAAU,mBAAf,WACE,iBAAKA,UAAU,cAAf,WACE,SAAC,IAAD,8BAEA,SAAC,aAAD,CAAgBC,KAAK,QAAQZ,GAAG,GAAGa,KAAM,GAAIC,KAAM,EAAGC,SAxC7Cb,IACrB,MAAM,MAAEc,GAAUd,EAAEe,OACdC,EAAcF,EAAMG,MAAM,MAC1BC,EAAY5B,OAAOC,OAAOb,GAC1ByC,EAASC,OAAOF,EAAUA,EAAUG,OAAS,GAAGvB,GAAGmB,MAAM,KAAK,KAAO,EAErEK,EAASN,EAAYd,QACzB,CAACC,EAA+BP,EAAc2B,KAE5C,MAAMC,EAAcC,EAAiB7B,EAAMZ,EAAUJ,GAErD,GAAIgB,IAAS4B,EAAa,CACxB,MAAME,EAAK,aAASP,EAASI,EAAQ,EAA1B,YAA+BnD,GAC1C+B,EAAIuB,GAAS,CACX5B,GAAI4B,EACJ9B,KAAMA,EAAKC,cAEd,CACD,OAAOM,CAAP,GAEF,IAAKzB,IAGPJ,EAAUgD,EAAV,KAmBY,UAAC,IAAD,sBAAuBhC,OAAOqC,KAAKtD,GAAQgD,OAA3C,QACA,SAAC,aAAD,CACEX,KAAK,SACLZ,GAAG,GACHa,KAAM,GACNC,KAAM,GACNgB,UAAQ,EACRd,MAAOe,KAAKC,UAAUzD,EAAQ,KAAM,MAGtC,UAAC,IAAD,0BAA2BiB,OAAOqC,KAAKnD,GAAY6C,OAAnD,QACA,SAAC,aAAD,CACEX,KAAK,aACLZ,GAAG,GACHa,KAAM,GACNC,KAAM,EACNgB,UAAQ,EACRd,MAAOe,KAAKC,UAAUtD,EAAY,KAAM,SAI5C,mBAAOiC,UAAU,kBAAjB,WACE,SAAC,IAAD,wBACA,UAAC1C,EAAD,WACGuB,OAAOqC,KAAP,OAAY3C,QAAZ,IAAYA,EAAAA,EAAY,CAAC,GAAGqC,OAD/B,cACkD/B,OAAOqC,KAAP,OAAYjD,QAAZ,IAAYA,EAAAA,EAAa,CAAC,GAAG2C,WAE/E,SAAC,IAAD,CAAkBrC,SAAUA,EAAUJ,SAAUA,kBAQ/D,EAIK6C,EAAmB,CAACX,EAAe9B,EAAuBJ,KAC9D,MAAMmD,GAAMpC,EAAAA,EAAAA,IAAoBmB,EAAMkB,OAAOnC,eAC7C,GAAIkC,EAAIV,OAASY,EAAAA,GAAkB,CACjC,MAAMC,GAAUC,EAAAA,EAAAA,IAAYJ,EAAK/C,EAAUJ,GAE3C,OAAOU,OAAOC,OAAO2C,GAASE,MAAMpC,IAAML,EAAAA,EAAAA,IAAoBK,KAAO+B,GACtE,CAED,OAAO,CAAP,C,yDCnJF,QADsB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,6SAAiT,KAAQ,UAAW,MAAS,Y,cCMteM,EAAkB,SAAyBC,EAAOC,GACpD,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,GAAS,CAAC,EAAGJ,EAAO,CACpEC,IAAKA,EACLI,KAAMC,IAET,EAOD,QAJ2BJ,EAAAA,WAAiBH,E","sources":["pages/SingleWordsExpander.tsx","../node_modules/@ant-design/icons-svg/es/asn/WarningOutlined.js","../node_modules/@ant-design/icons/es/icons/WarningOutlined.js"],"sourcesContent":["import { Input, Layout, Typography } from 'antd';\nimport { SectionTitle } from 'components/Common/SectionTitle';\nimport { PageLayout } from 'components/Layout';\nimport { PageSider } from 'components/Layout/PageSider';\nimport { ResponseState } from 'components/Common';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport { useEffect, useState } from 'react';\nimport { TextCard } from 'types';\n\nimport { DataLoadingWrapper } from '../components/DataLoadingWrapper';\nimport { ResourceSelectionFilters } from '../components/Resource/ResourceSelectionFilters';\nimport { SearchDuplicates } from '../components/SearchDuplicates';\nimport { useResourceState } from '../hooks/useResourceState';\nimport { findSimilar, stringRemoveAccents } from '../utils';\nimport { RESOURCE_NAMES, SEARCH_THRESHOLD } from '../utils/constants';\n\nconst { Text } = Typography;\n\nfunction SingleWordsExpander() {\n  // Set default query params\n  useQueryParams({ resourceName: RESOURCE_NAMES.SINGLE_WORDS, language: 'pt' });\n\n  const [output, setOutput] = useState({});\n  const [duplicates, setDuplicates] = useState({});\n  const [reference, setReference] = useState<Record<CardId, TextCard>>({});\n  const property = 'text';\n\n  const { language, isLoading, error, hasResponseData, response } = useResourceState([\n    RESOURCE_NAMES.SINGLE_WORDS,\n  ]);\n\n  useEffect(() => {\n    if (response) {\n      const cache: BooleanDictionary = {};\n      const newDuplicates: StringDictionary = {};\n      const selected = Object.values(response as Record<CardId, TextCard>)\n        .filter((entry) => {\n          const parsedString = stringRemoveAccents(entry.text).toLowerCase();\n          if (cache[parsedString]) {\n            newDuplicates[entry.id] = entry.text;\n            return false;\n          }\n          cache[parsedString] = true;\n          return true;\n        })\n        .map((e: TextCard, i) => ({\n          ...e,\n          id: `sw-${i + 1}-${language}`,\n        }))\n        .reduce((acc: Record<CardId, TextCard>, entry) => {\n          acc[entry.id] = entry;\n          return acc;\n        }, {});\n\n      setReference(selected);\n\n      setDuplicates(newDuplicates);\n      setOutput(selected);\n    }\n  }, [response, language]);\n\n  const onInputChange = (e: any) => {\n    const { value } = e.target;\n    const parsedInput = value.split('\\n');\n    const dataArray = Object.values(reference);\n    const lastId = Number(dataArray[dataArray.length - 1].id.split('-')[1]) || 1;\n\n    const result = parsedInput.reduce(\n      (acc: Record<CardId, TextCard>, text: string, index: number) => {\n        // Check if it is duplicate\n        const isDuplicate = isExactDuplicate(text, response, property);\n\n        if (text && !isDuplicate) {\n          const newId = `sw-${lastId + index + 1}-${language}`;\n          acc[newId] = {\n            id: newId,\n            text: text.toLowerCase(),\n          };\n        }\n        return acc;\n      },\n      { ...reference }\n    );\n\n    setOutput(result);\n  };\n\n  return (\n    <PageLayout title=\"Single Word Expander\" subtitle={Boolean(language) ? `${language}` : ''}>\n      <Layout hasSider>\n        <PageSider>\n          <ResponseState hasResponseData={hasResponseData} isLoading={isLoading} error={error} />\n          <ResourceSelectionFilters resourceNames={[RESOURCE_NAMES.SINGLE_WORDS]} />\n        </PageSider>\n\n        <Layout.Content className=\"content\">\n          <DataLoadingWrapper isLoading={isLoading} error={error} hasResponseData={hasResponseData}>\n            <div className=\"parser-container\">\n              <div className=\"parser-main\">\n                <SectionTitle>Input New Data</SectionTitle>\n\n                <Input.TextArea name=\"input\" id=\"\" cols={15} rows={5} onChange={onInputChange} />\n\n                <SectionTitle>Output ({Object.keys(output).length})</SectionTitle>\n                <Input.TextArea\n                  name=\"output\"\n                  id=\"\"\n                  cols={15}\n                  rows={13}\n                  readOnly\n                  value={JSON.stringify(output, null, 4)}\n                />\n\n                <SectionTitle>Duplicates ({Object.keys(duplicates).length})</SectionTitle>\n                <Input.TextArea\n                  name=\"duplicates\"\n                  id=\"\"\n                  cols={15}\n                  rows={3}\n                  readOnly\n                  value={JSON.stringify(duplicates, null, 4)}\n                />\n              </div>\n\n              <aside className=\"parser-controls\">\n                <SectionTitle>Database</SectionTitle>\n                <Text>\n                  {Object.keys(response ?? {}).length} entries / {Object.keys(reference ?? {}).length}\n                </Text>\n                <SearchDuplicates response={response} property={property} />\n              </aside>\n            </div>\n          </DataLoadingWrapper>\n        </Layout.Content>\n      </Layout>\n    </PageLayout>\n  );\n}\n\nexport default SingleWordsExpander;\n\nconst isExactDuplicate = (value: string, response: PlainObject, property: string) => {\n  const str = stringRemoveAccents(value.trim().toLowerCase());\n  if (str.length > SEARCH_THRESHOLD) {\n    const similar = findSimilar(str, response, property);\n\n    return Object.values(similar).some((e) => stringRemoveAccents(e) === str);\n  }\n\n  return false;\n};\n","// This icon file is generated automatically.\nvar WarningOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z\" } }] }, \"name\": \"warning\", \"theme\": \"outlined\" };\nexport default WarningOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport WarningOutlinedSvg from \"@ant-design/icons-svg/es/asn/WarningOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar WarningOutlined = function WarningOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: WarningOutlinedSvg\n  }));\n};\n\n/**![warning](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ2NCA3MjBhNDggNDggMCAxMDk2IDAgNDggNDggMCAxMC05NiAwem0xNi0zMDR2MTg0YzAgNC40IDMuNiA4IDggOGg0OGM0LjQgMCA4LTMuNiA4LThWNDE2YzAtNC40LTMuNi04LTgtOGgtNDhjLTQuNCAwLTggMy42LTggOHptNDc1LjcgNDQwbC00MTYtNzIwYy02LjItMTAuNy0xNi45LTE2LTI3LjctMTZzLTIxLjYgNS4zLTI3LjcgMTZsLTQxNiA3MjBDNTYgODc3LjQgNzEuNCA5MDQgOTYgOTA0aDgzMmMyNC42IDAgNDAtMjYuNiAyNy43LTQ4em0tNzgzLjUtMjcuOUw1MTIgMjM5LjlsMzM5LjggNTg4LjJIMTcyLjJ6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(WarningOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'WarningOutlined';\n}\nexport default RefIcon;"],"names":["Text","Typography","useQueryParams","resourceName","RESOURCE_NAMES","language","output","setOutput","useState","duplicates","setDuplicates","reference","setReference","property","isLoading","error","hasResponseData","response","useResourceState","useEffect","cache","newDuplicates","selected","Object","values","filter","entry","parsedString","stringRemoveAccents","text","toLowerCase","id","map","e","i","reduce","acc","title","subtitle","Boolean","hasSider","resourceNames","className","name","cols","rows","onChange","value","target","parsedInput","split","dataArray","lastId","Number","length","result","index","isDuplicate","isExactDuplicate","newId","keys","readOnly","JSON","stringify","str","trim","SEARCH_THRESHOLD","similar","findSimilar","some","WarningOutlined","props","ref","React","AntdIcon","_extends","icon","WarningOutlinedSvg"],"sourceRoot":""}