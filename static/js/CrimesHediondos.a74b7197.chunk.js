"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[1886],{3164:(e,t,n)=>{n.d(t,{__:()=>m,aW:()=>x,js:()=>f,s4:()=>y});var a=n(1413),o=n(4925),r=n(8955),s=n(5458),l=n(6178),i=n(7515),c=n(5922),d=n(7134),u=n(1310),p=n(184);const v=["strong"],h=["value","language"],g=["value"];function m(e){let{strong:t}=e,n=(0,o.Z)(e,v);return(0,p.jsx)(l.Z.Text,(0,a.Z)({strong:null===t||void 0===t||t},n))}function x(e){let{value:t,language:n}=e,r=(0,o.Z)(e,h);return(0,p.jsx)(i.Z,(0,a.Z)({prefix:(0,p.jsx)(u.H,{language:n,width:"1em"}),placeholder:"Value in ".concat(n.toUpperCase()),defaultValue:t[n],size:"small"},r))}function f(e){let{value:t}=e,n=(0,o.Z)(e,g);return(0,p.jsx)(c.Z,(0,a.Z)({checked:t,checkedChildren:(0,p.jsx)(r.Z,{style:{color:"hotpink"}})},n))}function y(e){let{value:t,nsfw:n}=e;const a=(0,d._)();return(0,p.jsx)("span",{children:(0,p.jsx)(i.Z,{prefix:n?(0,p.jsx)(r.Z,{style:{color:"hotPink"}}):(0,p.jsx)(s.Z,{}),placeholder:"Id",variant:"borderless",size:"small",value:t,readOnly:!0,onClick:()=>a(t)})})}},9961:(e,t,n)=>{n.d(t,{m:()=>d});var a=n(1413),o=n(4925),r=n(9475),s=n(3414),l=n(7134),i=n(184);const c=["content","shape","icon","size"];function d(e){let{content:t,shape:n,icon:d,size:u}=e,p=(0,o.Z)(e,c);const v=(0,l._)();return(0,i.jsx)(r.ZP,(0,a.Z)({shape:null!==n&&void 0!==n?n:"circle",icon:null!==d&&void 0!==d?d:(0,i.jsx)(s.Z,{}),size:null!==u&&void 0!==u?u:"small",onClick:()=>v(t)},p))}},4341:(e,t,n)=>{n.d(t,{M:()=>l});var a=n(1413),o=n(4925),r=n(2791);const s=["maxExpandedRows","rowExpandable","defaultExpandAllRows"];function l(e){let{maxExpandedRows:t,rowExpandable:n,defaultExpandAllRows:l}=e,i=(0,o.Z)(e,s);const[c,d]=(0,r.useState)([]);return(0,a.Z)({expandedRowKeys:c,rowExpandable:null!==n&&void 0!==n?n:()=>!0,defaultExpandAllRows:null!==l&&void 0!==l&&l,onExpand:(e,n)=>{const a=[...c];if(!e)return d(a.filter((e=>e!==n.id)));if(t){for(;a.length>=t;)a.shift();a.push(n.id),d(a)}}},i)}},548:(e,t,n)=>{n.d(t,{P:()=>o});var a=n(4766);function o(e){var t,n;let{prefix:o="",defaultCurrent:r=1,defaultPageSize:s=10,pageSizeOptions:l=[10,20,50,100],total:i,showQuickJumper:c}=e;const{queryParams:d,addParam:u}=(0,a.K)();return{current:Number(null!==(t=d.get("".concat(o,"page")))&&void 0!==t?t:String(r)),pageSize:Number(null!==(n=d.get("".concat(o,"pageSize")))&&void 0!==n?n:String(s)),onChange:e=>{u("".concat(o,"page"),e.toString(),String(r))},onShowSizeChange:(e,t)=>{u("".concat(o,"pageSize"),t.toString(),String(s))},defaultCurrent:r,defaultPageSize:s,pageSizeOptions:l,total:i,hideOnSinglePage:!0,showQuickJumper:c}}},8925:(e,t,n)=>{n.r(t),n.d(t,{default:()=>le});var a=n(1790),o=n(4766),r=n(763),s=n(2791),l=n(7515),i=n(1046),c=n(5625),d=n(952),u=n(9475),p=n(3164),v=n(9961),h=n(7134),g=n(4341),m=n(548),x=n(7557),f=n(5850),y=n(906),b=n(4520),j=n(184);function C(e){let{allTags:t,onSelect:n}=e;return(0,j.jsx)(y.Z,{showSearch:!0,mode:"tags",placeholder:"Add new tag",options:t,style:{width:"200px"},autoClearSearchValue:!0,maxCount:1,onSelect:n,allowClear:!0,defaultActiveFirstOption:!1,size:"small"})}function Z(e){let{onSelect:t}=e;const[n,a]=(0,s.useState)([]);return(0,j.jsxs)(b.Z,{gap:6,children:[(0,j.jsx)(y.Z,{showSearch:!0,mode:"tags",placeholder:"Add new tag",options:[],style:{width:"200px"},autoClearSearchValue:!0,allowClear:!0,value:n,onChange:a,tokenSeparators:[","],onClear:()=>a([]),defaultActiveFirstOption:!1,size:"small"}),(0,j.jsx)(u.ZP,{onClick:()=>{t(n.map((e=>e.trim().toLowerCase()))),a([])},disabled:0===n.length,children:"Add"})]})}function w(e){let{card:t,allTags:n,onUpdateCard:a}=e;const o=e=>{var n;const o=(0,r.cloneDeep)(t);var s,l;null!==(n=o.tags)&&void 0!==n&&n.includes(e)?o.tags=null===(s=o.tags)||void 0===s?void 0:s.filter((t=>t!==e)):o.tags=(0,f.R1)([...null!==(l=o.tags)&&void 0!==l?l:[],e]).sort();a(o)};return(0,j.jsxs)(i.Z,{wrap:!0,children:[(0,j.jsxs)(i.Z,{size:"small",children:["New tag:",(0,j.jsx)(C,{allTags:n,onSelect:o})]}),(0,j.jsxs)(i.Z,{size:"small",children:["All multiple tags:",(0,j.jsx)(Z,{allTags:n,onSelect:e=>{var n;const o=(0,r.cloneDeep)(t);o.tags=(0,f.R1)([...null!==(n=o.tags)&&void 0!==n?n:[],...e]).sort(),a(o)}})]}),(0,j.jsx)("ul",{className:"all-tags",children:n.map((e=>{var n;let{value:a,count:r}=e;return(0,j.jsxs)(d.Z,{color:null!==(n=t.tags)&&void 0!==n&&n.includes(a)?"yellow":void 0,className:"all-tags__tag",onClick:()=>o(a),children:[a," (",r,")"]},"all-tags-".concat(a))}))})]})}var k=n(9228),S=n(3733),E=n(2997);function O(e){let{item:t,cardWidth:n,activeColor:a,isSelected:o=!1,className:r=""}=e;return t.itemId?(0,j.jsxs)("div",{className:(0,S.Z)("crime-item-card",o&&"crime-item-card--selected",r),style:a&&o?{borderColor:"black",backgroundColor:a}:{},children:[(0,j.jsx)(k.Z,{content:(0,j.jsxs)(j.Fragment,{children:[t.name.pt," | ",t.name.en]}),children:(0,j.jsx)(d.Z,{className:"crime-item-card__name",color:"weapon"===t.type?"geekblue":"volcano",style:{maxWidth:"".concat(n,"px")},children:(0,j.jsx)("span",{children:t.name.en})})}),(0,j.jsx)("div",{className:(0,S.Z)("crime-item-card__item-container","crime-item-card__item-container--".concat(t.type)),children:(0,j.jsx)(E.ck,{id:t.itemId,width:.85*n,className:"crime-item-card__item"})})]}):(0,j.jsx)(j.Fragment,{children:t.id})}function N(e){let{rows:t,allTags:n,onUpdateCard:a}=e;const o=(0,h._)(),s=(0,m.P)({total:t.length,showQuickJumper:!0}),f=(e,t,n)=>{const o=(0,r.cloneDeep)(n);o.name[t]=e,a(o)},y=[{title:"Id",dataIndex:"id",key:"id",render:e=>(0,j.jsxs)("span",{children:[e,(0,j.jsx)(v.m,{content:e})]}),sorter:(e,t)=>e.id.localeCompare(t.id)},{title:"Card",dataIndex:"itemId",key:"itemId",render:(e,t)=>(0,j.jsxs)("div",{children:[(0,j.jsx)(O,{item:t,cardWidth:70}),(0,j.jsx)(l.Z,{defaultValue:t.itemId,size:"small",onBlur:e=>{var n,o,s;if(console.log(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value),console.log("onBlur"),null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&o.value&&(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)!==t.itemId){var l;const n=(0,r.cloneDeep)(t);n.itemId=null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value,a(n)}}})]})},{title:"Name",dataIndex:"name",key:"name",sorter:(e,t)=>e.name.en.localeCompare(t.name.en),render:(e,t)=>(0,j.jsxs)(i.Z,{direction:"vertical",style:{minWidth:150},children:[(0,j.jsx)(p.aW,{value:e,language:"en",onPressEnter:e=>{var n;return f((null===(n=e.target)||void 0===n?void 0:n.value)||t.name.en,"en",t)}}),(0,j.jsx)(p.aW,{value:e,language:"pt",onPressEnter:e=>{var n;return f((null===(n=e.target)||void 0===n?void 0:n.value)||t.name.pt,"pt",t)}})]})},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,j.jsx)("span",{children:e}),sorter:(e,t)=>e.type.localeCompare(t.type)},c.Z.EXPAND_COLUMN,{title:"Tags",dataIndex:"tags",key:"tags",render:e=>(0,j.jsx)(i.Z,{size:"small",wrap:!0,children:e.map((e=>(0,j.jsx)(d.Z,{children:e},e)))})},{title:"Verify",dataIndex:"tags",key:"verify",render:e=>e.length>2?(0,j.jsx)(x.Z,{}):""}],b=(0,g.M)({maxExpandedRows:1,expandedRowRender:e=>(0,j.jsx)(w,{card:e,allTags:n,onUpdateCard:a})});return(0,j.jsxs)("div",{className:"my-4",children:[(0,j.jsxs)(i.Z,{className:"mb-4",children:[(0,j.jsx)(u.ZP,{onClick:()=>{o(n.map((e=>e.value)).join(", "))},children:"Copy AllTags"}),(0,j.jsx)(u.ZP,{onClick:()=>{if(s){const{current:e=1,pageSize:n=10}=s,a=t.slice((e-1)*n,e*n),r=[];a.forEach(((e,t)=>{var n;r.push("".concat(t+1,") ").concat(e.name.en," - Current tags: ").concat((null!==(n=e.tags)&&void 0!==n?n:[]).join(", ")))})),console.log(r),o(r.join("\n"))}},children:"Copy Page Cards"})]}),(0,j.jsx)(c.Z,{columns:y,dataSource:t,rowKey:"id",expandable:b,pagination:s})]})}var z=n(6178),P=n(4747),T=n(732),I=n(1752),D=n(2675);function R(e){var t;let{sceneQuery:n,allTags:a,objects:o}=e;const r=(0,h._)(),s=Object.values(null!==(t=n.data)&&void 0!==t?t:[]),l=(0,m.P)({total:s.length,showQuickJumper:!0}),x=[{title:"Id",dataIndex:"id",key:"id",render:e=>(0,j.jsxs)("span",{children:[e,(0,j.jsx)(v.m,{content:e})]}),sorter:(e,t)=>e.id.localeCompare(t.id)},{title:"Title",dataIndex:"title",key:"title",render:(e,t)=>(0,j.jsxs)(i.Z,{direction:"vertical",style:{minWidth:150},children:[(0,j.jsx)(p.aW,{value:t.title,language:"en",readOnly:!0}),(0,j.jsx)(p.aW,{value:t.title,language:"pt",readOnly:!0})]})},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,j.jsx)("span",{children:e}),sorter:(e,t)=>e.type.localeCompare(t.type)},c.Z.EXPAND_COLUMN,{title:"Options",dataIndex:"values",key:"tags",render:(e,t)=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.ZP,{onClick:()=>(e=>{const t=[];t.push('"'.concat(e.description.en,'"')),e.values.forEach(((e,n)=>{t.push("".concat(n,") ").concat(e.en))})),r(t.join("\n"))})(t),children:"Copy options"}),(0,j.jsx)("ul",{children:e.map(((e,a)=>{var o,r,s;return(0,j.jsxs)("li",{children:[(0,j.jsxs)(z.Z,{children:[e.en," / ",e.pt," ",(0,j.jsx)(d.Z,{children:null!==(o=null===(r=t.tags)||void 0===r||null===(s=r[a])||void 0===s?void 0:s.length)&&void 0!==o?o:0})]}),(0,j.jsx)(M,{scene:t,valueIndex:a,addEntryToUpdate:n.addEntryToUpdate})]},e.en)}))})]})}],f=(0,g.M)({maxExpandedRows:1,expandedRowRender:e=>(0,j.jsx)(U,{scene:e,objects:o})});return(0,j.jsxs)("div",{className:"my-4",children:[(0,j.jsx)(z.Z.Title,{level:2,className:"my-0",children:"Scenes"}),(0,j.jsx)(i.Z,{className:"mb-4",children:(0,j.jsx)(u.ZP,{onClick:()=>{r(a.map((e=>e.value)).join(", "))},children:"Copy AllTags"})}),(0,j.jsx)(c.Z,{columns:x,dataSource:s,rowKey:"id",expandable:f,pagination:l})]})}function M(e){var t,n,a,o;let{scene:l,valueIndex:i,addEntryToUpdate:c}=e;const[p,v]=(0,D.Z)(!1),[h,g]=(0,s.useState)([]),m=null!==(t=null===l||void 0===l||null===(n=l.tags)||void 0===n?void 0:n[i])&&void 0!==t?t:[],x=()=>{var e;const t=(0,r.cloneDeep)(l);t.tags=null!==(e=t.tags)&&void 0!==e?e:{},t.tags[i]=[...h.filter(Boolean)],console.log(t.tags),c(t.id,t),g([]),v()};return p?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(b.Z,{gap:6,align:"center",children:[(0,j.jsx)(y.Z,{showSearch:!0,mode:"tags",placeholder:"Add new tag",options:[],style:{minWidth:"200px",maxWidth:"600px"},autoClearSearchValue:!0,allowClear:!0,defaultValue:m,onChange:g,tokenSeparators:[","],onClear:()=>g([]),defaultActiveFirstOption:!1,size:"small"}),(0,j.jsx)(u.ZP,{onClick:x,disabled:0===h.length,children:"Add"}),(0,j.jsx)(u.ZP,{onClick:v,icon:(0,j.jsx)(T.Z,{}),shape:"circle",size:"small",type:"text"})]})}):(0,j.jsxs)(j.Fragment,{children:[null===l||void 0===l||null===(a=l.tags)||void 0===a||null===(o=a[i])||void 0===o?void 0:o.map((e=>(0,j.jsx)(d.Z,{color:"green",children:e},e))),(0,j.jsx)(u.ZP,{shape:"circle",size:"small",onClick:v,icon:(0,j.jsx)(I.Z,{})})]})}function U(e){let{scene:t,objects:n}=e;const{message:a}=P.Z.useApp(),[o,l]=(0,s.useState)(null);return(0,j.jsxs)("div",{className:"full-width",children:[(0,j.jsx)(u.ZP,{onClick:()=>{const e=(0,r.sample)(n);if(!e)return void a.error("No objects to sample from");const o=W(t,e);l({entry:e,likelihood:o})},children:"Sample"}),(0,j.jsxs)("div",{className:"scene-options-sampler mt-4",children:[o&&(0,j.jsx)(O,{item:o.entry,cardWidth:70}),t.values.map(((e,t)=>{var n,a;const r=null!==(n=null===o||void 0===o?void 0:o.likelihood[t])&&void 0!==n?n:0;let s=r>50?"cyan":r>25?"orange":"red";return s=r===Math.max(...Object.values(null!==(a=null===o||void 0===o?void 0:o.likelihood)&&void 0!==a?a:{}))?"green":s,(0,j.jsxs)(i.Z,{direction:"vertical",children:[(0,j.jsxs)(z.Z.Text,{children:[e.en," / ",e.pt]}),(0,j.jsxs)(d.Z,{color:0===r?void 0:s,children:[r,"%"]})]},e.en)}))]})]})}const W=(e,t)=>{var n,a;const o={},r={};return console.log("========="),(null!==(n=t.tags)&&void 0!==n?n:[]).forEach((t=>{var n;r[t]=0,Object.keys(null!==(n=e.tags)&&void 0!==n?n:{}).forEach((n=>{var a,o;(null!==(a=null===(o=e.tags)||void 0===o?void 0:o[n])&&void 0!==a?a:[]).includes(t)&&(r[t]=r[t]+1)}))})),console.log(JSON.parse(JSON.stringify(r))),Object.keys(r).forEach((e=>{const t=Math.max(0,1-.1*r[e]);r[e]=t})),console.log(JSON.parse(JSON.stringify(r))),(null!==(a=t.tags)&&void 0!==a?a:[]).forEach((t=>{var n;Object.keys(null!==(n=e.tags)&&void 0!==n?n:{}).forEach((n=>{var a,s;var l;(null!==(a=null===(s=e.tags)||void 0===s?void 0:s[n])&&void 0!==a?a:[]).includes(t)&&(o[n]=(null!==(l=o[n])&&void 0!==l?l:0)+r[t])}))})),console.log(JSON.parse(JSON.stringify(o))),Object.keys(o).forEach((e=>{var n,a,r;o[e]=Math.floor(Math.min(100,(null!==(n=o[e])&&void 0!==n?n:0)/(null!==(a=null===(r=t.tags)||void 0===r?void 0:r.length)&&void 0!==a?a:1)*100))})),console.log(JSON.parse(JSON.stringify(o))),o};var H=n(1413),A=n(324);function B(e){let{allTags:t,onUpdateCard:n,card:a,buttonProps:o}=e;const[s,l]=(0,D.Z)(!1),c=(e,t,a)=>{const o=(0,r.cloneDeep)(a);o.name[t]=e,n(o)};return console.log("EditCrimeCardModal",a),(0,j.jsxs)("div",{children:[(0,j.jsx)(u.ZP,(0,H.Z)((0,H.Z)({},o),{},{onClick:l,size:"small",icon:(0,j.jsx)(I.Z,{}),style:{minWidth:100},children:"Edit"})),(0,j.jsx)(A.Z,{title:"Editing ".concat(a.id," (").concat(a.name.en,")"),open:s,onOk:()=>l(!1),onCancel:l,width:1e3,children:s&&(0,j.jsxs)(i.Z,{children:[(0,j.jsxs)(i.Z,{direction:"vertical",style:{minWidth:150},children:[(0,j.jsx)(O,{item:a,cardWidth:100}),(0,j.jsx)(p.aW,{value:a.name,language:"en",onPressEnter:e=>{var t;return c((null===(t=e.target)||void 0===t?void 0:t.value)||a.name.en,"en",a)}}),(0,j.jsx)(p.aW,{value:a.name,language:"pt",onPressEnter:e=>{var t;return c((null===(t=e.target)||void 0===t?void 0:t.value)||a.name.pt,"pt",a)}})]}),(0,j.jsx)(w,{allTags:t,onUpdateCard:n,card:a})]})})]})}function V(e){let{rows:t,weapons:n,evidence:a,onUpdateCard:o,allTags:l}=e;const d=(0,s.useMemo)((()=>{const e={};return t.forEach((t=>{var n;null===(n=t.tags)||void 0===n||n.forEach((n=>{e[n]||(e[n]={id:n,tag:n,count:0,cardsIds:[]}),e[n].count++,e[n].cardsIds.push(t.id)}))})),(0,r.orderBy)(Object.values(e),["tag"],["asc"])}),[t]),u=(0,m.P)({total:d.length,showQuickJumper:!0}),p=(0,g.M)({maxExpandedRows:1,expandRowByClick:!0,expandedRowRender:e=>(0,j.jsx)(i.Z,{size:"small",wrap:!0,children:e.cardsIds.map((e=>{var t;const r=null!==(t=n[e])&&void 0!==t?t:a[e];return(0,j.jsxs)(i.Z,{direction:"vertical",align:"center",children:[(0,j.jsx)(O,{item:r,cardWidth:75}),(0,j.jsx)(B,{allTags:l,onUpdateCard:o,card:r})]},e)}))})}),v=[{title:"Id",dataIndex:"id",key:"id",render:e=>(0,j.jsx)("span",{children:e}),sorter:(e,t)=>e.id.localeCompare(t.id)},{title:"Tag",dataIndex:"tag",key:"tag",render:e=>(0,j.jsx)("span",{children:e}),sorter:(e,t)=>e.tag.localeCompare(t.tag)},{title:"Count",dataIndex:"count",key:"count",render:e=>(0,j.jsx)("span",{children:e}),sorter:(e,t)=>e.count-t.count}];return(0,j.jsx)("div",{className:"my-4",children:(0,j.jsx)(c.Z,{columns:v,dataSource:d,rowKey:"id",expandable:p,pagination:u})})}function L(e){let{weaponsQuery:t,evidenceQuery:n,scenesQuery:a}=e;const{is:l,queryParams:i}=(0,o.K)(),c=(0,s.useMemo)((()=>[...Object.values(t.data),...Object.values(n.data)]),[t.data,n.data]),d=(0,s.useMemo)((()=>{const e={};return c.forEach((t=>{var n;null===(n=t.tags)||void 0===n||n.forEach((t=>{var n;e[t]=(null!==(n=e[t])&&void 0!==n?n:0)+1}))})),(0,r.orderBy)(Object.entries(e).map((e=>{let[t,n]=e;return{value:t,label:t,count:n}})),["value"],["asc"])}),[c]),u=e=>{if("weapon"===e.type)t.addEntryToUpdate(e.id,e);else{if("evidence"!==e.type)throw new Error("Invalid card type");n.addEntryToUpdate(e.id,e)}};return(0,j.jsxs)(j.Fragment,{children:[(l("display","cards")||!i.has("display"))&&(0,j.jsx)(N,{rows:c,allTags:d,onUpdateCard:u}),l("display","tags")&&(0,j.jsx)(V,{rows:c,weapons:t.data,evidence:n.data,onUpdateCard:u,allTags:d}),l("display","scenes")&&(0,j.jsx)(R,{sceneQuery:a,allTags:d,objects:c})]})}var _=n(7128),Q=n(8357),J=n(7018),F=n(7340),K=n(7965),q=n(4704),X=n(7460);const Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"};var G=n(4790),$=function(e,t){return s.createElement(G.Z,(0,X.Z)({},e,{ref:t,icon:Y}))};const ee=s.forwardRef($);var te=n(881);function ne(e){var t;let{weaponsQuery:n,evidenceQuery:a,scenesQuery:r}=e;const{queryParams:s,addParam:l,addParams:i,is:c}=(0,o.K)();return(0,j.jsxs)(K.Pd,{children:[(0,j.jsxs)(b.Z,{vertical:!0,gap:12,children:[(0,j.jsx)("span",{children:"Weapons"}),(0,j.jsx)(F.k,{isDirty:n.isDirty,onSave:n.save,isSaving:n.isSaving,dirt:JSON.stringify(n.entriesToUpdate)}),(0,j.jsx)(J.o,{data:()=>ae(n.data),fileName:"crime-weapons.json",disabled:n.isDirty,block:!0}),(0,j.jsx)("span",{children:"Evidence"}),(0,j.jsx)(F.k,{isDirty:a.isDirty,onSave:a.save,isSaving:a.isSaving,dirt:JSON.stringify(a.entriesToUpdate)}),(0,j.jsx)(J.o,{data:()=>ae(a.data),fileName:"crime-evidence.json",disabled:a.isDirty,block:!0}),(0,j.jsx)("span",{children:"Scenes"}),(0,j.jsx)(F.k,{isDirty:r.isDirty,onSave:r.save,isSaving:r.isSaving,dirt:JSON.stringify(r.entriesToUpdate)}),(0,j.jsx)(J.o,{data:()=>ae(r.data),fileName:"crime-scenes.json",disabled:r.isDirty,block:!0})]}),(0,j.jsx)(_.Z,{}),(0,j.jsx)(Q.H,{label:"Display",value:null!==(t=s.get("display"))&&void 0!==t?t:"listing",onChange:e=>i({display:e,page:1},{page:1}),options:[{title:"Cards",icon:(0,j.jsx)(q.Z,{}),value:"cards"},{title:"Tags",icon:(0,j.jsx)(ee,{}),value:"tags"},{title:"Scenes",icon:(0,j.jsx)(te.Z,{}),value:"scenes"}]}),c("display","item")&&(0,j.jsx)(Q.Do,{label:"No Groups Only",value:c("emptyOnly"),onChange:e=>l("emptyOnly",e,!1)})]})}function ae(e){console.log("Preparing file for download...");const t=(0,r.cloneDeep)(e);return(0,f.Tj)(t)}var oe=n(2128),re=n(8938),se=n(5529);const le=function(){const e=(0,re.i)({tdrResourceName:"crime-weapons",firebaseDataCollectionName:"crimeWeapons",serialize:!0}),t=(0,re.i)({tdrResourceName:"crime-evidence",firebaseDataCollectionName:"crimeEvidence",serialize:!0}),n=(0,re.i)({tdrResourceName:"crime-scenes",firebaseDataCollectionName:"crimeScenes",serialize:!0}),o=(0,se.N)("items");return(0,j.jsx)(K.Xg,{title:"Crimes Hediondos",subtitle:"Categorizer",children:(0,j.jsxs)(a.Z,{hasSider:!0,children:[(0,j.jsx)(K.p3,{children:(0,j.jsx)(ne,{weaponsQuery:e,evidenceQuery:t,scenesQuery:n})}),(0,j.jsx)(a.Z.Content,{className:"content",children:(0,j.jsx)(oe.T,{isLoading:e.isLoading||t.isLoading||n.isLoading||o.isLoading,error:e.error||t.error||n.error||o.error,hasResponseData:!(0,r.isEmpty)(e.data)&&!(0,r.isEmpty)(t.data)&&!(0,r.isEmpty)(n.data)&&!(0,r.isEmpty)(o.data),children:(0,j.jsx)(L,{weaponsQuery:e,evidenceQuery:t,scenesQuery:n})})})]})})}},5458:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7460),o=n(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560zM610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z"}}]},name:"idcard",theme:"outlined"};var s=n(4790),l=function(e,t){return o.createElement(s.Z,(0,a.Z)({},e,{ref:t,icon:r}))};const i=o.forwardRef(l)},4483:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7460),o=n(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var s=n(4790),l=function(e,t){return o.createElement(s.Z,(0,a.Z)({},e,{ref:t,icon:r}))};const i=o.forwardRef(l)},4704:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7460),o=n(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7a37.93 37.93 0 00-37-29.3H154a44 44 0 00-44 44v252a44 44 0 0044 44h75v388a44 44 0 0044 44h478a44 44 0 0044-44V466h75a44 44 0 0044-44V170a44 44 0 00-44-44zm-28 268H723v432H301V394H182V198h153.3c28.2 71.2 97.5 120 176.7 120s148.5-48.8 176.7-120H842v196z"}}]},name:"skin",theme:"outlined"};var s=n(4790),l=function(e,t){return o.createElement(s.Z,(0,a.Z)({},e,{ref:t,icon:r}))};const i=o.forwardRef(l)},952:(e,t,n)=>{n.d(t,{Z:()=>z});var a=n(2791),o=n(9809),r=n.n(o),s=n(1498),l=n(4466),i=n(922),c=n(1113),d=n(117),u=n(1929),p=n(3025),v=n(9391),h=n(7521),g=n(4628),m=n(6428);const x=e=>{const{lineWidth:t,fontSizeIcon:n,calc:a}=e,o=e.fontSizeSM;return(0,g.IX)(e,{tagFontSize:o,tagLineHeight:(0,p.bf)(a(e.lineHeightSM).mul(o).equal()),tagIconSize:a(n).sub(a(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},f=e=>({defaultBg:new v.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),y=(0,m.I$)("Tag",(e=>(e=>{const{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:a,componentCls:o,calc:r}=e,s=r(a).sub(n).equal(),l=r(t).sub(n).equal();return{[o]:Object.assign(Object.assign({},(0,h.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:s,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:"".concat((0,p.bf)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationMid),textAlign:"start",position:"relative",["&".concat(o,"-rtl")]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},["".concat(o,"-close-icon")]:{marginInlineStart:l,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),"&:hover":{color:e.colorTextHeading}},["&".concat(o,"-has-color")]:{borderColor:"transparent",["&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover")]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",["&:not(".concat(o,"-checkable-checked):hover")]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},["> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls)]:{marginInlineStart:s}}),["".concat(o,"-borderless")]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(x(e))),f);var b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const j=a.forwardRef(((e,t)=>{const{prefixCls:n,style:o,className:s,checked:l,onChange:i,onClick:c}=e,d=b(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:v}=a.useContext(u.E_),h=p("tag",n),[g,m,x]=y(h),f=r()(h,"".concat(h,"-checkable"),{["".concat(h,"-checkable-checked")]:l},null===v||void 0===v?void 0:v.className,s,m,x);return g(a.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},o),null===v||void 0===v?void 0:v.style),className:f,onClick:e=>{null===i||void 0===i||i(!l),null===c||void 0===c||c(e)}})))})),C=j;var Z=n(6356);const w=(0,m.bk)(["Tag","preset"],(e=>(e=>(0,Z.Z)(e,((t,n)=>{let{textColor:a,lightBorderColor:o,lightColor:r,darkColor:s}=n;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:a,background:r,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:s,borderColor:s},["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}})))(x(e))),f);const k=(e,t,n)=>{const a="string"!==typeof(o=n)?o:o.charAt(0).toUpperCase()+o.slice(1);var o;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:e["color".concat(n)],background:e["color".concat(a,"Bg")],borderColor:e["color".concat(a,"Border")],["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}},S=(0,m.bk)(["Tag","status"],(e=>{const t=x(e);return[k(t,"success","Success"),k(t,"processing","Info"),k(t,"error","Error"),k(t,"warning","Warning")]}),f);var E=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const O=a.forwardRef(((e,t)=>{const{prefixCls:n,className:o,rootClassName:p,style:v,children:h,icon:g,color:m,onClose:x,bordered:f=!0,visible:b}=e,j=E(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:C,direction:Z,tag:k}=a.useContext(u.E_),[O,N]=a.useState(!0),z=(0,s.Z)(j,["closeIcon","closable"]);a.useEffect((()=>{void 0!==b&&N(b)}),[b]);const P=(0,l.o2)(m),T=(0,l.yT)(m),I=P||T,D=Object.assign(Object.assign({backgroundColor:m&&!I?m:void 0},null===k||void 0===k?void 0:k.style),v),R=C("tag",n),[M,U,W]=y(R),H=r()(R,null===k||void 0===k?void 0:k.className,{["".concat(R,"-").concat(m)]:I,["".concat(R,"-has-color")]:m&&!I,["".concat(R,"-hidden")]:!O,["".concat(R,"-rtl")]:"rtl"===Z,["".concat(R,"-borderless")]:!f},o,p,U,W),A=e=>{e.stopPropagation(),null===x||void 0===x||x(e),e.defaultPrevented||N(!1)},[,B]=(0,i.Z)((0,i.w)(e),(0,i.w)(k),{closable:!1,closeIconRender:e=>{const t=a.createElement("span",{className:"".concat(R,"-close-icon"),onClick:A},e);return(0,c.wm)(e,t,(e=>({onClick:t=>{var n;null===(n=null===e||void 0===e?void 0:e.onClick)||void 0===n||n.call(e,t),A(t)},className:r()(null===e||void 0===e?void 0:e.className,"".concat(R,"-close-icon"))})))}}),V="function"===typeof j.onClick||h&&"a"===h.type,L=g||null,_=L?a.createElement(a.Fragment,null,L,h&&a.createElement("span",null,h)):h,Q=a.createElement("span",Object.assign({},z,{ref:t,className:H,style:D}),_,B,P&&a.createElement(w,{key:"preset",prefixCls:R}),T&&a.createElement(S,{key:"status",prefixCls:R}));return M(V?a.createElement(d.Z,{component:"Tag"},Q):Q)})),N=O;N.CheckableTag=C;const z=N},6998:(e,t,n)=>{var a=n(2458),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,r,s,l,i,c,d=!1;t||(t={}),n=t.debug||!1;try{if(s=a(),l=document.createRange(),i=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(a){if(a.stopPropagation(),t.format)if(a.preventDefault(),"undefined"===typeof a.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=o[t.format]||o.default;window.clipboardData.setData(r,e)}else a.clipboardData.clearData(),a.clipboardData.setData(t.format,e);t.onCopy&&(a.preventDefault(),t.onCopy(a.clipboardData))})),document.body.appendChild(c),l.selectNodeContents(c),i.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(u){n&&console.error("unable to copy using execCommand: ",u),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(u){n&&console.error("unable to copy using clipboardData: ",u),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(l):i.removeAllRanges()),c&&document.body.removeChild(c),s()}return d}},3250:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(6998),o=n.n(a),r=n(2791);const s=function(e){void 0===e&&(e={});var t=(0,r.useState)(e),n=t[0],a=t[1];return[n,(0,r.useCallback)((function(e){a((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[])]};const l=function(){var e=function(){var e=(0,r.useRef)(!1),t=(0,r.useCallback)((function(){return e.current}),[]);return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t}(),t=s({value:void 0,error:void 0,noUserInteraction:!0}),n=t[0],a=t[1];return[n,(0,r.useCallback)((function(t){var n,r;if(e())try{if("string"!==typeof t&&"number"!==typeof t){var s=new Error("Cannot copy typeof "+typeof t+" to clipboard, must be a string");return void a({value:t,error:s,noUserInteraction:!0})}if(""===t){s=new Error("Cannot copy empty string to clipboard.");return void a({value:t,error:s,noUserInteraction:!0})}r=t.toString(),n=o()(r),a({value:r,error:void 0,noUserInteraction:n})}catch(s){a({value:r,error:s,noUserInteraction:n})}}),[])]}},8211:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(2791);function o(e,t){void 0===t&&(t=0);var n=(0,a.useRef)(!1),o=(0,a.useRef)(),r=(0,a.useRef)(e),s=(0,a.useCallback)((function(){return n.current}),[]),l=(0,a.useCallback)((function(){n.current=!1,o.current&&clearTimeout(o.current),o.current=setTimeout((function(){n.current=!0,r.current()}),t)}),[t]),i=(0,a.useCallback)((function(){n.current=null,o.current&&clearTimeout(o.current)}),[]);return(0,a.useEffect)((function(){r.current=e}),[e]),(0,a.useEffect)((function(){return l(),i}),[t]),[s,i,l]}},8556:(e,t,n)=>{n.d(t,{D:()=>k});var a,o,r,s,l,i,c=n(1413),d=n(2791),u=n(101),p=n(2346),v=n(6033),h=n(3889),g=n(3092),m=n(2756),x=n(7211),f=n(8974),y=n(5391),b=(a=new WeakMap,o=new WeakMap,r=new WeakMap,s=new WeakMap,l=new WeakSet,i=new WeakSet,class extends f.l{constructor(e,t){super(),(0,u.Z)(this,i),(0,u.Z)(this,l),(0,p.Z)(this,a,{writable:!0,value:void 0}),(0,p.Z)(this,o,{writable:!0,value:void 0}),(0,p.Z)(this,r,{writable:!0,value:void 0}),(0,p.Z)(this,s,{writable:!0,value:void 0}),(0,g.Z)(this,a,e),this.setOptions(t),this.bindMethods(),(0,h.Z)(this,l,j).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=(0,v.Z)(this,a).defaultMutationOptions(e),(0,y.VS)(this.options,n)||(0,v.Z)(this,a).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,v.Z)(this,r),observer:this}),null!==n&&void 0!==n&&n.mutationKey&&this.options.mutationKey&&(0,y.Ym)(n.mutationKey)!==(0,y.Ym)(this.options.mutationKey)?this.reset():"pending"===(null===(t=(0,v.Z)(this,r))||void 0===t?void 0:t.state.status)&&(0,v.Z)(this,r).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,v.Z)(this,r))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,h.Z)(this,l,j).call(this),(0,h.Z)(this,i,C).call(this,e)}getCurrentResult(){return(0,v.Z)(this,o)}reset(){var e;null===(e=(0,v.Z)(this,r))||void 0===e||e.removeObserver(this),(0,g.Z)(this,r,void 0),(0,h.Z)(this,l,j).call(this),(0,h.Z)(this,i,C).call(this)}mutate(e,t){var n;return(0,g.Z)(this,s,t),null===(n=(0,v.Z)(this,r))||void 0===n||n.removeObserver(this),(0,g.Z)(this,r,(0,v.Z)(this,a).getMutationCache().build((0,v.Z)(this,a),this.options)),(0,v.Z)(this,r).addObserver(this),(0,v.Z)(this,r).execute(e)}});function j(){var e,t;const n=null!==(e=null===(t=(0,v.Z)(this,r))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,m.R)();(0,g.Z)(this,o,(0,c.Z)((0,c.Z)({},n),{},{isPending:"pending"===n.status,isSuccess:"success"===n.status,isError:"error"===n.status,isIdle:"idle"===n.status,mutate:this.mutate,reset:this.reset}))}function C(e){x.V.batch((()=>{if((0,v.Z)(this,s)&&this.hasListeners()){const u=(0,v.Z)(this,o).variables,p=(0,v.Z)(this,o).context;var t,n,a,r;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(n=(0,v.Z)(this,s)).onSuccess)||void 0===t||t.call(n,e.data,u,p),null===(a=(r=(0,v.Z)(this,s)).onSettled)||void 0===a||a.call(r,e.data,null,u,p);else if("error"===(null===e||void 0===e?void 0:e.type)){var l,i,c,d;null===(l=(i=(0,v.Z)(this,s)).onError)||void 0===l||l.call(i,e.error,u,p),null===(c=(d=(0,v.Z)(this,s)).onSettled)||void 0===c||c.call(d,void 0,e.error,u,p)}}this.listeners.forEach((e=>{e((0,v.Z)(this,o))}))}))}var Z=n(3713),w=n(8981);function k(e,t){const n=(0,Z.NL)(t),[a]=d.useState((()=>new b(n,e)));d.useEffect((()=>{a.setOptions(e)}),[a,e]);const o=d.useSyncExternalStore(d.useCallback((e=>a.subscribe(x.V.batchCalls(e))),[a]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),r=d.useCallback(((e,t)=>{a.mutate(e,t).catch(w.Z)}),[a]);if(o.error&&(0,w.L)(a.options.throwOnError,[o.error]))throw o.error;return(0,c.Z)((0,c.Z)({},o),{},{mutate:r,mutateAsync:o.mutate})}}}]);
//# sourceMappingURL=CrimesHediondos.a74b7197.chunk.js.map