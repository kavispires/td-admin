"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[9479],{7340:(e,t,s)=>{s.d(t,{k:()=>o});var n=s(2556),l=s(2426),i=s.n(l),a=s(2791),r=s(8211),d=s(4483),c=s(184);function o(e){let{isDirty:t,onSave:s,isSaving:l,dirt:o,interval:u=6e5,...h}=e;const[,m,g]=(0,r.Z)((()=>{t&&s()}),u);return(0,a.useEffect)((()=>{t?(console.log("Save Reset",i()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),g()):m()}),[t,g,m,o]),(0,a.useEffect)((()=>{const e=e=>{if(t){const t="You have unsaved changes, are you sure you want to leave?";return e.returnValue=t,t}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t]),(0,c.jsx)(n.ZP,{type:"primary",size:"large",icon:(0,c.jsx)(d.Z,{}),onClick:s,disabled:!t,loading:l,danger:!0,block:!0,...h,children:"Save"})}},6728:(e,t,s)=>{s.d(t,{TI:()=>r,ao:()=>a,hD:()=>i});s(763);var n=s(2426),l=s.n(n);function i(){return l()().subtract(1,"days").format("YYYY-MM-DD")}function a(e){return l()(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")}function r(e){return 6===l()(e,"YYYY-MM-DD").day()}},8027:(e,t,s)=>{s.d(t,{A:()=>r,X:()=>d});var n=s(2481),l=s(2748),i=s(2010),a=s(5850);function r(e,t){return async()=>{var s;console.log("%cQuerying ".concat(e,"/").concat(t," from firebase: ").concat((0,a.xE)()),"color: #f0f");const i=(0,n.JU)(l.RZ,"".concat(e,"/").concat(t));return null!==(s=(await(0,n.QT)(i)).data())&&void 0!==s?s:{}}}function d(e,t,s){return(0,i.a)({queryKey:["firebase",e,t],queryFn:r(e,t),...s})}},4766:(e,t,s)=>{s.d(t,{K:()=>i});var n=s(2791),l=s(1087);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,s]=(0,l.lr)(),i=(e,n,l)=>{void 0===n||""===n||n===l?t.delete(e):t.set(e,String(n)),s(t)},a=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(e).forEach((e=>{let[s,l]=e;n[s]===l?t.delete(s):t.set(s,String(l))})),s(t)},r=e=>{t.delete(e),s(t)},d=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true";return t.get(e)===String(s)};return(0,n.useEffect)((()=>{Object.entries(e).forEach((e=>{let[s,n]=e;t.has(s)||i(s,n)}))}),[]),{addParam:i,addParams:a,removeParam:r,queryParams:t,is:d}}},8938:(e,t,s)=>{s.d(t,{i:()=>u});var n=s(4747),l=s(763),i=s(2791),a=s(3713),r=s(8027),d=s(5529),c=s(2233),o=s(5850);function u(e){let{tdrResourceName:t,firebaseDataCollectionName:s,serialize:u}=e;const{notification:h}=n.Z.useApp(),m=(0,a.NL)(),g=(0,d.N)(t),p=(0,r.X)("tdr",s,{select:u?o.d_:void 0}),[f,j]=(0,i.useState)({}),x=(0,c.B)("tdr",s,{onSuccess:()=>{h.success({message:"".concat(s," updated")}),m.refetchQueries({queryKey:["firebase","tdr",s]}),j({})},onError:e=>{h.error({message:"".concat(s," update failed"),description:e.message})}}),v=(0,i.useMemo)((()=>{var e,n;return g.isSuccess&&p.isSuccess&&!x.isPending?(console.log("%cMerging ".concat(t,"+").concat(s," data..."),"color: #f0f"),(0,l.cloneDeep)({...null!==(e=g.data)&&void 0!==e?e:{},...null!==(n=p.data)&&void 0!==n?n:{},...f})):{}}),[t,s,g.data,p.data,g.isSuccess,p.isSuccess,x.isPending,f]),y=!(0,l.isEmpty)(f),b=p.data;return{data:v,isLoading:g.isLoading||p.isLoading,error:g.error||p.error,firebaseData:b,isSaving:x.isPending,save:()=>{x.mutate(u?(0,o.aS)(f):f)},addEntryToUpdate:(e,t)=>{j((s=>({...s,[e]:t})))},entriesToUpdate:f,isDirty:y}}},5529:(e,t,s)=>{s.d(t,{N:()=>a,Y:()=>r});var n=s(763),l=s(2010),i=s(2606);function a(e){var t;let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getUrl:a}=(0,i.n)("resources"),r=(0,l.a)({queryKey:[e],queryFn:async()=>{const t=await fetch(a("".concat(e,".json")));return await t.json()},enabled:s}),d=!(0,n.isEmpty)(r.data);return{...r,data:null!==(t=r.data)&&void 0!==t?t:{},hasResponseData:d}}function r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getUrl:s}=(0,i.n)("resources"),a=(0,l.a)({queryKey:[e],queryFn:async()=>{const t=await fetch(s("".concat(e,".json")));return await t.json()},enabled:t}),r=!(0,n.isEmpty)(a.data);return{...a,data:a.data,hasResponseData:r}}},2233:(e,t,s)=>{s.d(t,{B:()=>r});var n=s(2481),l=s(2748),i=s(8556);function a(e,t,s){console.log("%cUpdating ".concat(e,"/").concat(t," from firebase"),"color: #f00");const i=(0,n.JU)(l.RZ,"".concat(e,"/").concat(t));return(0,n.r7)(i,s)}function r(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.D)({mutationFn:async s=>a(e,t,s),...s})}},5353:(e,t,s)=>{s.r(t),s.d(t,{ItemsDiagramSets:()=>fe,default:()=>je});var n=s(3990),l=s(4520),i=s(2128),a=s(3660),r=s(9197),d=s(7128),c=s(2556),o=s(6173),u=s(7018),h=s(7340),m=s(1958),g=s(4766),p=s(763),f=s(5850),j=s(184);function x(e){var t;let{data:s,save:n,isDirty:i,isSaving:x,entriesToUpdate:v}=e;const{addParams:y,queryParams:b}=(0,g.K)();return(0,j.jsxs)(m.Pd,{children:[(0,j.jsxs)(l.Z,{vertical:!0,gap:12,children:[(0,j.jsx)(h.k,{isDirty:i,onSave:n,isSaving:x,dirt:JSON.stringify(v)}),(0,j.jsx)(u.o,{data:()=>function(e){console.log("Preparing file for download...");const t=(0,p.cloneDeep)(e);return(0,f.Tj)(t)}(s),fileName:"daily-diagram-items.json",disabled:i,block:!0})]}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(o.H,{label:"Display",value:null!==(t=b.get("display"))&&void 0!==t?t:"rule",onChange:e=>y({display:e,page:1},{page:1}),options:[{title:"By Rule",icon:(0,j.jsx)(a.Z,{}),value:"rule"},{title:"By Thing",icon:(0,j.jsx)(r.Z,{}),value:"thing"}]}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(c.ZP,{size:"small",block:!0,onClick:()=>y({display:"simulator"}),children:"Simulator"})]})}var v=s(4031),y=s(2791),b=s(5529),Z=s(1046),T=s(7415),S=s(4747),w=s(5225),k=s(959),E=s(1105),C=s(4424),D=s(7305),I=s(5922);const O="|",M="abcdefghijklmnopqrstuvwxyz",N="bcdfghjklmnpqrstvwxyz",z="aeiou",P=/[\xe1\xe9\xed\xf3\xfa\xe3\u1ebd\u0129\xf5\u0169\xe2\xea\xee\xf4\xfb\xe0\xe8\xec\xf2\xf9\xe4\xeb\xef\xf6\xfc]/,A=(0,p.memoize)((e=>(0,f.bU)(e).toLowerCase())),F=e=>A(e).length,U=e=>A(e).split("").filter((e=>z.includes(e))).length,R=e=>A(e).split("").filter((e=>N.includes(e))).length,Y={"ddr-7-pt":e=>M.indexOf(A(e)[0])<M.indexOf(A(e)[1]),"ddr-8-pt":e=>F(e)<=5,"ddr-9-pt":e=>5===F(e),"ddr-10-pt":e=>F(e)>=4&&F(e)<=6,"ddr-11-pt":e=>F(e)>=6&&F(e)<=8,"ddr-12-pt":e=>F(e)>7,"ddr-13-pt":e=>e.split(" ").length>1,"ddr-14-pt":e=>{const t=A(e).split("").filter((e=>z.includes(e)));return new Set(t).size>=2},"ddr-15-pt":e=>new Set(A(e).split("")).size<=4,"ddr-16-pt":e=>R(e)>U(e),"ddr-17-pt":e=>U(e)>R(e),"ddr-18-pt":e=>{const t=A(e)[0];return A(e).slice(1).includes(t)},"ddr-19-pt":e=>A(e).split("").some(((t,s)=>A(e).slice(s+1).includes(t))),"ddr-20-pt":e=>A(e).split("").some(((t,s)=>z.includes(t)&&A(e).slice(s+1).includes(t))),"ddr-21-pt":e=>A(e).split("").some(((t,s)=>N.includes(t)&&A(e).slice(s+1).includes(t))),"ddr-22-pt":e=>A(e).split("").some(((t,s)=>z.includes(t)&&z.includes(e[s+1]))),"ddr-23-pt":e=>"abcdefghijklm".includes(A(e)[0]),"ddr-24-pt":e=>"nopqrstuvwxyz".includes(A(e)[0]),"ddr-25-pt":e=>z.includes(A(e)[0]),"ddr-26-pt":e=>N.includes(A(e)[0]),"ddr-27-pt":e=>e.split("").some(((t,s)=>t===e[s+1])),"ddr-28-pt":e=>A(e).includes("a"),"ddr-29-pt":e=>A(e).includes("r"),"ddr-30-pt":e=>A(e).includes("u"),"ddr-31-pt":e=>A(e).includes("q")||A(e).includes("j"),"ddr-32-pt":e=>A(e).includes("c")||A(e).includes("\xe7"),"ddr-33-pt":e=>A(e).includes("m"),"ddr-34-pt":e=>A(e).includes("h"),"ddr-35-pt":e=>A(e).includes("p")||A(e).includes("b"),"ddr-36-pt":e=>A(e).includes("k")||A(e).includes("w")||A(e).includes("y"),"ddr-37-pt":e=>(e=>e.toLowerCase().split("").filter((e=>P.test(e))).length)(e)>0,"ddr-38-pt":e=>!["a","o"].includes(A(e).slice(-1)),"ddr-39-pt":e=>N.includes(A(e).slice(-1)),"ddr-40-pt":e=>"s"===A(e).slice(-1),"ddr-41-pt":e=>{const t=A(e).split("").filter((e=>z.includes(e)));return new Set(t).size===t.length},"ddr-42-pt":e=>{const t=A(e).split("").filter((e=>N.includes(e)));return new Set(t).size===t.length}};var L=s(2997),q=s(3733);function B(e){let{isModalOpen:t,onSaveThing:s,onCancel:n,thing:i,rules:a,width:r,itemAliases:d,subtitle:o}=e;const u=(0,y.useMemo)((()=>(0,p.orderBy)(Object.values(a),[e=>{const t=["manual","dependency","auto"].indexOf(e.method);return-1===t?1/0:t},e=>"grammar"===e.type?0:1,e=>Number(e.id.split("-")[1])])),[a]),[h]=w.Z.useForm(),m=w.Z.useWatch([],h),g=!m||Object.values(null!==m&&void 0!==m?m:{}).some((e=>void 0===e)),f=w.Z.useWatch("name",h);(0,y.useEffect)((()=>{if(console.log("Name changed",f),!f)return;if(i.name&&i.syllables&&f===i.name)return;const e={syllables:Q(f),stressedSyllable:f.includes(" ")?-1:0};Object.keys(a).forEach((t=>{Y[t]?e[t]=Y[t](f):e[t]=i.rules.length>0?i.rules.includes(t):void 0})),h.setFieldsValue(e)}),[f]);const x=w.Z.useWatch("syllables",h);(0,y.useEffect)((()=>{if(x){const e=x.split(O).length;h.setFieldsValue({"ddr-3-pt":2===e,"ddr-4-pt":e>=3,stressedSyllable:f.includes(" ")?-1:void 0})}}),[x]);const v=w.Z.useWatch("stressedSyllable",h);(0,y.useEffect)((()=>{void 0!==v&&h.setFieldsValue({"ddr-43-pt":0===v,"ddr-44-pt":1===v,"ddr-45-pt":2===v})}),[v]);const b=h.getFieldValue("ddr-1-pt");(0,y.useEffect)((()=>{!0===b&&h.setFieldsValue({"ddr-2-pt":!1})}),[b]);const Z=h.getFieldValue("ddr-2-pt");(0,y.useEffect)((()=>{!0===Z&&h.setFieldsValue({"ddr-1-pt":!1})}),[Z]);const T=h.getFieldValue("ddr-3-pt");(0,y.useEffect)((()=>{!0===T&&h.setFieldsValue({"ddr-4-pt":!1})}),[T]);const S=h.getFieldValue("ddr-4-pt");(0,y.useEffect)((()=>{!0===S&&h.setFieldsValue({"ddr-3-pt":!1})}),[S]),(0,y.useEffect)((()=>{(null===f||void 0===f?void 0:f.includes("-"))&&h.setFieldsValue({"ddr-5-pt":!0})}),[f]);const M=(null!==x&&void 0!==x?x:"").split(O);return(0,j.jsx)(k.Z,{width:r,title:(0,j.jsxs)(j.Fragment,{children:["Edit ",i.name," ",o&&(0,j.jsx)("small",{children:o})]}),open:t,onOk:h.submit,onCancel:n,maskClosable:!1,okButtonProps:{disabled:g,htmlType:"submit",size:"large"},okText:"Add Item",children:(0,j.jsxs)(w.Z,{form:h,name:"new-item-".concat(i.itemId),onFinish:e=>{const t=_(e);s(t)},autoComplete:"off",initialValues:V(i,a),layout:"vertical",size:"small",labelWrap:!0,children:[(0,j.jsxs)("div",{className:"diagram-container",children:[(0,j.jsx)("div",{children:(0,j.jsx)(L.ck,{id:i.itemId,width:50})}),(0,j.jsx)(w.Z.Item,{name:"name",label:"Name",children:(0,j.jsx)(E.Z,{})}),(0,j.jsx)(w.Z.Item,{name:"itemId",label:"Item",children:(0,j.jsx)(E.Z,{readOnly:!0})}),(0,j.jsx)(w.Z.Item,{name:"syllables",label:"Syllables",children:(0,j.jsx)(E.Z,{})}),(0,j.jsx)(w.Z.Item,{name:"stressedSyllable",label:"Stressed Syllable",children:(0,j.jsx)(C.ZP.Group,{optionType:"button",buttonStyle:"solid",children:M.map(((e,t)=>(0,j.jsx)(C.ZP,{value:M.length-t-1,children:e},t)))})}),(0,j.jsx)(w.Z.Item,{name:"updatedAt",label:"Updated At",children:(0,j.jsx)(E.Z,{value:new Date(i.updatedAt).toLocaleString(),readOnly:!0})}),d&&(0,j.jsxs)("div",{children:["Options: ",null===d||void 0===d?void 0:d.join(", ")]}),(0,j.jsx)("div",{children:(0,j.jsx)(D.Z,{offsetTop:50,children:(0,j.jsx)(l.Z,{justify:"center",align:"center",children:(0,j.jsx)(c.ZP,{type:"primary",htmlType:"submit",size:"large",disabled:g,children:"Add Item"})})})})]}),(0,j.jsx)("div",{className:"diagram-container",children:u.map((e=>"auto"===e.method&&Y[e.id]||"dependency"===e.method?(0,j.jsx)(w.Z.Item,{name:e.id,label:e.title,valuePropName:"checked",className:(0,q.Z)(i.updatedAt<e.updatedAt&&"diagram-container__outdated-rule"),children:(0,j.jsx)(I.Z,{checkedChildren:"\u2705",unCheckedChildren:"\u274c",disabled:!0})},e.id):(0,j.jsx)(w.Z.Item,{name:e.id,label:e.title,className:(0,q.Z)(i.updatedAt<e.updatedAt&&"diagram-container__outdated-rule"),children:(0,j.jsxs)(C.ZP.Group,{optionType:"button",buttonStyle:"solid",children:[(0,j.jsx)(C.ZP,{value:!0,children:"\u2705"}),(0,j.jsx)(C.ZP,{value:!1,children:"\u274c"})]})},e.id)))})]})})}const V=(e,t)=>{var s,n;let l=!1;return{name:e.name,itemId:e.itemId,syllables:null!==(s=e.syllables)&&void 0!==s?s:Q(e.name),stressedSyllable:null!==(n=e.stressedSyllable)&&void 0!==n?n:0,...Object.keys(t).reduce(((s,n)=>{if(e.updatedAt<t[n].updatedAt)if(Y[n]){const t=Y[n](e.name);t&&e.rules.includes(n)&&(l=!0),s[n]=t}else s[n]=void 0;else s[n]=e.rules.includes(n);return s}),{}),updatedAt:l?Date.now():e.updatedAt}},_=e=>{const{itemId:t,name:s,updatedAt:n,syllables:l,stressedSyllable:i,...a}=e;return{itemId:t,name:s,updatedAt:Date.now(),syllables:l,stressedSyllable:i,rules:Object.keys(a).filter((e=>!0===a[e]))}},W=e=>z.includes((0,f.bU)(e)),K=e=>N.includes((0,f.bU)(e)),G=["s","r","l","m","n"],J=["rr","ss","st","sc","lm","ld","mp","mb","rn","rm","rt","rd","lt","ld","nt","nd","sp","ls"],Q=e=>{let t=[],s="";const n=(0,f.bU)(e);for(let l=0;l<e.length;l++){const i=n[l];if(" "!==i)if("-"!==i){if(W(i)&&l<n.length-2){const t=n[l+1],i=n[l+2];if(G.includes(t)&&K(i)){s+=e[l]+e[l+1],l++;continue}}"c"===i&&l<n.length-2&&["h","r","l"].includes(n[l+1])&&W(n[l+2])||["l","n"].includes(i)&&l<n.length-2&&"h"===n[l+1]&&W(n[l+2])||K(i)&&l<n.length-3&&W(n[l+1])&&G.includes(n[l+2])&&K(n[l+3])?(s+=e[l]+e[l+1]+e[l+2],l+=2):(s+=e[l],W(i)&&l<n.length-1&&!W(n[l+1])&&!["l","r","n"].includes(n[l+1])&&(t.push(s),s=""))}else t.push(s+"-"),s="";else t.push(s),s=""}return""!==s&&t.push(s),t=t.map((e=>{for(const t of J)if(e.includes(t))return e.split(t).join("".concat(t[0]).concat(O).concat(t[1]));return e})),t.filter(Boolean).join(O)};function H(e){let{addEntryToUpdate:t,availableThings:s,rules:n,width:l}=e;const{notification:i}=S.Z.useApp(),[a,r]=(0,y.useState)(null),d=()=>{const e=(0,p.sample)(s);r(e?{itemId:e.id,name:X(e),updatedAt:Date.now(),syllables:"",stressedSyllable:0,rules:[]}:null)},o=(0,y.useMemo)((()=>{var e;if(!a)return[];const t=s.find((e=>e.id===a.itemId));return[null===t||void 0===t?void 0:t.name.pt,...null!==(e=null===t||void 0===t?void 0:t.aliasesPt)&&void 0!==e?e:[]].filter(Boolean)}),[a,s]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.ZP,{size:"large",onClick:d,children:"Classify New Item"}),!!a&&(0,j.jsx)(B,{isModalOpen:null!==a,onSaveThing:async e=>{a&&(e.name&&e.itemId||i.error({message:"Name and Item ID are required"}),t(e.itemId,e),console.log("COMPLETED SAVE"),r(null),await(0,f.Dc)(250),d())},onCancel:()=>r(null),thing:a,rules:n,width:.9*l,itemAliases:o})]})}const X=e=>{return 1===e.name.pt.split(" ").length?e.name.pt:e.aliasesPt&&null!==(t=e.aliasesPt.find((e=>1===e.split(" ").length)))&&void 0!==t?t:e.name.pt;var t};var $=s(6728);const ee=(e,t,s,n)=>{console.count("Creating Teoria de Conjuntos...");let l=t.latestDate;const i=[...t.used],a=(()=>{const e=Object.values(s).reduce(((e,t)=>(e[t.id]=[],e)),{});return Object.values(n).forEach((t=>{t.rules.forEach((s=>{e[s].push(t.itemId)}))})),e})(),r={};for(let d=0;d<e;d++){const e=(0,$.ao)(l);l=e,r[e]={id:e,type:"teoria-de-conjuntos",number:t.latestNumber+d+1,...te(n,a,s,i)}}return r};function te(e,t,s,n){const l=(0,p.shuffle)(Object.keys(e).filter((e=>!n.includes(e)))),i=(0,p.sample)(l);if(!i)throw new Error("No available things to choose from");n.push(i);const a=(0,p.capitalize)(e[i].name),r={id:i,name:e[i].name},d=(0,p.sampleSize)(e[i].rules,2),c="".concat(d[0],"-").concat(d[1]);if(2!==d.length)throw new Error("No rules found for this thing");n.push(c);const o=s[d[0]].level+s[d[1]].level-1,u=(0,p.shuffle)((0,p.difference)(t[d[0]],t[d[1]])),h=(0,p.shuffle)((0,p.difference)(t[d[1]],t[d[0]])),m=(0,p.shuffle)((0,p.intersection)(t[d[0]],t[d[1]])),g=u.pop();if(!g)throw new Error("No only in rule 1 things to choose from");const f={id:d[0],text:s[d[0]].title,level:s[d[0]].level,thing:{id:g,name:e[g].name}},j=h.pop();if(!j)throw new Error("No only in rule 2 things to choose from");const x={id:d[1],text:s[d[1]].title,level:s[d[1]].level,thing:{id:j,name:e[j].name}},v=(0,p.sampleSize)(m,4),y=(0,p.sampleSize)(u,8),b=(0,p.sampleSize)(h,8),Z={};v.forEach((e=>Z[e]=0)),y.forEach((e=>Z[e]=1)),b.forEach((e=>Z[e]=2));return{title:a,level:o,rule1:f,rule2:x,intersectingThing:r,things:(0,p.sampleSize)([...v,...y,...b],8).map((t=>({id:t,name:e[t].name,rule:Z[t]})))}}var se=s(913),ne=s(4691);function le(e){let{itemId:t,name:s,width:n=50}=e;return(0,j.jsxs)(l.Z,{vertical:!0,align:"center",children:[(0,j.jsx)(L.ck,{id:t,width:n}),(0,j.jsx)(v.Z.Text,{code:!0,children:s},t)]})}function ie(e){let{game:t}=e;const[s,n]=(0,y.useState)([{id:t.rule1.thing.id,name:t.rule1.thing.name,rule:1}]),[l,i]=(0,y.useState)([{id:t.rule2.thing.id,name:t.rule2.thing.name,rule:2}]),[a,r]=(0,y.useState)([{id:t.intersectingThing.id,name:t.intersectingThing.name,rule:0}]),[d,c]=(0,y.useState)(t.things.slice(0,4)),[u,h]=(0,y.useState)(t.things[0]);return(0,j.jsxs)(Z.Z,{direction:"vertical",align:"center",children:[(0,j.jsx)(v.Z.Title,{level:4,children:"Game Sample"}),(0,j.jsxs)(v.Z.Title,{level:5,children:['"',t.title,'"']}),(0,j.jsx)(se.Z,{value:t.level,count:t.level,disabled:!0}),(0,j.jsx)(v.Z.Paragraph,{style:{maxWidth:"500px"},children:"O c\xedrculo amarelo tem uma regra gramatical secreta e o circulo vermelho tem outra regra gramatical secreta. O quadrado do meio representa a interse\xe7\xe3o entre a regra amarela e a regra vermelha."}),(0,j.jsx)(Z.Z,{children:(0,j.jsx)(ae,{width:600,leftCircleChildren:(0,j.jsx)(o.F6,{style:{width:"100%",height:"100%"},children:s.map(((e,t,s)=>(0,j.jsx)(le,{itemId:e.id,name:e.name,width:t===s.length-1?80:60},e.id)))}),rightCircleChildren:(0,j.jsx)(o.F6,{style:{width:"100%",height:"100%"},children:l.map(((e,t,s)=>(0,j.jsx)(le,{itemId:e.id,name:e.name,width:t===s.length-1?80:60},e.id)))}),intersectionChildren:(0,j.jsx)(o.F6,{style:{width:"100%",height:"100%"},children:a.map(((e,t,s)=>(0,j.jsx)(le,{itemId:e.id,name:e.name,width:t===s.length-1?80:60},e.id)))})})}),(0,j.jsx)(v.Z.Text,{children:"Coloque os objetos nos c\xedrculos corretos:"}),(0,j.jsx)(Z.Z,{className:"space--center",children:d.map((e=>(0,j.jsx)(o.F6,{style:e.id===(null===u||void 0===u?void 0:u.id)?{outline:"3px solid hotPink"}:{},onClick:()=>h(e),children:(0,j.jsx)(le,{itemId:e.id,name:e.name},e.id)})))}),(0,j.jsx)(ne.Z,{items:[{key:"1",label:"Resposta",children:(0,j.jsxs)(Z.Z,{direction:"vertical",children:[(0,j.jsx)(v.Z.Text,{strong:!0,children:"Regra Amarela"}),(0,j.jsx)("ul",{children:(0,j.jsx)("li",{children:(0,j.jsx)(v.Z.Text,{children:t.rule1.text})})}),(0,j.jsx)(v.Z.Text,{strong:!0,children:"Regra Vermelha"}),(0,j.jsx)("ul",{children:(0,j.jsx)("li",{children:(0,j.jsx)(v.Z.Text,{children:t.rule2.text})})})]})}]}),(0,j.jsx)("div",{style:{height:"200px"}})]})}function ae(e){let{leftCircleChildren:t,rightCircleChildren:s,intersectionChildren:n,...l}=e;return(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 760 500",...l,children:[(0,j.jsx)("path",{fill:"#fbb03b",stroke:"#000",strokeMiterlimit:"10",strokeWidth:"5",d:"M252.78 3.5c-136.42 0-247 110.59-247 247s110.59 247 247 247 247-110.59 247-247-110.59-247-247-247zm.99 483.07C123.39 486.57 17.7 380.88 17.7 250.5S123.39 14.43 253.77 14.43 489.84 120.12 489.84 250.5 384.15 486.57 253.77 486.57z"}),(0,j.jsx)("path",{fill:"#f15a24",stroke:"#000",strokeMiterlimit:"10",strokeWidth:"5",d:"M508.22 3.5c-136.41 0-247 110.59-247 247s110.59 247 247 247 247-110.59 247-247-110.58-247-247-247zm.99 483.07c-130.38 0-236.07-105.69-236.07-236.07S378.84 14.43 509.22 14.43 745.29 120.12 745.29 250.5 639.6 486.57 509.22 486.57z"}),(0,j.jsx)("path",{fill:"#535353",d:"M487.34 250.5c0-62.39-24.29-121.04-68.41-165.16a235.9 235.9 0 00-37.43-30.47 235.35 235.35 0 00-37.43 30.47c-44.12 44.11-68.41 102.77-68.41 165.16s24.29 121.04 68.41 165.16a235.9 235.9 0 0037.43 30.47 235.35 235.35 0 0037.43-30.47c44.12-44.11 68.41-102.77 68.41-165.16z"}),(0,j.jsx)("path",{fill:"#535353",d:"M258.72 250.5c0-66.64 25.95-129.3 73.08-176.42a253.125 253.125 0 0134.1-28.57c-33.98-18.65-72.29-28.57-112.13-28.57-62.39 0-121.04 24.29-165.16 68.41C44.5 129.46 20.2 188.11 20.2 250.5s24.29 121.04 68.41 165.16c44.11 44.12 102.77 68.41 165.16 68.41 39.84 0 78.15-9.92 112.13-28.57a252.507 252.507 0 01-34.1-28.57c-47.12-47.12-73.08-109.78-73.08-176.42zM674.37 85.34C630.25 41.22 571.6 16.93 509.21 16.93c-40.27 0-78.98 10.14-113.24 29.18 11.74 8.26 22.86 17.6 33.22 27.96 47.12 47.12 73.08 109.78 73.08 176.42s-25.95 129.3-73.08 176.42a252.312 252.312 0 01-33.22 27.96c34.25 19.04 72.96 29.18 113.24 29.18 62.39 0 121.04-24.29 165.16-68.41 44.12-44.11 68.41-102.77 68.41-165.16s-24.29-121.04-68.41-165.16z"}),(0,j.jsx)("foreignObject",{x:"30",y:"25",width:"250",height:"450",children:(0,j.jsx)("div",{className:"venn-diagram__circle-content-left",children:t})}),(0,j.jsx)("foreignObject",{x:"480",y:"25",width:"250",height:"450",children:(0,j.jsx)("div",{className:"venn-diagram__circle-content-right",children:s})}),(0,j.jsx)("foreignObject",{x:"290",y:"65",width:"182",height:"370",children:(0,j.jsx)("div",{className:"venn-diagram__circle-content-intersection",children:n})})]})}function re(e){let{things:t,addEntryToUpdate:s,availableThings:n,rules:l,thingsByRules:i}=e;const[a,{width:r}]=(0,T.Z)(),[o,u]=(0,y.useState)(null);return(0,j.jsxs)(Z.Z,{direction:"vertical",ref:a,children:[(0,j.jsxs)(v.Z.Title,{level:5,children:["Rules By Items (Added: ",Object.keys(t).length," | ",n.length,")"]}),(0,j.jsx)(H,{addEntryToUpdate:s,availableThings:n,rules:l,width:r}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(c.ZP,{size:"large",onClick:()=>{u(Object.values(ee(1,{latestDate:"2023/01/01",latestNumber:0,used:[]},l,t))[0])},children:"Simulate"}),o&&(0,j.jsx)(ie,{game:o})]})}var de=s(952),ce=s(122);function oe(e){let{things:t,addEntryToUpdate:s,availableThings:n,rules:l,thingsByRules:i}=e;const[a,{width:r}]=(0,T.Z)(),c=(0,y.useMemo)((()=>Object.values(l).map((e=>({...e,thingsCount:i[e.id].length})))),[l,i]),o=(0,y.useMemo)((()=>{const e=Object.values(i).map((e=>e.length));return{maxThings:Math.max(...e),minThings:Math.min(...e),averageThings:Math.round(Object.values(i).reduce(((e,t)=>e+t.length),0)/Object.keys(i).length)}}),[i]),u=[{title:"Id",dataIndex:"id",key:"id",sorter:(e,t)=>Number(e.id.split("-")[1])-Number(t.id.split("-")[1]),render:e=>(0,j.jsx)(v.Z.Text,{children:e})},{title:"Rule",dataIndex:"title",key:"title",sorter:(e,t)=>e.title.localeCompare(t.title),render:e=>(0,j.jsx)(v.Z.Text,{children:e})},{title:"Things",dataIndex:"thingsCount",key:"thingsCount",render:(e,s)=>(0,j.jsxs)(Z.Z,{size:"small",children:[(0,j.jsx)(de.Z,{children:e}),(0,j.jsxs)(Z.Z,{size:"small",wrap:!0,children:[i[s.id].slice(0,20).map((e=>(0,j.jsx)(le,{itemId:e,name:t[e].name},"".concat(s.id,"-").concat(e)))),i[s.id].length>20&&(0,j.jsxs)(v.Z.Text,{children:["+",e-20," more"]})]})]}),sorter:(e,t)=>e.thingsCount-t.thingsCount},{title:"Level",dataIndex:"level",key:"level",sorter:(e,t)=>e.level-t.level,render:e=>(0,j.jsx)(se.Z,{value:e,count:3,disabled:!0})}];return(0,j.jsxs)(Z.Z,{direction:"vertical",ref:a,children:[(0,j.jsxs)(v.Z.Title,{level:4,children:["Things By Rule (Added: ",Object.keys(t).length," | ",n.length,")"]}),(0,j.jsxs)(Z.Z,{split:(0,j.jsx)(d.Z,{type:"vertical"}),children:[(0,j.jsx)(H,{addEntryToUpdate:s,availableThings:n,rules:l,width:r}),(0,j.jsxs)(v.Z.Text,{strong:!0,children:["Average Things: ",(0,j.jsx)(de.Z,{children:o.averageThings})]}),(0,j.jsxs)(v.Z.Text,{strong:!0,children:["Max Things: ",(0,j.jsx)(de.Z,{children:o.maxThings})]}),(0,j.jsxs)(v.Z.Text,{strong:!0,children:["Min Things: ",(0,j.jsx)(de.Z,{children:o.minThings})]})]}),(0,j.jsx)(ce.Z,{dataSource:c,columns:u})]})}function ue(e){let{children:t,things:s,rules:n,addEntryToUpdate:l}=e;const i=(0,y.useMemo)((()=>Object.values(s).filter((e=>{const t=e.updatedAt,s=Object.values(n).reduce(((e,t)=>Math.max(e,t.updatedAt)),0);return!e.syllables||void 0===e.stressedSyllable||s>t}))),[s,n]),[a,r]=(0,y.useState)(null);(0,y.useEffect)((()=>{console.count("Checking for things that need to update..."),i.length>0&&(async e=>{console.log("Found things that need to update..."),r(null),await(0,f.Dc)(250),i.length>0&&r(i[0])})(i[0])}),[i]);return(0,j.jsxs)(j.Fragment,{children:[a&&(0,j.jsx)(B,{subtitle:"(".concat(i.length," left to update)"),isModalOpen:null!==a,onSaveThing:e=>{l(e.itemId,e)},onCancel:()=>r(null),thing:a,rules:n}),(0,j.jsx)(j.Fragment,{children:t})]})}function he(e){let{things:t,rules:s}=e;const[n]=(0,T.Z)(),[l,i]=(0,y.useState)(null);return(0,j.jsxs)(Z.Z,{direction:"vertical",ref:n,children:[(0,j.jsx)(v.Z.Title,{level:5,children:"Game Simulator"}),(0,j.jsx)(c.ZP,{size:"large",onClick:()=>{i(Object.values(ee(1,{latestDate:"2023/01/01",latestNumber:0,used:[]},s,t))[0])},children:"Simulate"}),(0,j.jsx)(c.ZP,{size:"large",onClick:()=>{let e=null;try{e=ee(25,{latestDate:"2023/01/01",latestNumber:0,used:[]},s,t),console.log(e)}catch(n){console.error(n)}},children:"Generate Demos (log)"}),l&&(0,j.jsx)(ie,{game:l},JSON.stringify(l))]})}function me(e){let{data:t,addEntryToUpdate:s}=e;const n=(0,b.N)("items"),l=(0,b.N)("daily-diagram-rules"),a=(0,y.useMemo)((()=>{var e;return Object.values(null!==(e=n.data)&&void 0!==e?e:{}).filter((e=>{var s,n,l;if(t&&void 0!==t[e.id])return!1;if(null!==(s=e.decks)&&void 0!==s&&s.includes("thing"))return!0;const i=1===e.name.pt.split(" ").length;return!(null===(n=e.decks)||void 0===n||!n.includes("alien")||!i)||!(null===(l=e.decks)||void 0===l||!l.includes("manufactured")||!i)}))}),[t,n.data]),r=(0,y.useMemo)((()=>{var e;return null!==(e=l.data)&&void 0!==e?e:{}}),[l.data]),d=(0,y.useMemo)((()=>{const e=Object.values(r).reduce(((e,t)=>(e[t.id]=[],e)),{});return(0,p.orderBy)(Object.values(t),["updatedAt"],["desc"]).forEach((t=>{t.rules.forEach((s=>{e[s].push(t.itemId)}))})),e}),[t,r]),{is:c,queryParams:o}=(0,g.K)();return n.isLoading||l.isLoading?(0,j.jsx)(v.Z.Text,{children:"Loading..."}):(0,j.jsx)(i.T,{isLoading:n.isLoading||l.isLoading,hasResponseData:n.hasResponseData||l.hasResponseData,children:(0,j.jsxs)(ue,{things:t,rules:r,addEntryToUpdate:s,children:[(c("display","rule")||!o.has("display"))&&(0,j.jsx)(oe,{things:t,addEntryToUpdate:s,availableThings:a,rules:r,thingsByRules:d}),c("display","thing")&&(0,j.jsx)(re,{things:t,addEntryToUpdate:s,availableThings:a,rules:r,thingsByRules:d}),c("display","simulator")&&(0,j.jsx)(he,{things:t,addEntryToUpdate:s,availableThings:a,rules:r})]})})}var ge=s(4562),pe=s(8938);function fe(){const e=(0,pe.i)({tdrResourceName:"daily-diagram-items",firebaseDataCollectionName:"diagramItems",serialize:!0});return(0,j.jsx)(m.Xg,{title:"Items",subtitle:"Quartet Sets",children:(0,j.jsxs)(n.Z,{hasSider:!0,children:[(0,j.jsx)(ge.p,{children:(0,j.jsx)(x,{...e})}),(0,j.jsx)(n.Z.Content,{className:"content",children:(0,j.jsx)(i.T,{isLoading:e.isLoading||e.isSaving,error:e.error,hasResponseData:!(0,p.isEmpty)(e.data),children:(0,j.jsx)(l.Z,{vertical:!0,gap:24,children:(0,j.jsx)(me,{...e})})})})]})})}const je=fe}}]);
//# sourceMappingURL=ItemsDiagramSets.0003c7dc.chunk.js.map