"use strict";(self.webpackChunktdr=self.webpackChunktdr||[]).push([[2],{8027:(t,e,s)=>{s.d(e,{A:()=>o,X:()=>c});var i=s(2481),a=s(2748),n=s(2010),r=s(5850);function o(t,e){return async()=>{var s;console.log("%cQuerying ".concat(t,"/").concat(e," from firebase: ").concat((0,r.xE)()),"color: #f0f");const n=(0,i.JU)(a.RZ,"".concat(t,"/").concat(e));return null!==(s=(await(0,i.QT)(n)).data())&&void 0!==s?s:{}}}function c(t,e,s){return(0,n.a)({queryKey:["firebase",t,e],queryFn:o(t,e),...s})}},8938:(t,e,s)=>{s.d(e,{i:()=>d});var i=s(4747),a=s(763),n=s(2791),r=s(3713),o=s(8027),c=s(5529),l=s(2233),u=s(5850);function d(t){let{tdrResourceName:e,firebaseDataCollectionName:s,serialize:d}=t;const{notification:h}=i.Z.useApp(),v=(0,r.NL)(),p=(0,c.N)(e),Z=(0,o.X)("data",s,{select:d?u.d_:void 0}),[f,m]=(0,n.useState)({}),g=(0,l.B)("data",s,{onSuccess:()=>{h.success({message:"".concat(s," updated")}),v.refetchQueries({queryKey:["firebase","data",s]}),m({})},onError:t=>{h.error({message:"".concat(s," update failed"),description:t.message})}}),b=(0,n.useMemo)((()=>{var t,i;return p.isLoading||Z.isLoading||g.isPending?{}:(console.log("%cMerging ".concat(e,"+").concat(s," data..."),"color: #f0f"),(0,a.cloneDeep)({...null!==(t=p.data)&&void 0!==t?t:{},...null!==(i=Z.data)&&void 0!==i?i:{},...f}))}),[e,s,p.data,Z.data,p.isLoading,Z.isLoading,g.isPending,f]),y=!(0,a.isEmpty)(f),S=Z.data;return{data:b,isLoading:p.isLoading||Z.isLoading,error:p.error||Z.error,firebaseData:S,isSaving:g.isPending,save:()=>{g.mutate(d?(0,u.aS)(f):f)},addEntryToUpdate:(t,e)=>{m((s=>({...s,[t]:e})))},entriesToUpdate:f,isDirty:y}}},2233:(t,e,s)=>{s.d(e,{B:()=>o});var i=s(2481),a=s(2748),n=s(8556);function r(t,e,s){console.log("%cUpdating ".concat(t,"/").concat(e," from firebase"),"color: #f00");const n=(0,i.JU)(a.RZ,"".concat(t,"/").concat(e));return(0,i.r7)(n,s)}function o(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,n.D)({mutationFn:async s=>r(t,e,s),...s})}},7273:(t,e,s)=>{s.r(e),s.d(e,{ItemsQuartets:()=>d,default:()=>h});var i=s(3990),a=s(2128),n=s(8737),r=s(1958),o=s(4562),c=s(8938),l=s(763),u=s(184);function d(){const{data:t,isLoading:e,error:s,isSaving:d,save:h,addEntryToUpdate:v,entriesToUpdate:p,isDirty:Z}=(0,c.i)({tdrResourceName:"daily-quartet-sets",firebaseDataCollectionName:"quartetSets"});return(0,u.jsx)(r.Xg,{title:"Items",subtitle:"Quartet Sets",children:(0,u.jsxs)(i.Z,{hasSider:!0,children:[(0,u.jsx)(o.p,{children:(0,u.jsx)(u.Fragment,{children:"-"})}),(0,u.jsx)(i.Z.Content,{className:"content",children:(0,u.jsx)(a.T,{isLoading:e,error:s,hasResponseData:!(0,l.isEmpty)(t),children:(0,u.jsx)(n.l,{})})})]})})}const h=d},8556:(t,e,s)=>{s.d(e,{D:()=>C});var i,a,n,r,o,c,l=s(2791),u=s(101),d=s(2346),h=s(6033),v=s(3889),p=s(3092),Z=s(2756),f=s(7211),m=s(8974),g=s(5391),b=(i=new WeakMap,a=new WeakMap,n=new WeakMap,r=new WeakMap,o=new WeakSet,c=new WeakSet,class extends m.l{constructor(t,e){super(),(0,u.Z)(this,c),(0,u.Z)(this,o),(0,d.Z)(this,i,{writable:!0,value:void 0}),(0,d.Z)(this,a,{writable:!0,value:void 0}),(0,d.Z)(this,n,{writable:!0,value:void 0}),(0,d.Z)(this,r,{writable:!0,value:void 0}),(0,p.Z)(this,i,t),this.setOptions(e),this.bindMethods(),(0,v.Z)(this,o,y).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=(0,h.Z)(this,i).defaultMutationOptions(t),(0,g.VS)(this.options,s)||(0,h.Z)(this,i).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,h.Z)(this,n),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&(0,g.Ym)(s.mutationKey)!==(0,g.Ym)(this.options.mutationKey)?this.reset():"pending"===(null===(e=(0,h.Z)(this,n))||void 0===e?void 0:e.state.status)&&(0,h.Z)(this,n).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null===(t=(0,h.Z)(this,n))||void 0===t||t.removeObserver(this))}onMutationUpdate(t){(0,v.Z)(this,o,y).call(this),(0,v.Z)(this,c,S).call(this,t)}getCurrentResult(){return(0,h.Z)(this,a)}reset(){var t;null===(t=(0,h.Z)(this,n))||void 0===t||t.removeObserver(this),(0,p.Z)(this,n,void 0),(0,v.Z)(this,o,y).call(this),(0,v.Z)(this,c,S).call(this)}mutate(t,e){var s;return(0,p.Z)(this,r,e),null===(s=(0,h.Z)(this,n))||void 0===s||s.removeObserver(this),(0,p.Z)(this,n,(0,h.Z)(this,i).getMutationCache().build((0,h.Z)(this,i),this.options)),(0,h.Z)(this,n).addObserver(this),(0,h.Z)(this,n).execute(t)}});function y(){var t,e;const s=null!==(t=null===(e=(0,h.Z)(this,n))||void 0===e?void 0:e.state)&&void 0!==t?t:(0,Z.R)();(0,p.Z)(this,a,{...s,isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset})}function S(t){f.V.batch((()=>{if((0,h.Z)(this,r)&&this.hasListeners()){const d=(0,h.Z)(this,a).variables,v=(0,h.Z)(this,a).context;var e,s,i,n;if("success"===(null===t||void 0===t?void 0:t.type))null===(e=(s=(0,h.Z)(this,r)).onSuccess)||void 0===e||e.call(s,t.data,d,v),null===(i=(n=(0,h.Z)(this,r)).onSettled)||void 0===i||i.call(n,t.data,null,d,v);else if("error"===(null===t||void 0===t?void 0:t.type)){var o,c,l,u;null===(o=(c=(0,h.Z)(this,r)).onError)||void 0===o||o.call(c,t.error,d,v),null===(l=(u=(0,h.Z)(this,r)).onSettled)||void 0===l||l.call(u,void 0,t.error,d,v)}}this.listeners.forEach((t=>{t((0,h.Z)(this,a))}))}))}var w=s(3713),L=s(8981);function C(t,e){const s=(0,w.NL)(e),[i]=l.useState((()=>new b(s,t)));l.useEffect((()=>{i.setOptions(t)}),[i,t]);const a=l.useSyncExternalStore(l.useCallback((t=>i.subscribe(f.V.batchCalls(t))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),n=l.useCallback(((t,e)=>{i.mutate(t,e).catch(L.Z)}),[i]);if(a.error&&(0,L.L)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:n,mutateAsync:a.mutate}}}}]);
//# sourceMappingURL=ItemsQuartets.98d09da1.chunk.js.map