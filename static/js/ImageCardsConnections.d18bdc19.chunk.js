(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[7286],{7018:(t,e,s)=>{"use strict";s.d(e,{o:()=>a});var n=s(2252),i=s(5850),r=s(184);function a(t){let{data:e,fileName:s,loading:a,children:o,...l}=t;return(0,r.jsx)(n.ZP,{onClick:()=>(0,i.ZN)("function"===typeof e?e():e,s),loading:a,...l,children:null!==o&&void 0!==o?o:"Download JSON"})}},145:(t,e,s)=>{"use strict";s.d(e,{f:()=>o});var n=s(3733),i=s(6340),r=s(2606),a=s(184);const o=t=>{let{id:e,width:s=200,className:o="",preview:l=!0,fileExtension:c="jpg"}=t;const{getUrl:d}=(0,r.n)("images"),h=e.replace(/-/g,"/");return(0,a.jsx)("div",{className:(0,n.Z)("image-card",o),children:(0,a.jsx)(i.Z,{width:s,src:d("".concat(h,".").concat(c)),fallback:d("back/default.jpg"),preview:l})})}},7166:(t,e,s)=>{"use strict";s.d(e,{P:()=>o,l:()=>l});var n=s(2791),i=s(1127),r=s(184);const a=(0,n.createContext)({}),o=t=>{let{children:e}=t;const s=(0,i.AZ)(),[o,l]=(0,n.useState)(15),[c,d]=(0,n.useState)(5),[h,u]=(0,n.useState)(150),[v,g]=(0,n.useState)(!1),f=(0,i.IN)(s.data,s.setDirty,o,c);return(0,r.jsx)(a.Provider,{value:{sampleSize:o,setSampleSize:l,tagThreshold:c,setTagThreshold:d,cardSize:h,setCardSize:u,showIds:v,setShowIds:g,randomGroups:f,query:s},children:e})},l=()=>(0,n.useContext)(a)},9936:(t,e,s)=>{"use strict";s.d(e,{A:()=>l});var n=s(8622),i=s(5225),r=s(9367),a=s(7166),o=s(184);function l(){const{query:{stats:t}}=(0,a.l)();return(0,o.jsx)(i.Z.Item,{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.C,{icon:(0,o.jsx)(n.Z,{}),shape:"square",size:"small",style:{marginRight:6}}),"Stats"]}),children:(0,o.jsxs)("ul",{className:"statistic__list",children:[(0,o.jsxs)("li",{children:["Completion: ",Math.floor(100*t.total/2520),"%"]}),(0,o.jsxs)("li",{children:["Total Relationships: ",t.total]}),(0,o.jsxs)("li",{children:["Complete: ",t.complete]}),(0,o.jsxs)("li",{children:["Overdone: ",t.overdone]}),(0,o.jsxs)("li",{children:["Single Match: ",t.single]})]})})}},1127:(t,e,s)=>{"use strict";s.d(e,{AZ:()=>p,gU:()=>f,IN:()=>m});var n=s(4747),i=s(9631),r=s(763),a=s(2791),o=s(2592),l=s(5850),c=s(3713),d=s(2010),h=s(8556);var u=s(4766);const v=()=>(0,r.padStart)(String((0,r.random)(1,252)),2,"0"),g=()=>(0,r.random)(1,12);function f(t,e){var s,n,i;const[r,o]=(0,a.useState)(g()),[c,d]=(0,a.useState)(v()),[h,f]=(0,a.useState)(g()),[p,m]=(0,a.useState)(v()),S="td-d".concat(r,"-").concat(c),Z="td-d".concat(h,"-").concat(p),[y,x]=(0,a.useState)(0),{queryParams:b}=(0,u.K)(),w=Number(null!==(s=b.get("cycle"))&&void 0!==s?s:3),j=null!==(n=null===t||void 0===t?void 0:t[S])&&void 0!==n?n:[],C=null!==(i=null===t||void 0===t?void 0:t[Z])&&void 0!==i?i:[],E=()=>{x(0),o(g()),d(v()),f(g()),m(v())};return(0,a.useEffect)((()=>{S===Z&&m(v())}),[S,Z]),{cardAId:S,cardA:j,cardBId:Z,cardB:C,relate:()=>{x(0),j.push(Z),t[S]=(0,l.R1)(j),C.push(S),t[Z]=(0,l.R1)(C),e(!0),o(h),d(p),f(g()),m(v())},unrelate:()=>{y>=w?(x(0),E()):(x((t=>t+1)),f(g()),m(v()))},areRelated:j.includes(Z),onRandomCards:E}}function p(){const[t,e]=(0,a.useState)(!1),s=["data/imageCardsRelationships"],r=(0,c.NL)(),{notification:l}=n.Z.useApp(),[u,v]=(0,a.useState)({total:0,overdone:0,complete:0,single:0}),{data:g={},isLoading:f,isSuccess:p,isError:m,error:S,isFetched:Z,isRefetching:y,refetch:x}=(0,d.a)({queryKey:s,queryFn:async()=>{var t;const e=(0,i.JU)(o.RZ,"data/imageCardsRelationships");return null!==(t=(await(0,i.QT)(e)).data())&&void 0!==t?t:{}}}),{isPending:b,isError:w,isSuccess:j,mutate:C}=(0,h.D)({mutationKey:s,mutationFn:async()=>{const t=(0,i.JU)(o.RZ,"data/imageCardsRelationships");return await(0,i.pl)(t,g),g},onSuccess:()=>{l.success({message:"Saved",placement:"bottomLeft"}),r.refetchQueries({queryKey:s}),e(!1)}});return(0,a.useEffect)((()=>{if(!y&&Z){const t=Object.keys(g).length;let e=0,s=0,n=0;Object.values(g).forEach((t=>{t.length>8&&(e+=1),1===t.length&&(n+=1),t.length>2&&(s+=1)})),v({total:t,overdone:e,complete:s,single:n})}}),[Z,y]),{data:g,isLoading:f,isSuccess:p,isError:m,error:S,hasData:p&&Object.keys(g).length>0,refetch:x,isSaving:b,isMutationError:w,isSaved:j,save:C,setDirty:e,isDirty:t,stats:u}}function m(t,e,s,n){const[i,r]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[u,f]=(0,a.useState)(0),[p,m]=(0,a.useState)(!0),[S,Z]=(0,a.useState)([]),y=e=>{c((null!==e&&void 0!==e?e:i).map((e=>{var s;return null!==(s=null===t||void 0===t?void 0:t[e])&&void 0!==s?s:[]})))},x=()=>{const e=[...S];let i=0;const a=d.length<2e3?d:[];let o=0;for(;o<400&&e.length<s;){var l;const s="td-d".concat(g(),"-").concat(v()),r=null!==(l=t[s])&&void 0!==l?l:[],c=!(n>0)||r.length<n,d=!!p&&a.includes(s);e.includes(s)||d||!c||(e.push(s),i+=1),o+=1}r(e),h((t=>[...t,...e])),y(e),f((t=>t+i))};(0,a.useEffect)((()=>{0===i.length&&x()}),[i]);return{cardIds:i,cards:o,selection:S,onSelect:t=>{Z((e=>{const s=[...e],n=s.indexOf(t);return n>-1?s.splice(n,1):s.push(t),s}))},relate:()=>{S.forEach((e=>{var s;const n=null!==(s=t[e])&&void 0!==s?s:[];n.push(...S.filter((t=>t!==e))),t[e]=(0,l.R1)(n)})),e(!0),Z([]),y(),h([]),f(0)},nextSet:x,deselectAll:()=>{Z([])},cycles:u,filters:{useCycles:p,toggleUseCycles:()=>{m((t=>!t))}}}}},4766:(t,e,s)=>{"use strict";s.d(e,{K:()=>r});var n=s(2791),i=s(1087);function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[e,s]=(0,i.lr)(),r=(t,n,i)=>{void 0===n||""===n||n===i?e.delete(t):e.set(t,String(n)),s(e)},a=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(t).forEach((t=>{let[s,i]=t;n[s]===i?e.delete(s):e.set(s,String(i))})),s(e)},o=t=>{e.delete(t),s(e)},l=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true";return e.get(t)===String(s)};return(0,n.useEffect)((()=>{Object.entries(t).forEach((t=>{let[s,n]=t;e.has(s)||r(s,n)}))}),[]),{addParam:r,addParams:a,removeParam:o,queryParams:e,is:l}}},8741:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>M});var n=s(1790),i=s(4520),r=s(1046),a=s(952),o=s(4453),l=s(2128),c=s(763),d=s(2791),h=s(7415),u=s(7460);const v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm154.7 454.5l-246 178c-5.3 3.8-12.7 0-12.7-6.5v-46.9c0-10.2 4.9-19.9 13.2-25.9L566.6 512 421.2 406.8c-8.3-6-13.2-15.6-13.2-25.9V334c0-6.5 7.4-10.3 12.7-6.5l246 178c4.4 3.2 4.4 9.8 0 13z"}}]},name:"right-circle",theme:"filled"};var g=s(4508),f=function(t,e){return d.createElement(g.Z,(0,u.Z)({},t,{ref:e,icon:v}))};const p=d.forwardRef(f);var m=s(145),S=s(7166),Z=s(184);function y(){const{query:{isDirty:t,isSaving:e,save:s,stats:n,data:u,...v},randomGroups:{cardIds:g},showIds:f,cardSize:y}=(0,S.l)(),[b,{width:w}]=(0,h.Z)(),[,j]=(0,d.useMemo)((()=>{const t=Math.floor(w/y)+1;return[t,Math.floor(w/t)]}),[y,w]),C=[{title:"Length",dataIndex:"length",key:"length"},{title:"Relationships",dataIndex:"relationships",key:"relationship",render:(t,e)=>(0,Z.jsx)(i.Z,{wrap:"wrap",gap:2,children:t.map((s=>(0,Z.jsxs)(r.Z,{children:[(0,Z.jsxs)(r.Z,{direction:"vertical",children:[(0,Z.jsx)(m.f,{id:s,width:j}),f&&(0,Z.jsx)(a.Z,{children:s})]}),t[t.length-1]!==s&&(0,Z.jsx)(p,{})]},"".concat(e.origin,"-").concat(s))))})}],E=(0,d.useMemo)((()=>(0,c.orderBy)(g.map((t=>{const e=x(t,u,"longest",10);return{key:t,origin:t,length:e.length,relationships:e}})),["length"],["desc"])),[g,u]);return(0,Z.jsx)(l.T,{isLoading:v.isLoading,error:v.error,hasResponseData:!0,children:(0,Z.jsx)("div",{ref:b,className:"my-6",children:(0,Z.jsx)(o.Z,{dataSource:E,columns:C})})})}const x=(0,c.memoize)(((t,e,s,n)=>{const i=new Set,r=[];let a=[],o=0;for(r.push({currentId:t,path:[],depth:0});r.length>0&&o<100;){o++;const{currentId:t,path:l,depth:c}=r.pop();if(i.add(t),l.push(t),"longest"===s&&l.length>a.length&&(a=[...l]),"shortest"===s&&(0===a.length||l.length<a.length)&&(a=[...l]),"any"===s&&0===a.length&&(a=[...l]),!(c>=n))for(const s of e[t]||[])i.has(s)||r.push({currentId:s,path:[...l],depth:c+1})}return a}));var b=s(2252),w=s(7965),j=s(8357),C=s(7018),E=s(6591),R=s(9936);function z(){const{query:{isDirty:t,isSaving:e,data:s,isLoading:n,isError:i},showIds:r,setShowIds:a,sampleSize:o,setSampleSize:l,cardSize:d,setCardSize:h,randomGroups:{nextSet:u}}=(0,S.l)();return(0,Z.jsxs)(w.p3,{children:[(0,Z.jsx)(j.Th,{isLoading:n||e,isDirty:t,isError:i,hasResponseData:!(0,c.isEmpty)(s)}),(0,Z.jsxs)(w.Pd,{children:[(0,Z.jsx)(j.Do,{label:"Show Ids",value:r,onChange:t=>a(t)}),(0,Z.jsx)(j.zE,{onChange:t=>l(t),value:o,options:E.ZI,label:"Sample Size"}),(0,Z.jsx)(j.zE,{onChange:t=>h(t),value:d,options:E.Hn,label:"Card Size"}),(0,Z.jsx)(b.ZP,{onClick:u,block:!0,type:"primary",children:"New Random Sample"})]}),(0,Z.jsx)(w.Pd,{children:(0,Z.jsx)(R.A,{})}),(0,Z.jsx)(w.Pd,{children:(0,Z.jsx)(C.o,{data:s,fileName:"imageCardsRelationships.json",loading:e,disabled:(0,c.isEmpty)(s),block:!0})})]})}const M=function(){return(0,Z.jsx)(w.Xg,{title:"Image Cards",subtitle:"Connections",children:(0,Z.jsx)(S.P,{children:(0,Z.jsxs)(n.Z,{hasSider:!0,children:[(0,Z.jsx)(z,{}),(0,Z.jsx)(n.Z.Content,{className:"content",children:(0,Z.jsx)(y,{})})]})})})}},8622:(t,e,s)=>{"use strict";s.d(e,{Z:()=>l});var n=s(7460),i=s(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};var a=s(4508),o=function(t,e){return i.createElement(a.Z,(0,n.Z)({},t,{ref:e,icon:r}))};const l=i.forwardRef(o)},8624:(t,e,s)=>{"use strict";s.d(e,{S1:()=>r,ZT:()=>n,jU:()=>a,on:()=>i});var n=function(){};function i(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function r(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var a="undefined"!==typeof window},7415:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var n=s(2791),i=s(8624);const r=i.jU?n.useLayoutEffect:n.useEffect;var a={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const o=i.jU&&"undefined"!==typeof window.ResizeObserver?function(){var t=(0,n.useState)(null),e=t[0],s=t[1],i=(0,n.useState)(a),o=i[0],l=i[1],c=(0,n.useMemo)((function(){return new window.ResizeObserver((function(t){if(t[0]){var e=t[0].contentRect,s=e.x,n=e.y,i=e.width,r=e.height,a=e.top,o=e.left,c=e.bottom,d=e.right;l({x:s,y:n,width:i,height:r,top:a,left:o,bottom:c,right:d})}}))}),[]);return r((function(){if(e)return c.observe(e),function(){c.disconnect()}}),[e]),[s,o]}:function(){return[i.ZT,a]}},1291:t=>{function e(t,e){if((t=t.replace(/\s+/g,""))===(e=e.replace(/\s+/g,"")))return 1;if(t.length<2||e.length<2)return 0;let s=new Map;for(let i=0;i<t.length-1;i++){const e=t.substring(i,i+2),n=s.has(e)?s.get(e)+1:1;s.set(e,n)}let n=0;for(let i=0;i<e.length-1;i++){const t=e.substring(i,i+2),r=s.has(t)?s.get(t):0;r>0&&(s.set(t,r-1),n++)}return 2*n/(t.length+e.length-2)}t.exports={compareTwoStrings:e,findBestMatch:function(t,s){if(!function(t,e){return"string"===typeof t&&(!!Array.isArray(e)&&(!!e.length&&!e.find((function(t){return"string"!==typeof t}))))}(t,s))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const n=[];let i=0;for(let a=0;a<s.length;a++){const r=s[a],o=e(t,r);n.push({target:r,rating:o}),o>n[i].rating&&(i=a)}const r=n[i];return{ratings:n,bestMatch:r,bestMatchIndex:i}}}},8556:(t,e,s)=>{"use strict";s.d(e,{D:()=>j});var n,i,r,a,o,l,c=s(2791),d=s(101),h=s(2346),u=s(6033),v=s(3889),g=s(3092),f=s(2756),p=s(7211),m=s(8974),S=s(5391),Z=(n=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakMap,o=new WeakSet,l=new WeakSet,class extends m.l{constructor(t,e){super(),(0,d.Z)(this,l),(0,d.Z)(this,o),(0,h.Z)(this,n,{writable:!0,value:void 0}),(0,h.Z)(this,i,{writable:!0,value:void 0}),(0,h.Z)(this,r,{writable:!0,value:void 0}),(0,h.Z)(this,a,{writable:!0,value:void 0}),(0,g.Z)(this,n,t),this.setOptions(e),this.bindMethods(),(0,v.Z)(this,o,y).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=(0,u.Z)(this,n).defaultMutationOptions(t),(0,S.VS)(this.options,s)||(0,u.Z)(this,n).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,u.Z)(this,r),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&(0,S.Ym)(s.mutationKey)!==(0,S.Ym)(this.options.mutationKey)?this.reset():"pending"===(null===(e=(0,u.Z)(this,r))||void 0===e?void 0:e.state.status)&&(0,u.Z)(this,r).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null===(t=(0,u.Z)(this,r))||void 0===t||t.removeObserver(this))}onMutationUpdate(t){(0,v.Z)(this,o,y).call(this),(0,v.Z)(this,l,x).call(this,t)}getCurrentResult(){return(0,u.Z)(this,i)}reset(){var t;null===(t=(0,u.Z)(this,r))||void 0===t||t.removeObserver(this),(0,g.Z)(this,r,void 0),(0,v.Z)(this,o,y).call(this),(0,v.Z)(this,l,x).call(this)}mutate(t,e){var s;return(0,g.Z)(this,a,e),null===(s=(0,u.Z)(this,r))||void 0===s||s.removeObserver(this),(0,g.Z)(this,r,(0,u.Z)(this,n).getMutationCache().build((0,u.Z)(this,n),this.options)),(0,u.Z)(this,r).addObserver(this),(0,u.Z)(this,r).execute(t)}});function y(){var t,e;const s=null!==(t=null===(e=(0,u.Z)(this,r))||void 0===e?void 0:e.state)&&void 0!==t?t:(0,f.R)();(0,g.Z)(this,i,{...s,isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset})}function x(t){p.V.batch((()=>{if((0,u.Z)(this,a)&&this.hasListeners()){const h=(0,u.Z)(this,i).variables,v=(0,u.Z)(this,i).context;var e,s,n,r;if("success"===(null===t||void 0===t?void 0:t.type))null===(e=(s=(0,u.Z)(this,a)).onSuccess)||void 0===e||e.call(s,t.data,h,v),null===(n=(r=(0,u.Z)(this,a)).onSettled)||void 0===n||n.call(r,t.data,null,h,v);else if("error"===(null===t||void 0===t?void 0:t.type)){var o,l,c,d;null===(o=(l=(0,u.Z)(this,a)).onError)||void 0===o||o.call(l,t.error,h,v),null===(c=(d=(0,u.Z)(this,a)).onSettled)||void 0===c||c.call(d,void 0,t.error,h,v)}}this.listeners.forEach((t=>{t((0,u.Z)(this,i))}))}))}var b=s(3713),w=s(8981);function j(t,e){const s=(0,b.NL)(e),[n]=c.useState((()=>new Z(s,t)));c.useEffect((()=>{n.setOptions(t)}),[n,t]);const i=c.useSyncExternalStore(c.useCallback((t=>n.subscribe(p.V.batchCalls(t))),[n]),(()=>n.getCurrentResult()),(()=>n.getCurrentResult())),r=c.useCallback(((t,e)=>{n.mutate(t,e).catch(w.Z)}),[n]);if(i.error&&(0,w.L)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:r,mutateAsync:i.mutate}}}}]);
//# sourceMappingURL=ImageCardsConnections.d18bdc19.chunk.js.map