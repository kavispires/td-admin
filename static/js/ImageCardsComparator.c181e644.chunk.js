"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[2718],{7018:(e,t,n)=>{n.d(t,{o:()=>s});var r=n(2252),i=n(5850),a=n(184);function s(e){let{data:t,fileName:n,loading:s,children:o,...c}=e;return(0,a.jsx)(r.ZP,{onClick:()=>(0,i.ZN)("function"===typeof t?t():t,n),loading:s,...c,children:null!==o&&void 0!==o?o:"Download JSON"})}},7340:(e,t,n)=>{n.d(t,{k:()=>u});var r=n(2252),i=n(2426),a=n.n(i),s=n(2791),o=n(8211),c=n(4483),l=n(4841),d=n(184);function u(e){let{isDirty:t,onSave:n,isSaving:i,dirt:u,interval:f=6e5,...h}=e;const{togglePendingSave:v}=(0,l.b)(),[,g,m]=(0,o.Z)((()=>{t&&n()}),f);return(0,s.useEffect)((()=>{t?(v(!0),console.log("Save Reset",a()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),m()):(v(!1),g())}),[t,m,g,u]),(0,s.useEffect)((()=>{const e=e=>{if(t){const t="You have unsaved changes, are you sure you want to leave?";return e.returnValue=t,t}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t]),(0,d.jsx)(r.ZP,{type:"primary",size:"large",icon:(0,d.jsx)(c.Z,{}),onClick:n,disabled:!t,loading:i,danger:!0,block:!0,...h,children:"Save"})}},8866:(e,t,n)=>{n.d(t,{N:()=>a});var r=n(945),i=n(184);function a(e){let{children:t,level:n,...a}=e;return(0,i.jsx)(r.Z.Title,{level:null!==n&&void 0!==n?n:3,...a,children:t})}},8357:(e,t,n)=>{n.d(t,{tj:()=>s.tj,xh:()=>s.xh,H:()=>s.H,zE:()=>s.zE,Do:()=>s.Do,Th:()=>u,F6:()=>a});n(8866);var r=n(3733),i=n(184);const a=e=>{let{children:t,active:n=!1,activeClass:a="",className:s="",hoverType:o="scale",...c}=e;return(0,i.jsx)("button",{className:(0,r.Z)("transparent-button","transparent-button--".concat(o),n&&(a||"transparent-button--active"),s),...c,children:t})};var s=n(2043),o=n(952),c=n(5225),l=n(7965);function d(e){let{isLoading:t,isIdle:n,error:r,isDirty:a,isError:s,hasResponseData:c}=e;return n?(0,i.jsx)(o.Z,{children:"No Data yet"}):t?(0,i.jsx)(o.Z,{color:"blue",children:"Loading..."}):r||s?(0,i.jsx)(o.Z,{color:"red",children:"Error"}):a?(0,i.jsx)(o.Z,{color:"orange",children:"Modified"}):c?(0,i.jsx)(o.Z,{color:"green",children:"Loaded"}):(0,i.jsx)(o.Z,{children:"No Data"})}function u(e){return(0,i.jsx)(l.Pd,{children:(0,i.jsx)(c.Z.Item,{label:"Status",children:(0,i.jsx)(d,{...e})})})}},145:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(3733),i=n(6340),a=n(2606),s=n(184);const o=e=>{let{id:t,width:n=200,className:o="",preview:c=!0,fileExtension:l="jpg"}=e;const{getUrl:d}=(0,a.n)("images"),u=t.replace(/-/g,"/");return(0,s.jsx)("div",{className:(0,r.Z)("image-card",o),children:(0,s.jsx)(i.Z,{width:n,src:d("".concat(u,".").concat(l)),fallback:d("back/default.jpg"),preview:c})})}},4249:(e,t,n)=>{n.d(t,{c:()=>s});var r=n(1492),i=n(952),a=n(184);function s(e){let{card:t}=e;const n=t.length>10?"red":t.length>5?"blue":t.length>0?"green":void 0;return(0,a.jsx)("div",{children:(0,a.jsxs)(i.Z,{color:n,icon:(0,a.jsx)(r.Z,{}),children:[" ",t.length]})})}},1127:(e,t,n)=>{n.d(t,{AZ:()=>m,gU:()=>g,IN:()=>j});var r=n(4747),i=n(9631),a=n(763),s=n(2791),o=n(2592),c=n(5850),l=n(3713),d=n(2010),u=n(8556);var f=n(4766);const h=()=>(0,a.padStart)(String((0,a.random)(1,252)),2,"0"),v=()=>(0,a.random)(1,12);function g(e,t){var n,r,i;const[a,o]=(0,s.useState)(v()),[l,d]=(0,s.useState)(h()),[u,g]=(0,s.useState)(v()),[m,j]=(0,s.useState)(h()),p="td-d".concat(a,"-").concat(l),x="td-d".concat(u,"-").concat(m),[y,w]=(0,s.useState)(0),{queryParams:Z}=(0,f.K)(),S=Number(null!==(n=Z.get("cycle"))&&void 0!==n?n:3),b=null!==(r=null===e||void 0===e?void 0:e[p])&&void 0!==r?r:[],E=null!==(i=null===e||void 0===e?void 0:e[x])&&void 0!==i?i:[],k=()=>{w(0),o(v()),d(h()),g(v()),j(h())};return(0,s.useEffect)((()=>{p===x&&j(h())}),[p,x]),{cardAId:p,cardA:b,cardBId:x,cardB:E,relate:()=>{w(0),b.push(x),e[p]=(0,c.R1)(b),E.push(p),e[x]=(0,c.R1)(E),t(!0),o(u),d(m),g(v()),j(h())},unrelate:()=>{y>=S?(w(0),k()):(w((e=>e+1)),g(v()),j(h()))},areRelated:b.includes(x),onRandomCards:k}}function m(){const[e,t]=(0,s.useState)(!1),n=["data/imageCardsRelationships"],a=(0,l.NL)(),{notification:c}=r.Z.useApp(),[f,h]=(0,s.useState)({total:0,overdone:0,complete:0,single:0}),{data:v={},isLoading:g,isSuccess:m,isError:j,error:p,isFetched:x,isRefetching:y,refetch:w}=(0,d.a)({queryKey:n,queryFn:async()=>{var e;const t=(0,i.JU)(o.RZ,"data/imageCardsRelationships");return null!==(e=(await(0,i.QT)(t)).data())&&void 0!==e?e:{}}}),{isPending:Z,isError:S,isSuccess:b,mutate:E}=(0,u.D)({mutationKey:n,mutationFn:async()=>{const e=(0,i.JU)(o.RZ,"data/imageCardsRelationships");return await(0,i.pl)(e,v),v},onSuccess:()=>{c.success({message:"Saved",placement:"bottomLeft"}),a.refetchQueries({queryKey:n}),t(!1)}});return(0,s.useEffect)((()=>{if(!y&&x){const e=Object.keys(v).length;let t=0,n=0,r=0;Object.values(v).forEach((e=>{e.length>8&&(t+=1),1===e.length&&(r+=1),e.length>2&&(n+=1)})),h({total:e,overdone:t,complete:n,single:r})}}),[x,y]),{data:v,isLoading:g,isSuccess:m,isError:j,error:p,hasData:m&&Object.keys(v).length>0,refetch:w,isSaving:Z,isMutationError:S,isSaved:b,save:E,setDirty:t,isDirty:e,stats:f}}function j(e,t,n,r){const[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[f,g]=(0,s.useState)(0),[m,j]=(0,s.useState)(!0),[p,x]=(0,s.useState)([]),y=t=>{l((null!==t&&void 0!==t?t:i).map((t=>{var n;return null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:[]})))},w=()=>{const t=[...p];let i=0;const s=d.length<2e3?d:[];let o=0;for(;o<400&&t.length<n;){var c;const n="td-d".concat(v(),"-").concat(h()),a=null!==(c=e[n])&&void 0!==c?c:[],l=!(r>0)||a.length<r,d=!!m&&s.includes(n);t.includes(n)||d||!l||(t.push(n),i+=1),o+=1}a(t),u((e=>[...e,...t])),y(t),g((e=>e+i))};(0,s.useEffect)((()=>{0===i.length&&w()}),[i]);return{cardIds:i,cards:o,selection:p,onSelect:e=>{x((t=>{const n=[...t],r=n.indexOf(e);return r>-1?n.splice(r,1):n.push(e),n}))},relate:()=>{p.forEach((t=>{var n;const r=null!==(n=e[t])&&void 0!==n?n:[];r.push(...p.filter((e=>e!==t))),e[t]=(0,c.R1)(r)})),t(!0),x([]),y(),u([]),g(0)},nextSet:w,deselectAll:()=>{x([])},cycles:f,filters:{useCycles:m,toggleUseCycles:()=>{j((e=>!e))}}}}},9946:(e,t,n)=>{n.d(t,{m:()=>a});var r=n(2791),i=n(7415);function a(e,t){const[n,{width:a}]=(0,i.Z)(),{gap:s=32,minWidth:o=120,maxWidth:c=300,margin:l=0}=null!==t&&void 0!==t?t:{};return[(0,r.useMemo)((()=>{const t=Math.min(Math.max(Math.floor((a-l)/e)-s,o),c);return Number.isNaN(t)?o:t}),[a,e,s,o,c,l]),n]}},4766:(e,t,n)=>{n.d(t,{K:()=>a});var r=n(2791),i=n(1087);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,i.lr)(),a=(e,r,i)=>{void 0===r||""===r||r===i?t.delete(e):t.set(e,String(r)),n(t)},s=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(e).forEach((e=>{let[n,i]=e;r[n]===i?t.delete(n):t.set(n,String(i))})),n(t)},o=e=>{t.delete(e),n(t)},c=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true";return t.get(e)===String(n)};return(0,r.useEffect)((()=>{Object.entries(e).forEach((e=>{let[n,r]=e;t.has(n)||a(n,r)}))}),[]),{addParam:a,addParams:s,removeParam:o,queryParams:t,is:c}}},5305:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(1790),i=n(2128),a=n(2252),s=n(959),o=n(6340),c=n(4520),l=n(952),d=n(1127),u=n(9946),f=n(4249),h=n(145),v=n(4766),g=n(2791),m=n(263);const j=function(e){var t=(0,g.useRef)(e);t.current=e,(0,m.Z)((function(){return function(){return t.current()}}))};const p=function(e){var t=(0,g.useRef)(0),n=(0,g.useState)(e),r=n[0],i=n[1],a=(0,g.useCallback)((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){i(e)}))}),[]);return j((function(){cancelAnimationFrame(t.current)})),[r,a]};var x=n(8624);const y=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var n=p({width:x.jU?window.innerWidth:e,height:x.jU?window.innerHeight:t}),r=n[0],i=n[1];return(0,g.useEffect)((function(){if(x.jU){var e=function(){i({width:window.innerWidth,height:window.innerHeight})};return(0,x.on)(window,"resize",e),function(){(0,x.S1)(window,"resize",e)}}}),[]),r};var w=x.jU?window:null,Z=function(e){return!!e.addEventListener},S=function(e){return!!e.on};const b=function(e,t,n,r){void 0===n&&(n=w),(0,g.useEffect)((function(){if(t&&n)return Z(n)?(0,x.on)(n,e,t,r):S(n)&&n.on(e,t,r),function(){Z(n)?(0,x.S1)(n,e,t,r):S(n)&&n.off(e,t,r)}}),[e,t,n,JSON.stringify(r)])};const E=function(e,t,n,r){void 0===t&&(t=x.ZT),void 0===n&&(n={}),void 0===r&&(r=[e]);var i=n.event,a=void 0===i?"keydown":i,s=n.target,o=n.options,c=(0,g.useMemo)((function(){var n,r="function"===typeof(n=e)?n:"string"===typeof n?function(e){return e.key===n}:n?function(){return!0}:function(){return!1};return function(e){if(r(e))return t(e)}}),r);b(a,c,s,o)};var k=n(184);function C(e){let{query:t}=e;const{width:n}=y(),[i]=(0,u.m)(1,{minWidth:n/3}),{data:g,setDirty:m}=t,{cardAId:j,cardA:p,cardBId:x,cardB:w,relate:Z,unrelate:S}=(0,d.gU)(g,m),{addParam:b,is:C}=(0,v.K)();return E("1",S),E("2",Z),(0,k.jsxs)(r.Z.Content,{className:"dev-content py-4",children:[(0,k.jsx)(a.ZP,{block:!0,onClick:()=>b("open","true"),children:"Open Modal"}),(0,k.jsxs)(s.Z,{title:"Card A: ".concat(j),open:C("open"),width:.95*n,onCancel:()=>b("open","false"),footer:null,children:[(0,k.jsx)(o.Z.PreviewGroup,{children:(0,k.jsxs)(c.Z,{className:"center",wrap:"wrap",justify:"center",children:[(0,k.jsxs)(c.Z,{vertical:!0,children:[(0,k.jsx)(h.f,{id:j,width:i}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(f.c,{card:p}),(0,k.jsx)(l.Z,{children:j})]})]}),(0,k.jsxs)(c.Z,{vertical:!0,children:[(0,k.jsx)(h.f,{id:x,width:i}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(f.c,{card:w}),(0,k.jsx)(l.Z,{children:x})]})]})]})}),(0,k.jsxs)(c.Z,{gap:32,className:"my-10",children:[(0,k.jsx)(a.ZP,{onClick:S,size:"large",block:!0,children:"Unrelated"}),(0,k.jsx)(a.ZP,{onClick:Z,size:"large",block:!0,type:"primary",children:"Related"})]})]})]})}var N=n(7128),R=n(8357),L=n(7018),D=n(7340),P=n(7965),U=n(763);function z(e){let{query:t}=e;const{data:n,isDirty:r,isSaving:i,save:s,isLoading:o,isError:l}=t,{queryParams:d,addParam:u}=(0,v.K)();return(0,k.jsxs)(P.p3,{children:[(0,k.jsx)(P.Pd,{children:(0,k.jsxs)(c.Z,{vertical:!0,gap:6,children:[(0,k.jsx)(D.k,{isDirty:r,dirt:JSON.stringify(n),onSave:()=>s({}),isSaving:i}),(0,k.jsx)(L.o,{data:n,fileName:"imageCardsRelationships.json",loading:i,disabled:(0,U.isEmpty)(n),block:!0})]})}),(0,k.jsx)(R.Th,{isLoading:o||i,isDirty:r,isError:l,hasResponseData:!(0,U.isEmpty)(n)}),(0,k.jsxs)(P.Pd,{children:[(0,k.jsx)(a.ZP,{block:!0,onClick:()=>u("open","true"),children:"Open Modal"}),(0,k.jsx)(N.Z,{}),(0,k.jsx)(R.zE,{label:"Cycle Threshold",value:d.get("cycle")||3,onChange:e=>u("cycle",e),options:[1,3,5,10]})]})]})}const M=function(){const e=(0,d.AZ)();return(0,k.jsx)(P.Xg,{title:"Image Cards",subtitle:"Comparator",children:(0,k.jsx)(i.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!(0,U.isEmpty)(e.data),children:(0,k.jsxs)(r.Z,{hasSider:!0,children:[(0,k.jsx)(z,{query:e}),(0,k.jsx)(r.Z.Content,{className:"content",children:(0,k.jsx)(C,{query:e})})]})})})}},1492:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(7460),i=n(2791);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm122.7-533.4c18.7-18.7 49.1-18.7 67.9 0 18.7 18.7 18.7 49.1 0 67.9-18.7 18.7-49.1 18.7-67.9 0-18.7-18.7-18.7-49.1 0-67.9zm283.8 282.9l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"filled"};var s=n(4508),o=function(e,t){return i.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:a}))};const c=i.forwardRef(o)},8624:(e,t,n)=>{n.d(t,{S1:()=>a,ZT:()=>r,jU:()=>s,on:()=>i});var r=function(){};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var s="undefined"!==typeof window},7415:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2791),i=n(8624);const a=i.jU?r.useLayoutEffect:r.useEffect;var s={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const o=i.jU&&"undefined"!==typeof window.ResizeObserver?function(){var e=(0,r.useState)(null),t=e[0],n=e[1],i=(0,r.useState)(s),o=i[0],c=i[1],l=(0,r.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,n=t.x,r=t.y,i=t.width,a=t.height,s=t.top,o=t.left,l=t.bottom,d=t.right;c({x:n,y:r,width:i,height:a,top:s,left:o,bottom:l,right:d})}}))}),[]);return a((function(){if(t)return l.observe(t),function(){l.disconnect()}}),[t]),[n,o]}:function(){return[i.ZT,s]}}}]);
//# sourceMappingURL=ImageCardsComparator.c181e644.chunk.js.map