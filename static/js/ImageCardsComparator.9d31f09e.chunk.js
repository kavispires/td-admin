"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[2718],{7018:(e,t,n)=>{n.d(t,{o:()=>l});var r=n(1413),i=n(4925),a=n(9475),s=n(5850),o=n(184);const c=["data","fileName","loading","children"];function l(e){let{data:t,fileName:n,loading:l,children:d}=e,u=(0,i.Z)(e,c);return(0,o.jsx)(a.ZP,(0,r.Z)((0,r.Z)({onClick:()=>(0,s.ZN)("function"===typeof t?t():t,n),loading:l},u),{},{children:null!==d&&void 0!==d?d:"Download JSON"}))}},7340:(e,t,n)=>{n.d(t,{k:()=>v});var r=n(1413),i=n(4925),a=n(9475),s=n(2426),o=n.n(s),c=n(2791),l=n(8211),d=n(4483),u=n(4841),h=n(184);const f=["isDirty","onSave","isSaving","dirt","interval"];function v(e){let{isDirty:t,onSave:n,isSaving:s,dirt:v,interval:g=6e5}=e,m=(0,i.Z)(e,f);const{togglePendingSave:p}=(0,u.b)(),[,j,Z]=(0,l.Z)((()=>{t&&n()}),g);return(0,c.useEffect)((()=>{t?(p(!0),console.log("Save Reset",o()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),Z()):(p(!1),j())}),[t,Z,j,v]),(0,c.useEffect)((()=>{const e=e=>{if(t){const t="You have unsaved changes, are you sure you want to leave?";return e.returnValue=t,t}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t]),(0,h.jsx)(a.ZP,(0,r.Z)((0,r.Z)({type:"primary",size:"large",icon:(0,h.jsx)(d.Z,{}),onClick:n,disabled:!t,loading:s,danger:!0,block:!0},m),{},{children:"Save"}))}},8866:(e,t,n)=>{n.d(t,{N:()=>c});var r=n(1413),i=n(4925),a=n(6178),s=n(184);const o=["children","level"];function c(e){let{children:t,level:n}=e,c=(0,i.Z)(e,o);return(0,s.jsx)(a.Z.Title,(0,r.Z)((0,r.Z)({level:null!==n&&void 0!==n?n:3},c),{},{children:t}))}},8357:(e,t,n)=>{n.d(t,{tj:()=>l.tj,xh:()=>l.xh,H:()=>l.H,zE:()=>l.zE,Do:()=>l.Do,Th:()=>v,F6:()=>c});n(8866);var r=n(1413),i=n(4925),a=n(3733),s=n(184);const o=["children","active","activeClass","className","hoverType"],c=e=>{let{children:t,active:n=!1,activeClass:c="",className:l="",hoverType:d="scale"}=e,u=(0,i.Z)(e,o);return(0,s.jsx)("button",(0,r.Z)((0,r.Z)({className:(0,a.Z)("transparent-button","transparent-button--".concat(d),n&&(c||"transparent-button--active"),l)},u),{},{children:t}))};var l=n(2043),d=n(952),u=n(3070),h=n(7965);function f(e){let{isLoading:t,isIdle:n,error:r,isDirty:i,isError:a,hasResponseData:o}=e;return n?(0,s.jsx)(d.Z,{children:"No Data yet"}):t?(0,s.jsx)(d.Z,{color:"blue",children:"Loading..."}):r||a?(0,s.jsx)(d.Z,{color:"red",children:"Error"}):i?(0,s.jsx)(d.Z,{color:"orange",children:"Modified"}):o?(0,s.jsx)(d.Z,{color:"green",children:"Loaded"}):(0,s.jsx)(d.Z,{children:"No Data"})}function v(e){return(0,s.jsx)(h.Pd,{children:(0,s.jsx)(u.Z.Item,{label:"Status",children:(0,s.jsx)(f,(0,r.Z)({},e))})})}},145:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(2241),i=n(3733),a=n(2606),s=n(184);const o=e=>{let{id:t,width:n=200,className:o="",preview:c=!0,fileExtension:l="jpg"}=e;const{getUrl:d}=(0,a.n)("images"),u=t.replace(/-/g,"/");return(0,s.jsx)("div",{className:(0,i.Z)("image-card",o),children:(0,s.jsx)(r.Z,{width:n,src:d("".concat(u,".").concat(l)),fallback:d("back/default.jpg"),preview:c})})}},4249:(e,t,n)=>{n.d(t,{c:()=>s});var r=n(1492),i=n(952),a=n(184);function s(e){let{card:t}=e;const n=t.length>10?"red":t.length>5?"blue":t.length>0?"green":void 0;return(0,a.jsx)("div",{children:(0,a.jsxs)(i.Z,{color:n,icon:(0,a.jsx)(r.Z,{}),children:[" ",t.length]})})}},1127:(e,t,n)=>{n.d(t,{AZ:()=>m,gU:()=>g,IN:()=>p});var r=n(4747),i=n(9631),a=n(763),s=n(2791),o=n(2592),c=n(5850),l=n(3713),d=n(2010),u=n(8556),h=n(4766);const f=()=>(0,a.padStart)(String((0,a.random)(1,252)),2,"0"),v=()=>(0,a.random)(1,12);function g(e,t){var n,r,i;const[a,o]=(0,s.useState)(v()),[l,d]=(0,s.useState)(f()),[u,g]=(0,s.useState)(v()),[m,p]=(0,s.useState)(f()),j="td-d".concat(a,"-").concat(l),Z="td-d".concat(u,"-").concat(m),[x,y]=(0,s.useState)(0),{queryParams:w}=(0,h.K)(),S=Number(null!==(n=w.get("cycle"))&&void 0!==n?n:3),b=null!==(r=null===e||void 0===e?void 0:e[j])&&void 0!==r?r:[],E=null!==(i=null===e||void 0===e?void 0:e[Z])&&void 0!==i?i:[],C=()=>{y(0),o(v()),d(f()),g(v()),p(f())};return(0,s.useEffect)((()=>{j===Z&&p(f())}),[j,Z]),{cardAId:j,cardA:b,cardBId:Z,cardB:E,relate:()=>{y(0),b.push(Z),e[j]=(0,c.R1)(b),E.push(j),e[Z]=(0,c.R1)(E),t(!0),o(u),d(m),g(v()),p(f())},unrelate:()=>{x>=S?(y(0),C()):(y((e=>e+1)),g(v()),p(f()))},areRelated:b.includes(Z),onRandomCards:C}}function m(){const[e,t]=(0,s.useState)(!1),n=["data/imageCardsRelationships"],a=(0,l.NL)(),{notification:c}=r.Z.useApp(),[h,f]=(0,s.useState)({total:0,overdone:0,complete:0,single:0}),{data:v={},isLoading:g,isSuccess:m,isError:p,error:j,isFetched:Z,isRefetching:x,refetch:y}=(0,d.a)({queryKey:n,queryFn:async()=>{var e;const t=(0,i.JU)(o.RZ,"data/imageCardsRelationships");return null!==(e=(await(0,i.QT)(t)).data())&&void 0!==e?e:{}}}),{isPending:w,isError:S,isSuccess:b,mutate:E}=(0,u.D)({mutationKey:n,mutationFn:async()=>{const e=(0,i.JU)(o.RZ,"data/imageCardsRelationships");return await(0,i.pl)(e,v),v},onSuccess:()=>{c.success({message:"Saved",placement:"bottomLeft"}),a.refetchQueries({queryKey:n}),t(!1)}});return(0,s.useEffect)((()=>{if(!x&&Z){const e=Object.keys(v).length;let t=0,n=0,r=0;Object.values(v).forEach((e=>{e.length>8&&(t+=1),1===e.length&&(r+=1),e.length>2&&(n+=1)})),f({total:e,overdone:t,complete:n,single:r})}}),[Z,x]),{data:v,isLoading:g,isSuccess:m,isError:p,error:j,hasData:m&&Object.keys(v).length>0,refetch:y,isSaving:w,isMutationError:S,isSaved:b,save:E,setDirty:t,isDirty:e,stats:h}}function p(e,t,n,r){const[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[h,g]=(0,s.useState)(0),[m,p]=(0,s.useState)(!0),[j,Z]=(0,s.useState)([]),x=t=>{l((null!==t&&void 0!==t?t:i).map((t=>{var n;return null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:[]})))},y=()=>{const t=[...j];let i=0;const s=d.length<2e3?d:[];let o=0;for(;o<400&&t.length<n;){var c;const n="td-d".concat(v(),"-").concat(f()),a=null!==(c=e[n])&&void 0!==c?c:[],l=!(r>0)||a.length<r,d=!!m&&s.includes(n);t.includes(n)||d||!l||(t.push(n),i+=1),o+=1}a(t),u((e=>[...e,...t])),x(t),g((e=>e+i))};(0,s.useEffect)((()=>{0===i.length&&y()}),[i]);return{cardIds:i,cards:o,selection:j,onSelect:e=>{Z((t=>{const n=[...t],r=n.indexOf(e);return r>-1?n.splice(r,1):n.push(e),n}))},relate:()=>{j.forEach((t=>{var n;const r=null!==(n=e[t])&&void 0!==n?n:[];r.push(...j.filter((e=>e!==t))),e[t]=(0,c.R1)(r)})),t(!0),Z([]),x(),u([]),g(0)},nextSet:y,deselectAll:()=>{Z([])},cycles:h,filters:{useCycles:m,toggleUseCycles:()=>{p((e=>!e))}}}}},9946:(e,t,n)=>{n.d(t,{m:()=>a});var r=n(2791),i=n(7415);function a(e,t){const[n,{width:a}]=(0,i.Z)(),{gap:s=32,minWidth:o=120,maxWidth:c=300,margin:l=0}=null!==t&&void 0!==t?t:{};return[(0,r.useMemo)((()=>{const t=Math.min(Math.max(Math.floor((a-l)/e)-s,o),c);return Number.isNaN(t)?o:t}),[a,e,s,o,c,l]),n]}},4766:(e,t,n)=>{n.d(t,{K:()=>a});var r=n(1087),i=n(263);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,r.lr)(),a=(e,r,i)=>{void 0===r||""===r||r===i?t.delete(e):t.set(e,String(r)),n(t)},s=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(e).forEach((e=>{let[n,i]=e;r[n]===i?t.delete(n):t.set(n,String(i))})),n(t)},o=e=>{t.delete(e),n(t)},c=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true";return t.get(e)===String(n)};return(0,i.Z)((()=>{Object.entries(e).forEach((e=>{let[n,r]=e;t.has(n)||a(n,r)}))})),{addParam:a,addParams:s,removeParam:o,queryParams:t,is:c}}},5305:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(1790),i=n(2128),a=n(9475),s=n(959),o=n(2241),c=n(4520),l=n(952),d=n(9946),u=n(4766),h=n(2791),f=n(263);const v=function(e){var t=(0,h.useRef)(e);t.current=e,(0,f.Z)((function(){return function(){return t.current()}}))};const g=function(e){var t=(0,h.useRef)(0),n=(0,h.useState)(e),r=n[0],i=n[1],a=(0,h.useCallback)((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){i(e)}))}),[]);return v((function(){cancelAnimationFrame(t.current)})),[r,a]};var m=n(7136);const p=function(e){var t=void 0===e?{}:e,n=t.initialWidth,r=void 0===n?1/0:n,i=t.initialHeight,a=void 0===i?1/0:i,s=t.onChange,o=g({width:m.jU?window.innerWidth:r,height:m.jU?window.innerHeight:a}),c=o[0],l=o[1];return(0,h.useEffect)((function(){if(m.jU){var e=function(){var e=window.innerWidth,t=window.innerHeight;l({width:e,height:t}),s&&s(e,t)};return(0,m.on)(window,"resize",e),function(){(0,m.S1)(window,"resize",e)}}}),[]),c};var j=m.jU?window:null,Z=function(e){return!!e.addEventListener},x=function(e){return!!e.on};const y=function(e,t,n,r){void 0===n&&(n=j),(0,h.useEffect)((function(){if(t&&n)return Z(n)?(0,m.on)(n,e,t,r):x(n)&&n.on(e,t,r),function(){Z(n)?(0,m.S1)(n,e,t,r):x(n)&&n.off(e,t,r)}}),[e,t,n,JSON.stringify(r)])};const w=function(e,t,n,r){void 0===t&&(t=m.ZT),void 0===n&&(n={}),void 0===r&&(r=[e]);var i=n.event,a=void 0===i?"keydown":i,s=n.target,o=n.options,c=(0,h.useMemo)((function(){var n,r="function"===typeof(n=e)?n:"string"===typeof n?function(e){return e.key===n}:n?function(){return!0}:function(){return!1};return function(e){if(r(e))return t(e)}}),r);y(a,c,s,o)};var S=n(145),b=n(4249),E=n(1127),C=n(184);function k(e){let{query:t}=e;const{width:n}=p(),[i]=(0,d.m)(1,{minWidth:n/3}),{data:h,setDirty:f}=t,{cardAId:v,cardA:g,cardBId:m,cardB:j,relate:Z,unrelate:x}=(0,E.gU)(h,f),{addParam:y,is:k}=(0,u.K)();return w("1",x),w("2",Z),(0,C.jsxs)(r.Z.Content,{className:"dev-content py-4",children:[(0,C.jsx)(a.ZP,{block:!0,onClick:()=>y("open","true"),children:"Open Modal"}),(0,C.jsxs)(s.Z,{title:"Card A: ".concat(v),open:k("open"),width:.95*n,onCancel:()=>y("open","false"),footer:null,children:[(0,C.jsx)(o.Z.PreviewGroup,{children:(0,C.jsxs)(c.Z,{className:"center",wrap:"wrap",justify:"center",children:[(0,C.jsxs)(c.Z,{vertical:!0,children:[(0,C.jsx)(S.f,{id:v,width:i}),(0,C.jsxs)(c.Z,{children:[(0,C.jsx)(b.c,{card:g}),(0,C.jsx)(l.Z,{children:v})]})]}),(0,C.jsxs)(c.Z,{vertical:!0,children:[(0,C.jsx)(S.f,{id:m,width:i}),(0,C.jsxs)(c.Z,{children:[(0,C.jsx)(b.c,{card:j}),(0,C.jsx)(l.Z,{children:m})]})]})]})}),(0,C.jsxs)(c.Z,{gap:32,className:"my-10",children:[(0,C.jsx)(a.ZP,{onClick:x,size:"large",block:!0,children:"Unrelated"}),(0,C.jsx)(a.ZP,{onClick:Z,size:"large",block:!0,type:"primary",children:"Related"})]})]})]})}var N=n(7128),R=n(8357),D=n(7018),L=n(7340),P=n(7965),U=n(763);function z(e){let{query:t}=e;const{data:n,isDirty:r,isSaving:i,save:s,isLoading:o,isError:l}=t,{queryParams:d,addParam:h}=(0,u.K)();return(0,C.jsxs)(P.p3,{children:[(0,C.jsx)(P.Pd,{children:(0,C.jsxs)(c.Z,{vertical:!0,gap:6,children:[(0,C.jsx)(L.k,{isDirty:r,dirt:JSON.stringify(n),onSave:()=>s({}),isSaving:i}),(0,C.jsx)(D.o,{data:n,fileName:"imageCardsRelationships.json",loading:i,disabled:(0,U.isEmpty)(n),block:!0})]})}),(0,C.jsx)(R.Th,{isLoading:o||i,isDirty:r,isError:l,hasResponseData:!(0,U.isEmpty)(n)}),(0,C.jsxs)(P.Pd,{children:[(0,C.jsx)(a.ZP,{block:!0,onClick:()=>h("open","true"),children:"Open Modal"}),(0,C.jsx)(N.Z,{}),(0,C.jsx)(R.zE,{label:"Cycle Threshold",value:d.get("cycle")||3,onChange:e=>h("cycle",e),options:[1,3,5,10]})]})]})}const M=function(){const e=(0,E.AZ)();return(0,C.jsx)(P.Xg,{title:"Image Cards",subtitle:"Comparator",children:(0,C.jsx)(i.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!(0,U.isEmpty)(e.data),children:(0,C.jsxs)(r.Z,{hasSider:!0,children:[(0,C.jsx)(z,{query:e}),(0,C.jsx)(r.Z.Content,{className:"content",children:(0,C.jsx)(k,{query:e})})]})})})}},1492:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(7460),i=n(2791);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm122.7-533.4c18.7-18.7 49.1-18.7 67.9 0 18.7 18.7 18.7 49.1 0 67.9-18.7 18.7-49.1 18.7-67.9 0-18.7-18.7-18.7-49.1 0-67.9zm283.8 282.9l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"filled"};var s=n(4790),o=function(e,t){return i.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:a}))};const c=i.forwardRef(o)},7136:(e,t,n)=>{n.d(t,{S1:()=>a,ZT:()=>r,jU:()=>s,on:()=>i});var r=function(){};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var s="undefined"!==typeof window},7415:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2791),i=n(7136);const a=i.jU?r.useLayoutEffect:r.useEffect;var s={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const o=i.jU&&"undefined"!==typeof window.ResizeObserver?function(){var e=(0,r.useState)(null),t=e[0],n=e[1],i=(0,r.useState)(s),o=i[0],c=i[1],l=(0,r.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,n=t.x,r=t.y,i=t.width,a=t.height,s=t.top,o=t.left,l=t.bottom,d=t.right;c({x:n,y:r,width:i,height:a,top:s,left:o,bottom:l,right:d})}}))}),[]);return a((function(){if(t)return l.observe(t),function(){l.disconnect()}}),[t]),[n,o]}:function(){return[i.ZT,s]}}}]);
//# sourceMappingURL=ImageCardsComparator.9d31f09e.chunk.js.map