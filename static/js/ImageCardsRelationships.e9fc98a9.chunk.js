"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[997],{7340:(e,s,i)=>{i.d(s,{k:()=>h});var n=i(2556),a=i(2426),r=i.n(a),t=i(2791),l=i(8211),o=i(4483),c=i(4841),d=i(184);function h(e){let{isDirty:s,onSave:i,isSaving:a,dirt:h,interval:g=6e5,...u}=e;const{togglePendingSave:x}=(0,c.b)(),[,j,v]=(0,l.Z)((()=>{s&&i()}),g);return(0,t.useEffect)((()=>{s?(x(!0),console.log("Save Reset",r()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),v()):(x(!1),j())}),[s,v,j,h]),(0,t.useEffect)((()=>{const e=e=>{if(s){const s="You have unsaved changes, are you sure you want to leave?";return e.returnValue=s,s}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s]),(0,d.jsx)(n.ZP,{type:"primary",size:"large",icon:(0,d.jsx)(o.Z,{}),onClick:i,disabled:!s,loading:a,danger:!0,block:!0,...u,children:"Save"})}},7416:(e,s,i)=>{i.r(s),i.d(s,{default:()=>M});var n=i(3990),a=i(6709),r=i(2128),t=i(763),l=i(3105),o=i(6340),c=i(952),d=i(9884),h=i(7691),g=i(9720),u=i(7974),x=i(4988),j=i(7360),v=i(4057),m=i(145),p=i(1492),y=i(184);function f(e){let{card:s}=e;const i=s.length>10?"red":s.length>5?"blue":s.length>0?"green":void 0;return(0,y.jsx)("div",{children:(0,y.jsxs)(c.Z,{color:i,icon:(0,y.jsx)(p.Z,{}),children:[" ",s.length]})})}var S=i(6173),C=i(2791),Z=i(7415);function b(){const{query:{isDirty:e,isSaving:s,save:i,stats:n,...d},randomGroups:{cardIds:g,cards:u,onSelect:x,selection:j,relate:v,nextSet:p,deselectAll:b,cycles:D},showIds:k,cardSize:z}=(0,a.l)(),E=(0,C.useRef)(null),[N,{width:I}]=(0,Z.Z)(),[_,M]=(0,C.useMemo)((()=>{const e=Math.floor(I/z)+1;return[e,Math.floor(I/e)]}),[z,I]);return(0,y.jsx)(r.T,{isLoading:d.isLoading,error:d.error,hasResponseData:!(0,t.isEmpty)(d.data),children:(0,y.jsx)("div",{ref:N,className:"my-6",children:(0,y.jsxs)(l.Z,{title:"Card Relationship Matching",extra:(0,y.jsxs)("span",{children:[(0,y.jsx)(h.Z,{})," ",D]}),className:"image-card-categorizer-card",ref:E,children:[(0,y.jsx)(o.Z.PreviewGroup,{children:(0,y.jsx)("div",{className:"image-cards-group",style:{gridTemplateColumns:"repeat(".concat(Math.max(_,1),", 1fr)")},children:g.map(((e,s)=>{const i=j.includes(e),n=u[s];return(0,y.jsx)("div",{className:"image-card-card__image",children:(0,y.jsxs)(S.F6,{onClick:()=>x(e),active:i,className:"image-cards-group__button",activeClass:"image-cards-group__button--active",children:[(0,y.jsx)(m.f,{id:e,width:M-24,preview:!1}),(0,y.jsxs)("div",{children:[k&&(0,y.jsx)(c.Z,{children:e}),(0,y.jsx)(f,{card:n})]})]})},e)}))})}),(0,y.jsx)(w,{isSaving:s,isDirty:e,selection:j,relate:v,deselectAll:b,onNextSet:()=>{var e;p(),null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}})]})})})}const w=e=>{let{isSaving:s,isDirty:i,selection:n,relate:a,deselectAll:r,onNextSet:t}=e;if(s)return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.Z,{icon:(0,y.jsx)(g.Z,{})})});return(0,y.jsxs)(y.Fragment,{children:[i&&(0,y.jsx)(d.Z,{icon:(0,y.jsx)(u.Z,{}),type:"primary",style:{right:234}}),(0,y.jsx)(d.Z,{icon:(0,y.jsx)(x.Z,{}),style:{right:164},onClick:r}),(0,y.jsx)(d.Z,{icon:(0,y.jsx)(j.Z,{}),style:{right:94},type:n.length<2?"default":"primary",badge:{count:n.length,size:"small"},onClick:()=>{n.length<2||a()}}),(0,y.jsx)(d.Z,{icon:(0,y.jsx)(v.Z,{}),style:{right:24},onClick:t})]})};var D=i(4520),k=i(7018),z=i(7340),E=i(1958),N=i(6591),I=i(9936);function _(){const{query:{isDirty:e,isSaving:s,save:i,data:n,isLoading:r,isError:l},randomGroups:{filters:o},showIds:c,setShowIds:d,tagThreshold:h,setTagThreshold:g,sampleSize:u,setSampleSize:x,cardSize:j,setCardSize:v}=(0,a.l)();return(0,y.jsxs)(E.p3,{children:[(0,y.jsx)(E.Pd,{children:(0,y.jsxs)(D.Z,{vertical:!0,gap:6,children:[(0,y.jsx)(z.k,{isDirty:e,dirt:JSON.stringify(n),onSave:()=>i({}),isSaving:s}),(0,y.jsx)(k.o,{data:n,fileName:"imageCardsRelationships.json",loading:s,disabled:(0,t.isEmpty)(n),block:!0})]})}),(0,y.jsx)(S.Th,{isLoading:r||s,isDirty:e,isError:l,hasResponseData:!(0,t.isEmpty)(n)}),(0,y.jsxs)(E.Pd,{children:[(0,y.jsx)(S.Do,{label:"Use Cycles",value:o.useCycles,onChange:()=>o.toggleUseCycles()}),(0,y.jsx)(S.Do,{label:"Show Ids",value:c,onChange:e=>d(e)}),(0,y.jsx)(S.zE,{onChange:e=>g(e),value:h,options:N.VC,label:"Tag Count"}),(0,y.jsx)(S.zE,{onChange:e=>x(e),value:u,options:N.ZI,label:"Sample Size"}),(0,y.jsx)(S.zE,{onChange:e=>v(e),value:j,options:N.Hn,label:"Card Size"})]}),(0,y.jsx)(E.Pd,{children:(0,y.jsx)(I.A,{})})]})}const M=function(){return(0,y.jsx)(E.Xg,{title:"Image Cards",subtitle:"Relationships",children:(0,y.jsx)(a.P,{children:(0,y.jsxs)(n.Z,{hasSider:!0,children:[(0,y.jsx)(_,{}),(0,y.jsx)(n.Z.Content,{className:"content",children:(0,y.jsx)(b,{})})]})})})}}}]);
//# sourceMappingURL=ImageCardsRelationships.e9fc98a9.chunk.js.map