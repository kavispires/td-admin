"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[2718],{2043:(e,n,t)=>{t.d(n,{Do:()=>v,H:()=>g,tj:()=>f,xh:()=>h,zE:()=>u});var a=t(3070),r=t(906),s=t(9793),i=t(5922),c=t(9862),o=t(4248),l=t(1431),d=t(184);function u(e){let{label:n,value:t,onChange:s,options:i,placeholder:c}=e;return(0,d.jsx)(a.Z.Item,{label:n,children:(0,d.jsxs)(r.Z,{style:{minWidth:"150px"},onChange:s,value:t,children:[c&&(0,d.jsx)(r.Z.Option,{value:"",disabled:!0,children:"placeholder"}),i.map((e=>"object"===typeof e?(0,d.jsx)(r.Z.Option,{value:e.value,children:e.label},"".concat(n,"-").concat(e.value)):(0,d.jsx)(r.Z.Option,{value:e,children:e},"".concat(n,"-").concat(e))))]})})}function h(e){let{label:n,value:t,onChange:r,min:i=0,max:c=100,step:o}=e;return(0,d.jsx)(a.Z.Item,{label:n,children:(0,d.jsx)(s.Z,{min:i,max:c,value:t,onChange:e=>r(null!==e&&void 0!==e?e:c),style:{minWidth:"150px",width:"100%"},step:o})})}function v(e){let{label:n,value:t,onChange:r,className:s,disabled:c}=e;return(0,d.jsx)(a.Z.Item,{label:n,valuePropName:"checked",className:s,children:(0,d.jsx)(i.Z,{checked:t,onChange:r,size:"small",disabled:c})})}function f(e){let{label:n,value:t,onChange:r,disabled:s,className:i}=e;return(0,d.jsx)(a.Z.Item,{label:n,valuePropName:"checked",className:i,children:(0,d.jsx)(c.Z,{checked:t,onChange:e=>r(e.target.checked),disabled:s})})}function g(e){let{value:n,label:t,onChange:r,options:s}=e;return(0,d.jsx)(a.Z.Item,{label:t,layout:s.length>2?"vertical":"horizontal",children:(0,d.jsx)(o.Z,{block:!0,value:n,onChange:r,options:s.map((e=>({label:(0,d.jsx)(l.Z,{arrow:!0,trigger:"hover",title:e.title,children:e.icon}),value:e.value})))})})}},8384:(e,n,t)=>{t.d(n,{x:()=>u});var a=t(1413),r=t(4925),s=t(732),i=t(6473),c=t(9475),o=t(3733),l=t(184);const d=["open","onClose"];function u(e){let{open:n,onClose:t}=e,u=(0,r.Z)(e,d);return(0,l.jsx)(i.Z,(0,a.Z)({className:(0,o.Z)("full-screen-modal",!n&&"full-screen-modal--hidden"),bordered:!1,extra:(0,l.jsx)(c.ZP,{onClick:t,type:"text",shape:"circle",icon:(0,l.jsx)(s.Z,{})})},u))}},7340:(e,n,t)=>{t.d(n,{k:()=>f});var a=t(1413),r=t(4925),s=t(9475),i=t(2426),c=t.n(i),o=t(2791),l=t(8211),d=t(4483),u=t(4841),h=t(184);const v=["isDirty","onSave","isSaving","dirt","interval"];function f(e){let{isDirty:n,onSave:t,isSaving:i,dirt:f,interval:g=6e5}=e,m=(0,r.Z)(e,v);const{togglePendingSave:x}=(0,u.b)(),[,p,j]=(0,l.Z)((()=>{n&&t()}),g);return(0,o.useEffect)((()=>{n?(x(!0),console.log("Save Reset",c()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),j()):(x(!1),p())}),[n,j,p,f]),(0,o.useEffect)((()=>{const e=e=>{if(n){const n="You have unsaved changes, are you sure you want to leave?";return e.returnValue=n,n}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[n]),(0,h.jsx)(s.ZP,(0,a.Z)((0,a.Z)({type:"primary",size:"large",icon:(0,h.jsx)(d.Z,{}),onClick:t,disabled:!n,loading:i,danger:!0,block:!0},m),{},{children:"Save"}))}},8866:(e,n,t)=>{t.d(n,{N:()=>o});var a=t(1413),r=t(4925),s=t(6178),i=t(184);const c=["children","level"];function o(e){let{children:n,level:t}=e,o=(0,r.Z)(e,c);return(0,i.jsx)(s.Z.Title,(0,a.Z)((0,a.Z)({level:null!==t&&void 0!==t?t:3},o),{},{children:n}))}},8357:(e,n,t)=>{t.d(n,{tj:()=>l.tj,xh:()=>l.xh,H:()=>l.H,zE:()=>l.zE,Do:()=>l.Do,Th:()=>f,F6:()=>o});t(8866);var a=t(1413),r=t(4925),s=t(3733),i=t(184);const c=["children","active","activeClass","className","hoverType"],o=e=>{let{children:n,active:t=!1,activeClass:o="",className:l="",hoverType:d="scale"}=e,u=(0,r.Z)(e,c);return(0,i.jsx)("button",(0,a.Z)((0,a.Z)({className:(0,s.Z)("transparent-button","transparent-button--".concat(d),t&&(o||"transparent-button--active"),l)},u),{},{children:n}))};var l=t(2043),d=t(952),u=t(3070),h=t(7965);function v(e){let{isLoading:n,isIdle:t,error:a,isDirty:r,isError:s,hasResponseData:c}=e;return t?(0,i.jsx)(d.Z,{children:"No Data yet"}):n?(0,i.jsx)(d.Z,{color:"blue",children:"Loading..."}):a||s?(0,i.jsx)(d.Z,{color:"red",children:"Error"}):r?(0,i.jsx)(d.Z,{color:"orange",children:"Modified"}):c?(0,i.jsx)(d.Z,{color:"green",children:"Loaded"}):(0,i.jsx)(d.Z,{children:"No Data"})}function f(e){return(0,i.jsx)(h.Pd,{children:(0,i.jsx)(u.Z.Item,{label:"Status",children:(0,i.jsx)(v,(0,a.Z)({},e))})})}},145:(e,n,t)=>{t.d(n,{f:()=>c});var a=t(2402),r=t(3733),s=t(2606),i=t(184);const c=e=>{let{id:n,width:t=200,className:c="",preview:o=!0,fileExtension:l="jpg"}=e;const{getUrl:d}=(0,s.n)("images"),u=n.replace(/-/g,"/");return(0,i.jsx)("div",{className:(0,r.Z)("image-card",c),children:(0,i.jsx)(a.Z,{width:t,src:d("".concat(u,".").concat(l)),fallback:d("back/default.jpg"),preview:o})})}},4249:(e,n,t)=>{t.d(n,{c:()=>i});var a=t(1492),r=t(952),s=t(184);function i(e){let{card:n}=e;const t=n.length>10?"red":n.length>5?"blue":n.length>0?"green":void 0;return(0,s.jsx)("div",{children:(0,s.jsxs)(r.Z,{color:t,icon:(0,s.jsx)(a.Z,{}),children:[" ",n.length]})})}},2671:(e,n,t)=>{t.d(n,{AZ:()=>m,gU:()=>g,IN:()=>x});var a=t(4747),r=t(9631),s=t(763),i=t(2791),c=t(2592),o=t(5850),l=t(3713),d=t(2010),u=t(8556),h=t(4766);const v=()=>(0,s.padStart)(String((0,s.random)(1,252)),2,"0"),f=()=>(0,s.random)(1,12);function g(e,n){var t,a,r;const[s,c]=(0,i.useState)(f()),[l,d]=(0,i.useState)(v()),[u,g]=(0,i.useState)(f()),[m,x]=(0,i.useState)(v()),p="td-d".concat(s,"-").concat(l),j="td-d".concat(u,"-").concat(m),[Z,y]=(0,i.useState)(0),{queryParams:b}=(0,h.K)(),w=Number(null!==(t=b.get("cycle"))&&void 0!==t?t:3),C=null!==(a=null===e||void 0===e?void 0:e[p])&&void 0!==a?a:[],S=null!==(r=null===e||void 0===e?void 0:e[j])&&void 0!==r?r:[],E=()=>{y(0),c(f()),d(v()),g(f()),x(v())};return(0,i.useEffect)((()=>{p===j&&x(v())}),[p,j]),{cardAId:p,cardA:C,cardBId:j,cardB:S,relate:()=>{y(0),C.push(j),e[p]=(0,o.R1)(C),S.push(p),e[j]=(0,o.R1)(S),n(!0),c(u),d(m),g(f()),x(v())},unrelate:()=>{Z>=w?(y(0),E()):(y((e=>e+1)),g(f()),x(v()))},areRelated:C.includes(j),onRandomCards:E}}function m(){const[e,n]=(0,i.useState)(!1),t=["data/imageCardsRelationships"],s=(0,l.NL)(),{notification:o}=a.Z.useApp(),[h,v]=(0,i.useState)({total:0,overdone:0,complete:0,single:0}),{data:f={},isLoading:g,isSuccess:m,isError:x,error:p,isFetched:j,isRefetching:Z,refetch:y}=(0,d.a)({queryKey:t,queryFn:async()=>{var e;const n=(0,r.JU)(c.RZ,"data/imageCardsRelationships");return null!==(e=(await(0,r.QT)(n)).data())&&void 0!==e?e:{}}}),{isPending:b,isError:w,isSuccess:C,mutate:S}=(0,u.D)({mutationKey:t,mutationFn:async()=>{const e=(0,r.JU)(c.RZ,"data/imageCardsRelationships");return await(0,r.pl)(e,f),f},onSuccess:()=>{o.success({message:"Saved",placement:"bottomLeft"}),s.refetchQueries({queryKey:t}),n(!1)}});return(0,i.useEffect)((()=>{if(!Z&&j){const e=Object.keys(f).length;let n=0,t=0,a=0;Object.values(f).forEach((e=>{e.length>8&&(n+=1),1===e.length&&(a+=1),e.length>2&&(t+=1)})),v({total:e,overdone:n,complete:t,single:a})}}),[j,Z]),{data:f,isLoading:g,isSuccess:m,isError:x,error:p,hasData:m&&Object.keys(f).length>0,refetch:y,isSaving:b,isMutationError:w,isSaved:C,save:S,setDirty:n,isDirty:e,stats:h}}function x(e,n,t,a){const[r,s]=(0,i.useState)([]),[c,l]=(0,i.useState)([]),[d,u]=(0,i.useState)([]),[h,g]=(0,i.useState)(0),[m,x]=(0,i.useState)(!0),[p,j]=(0,i.useState)([]),Z=n=>{l((null!==n&&void 0!==n?n:r).map((n=>{var t;return null!==(t=null===e||void 0===e?void 0:e[n])&&void 0!==t?t:[]})))},y=()=>{const n=[...p];let r=0;const i=d.length<2e3?d:[];let c=0;for(;c<400&&n.length<t;){var o;const t="td-d".concat(f(),"-").concat(v()),s=null!==(o=e[t])&&void 0!==o?o:[],l=!(a>0)||s.length<a,d=!!m&&i.includes(t);n.includes(t)||d||!l||(n.push(t),r+=1),c+=1}s(n),u((e=>[...e,...n])),Z(n),g((e=>e+r))};(0,i.useEffect)((()=>{0===r.length&&y()}),[r]);return{cardIds:r,cards:c,selection:p,onSelect:e=>{j((n=>{const t=[...n],a=t.indexOf(e);return a>-1?t.splice(a,1):t.push(e),t}))},relate:()=>{p.forEach((n=>{var t;const a=null!==(t=e[n])&&void 0!==t?t:[];a.push(...p.filter((e=>e!==n))),e[n]=(0,o.R1)(a)})),n(!0),j([]),Z(),u([]),g(0)},nextSet:y,deselectAll:()=>{j([])},cycles:h,filters:{useCycles:m,toggleUseCycles:()=>{x((e=>!e))}}}}},9946:(e,n,t)=>{t.d(n,{m:()=>s});var a=t(2791),r=t(7415);function s(e,n){const[t,{width:s}]=(0,r.Z)(),{gap:i=32,minWidth:c=120,maxWidth:o=300,margin:l=0}=null!==n&&void 0!==n?n:{};return[(0,a.useMemo)((()=>{const n=Math.min(Math.max(Math.floor((s-l)/e)-i,c),o);return Number.isNaN(n)?c:n}),[s,e,i,c,o,l]),t]}},7717:(e,n,t)=>{t.d(n,{G:()=>c});var a=t(1413),r=t(763),s=t(2010),i=t(2606);function c(e,n){var t;let c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;const{getUrl:l}=(0,i.n)("resources"),d=o?"words-".concat(e,"-letters-selected-").concat(n):"words-".concat(e,"-letters-").concat(n),u=(0,s.a)({queryKey:[d],queryFn:async()=>{const e=await fetch(l("".concat(d,".json")));return await e.json()},enabled:c&&!!e&&!!n}),h=!(0,r.isEmpty)(u.data);return(0,a.Z)((0,a.Z)({},u),{},{data:null!==(t=u.data)&&void 0!==t?t:[],hasResponseData:h})}},5305:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var a=t(1790),r=t(2128),s=t(9475),i=t(2402),c=t(4520),o=t(952),l=t(6178),d=t(7515),u=t(8384),h=t(9946),v=t(7717),f=t(4766),g=t(763),m=t(2791),x=t(263);const p=function(e){var n=(0,m.useRef)(e);n.current=e,(0,x.Z)((function(){return function(){return n.current()}}))};const j=function(e){var n=(0,m.useRef)(0),t=(0,m.useState)(e),a=t[0],r=t[1],s=(0,m.useCallback)((function(e){cancelAnimationFrame(n.current),n.current=requestAnimationFrame((function(){r(e)}))}),[]);return p((function(){cancelAnimationFrame(n.current)})),[a,s]};var Z=t(7136);const y=function(e){var n=void 0===e?{}:e,t=n.initialWidth,a=void 0===t?1/0:t,r=n.initialHeight,s=void 0===r?1/0:r,i=n.onChange,c=j({width:Z.jU?window.innerWidth:a,height:Z.jU?window.innerHeight:s}),o=c[0],l=c[1];return(0,m.useEffect)((function(){if(Z.jU){var e=function(){var e=window.innerWidth,n=window.innerHeight;l({width:e,height:n}),i&&i(e,n)};return(0,Z.on)(window,"resize",e),function(){(0,Z.S1)(window,"resize",e)}}}),[]),o};var b=Z.jU?window:null,w=function(e){return!!e.addEventListener},C=function(e){return!!e.on};const S=function(e,n,t,a){void 0===t&&(t=b),(0,m.useEffect)((function(){if(n&&t)return w(t)?(0,Z.on)(t,e,n,a):C(t)&&t.on(e,n,a),function(){w(t)?(0,Z.S1)(t,e,n,a):C(t)&&t.off(e,n,a)}}),[e,n,t,JSON.stringify(a)])};const E=function(e,n,t,a){void 0===n&&(n=Z.ZT),void 0===t&&(t={}),void 0===a&&(a=[e]);var r=t.event,s=void 0===r?"keydown":r,i=t.target,c=t.options,o=(0,m.useMemo)((function(){var t,a="function"===typeof(t=e)?t:"string"===typeof t?function(e){return e.key===t}:t?function(){return!0}:function(){return!1};return function(e){if(a(e))return n(e)}}),a);S(s,o,i,c)};var k=t(145),N=t(4249),R=t(2671),D=t(184);function L(e){let{query:n}=e;const{width:t}=y(),[r]=(0,h.m)(1,{minWidth:t/3}),{data:l,setDirty:d}=n,{cardAId:v,cardA:g,cardBId:m,cardB:x,relate:p,unrelate:j}=(0,R.gU)(l,d),{addParam:Z,is:b}=(0,f.K)(),w=b("open");return E("1",(()=>{w&&j()})),E("2",(()=>{w&&p()})),(0,D.jsxs)(a.Z.Content,{className:"dev-content py-4",children:[(0,D.jsx)(s.ZP,{block:!0,onClick:()=>Z("open","true"),children:"Open Modal"}),(0,D.jsx)(z,{}),(0,D.jsx)(u.x,{title:"Card A: ".concat(v," vs Card B: ").concat(m),open:w,onClose:()=>Z("open","false"),actions:[(0,D.jsx)(s.ZP,{onClick:j,size:"large",block:!0,children:"Unrelated"},"1"),(0,D.jsx)(s.ZP,{onClick:p,size:"large",block:!0,type:"primary",children:"Related"},"2")],children:(0,D.jsx)(i.Z.PreviewGroup,{children:(0,D.jsxs)(c.Z,{className:"center",wrap:"wrap",justify:"center",children:[(0,D.jsxs)(c.Z,{vertical:!0,children:[(0,D.jsx)(k.f,{id:v,width:r}),(0,D.jsxs)(c.Z,{children:[(0,D.jsx)(N.c,{card:g}),(0,D.jsx)(o.Z,{children:v})]})]}),(0,D.jsxs)(c.Z,{vertical:!0,children:[(0,D.jsx)(k.f,{id:m,width:r}),(0,D.jsxs)(c.Z,{children:[(0,D.jsx)(N.c,{card:x}),(0,D.jsx)(o.Z,{children:m})]})]})]})})})]})}const P={};function z(){const{data:e,isLoading:n}=(0,v.G)(3,"pt",!0,!0),[t,a]=(0,m.useState)(""),[r,i]=(0,m.useState)([]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(l.Z.Title,{level:3,className:"center",children:"Passcode Words"}),(0,D.jsxs)(c.Z,{children:[(0,D.jsx)(d.Z,{onChange:e=>a(e.target.value)}),(0,D.jsx)(s.ZP,{disabled:n||0===t.length,onClick:()=>{!(0,g.isEmpty)(e)&&(0,g.isEmpty)(P)&&e.forEach((e=>{e.split("").forEach((n=>{P[n.toLowerCase()]?P[n.toLowerCase()].push(e):P[n.toLowerCase()]=[e]}))}));const n=t.split("").map((e=>(0,g.sample)(P[e.toLowerCase()]))).filter(Boolean);i(n)},children:"Get"})]}),(0,D.jsx)(d.Z.TextArea,{className:"mt-4",value:JSON.stringify(r)})]})}var M=t(7128),I=t(8357),T=t(7018),A=t(7340),q=t(7965);function O(e){let{query:n}=e;const{data:t,isDirty:a,isSaving:r,save:i,isLoading:o,isError:l}=n,{queryParams:d,addParam:u}=(0,f.K)();return(0,D.jsxs)(q.p3,{children:[(0,D.jsx)(q.Pd,{children:(0,D.jsxs)(c.Z,{vertical:!0,gap:6,children:[(0,D.jsx)(A.k,{isDirty:a,dirt:JSON.stringify(t),onSave:()=>i({}),isSaving:r}),(0,D.jsx)(T.o,{data:t,fileName:"imageCardsRelationships.json",loading:r,disabled:(0,g.isEmpty)(t),block:!0})]})}),(0,D.jsx)(I.Th,{isLoading:o||r,isDirty:a,isError:l,hasResponseData:!(0,g.isEmpty)(t)}),(0,D.jsxs)(q.Pd,{children:[(0,D.jsx)(s.ZP,{block:!0,onClick:()=>u("open","true"),children:"Open Modal"}),(0,D.jsx)(M.Z,{}),(0,D.jsx)(I.zE,{label:"Cycle Threshold",value:d.get("cycle")||3,onChange:e=>u("cycle",e),options:[1,3,5,10]})]})]})}const U=function(){const e=(0,R.AZ)();return(0,D.jsx)(q.Xg,{title:"Image Cards",subtitle:"Comparator",children:(0,D.jsx)(r.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!(0,g.isEmpty)(e.data),children:(0,D.jsxs)(a.Z,{hasSider:!0,children:[(0,D.jsx)(O,{query:e}),(0,D.jsx)(a.Z.Content,{className:"content",children:(0,D.jsx)(L,{query:e})})]})})})}},4483:(e,n,t)=>{t.d(n,{Z:()=>o});var a=t(7460),r=t(2791);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var i=t(4790),c=function(e,n){return r.createElement(i.Z,(0,a.Z)({},e,{ref:n,icon:s}))};const o=r.forwardRef(c)},1492:(e,n,t)=>{t.d(n,{Z:()=>o});var a=t(7460),r=t(2791);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm122.7-533.4c18.7-18.7 49.1-18.7 67.9 0 18.7 18.7 18.7 49.1 0 67.9-18.7 18.7-49.1 18.7-67.9 0-18.7-18.7-18.7-49.1 0-67.9zm283.8 282.9l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"filled"};var i=t(4790),c=function(e,n){return r.createElement(i.Z,(0,a.Z)({},e,{ref:n,icon:s}))};const o=r.forwardRef(c)},8211:(e,n,t)=>{t.d(n,{Z:()=>r});var a=t(2791);function r(e,n){void 0===n&&(n=0);var t=(0,a.useRef)(!1),r=(0,a.useRef)(),s=(0,a.useRef)(e),i=(0,a.useCallback)((function(){return t.current}),[]),c=(0,a.useCallback)((function(){t.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){t.current=!0,s.current()}),n)}),[n]),o=(0,a.useCallback)((function(){t.current=null,r.current&&clearTimeout(r.current)}),[]);return(0,a.useEffect)((function(){s.current=e}),[e]),(0,a.useEffect)((function(){return c(),o}),[n]),[i,o,c]}}}]);
//# sourceMappingURL=ImageCardsComparator.1a310b54.chunk.js.map