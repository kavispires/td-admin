"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[5829],{5597:(e,t,l)=>{l.d(t,{FX:()=>d,Pm:()=>u,fH:()=>c});var a=l(4520),n=l(2791),s=l(2043),i=l(4766),r=l(763),o=l(184);function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const l=Object.keys(Object.values(e).reduce(((e,l)=>(Object.keys(l).forEach((l=>{e[l]||t.includes(l)||(e[l]=!0)})),e)),{})),a=[],n=[];return l.forEach((t=>{const l=Object.values(e).map((e=>e[t])),s=Array.from(new Set(l)),i=s.length/l.length;i>=.05&&a.push(t),i<=.9&&n.push({label:t,options:[{label:"All",value:""},...s.sort().map((e=>({label:String(e),value:e})))]})})),{filters:n,sortableKeys:a}}function u(e){var t,l;let{data:u,ignoreKeys:d=[]}=e;const{queryParams:v,addParam:g}=(0,i.K)(),x=(0,n.useMemo)((()=>c(u,d)),[u,d]);return(0,o.jsxs)(a.Z,{vertical:!0,style:{overflowY:"auto"},children:[x.filters.map((e=>{var t;return(0,o.jsx)(s.zE,{label:(0,r.capitalize)(e.label),options:e.options,onChange:t=>g(e.label.toLowerCase(),t),value:null!==(t=v.get(e.label.toLowerCase()))&&void 0!==t?t:""},e.label)})),(0,o.jsx)(s.zE,{label:"Sort by",options:x.sortableKeys.map((e=>({label:(0,r.capitalize)(e),value:e}))),onChange:e=>g("sort",e),value:null!==(t=v.get("sort"))&&void 0!==t?t:""}),(0,o.jsx)(s.zE,{label:"Order",options:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],onChange:e=>g("order",e),value:null!==(l=v.get("order"))&&void 0!==l?l:"asc"})]})}function d(e){var t;const{queryParams:l}=(0,i.K)(),a=(0,n.useMemo)((()=>c(e)),[e]),s=(0,n.useMemo)((()=>Array.from(l.entries()).filter((e=>{let[t]=e;return a.filters.some((e=>e.label.toLowerCase()===t))})).reduce(((e,t)=>{let[l,a]=t;return e[l]=a,e}),{})),[l,a]),o=null!==(t=l.get("sort"))&&void 0!==t?t:"id",u="desc"===l.get("order")?"desc":"asc";return(0,n.useMemo)((()=>{const t=Object.values(e).filter((e=>Object.entries(s).every((t=>{let[l,a]=t;return String(e[l])===a}))));return(0,r.orderBy)(t,o,u)}),[e,s,o,u])}},3164:(e,t,l)=>{l.d(t,{__:()=>c,aW:()=>u,js:()=>d});var a=l(945),n=l(2061),s=l(5922),i=l(1310),r=l(8955),o=l(184);function c(e){let{strong:t,...l}=e;return(0,o.jsx)(a.Z.Text,{strong:null===t||void 0===t||t,...l})}function u(e){let{value:t,language:l,...a}=e;return(0,o.jsx)(n.Z,{prefix:(0,o.jsx)(i.H,{language:l,width:"1em"}),placeholder:"Value in ".concat(l.toUpperCase()),defaultValue:t[l],size:"small",...a})}function d(e){let{value:t,...l}=e;return(0,o.jsx)(s.Z,{checked:t,checkedChildren:(0,o.jsx)(r.Z,{style:{color:"hotpink"}}),...l})}},2228:(e,t,l)=>{l.d(t,{N:()=>i});var a=l(8528),n=l(1046),s=l(184);function i(e){let{children:t,pagination:l,...i}=e;const r=(0,s.jsx)(a.Z,{showQuickJumper:!0,...l,className:"fixed-pagination"});return(0,s.jsxs)(n.Z,{direction:"vertical",...i,children:[r,t,r]})}},145:(e,t,l)=>{l.d(t,{f:()=>r});var a=l(3733),n=l(6340),s=l(2606),i=l(184);const r=e=>{let{id:t,width:l=200,className:r="",preview:o=!0,fileExtension:c="jpg"}=e;const{getUrl:u}=(0,s.n)("images"),d=t.replace(/-/g,"/");return(0,i.jsx)("div",{className:(0,a.Z)("image-card",r),children:(0,i.jsx)(n.Z,{width:l,src:u("".concat(d,".").concat(c)),fallback:u("back/default.jpg"),preview:o})})}},4290:(e,t,l)=>{l.d(t,{e:()=>i});var a=l(2791),n=l(4766),s=l(4421);function i(e){var t,l;let{prefix:i="",data:r,defaultCurrent:o=1,defaultPageSize:c=64,pageSizeOptions:u=[16,32,64,128],resetter:d}=e;const{queryParams:v,addParam:g}=(0,n.K)(),x=Number(null!==(t=v.get("".concat(i,"page")))&&void 0!==t?t:String(o)),h=Number(null!==(l=v.get("".concat(i,"pageSize")))&&void 0!==l?l:String(c)),p=(0,s.Z)(d),j=(0,a.useMemo)((()=>{const e=(x-1)*h,t=e+h;return r.slice(e,t)}),[x,h,r]),m=e=>{g("".concat(i,"page"),e.toString(),String(o))};return d!==p&&m(o),{page:j,pagination:{current:x,pageSize:h,onChange:m,onShowSizeChange:(e,t)=>{g("".concat(i,"pageSize"),t.toString(),String(c))},defaultCurrent:o,defaultPageSize:c,pageSizeOptions:u,total:r.length,hideOnSinglePage:!0}}}},6654:(e,t,l)=>{l.r(t),l.d(t,{Contenders:()=>H,default:()=>U});var a=l(1790),n=l(2128),s=l(4290),i=l(945),r=l(4520),o=l(2228),c=l(7747),u=l(6473),d=l(5437),v=l(4424),g=l(9228),x=l(3164),h=l(1310),p=l(145),j=l(763),m=l(5850),b=l(6591),y=l(184);const f=[{value:"base",label:"Base"},{value:"anime",label:"Anime"},{value:"art",label:"Art"},{value:"cartoon",label:"Cartoon"},{value:"celebrities",label:"Celebrities"},{value:"characters",label:"Characters"},{value:"comics",label:"Comics"},{value:"games",label:"Games"},{value:"history",label:"History"},{value:"internet",label:"Internet"},{value:"literature",label:"Literature"},{value:"movies",label:"Movies"},{value:"music",label:"Music"},{value:"mythology",label:"Mythology"},{value:"pop-culture",label:"Pop Culture"},{value:"random",label:"Random"},{value:"sports",label:"Sports"},{value:"television",label:"Television"},{value:"special-td",label:"Special TD"},{value:"special-td-bg",label:"Special TD BG"}],Z=(e,t)=>{if(!e||0===e.length)return"warning";return e.filter((e=>!f.some((t=>t.value===e)))).length>0||t&&e.includes("base")?"error":void 0};function C(e){var t,l,a;let{contender:n,addEntryToUpdate:s}=e;const i=(e,t,l)=>{s(n.id,(0,j.merge)({[t]:{en:"",pt:""}},n,{[t]:{[l]:e}}))};return(0,y.jsxs)(u.Z,{hoverable:!0,"style-":{width:240,maxWidth:240},cover:(0,y.jsx)(p.f,{id:n.id,width:240}),children:[(0,y.jsx)(u.Z.Meta,{title:n.id,description:(0,y.jsxs)(r.Z,{vertical:!0,children:[(0,y.jsx)(x.__,{children:"Name"}),(0,y.jsx)(x.aW,{value:n.name,language:"en",onChange:e=>i(e.target.value,"name","en")}),(0,y.jsx)(x.aW,{value:n.name,language:"pt",onChange:e=>i(e.target.value,"name","pt")}),(0,y.jsx)(x.__,{children:"Description"}),(0,y.jsx)(x.aW,{value:null!==(t=n.description)&&void 0!==t?t:b.Xw,language:"en",onChange:e=>i(e.target.value,"description","en")}),(0,y.jsx)(x.aW,{value:null!==(l=n.description)&&void 0!==l?l:b.Xw,language:"pt",onChange:e=>i(e.target.value,"description","pt")}),(0,y.jsx)(x.__,{children:"Decks"}),(0,y.jsx)(d.Z,{mode:"multiple",defaultValue:null!==(a=n.decks)&&void 0!==a?a:[],size:"small",options:f,onChange:e=>{return t=e,void s(n.id,{...n,decks:(0,m.R1)(t).sort()});var t},style:{maxWidth:"calc(100vw / 9)"},status:Z(n.decks,n.exclusivity)}),(0,y.jsxs)(r.Z,{align:"center",children:[(0,y.jsx)(x.__,{children:"NSFW"})," ",(0,y.jsx)(x.js,{value:n.nsfw,size:"small",onChange:e=>{return t=e,void s(n.id,(0,j.merge)(n,{nsfw:t}));var t}})]}),(0,y.jsxs)(r.Z,{align:"center",gap:8,children:[(0,y.jsx)(x.__,{children:"Exclusivity"})," ",(0,y.jsx)(w,{contender:n,addEntryToUpdate:s})]})]})}),(0,y.jsx)(u.Z.Meta,{})]})}function w(e){let{contender:t,addEntryToUpdate:l}=e;const a=[{value:"en",label:(0,y.jsx)(h.H,{language:"en",style:{width:24}})},{value:"pt",label:(0,y.jsx)(h.H,{language:"pt",style:{width:24}})},{value:"none",label:"None"}],n=(0,y.jsx)(r.Z,{gap:8,children:(0,y.jsx)(v.ZP.Group,{options:a,onChange:e=>{return a=e.target.value,void l(t.id,(0,j.merge)(t,{exclusivity:a}));var a},value:null===t||void 0===t?void 0:t.exclusivity})});return(0,y.jsxs)(r.Z,{gap:8,children:["en"===(null===t||void 0===t?void 0:t.exclusivity)&&(0,y.jsx)(h.H,{language:"en",style:{width:24}}),"pt"===(null===t||void 0===t?void 0:t.exclusivity)&&(0,y.jsx)(h.H,{language:"pt",style:{width:24}}),!(null!==t&&void 0!==t&&t.exclusivity)&&(0,y.jsx)(y.Fragment,{children:"None"}),(0,y.jsx)(g.Z,{title:"Change exclusivity?",content:n,trigger:"click",children:(0,y.jsx)(c.Z,{})})]})}var S=l(5597);function k(e){let{data:t,addEntryToUpdate:l}=e;const a=(0,S.FX)(t),{page:n,pagination:c}=(0,s.e)({data:a,resetter:"",defaultPageSize:32});return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.Z.Title,{level:2,children:["Listing - Contenders (",a.length," | ",Object.values(null!==t&&void 0!==t?t:{}).length,")"]}),(0,y.jsx)(o.N,{pagination:c,className:"full-width",children:(0,y.jsx)(r.Z,{gap:16,wrap:"wrap",children:n.map((e=>(0,y.jsx)(C,{contender:e,addEntryToUpdate:l},e.id)))})})]})})}var E=l(7965),T=l(4562),N=l(8938),P=l(7128),z=l(7018),O=l(2791),D=l(7340);function _(e){let{data:t,isDirty:l,save:a,isSaving:n,entriesToUpdate:s}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(E.Pd,{children:(0,y.jsxs)(r.Z,{vertical:!0,gap:12,children:[(0,y.jsx)(D.k,{isDirty:l,onSave:a,isSaving:n,dirt:JSON.stringify(s)}),(0,y.jsx)(z.o,{data:()=>function(e){console.log("Preparing file for download...");const t=(0,j.cloneDeep)(e);return Object.values(t).forEach((e=>{const t=e.exclusivity;void 0!==e.exclusivity&&"none"!==t||delete e.exclusivity})),(0,m.Tj)(t)}(t),fileName:"contenders.json",disabled:l,block:!0})]})}),(0,y.jsx)(E.Pd,{children:(0,y.jsx)(S.Pm,{data:t,ignoreKeys:["description"]})}),(0,y.jsx)(E.Pd,{children:(0,y.jsx)(M,{data:t})})]})}function M(e){let{data:t}=e;const l=(0,O.useMemo)((()=>{let e=0,l=0,a=0;const n=Object.values(t).reduce(((t,n)=>{var s;return(null!==(s=n.decks)&&void 0!==s?s:[]).forEach((e=>{t[e]=t[e]?t[e]+1:1})),"en"===n.exclusivity&&e++,"pt"===n.exclusivity&&l++,n.exclusivity||a++,t}),{});return{deckCounts:n,invalidDecks:Object.keys(n).filter((e=>!f.some((t=>t.value===e)))),englishExclusivity:e,portugueseExclusivity:l,bothExclusivity:a}}),[t]);return(0,y.jsxs)(r.Z,{vertical:!0,gap:8,children:[(0,y.jsx)(i.Z.Text,{strong:!0,children:"Deck Counts"}),(0,y.jsx)(r.Z,{vertical:!0,gap:8,style:{maxHeight:"300px",overflowY:"auto"},children:f.map((e=>{var t;return(0,y.jsxs)(i.Z.Text,{children:[e.label,": ",null!==(t=l.deckCounts[e.value])&&void 0!==t?t:0]},e.value)}))}),(0,y.jsx)(P.Z,{className:"my-2"}),(0,y.jsx)(i.Z.Text,{strong:!0,children:"Invalid Decks"}),(0,y.jsx)(r.Z,{vertical:!0,gap:8,style:{maxHeight:"300px",overflowY:"auto"},children:l.invalidDecks.map((e=>(0,y.jsx)(i.Z.Text,{children:e},e)))}),(0,y.jsx)(P.Z,{className:"my-2"}),(0,y.jsx)(i.Z.Text,{strong:!0,children:"Exclusivity"}),(0,y.jsxs)(r.Z,{vertical:!0,gap:8,children:[(0,y.jsxs)(i.Z.Text,{children:["English: ",l.englishExclusivity]}),(0,y.jsxs)(i.Z.Text,{children:["Portuguese: ",l.portugueseExclusivity]}),(0,y.jsxs)(i.Z.Text,{children:["Both: ",l.bothExclusivity]})]})]})}function H(){const e=(0,N.i)({tdrResourceName:"contenders",firebaseDataCollectionName:"contenders",serialize:!0});return(0,y.jsx)(E.Xg,{title:"Contenders",subtitle:"Characters, Celebrities, Personalities",children:(0,y.jsxs)(a.Z,{hasSider:!0,children:[(0,y.jsx)(T.p,{children:(0,y.jsx)(_,{...e})}),(0,y.jsx)(a.Z.Content,{className:"content",children:(0,y.jsx)(n.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!(0,j.isEmpty)(e.data),children:(0,y.jsx)(k,{...e})})})]})})}const U=H}}]);
//# sourceMappingURL=Contenders.bbe919ce.chunk.js.map