"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[2695],{9916:(e,t,s)=>{s.r(t),s.d(t,{ItemsDiscSets:()=>W,default:()=>$});var n=s(3990),i=s(2128),r=s(9481),a=s(1046),c=s(1082),l=s(2556),d=s(8252),o=s(4520),m=s(2997),u=s(7134),p=s(548),h=s(5529),x=s(763),f=s(2791),j=s(5850),Z=s(8862),g=s(9929),y=s(8178),v=s(1105),b=s(184);function I(e){let{onUpdateBatch:t}=e;const[s,n]=(0,f.useState)("");return(0,b.jsxs)(d.Z.Paragraph,{children:["Paste IDs",(0,b.jsx)(v.Z.TextArea,{value:s,onChange:e=>n(e.target.value)}),(0,b.jsx)(l.ZP,{size:"small",onClick:()=>{try{const e=s.replace(/^\[|\]$/g,"").split(/\s*,\s*/).map((e=>e.replace(/^"|"$/g,""))).filter(Boolean);t(e),n("")}catch(e){console.error(e)}},children:"Add"})]})}function C(e){let{disc:t,addEntryToUpdate:s}=e;const n=e=>{s(t.id,{...t,itemsIds:(0,j.R1)((0,j.E4)([...t.itemsIds,e]))})};return(0,b.jsxs)(o.Z,{gap:16,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.Z.Paragraph,{children:"Add Item"}),(0,b.jsx)(y.i,{onFinish:n})]}),(0,b.jsx)(E,{onUpdate:n,disc:t}),(0,b.jsx)(I,{onUpdateBatch:e=>{s(t.id,{...t,itemsIds:(0,j.R1)((0,j.E4)([...t.itemsIds,...e]))})}})]})}function E(e){let{onUpdate:t,disc:s}=e;const n=(0,h.N)("items"),[i,r]=(0,f.useState)([...s.itemsIds]),a=e=>{var t;const s=(0,x.difference)(Object.keys(null!==(t=n.data)&&void 0!==t?t:{}),i);return(0,x.sampleSize)(s,e)},[c,u]=(0,f.useState)(a(5)),p=()=>{const e=a(30);u(e),r([...i,...e])};return(0,f.useEffect)((()=>{r([...s.itemsIds])}),[s.id]),(0,f.useEffect)((()=>{0===c.length&&(p(),r([...s.itemsIds]))}),[c]),(0,b.jsxs)("div",{children:[(0,b.jsxs)(d.Z.Paragraph,{children:["Random Sample"," ",(0,b.jsx)(l.ZP,{size:"small",onClick:p,children:"Get"})]}),(0,b.jsx)(o.Z,{gap:16,wrap:"wrap",children:c.map(((e,s)=>(0,b.jsxs)(o.Z,{gap:2,vertical:!0,children:[(0,b.jsx)(m.ck,{id:e,width:60}),(0,b.jsxs)(o.Z,{justify:"center",gap:6,children:[(0,b.jsx)(d.Z.Text,{children:e}),(0,b.jsx)(l.ZP,{size:"small",shape:"circle",onClick:()=>t(e),children:(0,b.jsx)(g.Z,{})})]})]},"sample-".concat(e,"-").concat(s))))})]})}var k=s(4850);function T(e){let{data:t,addEntryToUpdate:s}=e;const n=(0,h.N)("items"),i=(0,f.useMemo)((()=>{return e=Object.values(t),(0,x.orderBy)(e,[e=>e.title.en]).map((e=>({...e,itemsIds:(0,x.orderBy)(e.itemsIds,(e=>Number(e)))})));var e}),[t]),c=(0,u._)(),l=(0,p.P)({total:i.length,showQuickJumper:!0}),d=[{title:"Id",dataIndex:"id",key:"id",sorter:(e,t)=>e.title.en.localeCompare(t.title.en)},{title:"Title",dataIndex:"title",key:"title",sorter:(e,t)=>e.title.en.localeCompare(t.title.en),render:(e,t)=>(0,b.jsx)(P,{value:e,disc:t,addEntryToUpdate:s})},r.Z.EXPAND_COLUMN,{title:"Items",dataIndex:"itemsIds",key:"itemsIds",render:(e,t)=>(0,b.jsx)(S,{disc:t,itemsIds:(0,j.E4)(e),copyToClipboard:c,addEntryToUpdate:s})},{title:"Count",dataIndex:"itemsIds",key:"count",render:e=>(0,j.R1)(e).filter(Boolean).length}];return(0,b.jsx)(a.Z,{direction:"vertical",children:(0,b.jsx)(r.Z,{columns:d,dataSource:i,pagination:l,rowKey:"id",expandable:{expandedRowRender:e=>(0,b.jsx)(C,{disc:e,addEntryToUpdate:s}),rowExpandable:()=>n.isSuccess}})})}function w(e){let{disc:t,addEntryToUpdate:s,itemId:n}=e;return(0,b.jsx)(c.Z,{title:"Are you sure you want to remove this item?",onConfirm:()=>{s(t.id,{...t,itemsIds:t.itemsIds.filter((e=>e!==n))})},okText:"Yes",cancelText:"No",children:(0,b.jsx)(l.ZP,{icon:(0,b.jsx)(Z.Z,{}),size:"small",type:"text"})})}function P(e){let{value:t,disc:s,addEntryToUpdate:n}=e;const i=(e,t)=>{n(s.id,{...s,title:{...s.title,[t]:e}})};return(0,b.jsxs)(a.Z,{direction:"vertical",size:"small",children:[(0,b.jsx)(d.Z.Text,{editable:{onChange:e=>i(e,"pt")},children:String(t.pt)}),(0,b.jsx)(d.Z.Text,{editable:{onChange:e=>i(e,"en")},children:String(t.en)})]})}function S(e){let{disc:t,itemsIds:s,copyToClipboard:n,addEntryToUpdate:i}=e;return(0,b.jsxs)(o.Z,{gap:6,wrap:"wrap",children:[s.map(((e,s)=>(0,b.jsxs)(o.Z,{gap:2,vertical:!0,children:[(0,b.jsx)(m.ck,{id:e,width:60}),(0,b.jsxs)(o.Z,{justify:"center",children:[(0,b.jsx)(d.Z.Text,{onClick:()=>n(e),children:e}),(0,b.jsx)(w,{disc:t,addEntryToUpdate:i,itemId:e})]})]},"".concat(t.title,"-").concat(e,"-").concat(s)))),(0,b.jsx)(k.A,{ids:s})]},"items-".concat(t.title))}var O=s(7128),N=s(7018),U=s(7340),z=s(7965),A=s(5225),B=s(959),q=s(1310),R=s(1291),D=s.n(R);function H(e){let{addEntryToUpdate:t,ids:s}=e;const[n,i]=(0,f.useState)(!1),[r]=A.Z.useForm(),a=A.Z.useWatch("name",r),c=(0,f.useMemo)((()=>{const e={};if(a&&a.length>2){const n=(0,x.camelCase)(a);if(n)try{D().findBestMatch(n,s).ratings.forEach((t=>{t.rating>.4&&(e[t.target]=t.rating)}))}catch(t){console.error(t)}}return Object.keys(e)}),[a,s]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.ZP,{type:"dashed",block:!0,onClick:()=>i(!0),children:"Add New Set"}),(0,b.jsxs)(B.Z,{title:"Add New Set",open:n,onOk:r.submit,onCancel:()=>i(!1),maskClosable:!1,okText:"Add",okButtonProps:{htmlType:"submit"},children:[(0,b.jsxs)(A.Z,{form:r,onFinish:e=>{const s=(0,x.camelCase)(e.name);t((0,x.camelCase)(s),{id:s,title:{pt:e.nome,en:e.name},itemsIds:[]})},children:[(0,b.jsx)(A.Z.Item,{name:"nome",label:"Nome",rules:[{required:!0}],children:(0,b.jsx)(v.Z,{prefix:(0,b.jsx)(q.H,{language:"pt",width:"1em"}),placeholder:"Name in pt",size:"small"})}),(0,b.jsx)(A.Z.Item,{name:"name",label:"Name",rules:[{required:!0}],children:(0,b.jsx)(v.Z,{prefix:(0,b.jsx)(q.H,{language:"en",width:"1em"}),placeholder:"Name in en",size:"small"})})]}),(0,b.jsx)(d.Z.Text,{children:"Similar:"}),(0,b.jsx)("ul",{children:c.map((e=>(0,b.jsx)("li",{children:e},e)))})]})]})}function M(e){let{data:t,save:s,isDirty:n,isSaving:i,entriesToUpdate:r,addEntryToUpdate:a}=e;return(0,b.jsxs)(z.Pd,{children:[(0,b.jsxs)(o.Z,{vertical:!0,gap:12,children:[(0,b.jsx)(U.k,{isDirty:n,onSave:s,isSaving:i,dirt:JSON.stringify(_(r))}),(0,b.jsx)(N.o,{data:()=>{return e=t,Object.keys(e).forEach((t=>{e[t].itemsIds=(0,j.E4)((0,j.R1)(e[t].itemsIds))})),(0,j.Tj)(_(e));var e},fileName:"daily-disc-sets.json",disabled:n,block:!0})]}),(0,b.jsx)(O.Z,{}),(0,b.jsx)(H,{addEntryToUpdate:a,ids:Object.keys(t)})]})}function _(e){return(0,x.omitBy)((0,x.cloneDeep)(e),(e=>(0,x.isEmpty)(e.itemsIds)))}var F=s(4562),L=s(8938);function W(){const e=(0,L.i)({tdrResourceName:"daily-disc-sets",firebaseDataCollectionName:"discSets",serialize:!0});return(0,b.jsx)(z.Xg,{title:"Items",subtitle:"Disc Sets",children:(0,b.jsxs)(n.Z,{hasSider:!0,children:[(0,b.jsx)(F.p,{children:(0,b.jsx)(M,{...e})}),(0,b.jsx)(n.Z.Content,{className:"content",children:(0,b.jsx)(i.T,{isLoading:e.isLoading||e.isSaving,error:e.error,hasResponseData:!(0,x.isEmpty)(e.data),children:(0,b.jsx)(T,{...e})})})]})})}const $=W},7042:(e,t,s)=>{s.d(t,{Z:()=>n});const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"}},8862:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(7460),i=s(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};var a=s(4508),c=function(e,t){return i.createElement(a.Z,(0,n.Z)({},e,{ref:t,icon:r}))};const l=i.forwardRef(c)},9929:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(7460),i=s(2791),r=s(7042),a=s(4508),c=function(e,t){return i.createElement(a.Z,(0,n.Z)({},e,{ref:t,icon:r.Z}))};const l=i.forwardRef(c)},959:(e,t,s)=>{s.d(t,{Z:()=>v});var n=s(8887),i=s(6854),r=s(2173),a=s(2791),c=s(9809),l=s.n(c),d=s(3224),o=s(7268),m=s(1929),u=s(7838),p=s(2456),h=s(1458),x=s(3931),f=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]])}return s};const j=(0,o.i)((e=>{const{prefixCls:t,className:s,closeIcon:n,closable:i,type:r,title:c,children:o,footer:j}=e,Z=f(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:g}=a.useContext(m.E_),y=g(),v=t||g("modal"),b=(0,u.Z)(y),[I,C,E]=(0,x.ZP)(v,b),k="".concat(v,"-confirm");let T={};return T=r?{closable:null!==i&&void 0!==i&&i,title:"",footer:"",children:a.createElement(p.O,Object.assign({},e,{prefixCls:v,confirmPrefixCls:k,rootPrefixCls:y,content:o}))}:{closable:null===i||void 0===i||i,title:c,footer:null!==j&&a.createElement(h.$,Object.assign({},e)),children:o},I(a.createElement(d.s,Object.assign({prefixCls:v,className:l()(C,"".concat(v,"-pure-panel"),r&&k,r&&"".concat(k,"-").concat(r),s,E,b)},Z,{closeIcon:(0,h.b)(v,n),closable:i},T)))}));var Z=s(7562);function g(e){return(0,n.ZP)((0,n.uW)(e))}const y=r.Z;y.useModal=Z.Z,y.info=function(e){return(0,n.ZP)((0,n.cw)(e))},y.success=function(e){return(0,n.ZP)((0,n.vq)(e))},y.error=function(e){return(0,n.ZP)((0,n.AQ)(e))},y.warning=g,y.warn=g,y.confirm=function(e){return(0,n.ZP)((0,n.Au)(e))},y.destroyAll=function(){for(;i.Z.length;){const e=i.Z.pop();e&&e()}},y.config=n.ai,y._InternalPanelDoNotUseOrYouWillBeFired=j;const v=y}}]);
//# sourceMappingURL=ItemsDiscSets.23942d9b.chunk.js.map