"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[9479],{2043:(e,t,n)=>{n.d(t,{Do:()=>m,H:()=>g,tj:()=>p,xh:()=>h,zE:()=>u});var l=n(5225),s=n(5437),i=n(4003),a=n(5922),r=n(9862),d=n(4248),o=n(1431),c=n(184);function u(e){let{label:t,value:n,onChange:i,options:a,placeholder:r}=e;return(0,c.jsx)(l.Z.Item,{label:t,children:(0,c.jsxs)(s.Z,{style:{minWidth:"150px"},onChange:i,value:n,children:[r&&(0,c.jsx)(s.Z.Option,{value:"",disabled:!0,children:"placeholder"}),a.map((e=>"object"===typeof e?(0,c.jsx)(s.Z.Option,{value:e.value,children:e.label},"".concat(t,"-").concat(e.value)):(0,c.jsx)(s.Z.Option,{value:e,children:e},"".concat(t,"-").concat(e))))]})})}function h(e){let{label:t,value:n,onChange:s,min:a=0,max:r=100,step:d}=e;return(0,c.jsx)(l.Z.Item,{label:t,children:(0,c.jsx)(i.Z,{min:a,max:r,value:n,onChange:e=>s(null!==e&&void 0!==e?e:r),style:{minWidth:"150px",width:"100%"},step:d})})}function m(e){let{label:t,value:n,onChange:s,className:i,disabled:r}=e;return(0,c.jsx)(l.Z.Item,{label:t,valuePropName:"checked",className:i,children:(0,c.jsx)(a.Z,{checked:n,onChange:s,size:"small",disabled:r})})}function p(e){let{label:t,value:n,onChange:s,disabled:i,className:a}=e;return(0,c.jsx)(l.Z.Item,{label:t,valuePropName:"checked",className:a,children:(0,c.jsx)(r.Z,{checked:n,onChange:e=>s(e.target.checked),disabled:i})})}function g(e){let{value:t,label:n,onChange:s,options:i}=e;return(0,c.jsx)(l.Z.Item,{label:n,layout:i.length>2?"vertical":"horizontal",children:(0,c.jsx)(d.Z,{block:!0,value:t,onChange:s,options:i.map((e=>({label:(0,c.jsx)(o.Z,{arrow:!0,trigger:"hover",title:e.title,children:e.icon}),value:e.value})))})})}},7340:(e,t,n)=>{n.d(t,{k:()=>u});var l=n(2556),s=n(2426),i=n.n(s),a=n(2791),r=n(8211),d=n(4483),o=n(4841),c=n(184);function u(e){let{isDirty:t,onSave:n,isSaving:s,dirt:u,interval:h=6e5,...m}=e;const{togglePendingSave:p}=(0,o.b)(),[,g,x]=(0,r.Z)((()=>{t&&n()}),h);return(0,a.useEffect)((()=>{t?(p(!0),console.log("Save Reset",i()(Date.now()).format("MM/DD/YYYY HH:mm:ss")),x()):(p(!1),g())}),[t,x,g,u]),(0,a.useEffect)((()=>{const e=e=>{if(t){const t="You have unsaved changes, are you sure you want to leave?";return e.returnValue=t,t}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t]),(0,c.jsx)(l.ZP,{type:"primary",size:"large",icon:(0,c.jsx)(d.Z,{}),onClick:n,disabled:!t,loading:s,danger:!0,block:!0,...m,children:"Save"})}},8866:(e,t,n)=>{n.d(t,{N:()=>i});var l=n(8252),s=n(184);function i(e){let{children:t,level:n,...i}=e;return(0,s.jsx)(l.Z.Title,{level:null!==n&&void 0!==n?n:3,...i,children:t})}},8357:(e,t,n)=>{n.d(t,{tj:()=>a.tj,xh:()=>a.xh,H:()=>a.H,zE:()=>a.zE,Do:()=>a.Do,Th:()=>u,F6:()=>i});n(8866);var l=n(3733),s=n(184);const i=e=>{let{children:t,active:n=!1,activeClass:i="",className:a="",hoverType:r="scale",...d}=e;return(0,s.jsx)("button",{className:(0,l.Z)("transparent-button","transparent-button--".concat(r),n&&(i||"transparent-button--active"),a),...d,children:t})};var a=n(2043),r=n(952),d=n(5225),o=n(7965);function c(e){let{isLoading:t,isIdle:n,error:l,isDirty:i,isError:a,hasResponseData:d}=e;return n?(0,s.jsx)(r.Z,{children:"No Data yet"}):t?(0,s.jsx)(r.Z,{color:"blue",children:"Loading..."}):l||a?(0,s.jsx)(r.Z,{color:"red",children:"Error"}):i?(0,s.jsx)(r.Z,{color:"orange",children:"Modified"}):d?(0,s.jsx)(r.Z,{color:"green",children:"Loaded"}):(0,s.jsx)(r.Z,{children:"No Data"})}function u(e){return(0,s.jsx)(o.Pd,{children:(0,s.jsx)(d.Z.Item,{label:"Status",children:(0,s.jsx)(c,{...e})})})}},2082:(e,t,n)=>{n.d(t,{h:()=>a});var l=n(763),s=n(6728),i=n(9425);const a=(e,t,n,l)=>{console.count("Creating Teoria de Conjuntos...");let a=t.latestDate;const d=[...t.used],o=(0,i.qG)(n),c=(()=>{const e=Object.values(n).reduce(((e,t)=>(e[t.id]=[],e)),{});return Object.values(l).forEach((t=>{(0,i.M_)(t,o)||t.rules.forEach((n=>{e[n].push(t.itemId)}))})),e})(),u={};for(let i=0;i<e;i++){const e=(0,s.ao)(a);a=e,u[e]={id:e,type:"teoria-de-conjuntos",number:t.latestNumber+i+1,...r(l,c,n,d,o)}}return u};function r(e,t,n,s,a){var r,d;const o=(0,l.shuffle)(Object.keys(e).filter((t=>!s.includes(t)&&!(0,i.M_)(e[t],a)))),c=(0,l.sample)(o);if(!c)throw new Error("No available things to choose from");s.push(c);const u={id:c,name:e[c].name},h=e[c].rules.reduce(((e,t)=>{const l=n[t].type;return e[l]||(e[l]=[]),e[l].push(t),e}),{});Object.keys(h).forEach((e=>{h[e].length<2&&delete h[e]}));const m=(0,l.sampleSize)(Object.keys(h),2);if(2!==m.length)throw new Error("No types found for this thing");const p=[(0,l.sample)(h[m[0]]),(0,l.sample)(h[m[1]])];if(!p[0]||!p[1])throw new Error("No rules found for this thing");const g=[p[0],p[1]].sort().join("-");s.push(g);const x=n[p[0]].level+n[p[1]].level-1;delete(0,l.cloneDeep)(t)[c];const v=(0,l.shuffle)((0,l.difference)(t[p[0]],t[p[1]])),j=(0,l.shuffle)((0,l.difference)(t[p[1]],t[p[0]])),f=(0,l.shuffle)((0,l.intersection)(t[p[0]],t[p[1]])),y=v.pop();if(!y)throw new Error("No only in rule 1 things to choose from");const b={id:p[0],text:n[p[0]].title,level:n[p[0]].level,thing:{id:y,name:e[y].name}},Z=j.pop();if(!Z)throw new Error("No only in rule 2 things to choose from");const T={id:p[1],text:n[p[1]].title,level:n[p[1]].level,thing:{id:Z,name:e[Z].name}},w=(0,l.sampleSize)(f,4),S=(0,l.sampleSize)(v,8),k=(0,l.sampleSize)(j,8),C={};w.forEach((e=>C[e]=0)),S.forEach((e=>C[e]=1)),k.forEach((e=>C[e]=2));const I=(0,l.sampleSize)([...w,...S,...k],8).map((t=>({id:t,name:e[t].name,rule:C[t]}))),E={contains:"Inclus\xe3o",starts:"Inicializa\xe7\xe3o",ends:"Termina\xe7\xe3o",grammar:"Gram\xe1tica",order:"Sequ\xeancia",count:"Contagem",comparison:"Compara\xe7\xe3o",repetition:"Repeti\xe7\xe3o"};return{title:[null!==(r=null===E||void 0===E?void 0:E[n[b.id].type])&&void 0!==r?r:"Desconhecido",null!==(d=null===E||void 0===E?void 0:E[n[T.id].type])&&void 0!==d?d:"Desconhecido"].join(" vs "),setId:[b.id,T.id].sort().join("::"),level:x,rule1:b,rule2:T,intersectingThing:u,things:I}}},6728:(e,t,n)=>{n.d(t,{A5:()=>r,ao:()=>a,hD:()=>i});n(763);var l=n(2426),s=n.n(l);function i(){return s()().subtract(1,"days").format("YYYY-MM-DD")}function a(e){return s()(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")}function r(e){const t=s()(e,"YYYY-MM-DD");return[6,0].includes(t.day())}},9425:(e,t,n)=>{n.d(t,{$Y:()=>i,M_:()=>f,bx:()=>v,nE:()=>g,qG:()=>j,vM:()=>x,wM:()=>y});var l=n(763),s=n(5850);const i="|",a="abcdefghijklmnopqrstuvwxyz",r="bcdfghjklmnpqrstvwxyz",d="aeiou",o=/[\xe1\xe9\xed\xf3\xfa\xe3\u1ebd\u0129\xf5\u0169\xe2\xea\xee\xf4\xfb\xe0\xe8\xec\xf2\xf9\xe4\xeb\xef\xf6\xfc]/,c=(0,l.memoize)((e=>(0,s.bU)(e).toLowerCase())),u=e=>c(e).length,h=e=>c(e).split("").filter((e=>d.includes(e))).length,m=e=>c(e).split("").filter((e=>r.includes(e))).length,p=e=>e.split(" ").length,g={"ddr-7-pt":e=>a.indexOf(c(e)[0])<a.indexOf(c(e)[1]),"ddr-8-pt":e=>u(e)<=4,"ddr-9-pt":e=>5===u(e),"ddr-10-pt":e=>6===u(e),"ddr-11-pt":e=>7===u(e),"ddr-12-pt":e=>u(e)>7,"ddr-13-pt":e=>p(e)>1,"ddr-14-pt":e=>{const t=c(e).split("").filter((e=>d.includes(e)));return new Set(t).size>=2},"ddr-15-pt":e=>new Set(c(e).split("")).size<=4,"ddr-16-pt":e=>m(e)>h(e),"ddr-17-pt":e=>h(e)>m(e),"ddr-18-pt":e=>{const t=c(e)[0];return c(e).slice(1).includes(t)},"ddr-19-pt":e=>c(e).split("").some(((t,n)=>c(e).slice(n+1).includes(t))),"ddr-20-pt":e=>c(e).split("").some(((t,n)=>d.includes(t)&&c(e).slice(n+1).includes(t))),"ddr-21-pt":e=>c(e).split("").some(((t,n)=>r.includes(t)&&c(e).slice(n+1).includes(t))),"ddr-22-pt":e=>c(e).split("").some(((t,n)=>d.includes(t)&&d.includes(e[n+1]))),"ddr-23-pt":e=>"abcdefghijklm".includes(c(e)[0]),"ddr-24-pt":e=>"nopqrstuvwxyz".includes(c(e)[0]),"ddr-25-pt":e=>d.includes(c(e)[0]),"ddr-26-pt":e=>r.includes(c(e)[0]),"ddr-27-pt":e=>c(e).split("").some(((t,n)=>r.includes(t)&&e[n+1]===t)),"ddr-28-pt":e=>c(e).includes("a"),"ddr-29-pt":e=>c(e).includes("e"),"ddr-30-pt":e=>c(e).includes("u"),"ddr-31-pt":e=>c(e).includes("q"),"ddr-32-pt":e=>c(e).includes("c")||c(e).includes("\xe7"),"ddr-33-pt":e=>c(e).split("").some(((t,n)=>!(!["m","n"].includes(t)||!r.includes(e[n+1])))),"ddr-34-pt":e=>c(e).includes("h"),"ddr-35-pt":e=>c(e).split("").some(((t,n)=>!("h"!==t||!r.includes(e[n-1])))),"ddr-36-pt":e=>c(e).includes("k")||c(e).includes("w")||c(e).includes("y"),"ddr-37-pt":e=>(e=>e.toLowerCase().split("").filter((e=>o.test(e))).length)(e)>0,"ddr-38-pt":e=>d.includes(c(e).slice(-1)),"ddr-39-pt":e=>r.includes(c(e).slice(-1)),"ddr-40-pt":e=>"s"===c(e).slice(-1),"ddr-47-pt":e=>c(e).includes("i"),"ddr-48-pt":e=>c(e).includes("o"),"ddr-49-pt":e=>c(e).includes("x"),"ddr-52-pt":e=>c(e).includes("j")},x={"ddr-3-pt":(e,t)=>1===p(e)&&2===t.split(i).length,"ddr-4-pt":(e,t)=>1===p(e)&&3===t.split(i).length,"ddr-22-pt":(e,t)=>1===p(e)&&4===t.split(i).length,"ddr-41-pt":(e,t)=>1===p(e)&&t.split(i).some((e=>e.split("").some(((t,n)=>!(!d.includes(t)||!d.includes(e[n+1])))))),"ddr-42-pt":(e,t)=>t.split(i).some(((e,n)=>0!==n&&e[0]===t.split(i)[n-1].slice(-1))),"ddr-46-pt":(e,t,n)=>1===p(e)&&!n&&1===t.split(i).length},v={"ddr-43-pt":(e,t,n)=>1===p(e)&&0===n,"ddr-44-pt":(e,t,n)=>1===p(e)&&1===n,"ddr-45-pt":(e,t,n)=>1===p(e)&&2===n},j=e=>Object.values(e).reduce(((e,t)=>Math.max(e,t.updatedAt)),0),f=(e,t)=>t>e.updatedAt;function y(e){return e.replace(/([^aeiou\xe1\xe9\xed\xf3\xfa\xe2\xea\xee\xf4\xfb\xe0\xe8\xec\xf2\xf9\xe3\xf5\xe4\xeb\xef\xf6\xfcAEIOU\xc1\xc9\xcd\xd3\xda\xc2\xca\xce\xd4\xdb\xc0\xc8\xcc\xd2\xd9\xc3\xd5\xc4\xcb\xcf\xd6\xdc]*[aeiou\xe1\xe9\xed\xf3\xfa\xe2\xea\xee\xf4\xfb\xe0\xe8\xec\xf2\xf9\xe3\xf5\xe4\xeb\xef\xf6\xfcAEIOU\xc1\xc9\xcd\xd3\xda\xc2\xca\xce\xd4\xdb\xc0\xc8\xcc\xd2\xd9\xc3\xd5\xc4\xcb\xcf\xd6\xdc]{1,3}[^aeiou\xe1\xe9\xed\xf3\xfa\xe2\xea\xee\xf4\xfb\xe0\xe8\xec\xf2\xf9\xe3\xf5\xe4\xeb\xef\xf6\xfcAEIOU\xc1\xc9\xcd\xd3\xda\xc2\xca\xce\xd4\xdb\xc0\xc8\xcc\xd2\xd9\xc3\xd5\xc4\xcb\xcf\xd6\xdc]*)(?=[^aeiou\xe1\xe9\xed\xf3\xfa\xe2\xea\xee\xf4\xfb\xe0\xe8\xec\xf2\xf9\xe3\xf5\xe4\xeb\xef\xf6\xfcAEIOU\xc1\xc9\xcd\xd3\xda\xc2\xca\xce\xd4\xdb\xc0\xc8\xcc\xd2\xd9\xc3\xd5\xc4\xcb\xcf\xd6\xdc]|$)/gi,"$1|").slice(0,-1).replace(/\s/g,"")}},8027:(e,t,n)=>{n.d(t,{A:()=>r,X:()=>d});var l=n(9631),s=n(8172),i=n(2010),a=n(5850);function r(e,t){return async()=>{var n;console.log("%cQuerying ".concat(e,"/").concat(t," from firebase: ").concat((0,a.xE)()),"color: #f0f");const i=(0,l.JU)(s.RZ,"".concat(e,"/").concat(t));return null!==(n=(await(0,l.QT)(i)).data())&&void 0!==n?n:{}}}function d(e,t,n){return(0,i.a)({queryKey:["firebase",e,t],queryFn:r(e,t),...n})}},4766:(e,t,n)=>{n.d(t,{K:()=>i});var l=n(2791),s=n(1087);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,s.lr)(),i=(e,l,s)=>{void 0===l||""===l||l===s?t.delete(e):t.set(e,String(l)),n(t)},a=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(e).forEach((e=>{let[n,s]=e;l[n]===s?t.delete(n):t.set(n,String(s))})),n(t)},r=e=>{t.delete(e),n(t)},d=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true";return t.get(e)===String(n)};return(0,l.useEffect)((()=>{Object.entries(e).forEach((e=>{let[n,l]=e;t.has(n)||i(n,l)}))}),[]),{addParam:i,addParams:a,removeParam:r,queryParams:t,is:d}}},8938:(e,t,n)=>{n.d(t,{i:()=>u});var l=n(4747),s=n(763),i=n(2791),a=n(3713),r=n(8027),d=n(5529),o=n(2233),c=n(5850);function u(e){let{tdrResourceName:t,firebaseDataCollectionName:n,serialize:u}=e;const{notification:h}=l.Z.useApp(),m=(0,a.NL)(),p=(0,d.N)(t),g=(0,r.X)("tdr",n,{select:u?c.d_:void 0}),[x,v]=(0,i.useState)({}),j=(0,o.B)("tdr",n,{onSuccess:()=>{h.success({message:"".concat(n," updated")}),m.refetchQueries({queryKey:["firebase","tdr",n]}),v({})},onError:e=>{h.error({message:"".concat(n," update failed"),description:e.message})}}),f=(0,i.useMemo)((()=>{var e,l;return p.isSuccess&&g.isSuccess&&!j.isPending?(console.log("%cMerging ".concat(t,"+").concat(n," data..."),"color: #f0f"),(0,s.cloneDeep)({...null!==(e=p.data)&&void 0!==e?e:{},...null!==(l=g.data)&&void 0!==l?l:{},...x})):{}}),[t,n,p.data,g.data,p.isSuccess,g.isSuccess,j.isPending,x]),y=!(0,s.isEmpty)(x),b=g.data;return{data:f,isLoading:p.isLoading||g.isLoading,error:p.error||g.error,firebaseData:b,isSaving:j.isPending,save:()=>{j.mutate(u?(0,c.aS)(x):x)},addEntryToUpdate:(e,t)=>{v((n=>({...n,[e]:t})))},entriesToUpdate:x,isDirty:y}}},5529:(e,t,n)=>{n.d(t,{N:()=>a,Y:()=>r});var l=n(763),s=n(2010),i=n(2606);function a(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getUrl:a}=(0,i.n)("resources"),r=(0,s.a)({queryKey:[e],queryFn:async()=>{const t=await fetch(a("".concat(e,".json")));return await t.json()},enabled:n}),d=!(0,l.isEmpty)(r.data);return{...r,data:null!==(t=r.data)&&void 0!==t?t:{},hasResponseData:d}}function r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getUrl:n}=(0,i.n)("resources"),a=(0,s.a)({queryKey:[e],queryFn:async()=>{const t=await fetch(n("".concat(e,".json")));return await t.json()},enabled:t}),r=!(0,l.isEmpty)(a.data);return{...a,data:a.data,hasResponseData:r}}},548:(e,t,n)=>{n.d(t,{P:()=>s});var l=n(4766);function s(e){var t,n;let{prefix:s="",defaultCurrent:i=1,defaultPageSize:a=10,pageSizeOptions:r=[10,20,50,100],total:d,showQuickJumper:o}=e;const{queryParams:c,addParam:u}=(0,l.K)();return{current:Number(null!==(t=c.get("".concat(s,"page")))&&void 0!==t?t:String(i)),pageSize:Number(null!==(n=c.get("".concat(s,"pageSize")))&&void 0!==n?n:String(a)),onChange:e=>{u("".concat(s,"page"),e.toString(),String(i))},onShowSizeChange:(e,t)=>{u("".concat(s,"pageSize"),t.toString(),String(a))},defaultCurrent:i,defaultPageSize:a,pageSizeOptions:r,total:d,hideOnSinglePage:!0,showQuickJumper:o}}},2233:(e,t,n)=>{n.d(t,{B:()=>r});var l=n(9631),s=n(8172),i=n(8556);function a(e,t,n){console.log("%cUpdating ".concat(e,"/").concat(t," from firebase"),"color: #f00");const i=(0,l.JU)(s.RZ,"".concat(e,"/").concat(t));return(0,l.r7)(i,n)}function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.D)({mutationFn:async n=>a(e,t,n),...n})}},8900:(e,t,n)=>{n.r(t),n.d(t,{ItemsDiagramSets:()=>le,default:()=>se});var l=n(3990),s=n(4520),i=n(2128),a=n(3660),r=n(9197),d=n(7128),o=n(2556),c=n(8252),u=n(8357),h=n(7018),m=n(7340),p=n(7965),g=n(4766),x=n(763),v=n(5850),j=n(184);function f(e){var t;let{data:n,save:l,isDirty:i,isSaving:f,entriesToUpdate:y}=e;const{addParams:b,queryParams:Z}=(0,g.K)();return(0,j.jsxs)(p.Pd,{children:[(0,j.jsxs)(s.Z,{vertical:!0,gap:12,children:[(0,j.jsx)(m.k,{isDirty:i,onSave:l,isSaving:f,dirt:JSON.stringify(y)}),(0,j.jsx)(h.o,{data:()=>function(e){console.log("Preparing file for download...");const t=(0,x.cloneDeep)(e);return(0,v.Tj)(t)}(n),fileName:"daily-diagram-items.json",disabled:i,block:!0})]}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(u.H,{label:"Display",value:null!==(t=Z.get("display"))&&void 0!==t?t:"rule",onChange:e=>b({display:e,page:1},{page:1}),options:[{title:"By Rule",icon:(0,j.jsx)(a.Z,{}),value:"rule"},{title:"By Thing",icon:(0,j.jsx)(r.Z,{}),value:"thing"}]}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(o.ZP,{size:"small",block:!0,onClick:()=>b({display:"simulator"}),children:"Simulator"}),(0,j.jsx)(c.Z.Paragraph,{type:"secondary",className:"my-6",children:"v2.0.1"})]})}var y=n(2791),b=n(5529),Z=n(952),T=n(1046),w=n(1431),S=n(9481),k=n(7415),C=n(4747),I=n(5225),E=n(959),O=n(1105),N=n(4424),D=n(7305),M=n(5922),A=n(3733),z=n(2997),P=n(9425);function F(e){let{isModalOpen:t,onSaveThing:n,onCancel:l,thing:i,rules:a,width:r,itemAliases:d,subtitle:c,okButtonText:u,onGiveAnotherThing:h}=e;const m=(0,y.useMemo)((()=>(0,x.orderBy)(Object.values(a),[e=>{const t=["manual","dependency","auto"].indexOf(e.method);return-1===t?1/0:t},e=>{const t=["grammar","comparison","order","count","contains","ends"].indexOf(e.type);return-1===t?1/0:t},e=>e.title.slice(0,7),e=>Number(e.id.split("-")[1])])),[a]),[p]=I.Z.useForm(),g=I.Z.useWatch([],p),v=!g||Object.values(null!==g&&void 0!==g?g:{}).some((e=>void 0===e)),f=I.Z.useWatch("name",p);(0,y.useEffect)((()=>{var e;if(!f)return;if(i.name&&i.syllables&&f===i.name)return;const t={syllables:(0,P.wM)(f),stressedSyllable:(null!==(e=i.stressedSyllable)&&void 0!==e?e:f.includes(" "))?-1:0};Object.keys(a).forEach((e=>{P.nE[e]?t[e]=P.nE[e](f):t[e]=i.rules.length>0?i.rules.includes(e):void 0})),p.setFieldsValue(t)}),[f]);const b=I.Z.useWatch("syllables",p),Z=p.getFieldValue("ddr-51-pt");(0,y.useEffect)((()=>{Z&&(p.setFieldsValue({stressedSyllable:void 0}),p.setFieldsValue({"ddr-43-pt":!1}),p.setFieldsValue({"ddr-44-pt":!1}),p.setFieldsValue({"ddr-45-pt":!1}),p.setFieldsValue({"ddr-46-pt":!1})),void 0===Z&&p.setFieldsValue({"ddr-51-pt":!1})}),[Z]),(0,y.useEffect)((()=>{if(b){var e;const t=Object.keys(a).reduce(((e,t)=>(P.vM[t]&&(e[t]=P.vM[t](f,b,Z)),e)),{});p.setFieldsValue({...t,stressedSyllable:b===i.syllables?i.stressedSyllable:(null!==(e=i.stressedSyllable)&&void 0!==e?e:f.includes(" "))?-1:void 0})}}),[f,b,Z]);const T=I.Z.useWatch("stressedSyllable",p);(0,y.useEffect)((()=>{if(!Z&&void 0!==T){const e=Object.keys(a).reduce(((e,t)=>(P.bx[t]&&(e[t]=P.bx[t](f,b,T)),e)),{});p.setFieldsValue({...e})}}),[T]);const w=p.getFieldValue("ddr-1-pt"),S=p.getFieldValue("ddr-2-pt"),k=p.getFieldValue("ddr-50-pt");(0,y.useEffect)((()=>{!0===w&&(p.setFieldsValue({"ddr-2-pt":!1}),p.setFieldsValue({"ddr-50-pt":!1}))}),[w]),(0,y.useEffect)((()=>{!0===S&&(p.setFieldsValue({"ddr-1-pt":!1}),p.setFieldsValue({"ddr-50-pt":!1}))}),[S]),(0,y.useEffect)((()=>{!0===k&&(p.setFieldsValue({"ddr-1-pt":!1}),p.setFieldsValue({"ddr-2-pt":!1}))}),[k]);const C=p.getFieldValue("ddr-3-pt");(0,y.useEffect)((()=>{!0===C&&p.setFieldsValue({"ddr-4-pt":!1})}),[C]);const F=p.getFieldValue("ddr-4-pt");(0,y.useEffect)((()=>{!0===F&&p.setFieldsValue({"ddr-3-pt":!1})}),[F]),(0,y.useEffect)((()=>{(null===f||void 0===f?void 0:f.includes("-"))&&p.setFieldsValue({"ddr-5-pt":!0})}),[f]);const R=(0,y.useMemo)((()=>(null!==b&&void 0!==b?b:"").split(P.$Y)),[b]);return(0,j.jsx)(E.Z,{width:r,title:(0,j.jsxs)(j.Fragment,{children:["Edit ",i.name," ",c&&(0,j.jsx)("small",{children:c})]}),open:t,onOk:p.submit,onCancel:l,maskClosable:!1,okButtonProps:{disabled:v,htmlType:"submit",size:"large"},okText:null!==u&&void 0!==u?u:"Add Item",children:(0,j.jsxs)(I.Z,{form:p,name:"new-item-".concat(i.itemId),onFinish:e=>{const t=U(e);n(t)},autoComplete:"off",initialValues:V(i,a),layout:"vertical",size:"small",labelWrap:!0,children:[(0,j.jsxs)("div",{className:"diagram-container",children:[(0,j.jsx)("div",{children:(0,j.jsx)(z.ck,{id:i.itemId,width:50})}),(0,j.jsx)(I.Z.Item,{name:"name",label:"Name",children:(0,j.jsx)(O.Z,{})}),(0,j.jsx)(I.Z.Item,{name:"itemId",label:"Item",children:(0,j.jsx)(O.Z,{readOnly:!0})}),(0,j.jsx)(I.Z.Item,{name:"syllables",label:"Syllables",children:(0,j.jsx)(O.Z,{})}),(0,j.jsx)(I.Z.Item,{name:"stressedSyllable",label:"Stressed Syllable",children:(0,j.jsx)(N.ZP.Group,{optionType:"button",buttonStyle:"solid",children:R.map(((e,t)=>(0,j.jsx)(N.ZP,{value:R.length-t-1,children:e},t)))})}),(0,j.jsx)(I.Z.Item,{name:"updatedAt",label:"Updated At",children:(0,j.jsx)(O.Z,{value:new Date(i.updatedAt).toLocaleString(),readOnly:!0})}),(d||h)&&(0,j.jsxs)("div",{children:[d&&(0,j.jsxs)("span",{children:["Options: ",null===d||void 0===d?void 0:d.join(", ")]}),h&&(0,j.jsx)(o.ZP,{size:"small",onClick:h,type:"dashed",className:"mt-2",children:"Give me another thing"})]}),(0,j.jsx)("div",{children:(0,j.jsx)(D.Z,{offsetTop:50,children:(0,j.jsx)(s.Z,{justify:"center",align:"center",children:(0,j.jsx)(o.ZP,{type:"primary",htmlType:"submit",size:"large",disabled:v,children:null!==u&&void 0!==u?u:"Add Item"})})})})]}),(0,j.jsx)("div",{className:"diagram-container",children:m.map((e=>"auto"===e.method&&P.nE[e.id]||"dependency"===e.method?(0,j.jsx)(I.Z.Item,{name:e.id,label:e.title,valuePropName:"checked",className:(0,A.Z)(i.updatedAt<e.updatedAt&&"diagram-container__outdated-rule"),children:(0,j.jsx)(M.Z,{checkedChildren:"\u2705",unCheckedChildren:"\u274c",disabled:!0})},e.id):(0,j.jsx)(I.Z.Item,{name:e.id,label:e.title,className:(0,A.Z)(i.updatedAt<e.updatedAt&&"diagram-container__outdated-rule"),children:(0,j.jsxs)(N.ZP.Group,{optionType:"button",buttonStyle:"solid",children:[(0,j.jsx)(N.ZP,{value:!0,children:"\u2705"}),(0,j.jsx)(N.ZP,{value:!1,children:"\u274c"})]})},e.id)))})]})})}const V=(e,t)=>{var n,l;let s=!1;return{name:e.name,itemId:e.itemId,syllables:null!==(n=e.syllables)&&void 0!==n?n:(0,P.wM)(e.name),stressedSyllable:null!==(l=e.stressedSyllable)&&void 0!==l?l:0,...Object.keys(t).reduce(((n,l)=>{if(e.updatedAt<t[l].updatedAt)if(P.nE[l]){const t=P.nE[l](e.name);t&&e.rules.includes(l)&&(s=!0),n[l]=t}else n[l]=void 0;else n[l]=e.rules.includes(l);return n}),{}),updatedAt:s?Date.now():e.updatedAt}},U=e=>{const{itemId:t,name:n,updatedAt:l,syllables:s,stressedSyllable:i,...a}=e;return{itemId:t,name:n,updatedAt:Date.now(),syllables:s,stressedSyllable:i,rules:Object.keys(a).filter((e=>!0===a[e]))}};function R(e){let{addEntryToUpdate:t,availableThings:n,rules:l,width:s}=e;const{notification:i}=C.Z.useApp(),[a,r]=(0,y.useState)(null),d=()=>{const e=(0,x.sample)(n);r(e?{itemId:e.id,name:Y(e),updatedAt:Date.now(),syllables:"",stressedSyllable:0,rules:[]}:null)},c=(0,y.useMemo)((()=>{var e;if(!a)return[];const t=n.find((e=>e.id===a.itemId));return[null===t||void 0===t?void 0:t.name.pt,...null!==(e=null===t||void 0===t?void 0:t.aliasesPt)&&void 0!==e?e:[]].filter(Boolean)}),[a,n]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o.ZP,{size:"large",onClick:d,children:"Classify New Item"}),!!a&&(0,j.jsx)(F,{isModalOpen:null!==a,onSaveThing:async e=>{a&&(e.name&&e.itemId||i.error({message:"Name and Item ID are required"}),t(e.itemId,e),console.log("COMPLETED SAVE"),r(null),await(0,v.Dc)(250),d())},onCancel:()=>r(null),thing:a,rules:l,width:.9*s,itemAliases:c,onGiveAnotherThing:async()=>{r(null),await(0,v.Dc)(100),d()}})]})}const Y=e=>{return 1===e.name.pt.split(" ").length?e.name.pt:e.aliasesPt&&null!==(t=e.aliasesPt.find((e=>1===e.split(" ").length)))&&void 0!==t?t:e.name.pt;var t};function q(e){let{itemId:t,name:n,width:l=50}=e;return(0,j.jsxs)(s.Z,{vertical:!0,align:"center",children:[(0,j.jsx)(z.ck,{id:t,width:l}),(0,j.jsx)(c.Z.Text,{code:!0,children:n},t)]})}function L(e){let{thing:t,width:n=50,onActivateThing:l}=e;return(0,j.jsx)(u.F6,{onClick:()=>l(t),children:(0,j.jsx)(q,{itemId:t.itemId,name:t.name,width:n})})}var B=n(548);function _(e){let{things:t,addEntryToUpdate:n,availableThings:l,rules:i,setActiveThing:a,thingsByRules:r}=e;const[o,{width:u}]=(0,k.Z)(),h=(0,y.useMemo)((()=>Object.values(t)),[t]),m=(0,B.P)({total:h.length,showQuickJumper:!0}),p=[{title:"ItemId",dataIndex:"itemId",key:"itemId",sorter:(e,t)=>Number(e.itemId)-Number(t.itemId),render:e=>(0,j.jsx)(Z.Z,{children:e})},{title:"Name",dataIndex:"name",key:"name",sorter:(e,t)=>e.name.localeCompare(t.name),render:e=>(0,j.jsx)(c.Z.Text,{children:e})},{title:"Sprite",dataIndex:"itemId",key:"sprite",render:e=>(0,j.jsx)(L,{thing:t[e],onActivateThing:a},"i-".concat(e))},{title:"Rules",dataIndex:"rules",key:"rules",render:(e,t)=>(0,j.jsx)(T.Z,{wrap:!0,children:e.map((e=>(0,j.jsx)(w.Z,{title:i[e].title,children:(0,j.jsx)(Z.Z,{color:i[e].updatedAt>t.updatedAt?"red":void 0,children:e})},e)))})},{title:"Count",dataIndex:"rules",key:"count",sorter:(e,t)=>e.rules.length-t.rules.length,render:e=>e.length}],g=(0,y.useMemo)((()=>{const e={};return Object.values(t).forEach((t=>{e[t.name]||(e[t.name]=[]),e[t.name].push(t.itemId)})),Object.values(e).filter((e=>e.length>1))}),[t]);return(0,j.jsxs)(T.Z,{direction:"vertical",ref:o,children:[(0,j.jsxs)(c.Z.Title,{level:5,children:["Rules By Items ",(0,j.jsx)(d.Z,{type:"vertical"})," Added: ",(0,j.jsx)(Z.Z,{children:Object.keys(t).length})," Available to add ",(0,j.jsx)(Z.Z,{children:l.length})]}),(0,j.jsx)(R,{addEntryToUpdate:n,availableThings:l,rules:i,width:u}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(S.Z,{dataSource:h,columns:p,rowKey:"itemId",pagination:m}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(c.Z.Title,{level:5,children:"Duplicated Things"}),(0,j.jsxs)(T.Z,{wrap:!0,children:[0===g.length&&(0,j.jsx)(c.Z.Text,{children:"No duplicated things"}),g.map((e=>(0,j.jsxs)(s.Z,{align:"center",children:[(0,j.jsx)(Z.Z,{color:"red",children:e.length}),e.map((e=>(0,j.jsx)(L,{thing:t[e],onActivateThing:a},"i-".concat(e))))]},e[0])))]})]})}var G=n(913);function W(e){let{things:t,addEntryToUpdate:n,availableThings:l,rules:s,thingsByRules:i,setActiveThing:a,containerWidth:r}=e;const{is:o,addParam:u}=(0,g.K)(),h=(0,y.useMemo)((()=>Object.values(s).map((e=>({...e,thingsCount:i[e.id].length})))),[s,i]),m=(0,B.P)({total:h.length,showQuickJumper:!0}),p=(0,y.useMemo)((()=>{const e=Object.values(i).map((e=>e.length));return{maxThings:Math.max(...e),minThings:Math.min(...e),averageThings:Math.round(Object.values(i).reduce(((e,t)=>e+t.length),0)/Object.keys(i).length)}}),[i]),x=[{title:"Id",dataIndex:"id",key:"id",sorter:(e,t)=>Number(e.id.split("-")[1])-Number(t.id.split("-")[1]),render:e=>(0,j.jsx)(c.Z.Text,{children:e})},{title:"Rule",dataIndex:"title",key:"title",sorter:(e,t)=>e.title.localeCompare(t.title),render:e=>(0,j.jsx)(c.Z.Text,{children:e})},{title:"Type",dataIndex:"type",key:"type",sorter:(e,t)=>e.type.localeCompare(t.type)},{title:"Method",dataIndex:"method",key:"method",sorter:(e,t)=>e.method.localeCompare(t.method)},{title:"Things",dataIndex:"thingsCount",key:"thingsCount",render:(e,n)=>(0,j.jsxs)(T.Z,{size:"small",children:[(0,j.jsx)(Z.Z,{children:e}),o("showThings")?(0,j.jsxs)(T.Z,{size:"small",wrap:!0,children:[i[n.id].slice(0,20).map((e=>(0,j.jsx)(L,{thing:t[e],onActivateThing:a},"".concat(n.id,"-").concat(e)))),i[n.id].length>20&&(0,j.jsxs)(c.Z.Text,{children:["+",e-20," more"]})]}):(0,j.jsxs)(T.Z,{size:"small",wrap:!0,children:[i[n.id].slice(0,5).map((e=>(0,j.jsx)(L,{thing:t[e],onActivateThing:a},"".concat(n.id,"-").concat(e)))),i[n.id].length>5&&(0,j.jsxs)(c.Z.Text,{children:["+",e-5," more"]})]})]}),sorter:(e,t)=>e.thingsCount-t.thingsCount},{title:"Level",dataIndex:"level",key:"level",sorter:(e,t)=>e.level-t.level,render:e=>(0,j.jsx)(G.Z,{value:e,count:3,disabled:!0})}];return(0,j.jsxs)(T.Z,{direction:"vertical",children:[(0,j.jsxs)(c.Z.Title,{level:4,children:["Things By Rule (Added: ",Object.keys(t).length," | ",l.length,")"," "]}),(0,j.jsxs)(T.Z,{split:(0,j.jsx)(d.Z,{type:"vertical"}),wrap:!0,children:[(0,j.jsx)(R,{addEntryToUpdate:n,availableThings:l,rules:s,width:r}),(0,j.jsxs)(c.Z.Text,{strong:!0,children:["Average Things: ",(0,j.jsx)(Z.Z,{children:p.averageThings})]}),(0,j.jsxs)(c.Z.Text,{strong:!0,children:["Max Things: ",(0,j.jsx)(Z.Z,{children:p.maxThings})]}),(0,j.jsxs)(c.Z.Text,{strong:!0,children:["Min Things: ",(0,j.jsx)(Z.Z,{children:p.minThings})]}),(0,j.jsx)(M.Z,{checked:o("showThings"),onChange:e=>u("showThings",e),checkedChildren:"Hide things",unCheckedChildren:"Show things"})]}),(0,j.jsx)(S.Z,{dataSource:h,columns:x,pagination:m})]})}function K(e){let{children:t,things:n,rules:l,addEntryToUpdate:s}=e;const i=(0,y.useMemo)((()=>{const e=(0,P.qG)(l);return Object.values(n).filter((t=>{const n=t.updatedAt;return t.syllables&&t.syllables.split(P.$Y).join("")!==t.name.replace(/\s/g,"")?(console.log("\u2757\ufe0f Name and syllables do not match",t.name,t.syllables),!0):e>n}))}),[n,l]),[a,r]=(0,y.useState)(null);(0,y.useEffect)((()=>{console.count("Checking for things that need to update..."),i.length>0&&(async e=>{console.log("Found things that need to update..."),r(null),await(0,v.Dc)(250),i.length>0&&r(i[0])})(i[0])}),[i]);return(0,j.jsxs)(j.Fragment,{children:[a&&(0,j.jsx)(F,{subtitle:"(".concat(i.length," left to update)"),isModalOpen:null!==a,onSaveThing:e=>{s(e.itemId,e)},onCancel:()=>r(null),thing:a,rules:l,okButtonText:"Update",width:"90vw"}),(0,j.jsx)(j.Fragment,{children:t})]})}var J=n(2082),H=n(4691);function Q(e){let{game:t}=e;const[n,l]=(0,y.useState)([{id:t.rule1.thing.id,name:t.rule1.thing.name,rule:1}]),[s,i]=(0,y.useState)([{id:t.rule2.thing.id,name:t.rule2.thing.name,rule:2}]),[a,r]=(0,y.useState)([{id:t.intersectingThing.id,name:t.intersectingThing.name,rule:0}]),[d,o]=(0,y.useState)(t.things.slice(0,4)),[h,m]=(0,y.useState)(t.things[0]);return(0,j.jsxs)(T.Z,{direction:"vertical",align:"center",children:[(0,j.jsx)(c.Z.Title,{level:4,children:"Game Sample"}),(0,j.jsxs)(c.Z.Title,{level:5,children:['"',t.title,'"']}),(0,j.jsx)(G.Z,{value:t.level,count:t.level,disabled:!0}),(0,j.jsx)(c.Z.Paragraph,{style:{maxWidth:"500px"},children:"O c\xedrculo amarelo tem uma regra gramatical secreta e o circulo vermelho tem outra regra gramatical secreta. O quadrado do meio representa a interse\xe7\xe3o entre a regra amarela e a regra vermelha."}),(0,j.jsx)(T.Z,{children:(0,j.jsx)($,{width:600,leftCircleChildren:(0,j.jsx)(u.F6,{style:{width:"100%",height:"100%"},children:n.map(((e,t,n)=>(0,j.jsx)(q,{itemId:e.id,name:e.name,width:t===n.length-1?80:60},e.id)))}),rightCircleChildren:(0,j.jsx)(u.F6,{style:{width:"100%",height:"100%"},children:s.map(((e,t,n)=>(0,j.jsx)(q,{itemId:e.id,name:e.name,width:t===n.length-1?80:60},e.id)))}),intersectionChildren:(0,j.jsx)(u.F6,{style:{width:"100%",height:"100%"},children:a.map(((e,t,n)=>(0,j.jsx)(q,{itemId:e.id,name:e.name,width:t===n.length-1?80:60},e.id)))})})}),(0,j.jsx)(c.Z.Text,{children:"Coloque os objetos nos c\xedrculos corretos:"}),(0,j.jsx)(T.Z,{className:"space--center",children:d.map((e=>(0,j.jsx)(u.F6,{style:e.id===(null===h||void 0===h?void 0:h.id)?{outline:"3px solid hotPink"}:{},onClick:()=>m(e),children:(0,j.jsx)(q,{itemId:e.id,name:e.name},e.id)})))}),(0,j.jsx)(H.Z,{items:[{key:"1",label:"Resposta",children:(0,j.jsxs)(T.Z,{direction:"vertical",children:[(0,j.jsx)(c.Z.Text,{strong:!0,children:"Regra Amarela"}),(0,j.jsx)("ul",{children:(0,j.jsx)("li",{children:(0,j.jsx)(c.Z.Text,{children:t.rule1.text})})}),(0,j.jsx)(c.Z.Text,{strong:!0,children:"Regra Vermelha"}),(0,j.jsx)("ul",{children:(0,j.jsx)("li",{children:(0,j.jsx)(c.Z.Text,{children:t.rule2.text})})})]})}]}),(0,j.jsx)("div",{style:{height:"200px"}})]})}function $(e){let{leftCircleChildren:t,rightCircleChildren:n,intersectionChildren:l,...s}=e;return(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 760 500",...s,children:[(0,j.jsx)("path",{fill:"#fbb03b",stroke:"#000",strokeMiterlimit:"10",strokeWidth:"5",d:"M252.78 3.5c-136.42 0-247 110.59-247 247s110.59 247 247 247 247-110.59 247-247-110.59-247-247-247zm.99 483.07C123.39 486.57 17.7 380.88 17.7 250.5S123.39 14.43 253.77 14.43 489.84 120.12 489.84 250.5 384.15 486.57 253.77 486.57z"}),(0,j.jsx)("path",{fill:"#f15a24",stroke:"#000",strokeMiterlimit:"10",strokeWidth:"5",d:"M508.22 3.5c-136.41 0-247 110.59-247 247s110.59 247 247 247 247-110.59 247-247-110.58-247-247-247zm.99 483.07c-130.38 0-236.07-105.69-236.07-236.07S378.84 14.43 509.22 14.43 745.29 120.12 745.29 250.5 639.6 486.57 509.22 486.57z"}),(0,j.jsx)("path",{fill:"#535353",d:"M487.34 250.5c0-62.39-24.29-121.04-68.41-165.16a235.9 235.9 0 00-37.43-30.47 235.35 235.35 0 00-37.43 30.47c-44.12 44.11-68.41 102.77-68.41 165.16s24.29 121.04 68.41 165.16a235.9 235.9 0 0037.43 30.47 235.35 235.35 0 0037.43-30.47c44.12-44.11 68.41-102.77 68.41-165.16z"}),(0,j.jsx)("path",{fill:"#535353",d:"M258.72 250.5c0-66.64 25.95-129.3 73.08-176.42a253.125 253.125 0 0134.1-28.57c-33.98-18.65-72.29-28.57-112.13-28.57-62.39 0-121.04 24.29-165.16 68.41C44.5 129.46 20.2 188.11 20.2 250.5s24.29 121.04 68.41 165.16c44.11 44.12 102.77 68.41 165.16 68.41 39.84 0 78.15-9.92 112.13-28.57a252.507 252.507 0 01-34.1-28.57c-47.12-47.12-73.08-109.78-73.08-176.42zM674.37 85.34C630.25 41.22 571.6 16.93 509.21 16.93c-40.27 0-78.98 10.14-113.24 29.18 11.74 8.26 22.86 17.6 33.22 27.96 47.12 47.12 73.08 109.78 73.08 176.42s-25.95 129.3-73.08 176.42a252.312 252.312 0 01-33.22 27.96c34.25 19.04 72.96 29.18 113.24 29.18 62.39 0 121.04-24.29 165.16-68.41 44.12-44.11 68.41-102.77 68.41-165.16s-24.29-121.04-68.41-165.16z"}),(0,j.jsx)("foreignObject",{x:"30",y:"25",width:"250",height:"450",children:(0,j.jsx)("div",{className:"venn-diagram__circle-content-left",children:t})}),(0,j.jsx)("foreignObject",{x:"480",y:"25",width:"250",height:"450",children:(0,j.jsx)("div",{className:"venn-diagram__circle-content-right",children:n})}),(0,j.jsx)("foreignObject",{x:"290",y:"65",width:"182",height:"370",children:(0,j.jsx)("div",{className:"venn-diagram__circle-content-intersection",children:l})})]})}function X(e){let{things:t,rules:n}=e;const[l]=(0,k.Z)(),[s,i]=(0,y.useState)(null);return(0,j.jsxs)(T.Z,{direction:"vertical",ref:l,children:[(0,j.jsx)(c.Z.Title,{level:5,children:"Game Simulator"}),(0,j.jsx)(o.ZP,{size:"large",onClick:()=>{i(Object.values((0,J.h)(1,{latestDate:"2023/01/01",latestNumber:0,used:[]},n,t))[0])},children:"Simulate"}),(0,j.jsx)(o.ZP,{size:"large",onClick:()=>{let e=null;try{e=(0,J.h)(25,{latestDate:"2023/01/01",latestNumber:0,used:[]},n,t),console.log(e)}catch(l){console.error(l)}},children:"Generate Demos (log)"}),s&&(0,j.jsx)(Q,{game:s},JSON.stringify(s))]})}function ee(e){let{data:t,addEntryToUpdate:n}=e;const[l,{width:s}]=(0,k.Z)(),a=(0,b.N)("items"),r=(0,b.N)("daily-diagram-rules"),d=(0,y.useMemo)((()=>{var e;return Object.values(null!==(e=a.data)&&void 0!==e?e:{}).filter((e=>{var n,l,s;if(t&&void 0!==t[e.id])return!1;if(e.nsfw)return!1;const i=1===e.name.pt.split(" ").length;return!(null===(n=e.decks)||void 0===n||!n.includes("thing"))||(!(null===(l=e.decks)||void 0===l||!l.includes("alien")||!i)||!(null===(s=e.decks)||void 0===s||!s.includes("manufactured")||!i))}))}),[t,a.data]),o=(0,y.useMemo)((()=>{var e;return null!==(e=r.data)&&void 0!==e?e:{}}),[r.data]),u=(0,y.useMemo)((()=>{const e=Object.values(o).reduce(((e,t)=>(e[t.id]=[],e)),{});return(0,x.orderBy)(Object.values(t),["updatedAt"],["desc"]).forEach((t=>{t.rules.forEach((n=>{e[n].push(t.itemId)}))})),e}),[t,o]),{is:h,queryParams:m}=(0,g.K)(),[p,v]=(0,y.useState)(null);if(a.isLoading||r.isLoading)return(0,j.jsx)(c.Z.Text,{children:"Loading..."});return(0,j.jsx)(i.T,{isLoading:a.isLoading||r.isLoading,hasResponseData:a.hasResponseData||r.hasResponseData,children:(0,j.jsx)("div",{ref:l,children:(0,j.jsxs)(K,{things:t,rules:o,addEntryToUpdate:n,children:[p&&(0,j.jsx)(F,{isModalOpen:null!==p,onSaveThing:e=>{var t;n((t=e).itemId,t),v(null)},onCancel:()=>v(null),thing:p,rules:o,okButtonText:"Update",width:s}),(h("display","rule")||!m.has("display"))&&(0,j.jsx)(W,{things:t,addEntryToUpdate:n,availableThings:d,rules:o,thingsByRules:u,setActiveThing:v,containerWidth:s}),h("display","thing")&&(0,j.jsx)(_,{things:t,addEntryToUpdate:n,availableThings:d,rules:o,thingsByRules:u,setActiveThing:v}),h("display","simulator")&&(0,j.jsx)(X,{things:t,addEntryToUpdate:n,availableThings:d,rules:o})]})})})}var te=n(4562),ne=n(8938);function le(){const e=(0,ne.i)({tdrResourceName:"daily-diagram-items",firebaseDataCollectionName:"diagramItems",serialize:!0});return(0,j.jsx)(p.Xg,{title:"Items",subtitle:"Diagram Sets",children:(0,j.jsxs)(l.Z,{hasSider:!0,children:[(0,j.jsx)(te.p,{children:(0,j.jsx)(f,{...e})}),(0,j.jsx)(l.Z.Content,{className:"content",children:(0,j.jsx)(i.T,{isLoading:e.isLoading||e.isSaving,error:e.error,hasResponseData:!(0,x.isEmpty)(e.data),children:(0,j.jsx)(s.Z,{vertical:!0,gap:24,children:(0,j.jsx)(ee,{...e})})})})]})})}const se=le}}]);
//# sourceMappingURL=ItemsDiagramSets.13779394.chunk.js.map