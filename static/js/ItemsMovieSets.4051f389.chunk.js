"use strict";(self.webpackChunktdr=self.webpackChunktdr||[]).push([[250],{7018:(e,t,n)=>{n.d(t,{o:()=>s});var i=n(2556),r=n(5850),o=n(184);function s(e){let{data:t,fileName:n,loading:s,...a}=e;return(0,o.jsx)(i.ZP,{onClick:()=>(0,r.ZN)("function"===typeof t?t():t,n),loading:s,...a,children:"Download JSON"})}},8178:(e,t,n)=>{n.d(t,{i:()=>l});var i=n(5),r=n(1105),o=n(5529),s=n(763),a=n(2791),d=n(184);function l(e){let{items:t,isPending:n,style:l,size:c,placeholder:u,allowClear:v,onFinish:m,...p}=e;const f=(0,o.N)("items",!Boolean(t)&&!n),{namesDict:h,options:x}=(0,a.useMemo)((()=>{var e;console.log("Recomputing item names typeahead...");const n=Object.values(null!==(e=null!==t&&void 0!==t?t:f.data)&&void 0!==e?e:{}).reduce(((e,t)=>{const n="".concat(t.name.en," (").concat(t.id,")"),i="".concat(t.name.pt," (").concat(t.id,")");return e[n]=t.id,e[i]=t.id,e}),{});return{namesDict:n,options:(0,s.orderBy)(Object.keys(n),[e=>e.toLowerCase()]).map((e=>({value:e})))}}),[t,n]),[j,y]=(0,a.useState)([]);return(0,d.jsx)(i.Z,{options:x,style:{width:250,...l},allowClear:null===v||void 0===v||v,placeholder:null!==u&&void 0!==u?u:"Search by name or id...",filterOption:(e,t)=>{var n;return-1!==String(null!==(n=null===t||void 0===t?void 0:t.value)&&void 0!==n?n:"").toUpperCase().indexOf(null===e||void 0===e?void 0:e.toUpperCase())},onSearch:e=>{const t=e.trim(),n=x.filter((e=>{var n;return String(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"").toUpperCase().includes(t)})),i=(0,s.orderBy)(n,[e=>{var n;const i=String(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"");if(i.includes("".concat(t," ")))return-1;const r=i.toUpperCase().indexOf(t);return 0===r?-1:-1===r?i.length:r}]);y(i)},notFoundContent:"No items found",onSelect:e=>{void 0!==h[e]&&m(h[e])},...p,children:(0,d.jsx)(r.Z,{onPressEnter:()=>{if(j.length>0){const e=j[0].value;void 0!==h[e]&&m(h[e])}}})})}},7134:(e,t,n)=>{n.d(t,{_:()=>a});var i=n(4747),r=n(763),o=n(2791),s=n(3250);function a(){const[e,t]=(0,s.Z)(),{message:n}=i.Z.useApp();return(0,o.useEffect)((()=>{e.value&&(e.value.length>20?n.info("Copied to clipboard: ".concat((0,r.truncate)(e.value,{length:30,omission:"..."}))):n.success("Copied"))}),[e,n]),t}},7020:(e,t,n)=>{n.r(t),n.d(t,{ItemsMovieSets:()=>O,default:()=>B});var i=n(3990),r=n(2128),o=n(4520),s=n(2556),a=n(7018),d=n(1958),l=n(5850),c=n(184);function u(e){let{data:t,save:n,isDirty:i,isSaving:r}=e;return(0,c.jsx)(d.Pd,{children:(0,c.jsxs)(o.Z,{vertical:!0,gap:12,children:[(0,c.jsx)(s.ZP,{block:!0,danger:!0,type:"primary",loading:r,disabled:!i,onClick:n,size:"large",children:"Save"}),(0,c.jsx)(a.o,{data:()=>{return e=t,(0,l.Tj)(e);var e},fileName:"daily-movie-sets.json",disabled:i,block:!0})]})})}var v=n(2979),m=n(4031),p=n(1046),f=n(1082),h=n(7134),x=n(763),j=n(8178),y=n(7462),g=n(2791);const Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};var C=n(4186),b=function(e,t){return g.createElement(C.Z,(0,y.Z)({},e,{ref:t,icon:Z}))};const I=g.forwardRef(b);var w=n(5529),S=n(6020);function N(e){let{data:t,addEntryToUpdate:n}=e;const i=t?(r=Object.values(t),(0,x.orderBy)(r,[e=>e.title]).map((e=>({...e,itemsIds:(0,x.orderBy)(e.itemsIds,(e=>Number(e)))})))):[];var r;const s=(0,h._)(),a=(0,w.N)("items"),d=[{title:"Title",dataIndex:"title",render:e=>(0,c.jsx)("span",{children:e},e)},{title:"Year",dataIndex:"year",render:e=>(0,c.jsx)("span",{children:e})},v.Z.EXPAND_COLUMN,{title:"Items",dataIndex:"itemsIds",key:"itemsIds",render:(e,t)=>(0,c.jsx)(o.Z,{gap:6,wrap:"wrap",children:e.map((e=>(0,c.jsxs)(o.Z,{gap:2,vertical:!0,children:[(0,c.jsx)(S.ck,{id:e,width:60}),(0,c.jsxs)(o.Z,{justify:"center",children:[(0,c.jsx)(m.Z.Text,{onClick:()=>s(e),children:e}),(0,c.jsx)(E,{movie:t,addEntryToUpdate:n,itemId:e})]})]},"".concat(t.title,"-").concat(e))))},"items-".concat(t.title))},{title:"Count",dataIndex:"itemsIds",render:e=>(0,l.R1)(e).filter(Boolean).length}];return(0,c.jsx)(p.Z,{direction:"vertical",children:(0,c.jsx)(v.Z,{columns:d,rowKey:"id",dataSource:i,expandable:{expandedRowRender:e=>(0,c.jsx)(k,{movie:e,addEntryToUpdate:n}),rowExpandable:()=>a.isSuccess}})})}function k(e){let{movie:t,addEntryToUpdate:n}=e;return(0,c.jsx)("div",{children:(0,c.jsx)(j.i,{onFinish:e=>{n(t.id,{...t,itemsIds:[...t.itemsIds,e]})}})})}function E(e){let{movie:t,addEntryToUpdate:n,itemId:i}=e;return(0,c.jsx)(f.Z,{title:"Are you sure you want to remove this item?",onConfirm:()=>{n(t.id,{...t,itemsIds:t.itemsIds.filter((e=>e!==i))})},okText:"Yes",cancelText:"No",children:(0,c.jsx)(s.ZP,{icon:(0,c.jsx)(I,{}),size:"small",type:"text",ghost:!0})})}var T=n(4562),U=n(8938);function O(){const e=(0,U.i)({tdrResourceName:"daily-movie-sets",firebaseDataCollectionName:"movieSets"});return(0,c.jsx)(d.Xg,{title:"Items",subtitle:"Movie Sets",children:(0,c.jsxs)(i.Z,{hasSider:!0,children:[(0,c.jsx)(T.p,{children:(0,c.jsx)(u,{...e})}),(0,c.jsx)(i.Z.Content,{className:"content",children:(0,c.jsx)(r.T,{isLoading:e.isLoading,error:e.error,hasResponseData:!(0,x.isEmpty)(e.data),children:(0,c.jsx)(N,{...e})})})]})})}const B=O},3733:(e,t,n)=>{function i(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}n.d(t,{Z:()=>r});const r=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r}}}]);
//# sourceMappingURL=ItemsMovieSets.4051f389.chunk.js.map