{"version":3,"file":"static/js/ItemsGroups.70e70bc6.chunk.js","mappings":"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","sources":["components/Items/CopyIdsButton.tsx","components/Items/ItemBuildingBlocks.tsx","hooks/useTablePagination.tsx","components/Items/Groups/ItemGroupsCard.tsx","components/Items/Groups/ItemsGroupsContent.tsx","components/Items/Groups/ItemsGroupsFilters.tsx","pages/Items/ItemsGroups.tsx"],"sourcesContent":["import { Button, Space } from 'antd';\nimport { useCopyToClipboardFunction } from 'hooks/useCopyToClipboardFunction';\n\ntype CopyIdsButtonProps = {\n  ids: string[];\n};\n\nexport function CopyIdsButton({ ids }: CopyIdsButtonProps) {\n  const copyToClipboard = useCopyToClipboardFunction();\n  return (\n    <Space direction=\"vertical\" size=\"small\">\n      <Button size=\"small\" onClick={() => copyToClipboard(JSON.stringify(ids))}>\n        Copy Ids\n      </Button>\n    </Space>\n  );\n}\n","import { Button, Input } from 'antd';\nimport { LanguageFlag } from 'components/Common/LanguageFlag';\nimport { Item } from 'components/Sprites';\nimport { Item as ItemT } from 'types';\n\nimport { FireFilled, IdcardOutlined } from '@ant-design/icons';\nimport { useSearchParams } from 'react-router-dom';\nimport { useCopyToClipboardFunction } from 'hooks/useCopyToClipboardFunction';\n\ntype ItemBlockProps = {\n  item: ItemT;\n};\n\ntype ItemBlocksAdditionalProps = {\n  className?: string;\n  width: number;\n  language: 'en' | 'pt';\n  to: string;\n};\n\nexport function ItemSprite({\n  item,\n  width,\n  className,\n}: ItemBlockProps & Pick<ItemBlocksAdditionalProps, 'width' | 'className'>) {\n  return (\n    <Item id={item.id} width={width} title={`${item.name.en} | ${item.name.pt}`} className={className} />\n  );\n}\n\nexport function ItemId({ item }: ItemBlockProps) {\n  const copyToClipboard = useCopyToClipboardFunction();\n  return (\n    <span>\n      <Input\n        prefix={item.nsfw ? <FireFilled style={{ color: 'hotPink' }} /> : <IdcardOutlined />}\n        placeholder=\"Id\"\n        variant=\"borderless\"\n        size=\"small\"\n        value={item.id}\n        readOnly\n        style={{ width: '8ch' }}\n        onClick={() => copyToClipboard(item.id)}\n      />\n    </span>\n  );\n}\n\nexport function ItemName({ item, language }: ItemBlockProps & Pick<ItemBlocksAdditionalProps, 'language'>) {\n  return (\n    <Input\n      prefix={<LanguageFlag language={language} width=\"1em\" />}\n      placeholder={`Name in ${language.toUpperCase()}`}\n      variant=\"borderless\"\n      size=\"small\"\n      value={item.name[language]}\n      readOnly\n    />\n  );\n}\n\nexport function ItemNsfw({ item }: ItemBlockProps) {\n  return item.nsfw ? <FireFilled style={{ color: 'hotpink' }} /> : <></>;\n}\n\nexport function ItemGoTo({ item }: ItemBlockProps) {\n  const [, setSearchParams] = useSearchParams();\n  const onGoTo = () => {\n    setSearchParams({ itemId: item.id, view: 'classifier' });\n  };\n\n  return (\n    <span>\n      <Button size=\"small\" shape=\"round\" onClick={onGoTo}>\n        Go to\n      </Button>\n    </span>\n  );\n}\n","import { TableProps } from 'antd';\nimport { useQueryParams } from './useQueryParams';\n\n/**\n * Options for configuring table pagination.\n */\ntype UseTablePaginationOptions = {\n  /**\n   * Only necessary if multiple tables are on the same page.\n   */\n  prefix?: string;\n\n  /**\n   * The default current page number.\n   */\n  defaultCurrent?: number;\n\n  /**\n   * The default number of items per page.\n   */\n  defaultPageSize?: number;\n\n  /**\n   * An array of available page size options.\n   */\n  pageSizeOptions?: number[];\n\n  /**\n   * The total number of items in the table.\n   */\n  total: number;\n\n  /**\n   * Whether to show the quick jumper input.\n   */\n  showQuickJumper?: boolean;\n};\n\nexport function useTablePagination({\n  prefix = '',\n  defaultCurrent = 1,\n  defaultPageSize = 10,\n  pageSizeOptions = [10, 20, 50, 100],\n  total,\n  showQuickJumper,\n}: UseTablePaginationOptions): TableProps['pagination'] {\n  const { queryParams, addParam } = useQueryParams();\n  const currentPage = Number(queryParams.get(`${prefix}page`) ?? String(defaultCurrent));\n  const pageSize = Number(queryParams.get(`${prefix}pageSize`) ?? String(defaultPageSize));\n\n  const onChange = (page: number) => {\n    addParam(`${prefix}page`, page.toString(), String(defaultCurrent));\n  };\n  const onShowSizeChange = (_: number, size: number) => {\n    addParam(`${prefix}pageSize`, size.toString(), String(defaultPageSize));\n  };\n\n  return {\n    current: currentPage,\n    pageSize,\n    onChange,\n    onShowSizeChange,\n    defaultCurrent,\n    defaultPageSize,\n    pageSizeOptions,\n    total,\n    hideOnSinglePage: true,\n    showQuickJumper,\n  };\n}\n","import { Card, Select, Space, Typography } from 'antd';\nimport { useCopyToClipboardFunction } from 'hooks/useCopyToClipboardFunction';\nimport { Item as ItemT } from 'types';\n\nimport { ItemName, ItemNsfw, ItemSprite } from '../ItemBuildingBlocks';\n\ntype ItemGroupsCardProps = {\n  item: ItemT;\n  itemGroups?: string[];\n  groupsTypeahead: { label: string; value: string }[];\n  onUpdateItemGroups: (itemId: string, groupIds: string[]) => void;\n};\n\nexport function ItemGroupsCard({\n  item,\n  itemGroups,\n  groupsTypeahead,\n  onUpdateItemGroups,\n}: ItemGroupsCardProps) {\n  const copyToClipboard = useCopyToClipboardFunction();\n\n  return (\n    <Card\n      title={\n        <>\n          <Typography.Text onClick={() => copyToClipboard(item.id)}>{item.id}</Typography.Text>\n          <ItemNsfw item={item} />\n        </>\n      }\n      style={{ maxWidth: 250 }}\n    >\n      <ItemSprite item={item} width={75} />\n      <Space size=\"small\" direction=\"vertical\" className=\"my-4\">\n        <ItemName item={item} language=\"en\" />\n        <ItemName item={item} language=\"pt\" />\n\n        <Select\n          mode=\"tags\"\n          style={{ width: '100%' }}\n          placeholder=\"Select a group\"\n          defaultValue={itemGroups}\n          options={groupsTypeahead}\n          showSearch\n          size=\"small\"\n          key={String(itemGroups)}\n          onChange={(groups) => onUpdateItemGroups(item.id, groups)}\n        />\n      </Space>\n    </Card>\n  );\n}\n","import { Col, Drawer, Flex, Row, Table, TableProps, Typography } from 'antd';\nimport { PaginationWrapper } from 'components/Common/PaginationWrapper';\nimport { Item } from 'components/Sprites';\nimport { useCopyToClipboardFunction } from 'hooks/useCopyToClipboardFunction';\nimport { useGridPagination } from 'hooks/useGridPagination';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport { UseResourceFirebaseDataReturnType } from 'hooks/useResourceFirebaseData';\nimport { useTDResource } from 'hooks/useTDResource';\nimport { orderBy } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport { Item as ItemT, ItemGroup } from 'types';\nimport { removeDuplicates } from 'utils';\n\nimport { ItemGroupsCard } from './ItemGroupsCard';\nimport { useTablePagination } from 'hooks/useTablePagination';\nimport { TransparentButton } from 'components/Common';\nimport { ItemsTypeahead } from '../ItemsTypeahead';\nimport { CopyIdsButton } from '../CopyIdsButton';\n\nexport function ItemsGroupsContent({ data, addEntryToUpdate }: UseResourceFirebaseDataReturnType<ItemGroup>) {\n  const { is, queryParams } = useQueryParams();\n  const itemsTypeaheadQuery = useTDResource<ItemT>('items');\n\n  const grousByItem = useMemo(() => {\n    return Object.values(data ?? []).reduce((acc: Record<string, string[]>, group) => {\n      if (!group.itemsIds) {\n        console.warn('Group without items', group);\n      }\n      group.itemsIds.forEach((itemId) => {\n        if (!acc[itemId]) {\n          acc[itemId] = [];\n        }\n        acc[itemId].push(group.id);\n      });\n\n      return acc;\n    }, {});\n  }, [data]);\n\n  const groupsTypeahead = useMemo(\n    () =>\n      orderBy(\n        Object.keys(data).map((id) => ({ label: id, value: id })),\n        'label'\n      ),\n    [data]\n  );\n\n  const onUpdateItemGroups = (itemId: string, groupIds: string[]) => {\n    // Compare previous groups in items with new groups\n    const previousGroups = grousByItem[itemId] ?? [];\n    const groupsToAdd = groupIds.filter((id) => !previousGroups.includes(id));\n    const groupsToRemove = previousGroups.filter((id) => !groupIds.includes(id));\n\n    // Add item to groups\n    groupsToAdd.forEach((groupId) => {\n      addEntryToUpdate(groupId, {\n        id: groupId,\n        itemsIds: removeDuplicates([...(data[groupId]?.itemsIds ?? []), itemId]),\n      });\n    });\n\n    // Remove item from groups\n    groupsToRemove.forEach((groupId) => {\n      addEntryToUpdate(groupId, {\n        id: groupId,\n        itemsIds: removeDuplicates(data[groupId]?.itemsIds.filter((id) => id !== itemId)),\n      });\n    });\n  };\n\n  const onUpdateGroupItems = (groupId: string, itemIds: string[]) => {\n    addEntryToUpdate(groupId, {\n      id: groupId,\n      itemsIds: removeDuplicates(itemIds),\n    });\n  };\n\n  return (\n    <>\n      {(is('display', 'group') || !queryParams.has('display')) && (\n        <ItemsGroupsByGroupTable\n          data={data}\n          items={itemsTypeaheadQuery.data}\n          grousByItem={grousByItem}\n          groupsTypeahead={groupsTypeahead}\n          onUpdateItemGroups={onUpdateItemGroups}\n          onUpdateGroupItems={onUpdateGroupItems}\n        />\n      )}\n      {is('display', 'item') && (\n        <ItemsGroupsByItemTable\n          data={data}\n          items={itemsTypeaheadQuery.data}\n          grousByItem={grousByItem}\n          groupsTypeahead={groupsTypeahead}\n          onUpdateItemGroups={onUpdateItemGroups}\n          onUpdateGroupItems={onUpdateGroupItems}\n        />\n      )}\n    </>\n  );\n}\n\ntype ItemsGroupsTablesProps = {\n  items: Dictionary<ItemT>;\n  grousByItem: Record<string, string[]>;\n  groupsTypeahead: { value: string; label: string }[];\n  onUpdateItemGroups: (itemId: string, groupIds: string[]) => void;\n  onUpdateGroupItems: (groupId: string, itemIds: string[]) => void;\n} & Pick<UseResourceFirebaseDataReturnType<ItemGroup>, 'data'>;\n\nfunction ItemsGroupsByGroupTable({\n  data,\n  items,\n  grousByItem,\n  groupsTypeahead,\n  onUpdateItemGroups,\n  onUpdateGroupItems,\n}: ItemsGroupsTablesProps) {\n  const copyToClipboard = useCopyToClipboardFunction();\n  const itemsTypeaheadQuery = useTDResource<ItemT>('items');\n  const [selectedItemId, setSelectedItemId] = useState<null | string>(null);\n\n  const paginationProps = useTablePagination({\n    showQuickJumper: true,\n    total: Object.keys(data).length,\n  });\n\n  const columns: TableProps<ItemGroup>['columns'] = [\n    {\n      title: 'id',\n      dataIndex: 'id',\n      key: 'id',\n      render: (id) => <span>{id}</span>,\n    },\n    {\n      title: 'Items',\n      dataIndex: 'itemsIds',\n      key: 'itemsIds',\n      render: (itemsIds: string[], record) => (\n        <Flex gap={6} wrap=\"wrap\" key={`items-${record.id}`}>\n          {itemsIds.map((itemId) => (\n            <Flex key={`${record.id}-${itemId}`} gap={2} vertical>\n              <TransparentButton onClick={() => setSelectedItemId(itemId)}>\n                <Item id={itemId} width={60} />\n              </TransparentButton>\n              <Flex justify=\"center\">\n                <Typography.Text onClick={() => copyToClipboard(itemId)}>{itemId}</Typography.Text>\n              </Flex>\n            </Flex>\n          ))}\n        </Flex>\n      ),\n    },\n    Table.EXPAND_COLUMN,\n    {\n      title: 'Count',\n      dataIndex: 'itemsIds',\n      key: 'count',\n      render: (itemsIds: string[]) => removeDuplicates(itemsIds).filter(Boolean).length,\n    },\n    {\n      title: 'Actions',\n      dataIndex: 'itemsIds',\n      key: 'actions',\n      render: (itemsIds: string[]) => <CopyIdsButton ids={itemsIds} />,\n    },\n  ];\n\n  const selectedItem = selectedItemId ? items[selectedItemId] : null;\n\n  return (\n    <>\n      <Table\n        columns={columns}\n        dataSource={Object.values(data)}\n        className=\"my-4\"\n        rowKey=\"id\"\n        pagination={paginationProps}\n        expandable={{\n          expandedRowRender: (record) => (\n            <AddItemFlow group={record} onUpdateGroupItems={onUpdateGroupItems} />\n          ),\n          rowExpandable: () => itemsTypeaheadQuery.isSuccess,\n        }}\n      />\n      <Drawer title=\"Edit Item Group\" onClose={() => setSelectedItemId(null)} open={!!selectedItem}>\n        {selectedItem && (\n          <ItemGroupsCard\n            item={selectedItem}\n            itemGroups={grousByItem[selectedItem.id]}\n            groupsTypeahead={groupsTypeahead}\n            onUpdateItemGroups={onUpdateItemGroups}\n          />\n        )}\n      </Drawer>\n    </>\n  );\n}\n\ntype AddItemFlowProps = {\n  group: ItemGroup;\n  onUpdateGroupItems: (groupId: string, itemIds: string[]) => void;\n};\n\nexport function AddItemFlow({ group, onUpdateGroupItems }: AddItemFlowProps) {\n  const onUpdate = (itemId: string) => {\n    onUpdateGroupItems(group.id, [...group.itemsIds, itemId]);\n  };\n\n  return (\n    <div>\n      <ItemsTypeahead onFinish={onUpdate} />\n    </div>\n  );\n}\n\nfunction ItemsGroupsByItemTable({\n  items,\n  grousByItem,\n  groupsTypeahead,\n  onUpdateItemGroups,\n}: ItemsGroupsTablesProps) {\n  const { is } = useQueryParams();\n  const showOnlyEmpty = is('emptyOnly');\n\n  const data = useMemo(\n    () => (showOnlyEmpty ? Object.values(items).filter((v) => !grousByItem[v.id]) : Object.values(items)),\n    [items, grousByItem, showOnlyEmpty]\n  );\n\n  const { page, pagination } = useGridPagination({ data });\n\n  return (\n    <>\n      <Typography.Title level={2}>Groups by Items ({data.length})</Typography.Title>\n      <PaginationWrapper pagination={pagination}>\n        <Row gutter={[16, 16]} className=\"my-4\">\n          {page.map((item) => (\n            <Col key={item.id} xs={24} sm={24} md={12} lg={6} xl={4}>\n              <ItemGroupsCard\n                item={item}\n                itemGroups={grousByItem[item.id]}\n                groupsTypeahead={groupsTypeahead}\n                onUpdateItemGroups={onUpdateItemGroups}\n              />\n            </Col>\n          ))}\n        </Row>\n      </PaginationWrapper>\n    </>\n  );\n}\n","import { Divider, Flex } from 'antd';\nimport { FilterSegments, FilterSwitch } from 'components/Common';\nimport { DownloadButton } from 'components/Common/DownloadButton';\nimport { SiderContent } from 'components/Layout';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport { UseResourceFirebaseDataReturnType } from 'hooks/useResourceFirebaseData';\nimport { ItemGroup } from 'types';\nimport { removeDuplicates, sortItemsIds, sortJsonKeys } from 'utils';\n\nimport { ClusterOutlined, TableOutlined } from '@ant-design/icons';\nimport { SaveButton } from 'components/Common/SaveButton';\nimport { cloneDeep, isEmpty, omitBy } from 'lodash';\n\nexport function ItemsGroupsFilters({\n  data,\n  save,\n  isDirty,\n  isSaving,\n  entriesToUpdate,\n}: UseResourceFirebaseDataReturnType<ItemGroup>) {\n  const { queryParams, addParam, addParams, is } = useQueryParams();\n\n  return (\n    <SiderContent>\n      <Flex vertical gap={12}>\n        <SaveButton\n          isDirty={isDirty}\n          onSave={save}\n          isSaving={isSaving}\n          dirt={JSON.stringify(prepareObjectToSave(entriesToUpdate))}\n        />\n\n        <DownloadButton\n          data={() => prepareFileForDownload(data)}\n          fileName=\"items-groups.json\"\n          disabled={isDirty}\n          block\n        />\n      </Flex>\n      <Divider />\n\n      <FilterSegments\n        label=\"Display\"\n        value={queryParams.get('display') ?? 'group'}\n        onChange={(mode) => addParams({ display: mode, page: 1 }, { page: 1 })}\n        options={[\n          {\n            title: 'By Groups',\n            icon: <ClusterOutlined />,\n            value: 'group',\n          },\n          {\n            title: 'By Items',\n            icon: <TableOutlined />,\n            value: 'item',\n          },\n        ]}\n      />\n\n      {is('display', 'item') && (\n        <FilterSwitch\n          label=\"No Groups Only\"\n          value={is('emptyOnly')}\n          onChange={(mode) => addParam('emptyOnly', mode, false)}\n        />\n      )}\n    </SiderContent>\n  );\n}\n\nfunction prepareObjectToSave(groups: Dictionary<ItemGroup>) {\n  return omitBy(cloneDeep(groups), (group) => isEmpty(group.itemsIds));\n}\n\nfunction prepareFileForDownload(groups: Dictionary<ItemGroup>) {\n  Object.keys(groups).forEach((key) => {\n    groups[key].itemsIds = sortItemsIds(removeDuplicates(groups[key].itemsIds));\n  });\n  return sortJsonKeys(prepareObjectToSave(groups));\n}\n","import { Layout } from 'antd';\nimport { DataLoadingWrapper } from 'components/DataLoadingWrapper';\nimport { ItemsGroupsContent } from 'components/Items/Groups/ItemsGroupsContent';\nimport { ItemsGroupsFilters } from 'components/Items/Groups/ItemsGroupsFilters';\nimport { PageLayout } from 'components/Layout';\nimport { PageSider } from 'components/Layout/PageSider';\nimport { useResourceFirebaseData } from 'hooks/useResourceFirebaseData';\nimport { useTDResource } from 'hooks/useTDResource';\nimport { isEmpty } from 'lodash';\nimport { Item, ItemGroup } from 'types';\n\nexport function ItemsGroups() {\n  const groupsQuery = useResourceFirebaseData<ItemGroup>({\n    tdrResourceName: 'items-groups',\n    firebaseDataCollectionName: 'itemsGroups',\n    serialize: true,\n  });\n  const itemsTypeaheadQuery = useTDResource<Item>('items');\n\n  return (\n    <PageLayout title=\"Items\" subtitle=\"Groups Sets\">\n      <Layout hasSider>\n        <PageSider>\n          <ItemsGroupsFilters {...groupsQuery} />\n        </PageSider>\n\n        <Layout.Content className=\"content\">\n          <DataLoadingWrapper\n            isLoading={groupsQuery.isLoading || itemsTypeaheadQuery.isLoading}\n            error={groupsQuery.error || itemsTypeaheadQuery.error}\n            hasResponseData={!isEmpty(groupsQuery.data) && !isEmpty(itemsTypeaheadQuery.data)}\n          >\n            <ItemsGroupsContent {...groupsQuery} />\n          </DataLoadingWrapper>\n        </Layout.Content>\n      </Layout>\n    </PageLayout>\n  );\n}\n\nexport default ItemsGroups;\n"],"names":["CopyIdsButton","ids","copyToClipboard","useCopyToClipboardFunction","direction","size","onClick","JSON","stringify","ItemSprite","item","width","className","id","title","name","en","pt","ItemId","prefix","nsfw","style","color","placeholder","variant","value","readOnly","ItemName","language","toUpperCase","ItemNsfw","ItemGoTo","setSearchParams","useSearchParams","shape","itemId","view","useTablePagination","defaultCurrent","defaultPageSize","pageSizeOptions","total","showQuickJumper","queryParams","addParam","useQueryParams","current","Number","get","String","pageSize","onChange","page","toString","onShowSizeChange","_","hideOnSinglePage","ItemGroupsCard","itemGroups","groupsTypeahead","onUpdateItemGroups","maxWidth","mode","defaultValue","options","showSearch","groups","ItemsGroupsContent","data","addEntryToUpdate","is","itemsTypeaheadQuery","useTDResource","grousByItem","useMemo","Object","values","reduce","acc","group","itemsIds","console","warn","forEach","push","orderBy","keys","map","label","groupIds","previousGroups","groupsToAdd","filter","includes","groupsToRemove","groupId","removeDuplicates","onUpdateGroupItems","itemIds","has","ItemsGroupsByGroupTable","items","ItemsGroupsByItemTable","selectedItemId","setSelectedItemId","useState","paginationProps","length","columns","dataIndex","key","render","record","gap","wrap","vertical","justify","Table","Boolean","selectedItem","dataSource","rowKey","pagination","expandable","expandedRowRender","AddItemFlow","rowExpandable","isSuccess","onClose","open","ItemsTypeahead","onFinish","showOnlyEmpty","v","useGridPagination","level","PaginationWrapper","gutter","xs","sm","md","lg","xl","ItemsGroupsFilters","save","isDirty","isSaving","entriesToUpdate","addParams","SaveButton","onSave","dirt","prepareObjectToSave","DownloadButton","prepareFileForDownload","sortItemsIds","sortJsonKeys","fileName","disabled","block","display","icon","ClusterOutlined","TableOutlined","omitBy","cloneDeep","isEmpty","ItemsGroups","groupsQuery","useResourceFirebaseData","tdrResourceName","firebaseDataCollectionName","serialize","subtitle","hasSider","PageSider","DataLoadingWrapper","isLoading","error","hasResponseData"],"sourceRoot":""}