"use strict";(self.webpackChunktd_admin=self.webpackChunktd_admin||[]).push([[5404],{8158:(e,t,i)=>{i.d(t,{CQ:()=>g,bN:()=>p,cw:()=>b,hW:()=>h,xL:()=>m});var s=i(7515),r=i(9475),n=i(1310),a=i(2997),l=i(8955),o=i(5458),u=i(7134),d=i(1087),c=i(184);function m(e){let{item:t,width:i,className:s}=e;return(0,c.jsx)(a.ck,{id:t.id,width:i,title:"".concat(t.name.en," | ").concat(t.name.pt),className:s})}function p(e){let{item:t}=e;const i=(0,u._)();return(0,c.jsx)("span",{children:(0,c.jsx)(s.Z,{prefix:t.nsfw?(0,c.jsx)(l.Z,{style:{color:"hotPink"}}):(0,c.jsx)(o.Z,{}),placeholder:"Id",variant:"borderless",size:"small",value:t.id,readOnly:!0,style:{width:"8ch"},onClick:()=>i(t.id)})})}function g(e){let{item:t,language:i}=e;return(0,c.jsx)(s.Z,{prefix:(0,c.jsx)(n.H,{language:i,width:"1em"}),placeholder:"Name in ".concat(i.toUpperCase()),variant:"borderless",size:"small",value:t.name[i],readOnly:!0})}function h(e){let{item:t}=e;return t.nsfw?(0,c.jsx)(l.Z,{style:{color:"hotpink"}}):(0,c.jsx)(c.Fragment,{})}function b(e){let{item:t}=e;const[,i]=(0,d.lr)();return(0,c.jsx)("span",{children:(0,c.jsx)(r.ZP,{size:"small",shape:"round",onClick:()=>{i({itemId:t.id,view:"classifier"})},children:"Go to"})})}},2845:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ct});var s=i(1790),r=i(2128),n=i(4520),a=i(7128),l=i(8357),o=i(7018),u=i(7340),d=i(7965),c=i(1413),m=i(4747),p=i(763);const g={OPPOSITE:{value:-10,prefix:"^",name:"OPPOSITE",label:{en:"Opposite",pt:"Oposto"},prefixLabel:{en:"really not ",pt:"muito n\xe3o "}},UNRELATED:{value:-3,prefix:"!",name:"UNRELATED",label:{en:"Unrelated",pt:"Desconexo"},prefixLabel:{en:"not ",pt:"n\xe3o "}},UNCLEAR:{value:-1,prefix:"~",name:"UNCLEAR",label:{en:"Unclear",pt:"Incerto"},prefixLabel:{en:"sorta ",pt:"meio "}},RELATED:{value:5,prefix:"+",name:"RELATED",label:{en:"Related",pt:"Relacionado"},prefixLabel:{en:"",pt:""}},DETERMINISTIC:{value:10,prefix:"*",name:"DETERMINISTIC",label:{en:"Deterministic",pt:"Determin\xedstico"},prefixLabel:{en:"very ",pt:"muito "}}},h=(0,p.keyBy)(g,"prefix");function b(e,t,i){const s=t.attributes,r={};for(const a of i)r[a]=s[a];const n={id:e.id,name:e.name,attributes:r,type:"ITEM",inquiries:0,offerings:[]};return e.nsfw&&(n.nsfw=e.nsfw),n}function x(e){const{id:t,name:i,description:s,limited:r,spriteId:n,priority:a}=e,l={id:t,name:i,description:s,spriteId:n,priority:a,known:!1};return r&&(l.limited=r),l}const v=["*","^","+","~","!"];function j(e,t,i,s){const r=e.find((e=>e.id===i));if(!r)return"";const n=t.filter((e=>null===s||void 0===s||!s.useOnlyKnownAttributes||e.known)),a=new Map(n.map((e=>[e.id,e]))),l=[];for(const[u,d]of Object.entries(r.attributes)){const e=a.get(u);if(e){const t=Object.values(g).find((e=>e.value===d));t&&l.push({prefix:t.prefix,id:e.id,priority:e.priority})}}const o=(0,p.sortBy)(l,[e=>v.indexOf(e.prefix),e=>{var t;return e.prefix===g.UNRELATED.prefix&&null!==s&&void 0!==s&&null!==(t=s.prioritizedNegatives)&&void 0!==t&&t.includes(e.prefix)?-1:e.priority},["asc","asc"]]);return(null!==s&&void 0!==s&&s.length?o.slice(0,null===s||void 0===s?void 0:s.length):o).map((e=>"".concat(e.prefix).concat(e.id))).join("")}const f={createAlienItem:b,createAlienAttribute:x,buildAlienGameGrids:function(e,t,i,s){var r,n,a,l;const o=null!==(r=null===s||void 0===s?void 0:s.nsfw)&&void 0!==r&&r,u=null!==(n=null===s||void 0===s?void 0:s.itemsGridSize)&&void 0!==n?n:25,d=null!==(a=null===s||void 0===s?void 0:s.attributesGridSize)&&void 0!==a?a:25,c=null!==(l=null===s||void 0===s?void 0:s.reliability)&&void 0!==l?l:70,m=(0,p.shuffle)(t.filter((t=>{var i;return t.complete&&t.signature&&(null!==(i=t.reliability)&&void 0!==i?i:0)>c&&(o||!e[t.id].nsfw)}))),h={},v=i.map((e=>{let t=null,i=0;for(;i<500&&!t;){if(499===i)throw new Error("Could not find a deterministic item for attribute");if(e.limited){const i=m.find((t=>t.attributes[e.id]===g.RELATED.value&&!h[t.id]));i&&(t=i,h[i.id]=!0)}else{const i=m.find((t=>t.attributes[e.id]===g.DETERMINISTIC.value&&!h[t.id]));i&&(t=i,h[i.id]=!0)}i+=1}return t})).filter(Boolean),j=i.reduce(((e,t)=>(e[t.id]=0,e)),{}),f={};v.forEach(((e,t)=>{f[i[t].id]=e,Object.keys(e.attributes).forEach((t=>{e.attributes[t]>0&&(j[t]+=e.attributes[t])}))}));const y=i.filter((e=>!e.limited)),I=(0,p.sortBy)(y,(e=>-j[e.id])).filter(((e,t,i)=>{var s;if(!e.oppositeId&&!e.relatedId)return!0;const r=null!==(s=e.oppositeId)&&void 0!==s?s:e.relatedId;for(let n=0;n<t;n++)if(i[n].id===r)return!1;return!0})).slice(0,d-1),Z=i.filter((e=>e.limited)),N=[...I,(0,p.sortBy)(Z,(e=>-j[e.id]))[0]],E=N.map((e=>e.id)),C=(0,p.sampleSize)(N.map((e=>f[e.id])),u);return{attributes:(0,p.sortBy)(N.map(x),["priority"]),items:C.map((t=>b(e[t.id],t,E)))}},getBestAttributes:function(e,t,i){const s=e.filter((e=>i.includes(e.id)));if(0===s.length)return[];const r={};return s.forEach((e=>{Object.entries(e.attributes).forEach((e=>{let[t,i]=e;r[t]||(r[t]=0),r[t]+=i}))})),Object.entries(r).filter((e=>{let[,t]=e;return t>0})).sort(((e,t)=>{let[,i]=e,[,s]=t;return s-i})).map((e=>{let[t]=e;return t})).map((e=>t.find((t=>t.id===e)))).filter((e=>void 0!==e))},getAlienItemSignature:j,getNonClashingItem:function(e,t,i,s){const r=e.filter((e=>"ITEM"===e.type&&0===e.offerings.length)),n=e.filter((e=>"BLANK"===e.type&&0===e.offerings.length)),a=e.filter((e=>"CURSE"===e.type)),l=function(e){const t=e.filter((e=>"CURSE"===e.type)).reduce(((e,t)=>(Object.entries(t.attributes).forEach((t=>{let[i,s]=t;s===g.DETERMINISTIC.value&&(e[i]=!0)})),e)),{});return Object.keys(t)}(a),o=a.reduce(((i,s)=>{const r=j(e,t,s.id,{useOnlyKnownAttributes:!0,length:5,prioritizedNegatives:l});return i[s.id]=r,i}),{}),u=n.reduce(((i,s)=>{const r=j(e,t,s.id,{useOnlyKnownAttributes:!0,length:5,prioritizedNegatives:l});return i[s.id]=r,i}),{}),d=r.reduce(((i,s)=>{const r=j(e,t,s.id,{useOnlyKnownAttributes:!0,length:5,prioritizedNegatives:l});return i[s.id]=r,i}),{}),c=(e,t)=>Object.values(t).filter((t=>t===e)).length;return(0,p.orderBy)(r.map((e=>{var t,r;const n=d[e.id];return{item:e,signature:n,equivalentCurses:c(n,o),equivalentBlanks:c(n,u),isRecentlyInquiredItem:null!==(t=null===s||void 0===s?void 0:s.includes(e.id))&&void 0!==t&&t,isPreviouslyInquiredItem:null!==(r=null===i||void 0===i?void 0:i.includes(e.id))&&void 0!==r&&r}})),["equivalentCurses","equivalentBlanks","isRecentlyInquiredItem","isPreviouslyInquiredItem"],["asc","asc","desc","desc"])},getInitialKnownAttributes:(e,t)=>{const i={};t.forEach((e=>{i[e.id]=0})),e.forEach((e=>{Object.entries(e.attributes).forEach((e=>{let[t,s]=e;s>0&&i[t]&&(i[t]=s)}))}));const s=(0,p.orderBy)((0,p.keys)(i),(e=>-i[e]));return[s[1],s[Math.ceil(s.length/2)],s[s.length-1]]},parseItemSignature:function(e){var t;return(null!==(t=e.match(/[\^*+~!][a-zA-Z0-9]+/g))&&void 0!==t?t:[]).map((e=>({prefix:e[0],id:e.slice(1),variant:h[e[0]].name,spriteId:""})))},getInquirySuggestions:(e,t,i)=>{const s=(0,p.orderBy)(t.filter((e=>!i.includes(e.id))).map((t=>{const i=e.filter((e=>e.attributes[t.id]>0&&0===e.offerings.length)).slice(0,5);return{attribute:t,items:i}})),["items.length"],["desc"]);return(0,p.orderBy)((0,p.shuffle)(s.slice(0,5)).slice(0,3),["items.length","attribute.id"],["desc","asc"])},ATTRIBUTE_VALUE_DICT:g,ATTRIBUTE_VALUE_PRIORITY:v};var y=i(6591);const I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.cloneDeep)((0,p.merge)({id:"",name:{en:"",pt:""},groups:[],attributes:{}},e))},Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.cloneDeep)((0,p.merge)({id:"",attributes:{}},e))},N=(e,t,i)=>{const s=(0,p.orderBy)(Object.values(t),["priority","id"],["asc","asc"]).map((e=>e.id));function r(e,t){return(0,p.orderBy)(e,(e=>s.indexOf(e)),["asc"]).map((e=>"".concat(t).concat(e)))}const n=[],a=[],l=[],o=[],u=[];return Object.entries(e.attributes).forEach((e=>{let[i,s]=e;if(t[i])switch(s){case y.NL.OPPOSITE:n.push(i);break;case y.NL.DETERMINISTIC:a.push(i);break;case y.NL.RELATED:l.push(i);break;case y.NL.UNRELATED:o.push(i);break;case y.NL.UNCLEAR:default:u.push(i)}})),[...r(n,y._9.OPPOSITE),...r(a,y._9.DETERMINISTIC),...r(l,y._9.RELATED),...i?[]:r(o,y._9.UNRELATED),...i?[]:r(u,y._9.UNCLEAR)]},E=(0,p.memoize)((e=>{if(3===e.length)return{key:e,className:"",text:""};const t=e[0];return{key:e.slice(1,4),className:{[y._9.DETERMINISTIC]:"deterministic",[y._9.UNRELATED]:"unrelated",[y._9.UNCLEAR]:"unclear",[y._9.OPPOSITE]:"opposite"}[t],text:{[y._9.DETERMINISTIC]:"very",[y._9.UNRELATED]:"not",[y._9.UNCLEAR]:"maybe",[y._9.OPPOSITE]:"very not"}[t]}})),C=(e,t,i)=>e.filter((e=>!(!t&&e.includes(y._9.UNCLEAR))&&!(!i&&e.includes(y._9.UNRELATED))));function T(e,t,i){const s=[];for(const[a,l]of Object.entries(e.attributes)){const e=t[a];if(e){const t=Object.values(f.ATTRIBUTE_VALUE_DICT).find((e=>e.value===l));t&&s.push({prefix:t.prefix,id:e.id,priority:e.priority})}}const r=(0,p.sortBy)(s,[e=>f.ATTRIBUTE_VALUE_PRIORITY.indexOf(e.prefix),e=>e.prefix===f.ATTRIBUTE_VALUE_DICT.UNRELATED.prefix?-1:e.priority,["asc","asc"]]),n=null!==i&&void 0!==i&&i.length?r.slice(0,null===i||void 0===i?void 0:i.length):r;return null!==i&&void 0!==i&&i.onlyRelevant?n.filter((e=>[f.ATTRIBUTE_VALUE_DICT.UNCLEAR.prefix,f.ATTRIBUTE_VALUE_DICT.UNRELATED.prefix].includes(e.prefix))).map((e=>"".concat(e.prefix).concat(e.id))).join(""):n.map((e=>"".concat(e.prefix).concat(e.id))).join("")}const A=(0,p.keyBy)(f.ATTRIBUTE_VALUE_DICT,"prefix");function P(e){return Object.values(e.attributes).reduce(((e,t)=>t<=0?(t===f.ATTRIBUTE_VALUE_DICT.OPPOSITE.value&&(e+=t/2),e):e+t),0)}function w(e,t){const i=Object.values(e.attributes).filter((e=>e===f.ATTRIBUTE_VALUE_DICT.UNCLEAR.value)).length;return Math.floor((t-i)/t*100)}var S=i(2791),L=i(5850),k=i(3713),D=i(8027),U=i(5529),O=i(2233);const R={};const M=(e,t)=>(0,L.aS)(e,(e=>({id:e.id,tempSignature:T(e,t),updatedAt:e.updatedAt}))),z=e=>{const{itemAttributesValues:t,itemAttributes:i}=e,s=Object.keys(i).length;return(0,L.d_)(t,(e=>{const t=function(e){var t;return(null!==(t=e.match(/[\^*+~!][a-zA-Z0-9]+/g))&&void 0!==t?t:[]).reduce(((e,t)=>{const i=t[0],s=t.slice(1),r=A[i].value;return e[s]=r,e}),{})}(e.tempSignature),i=Object.keys(t).length===s,r={id:e.id,updatedAt:e.updatedAt,attributes:t};return i?(0,c.Z)((0,c.Z)({},r),{},{complete:i,reliability:w(r,s),score:P(r)}):r}))};var _=i(184);const V=(0,S.createContext)({getItem:()=>I(),getItemAttributeValues:()=>Z(),isLoading:!0,error:null,hasResponseData:!1,isDirty:!1,jumpToItem:()=>{},activeItem:I(),itemAttributeValues:Z(),onAttributeChange:()=>{},isSaving:!1,save:()=>{},attributesList:[],availableItemIds:[],addAttributesToUpdate:()=>{},addMultipleAttributesToUpdate:()=>{},prepareItemsAttributesFileForDownload:()=>({}),attributes:{},attributesToUpdate:{}}),B=e=>{let{children:t}=e;const{getItem:i,getItemAttributeValues:s,availableItemIds:r,isLoading:n,error:a,isSaving:l,save:o,addAttributesToUpdate:u,isDirty:d,attributes:g,addMultipleAttributesToUpdate:h,attributesToUpdate:b}=function(){var e;const{notification:t,message:i}=m.Z.useApp(),s=(0,k.NL)(),r=(0,U.N)("items"),n=(0,U.N)("items-attributes"),a=(0,U.N)("items-attribute-values"),l=(0,D.X)("tdr","itemsAttributeValues",{select:e=>{var t;return z({itemAttributesValues:e,itemAttributes:null!==(t=n.data)&&void 0!==t?t:{}})}}),[o,u]=(0,S.useState)({}),d=(0,O.B)("tdr","itemsAttributeValues",{onSuccess:()=>{t.success({message:"itemsAttributeValues updated"}),s.refetchQueries({queryKey:["firebase","tdr","itemsAttributeValues"]}),u({})},onError:e=>{t.error({message:"itemsAttributeValues update failed",description:e.message})}}),g=(0,S.useMemo)((()=>{var e,t;return(0,c.Z)((0,c.Z)({},null!==(e=a.data)&&void 0!==e?e:{}),null!==(t=l.data)&&void 0!==t?t:{})}),[a.data,l.data]),h=!(0,p.isEmpty)(o),b=l.data;return{availableItemIds:(0,S.useMemo)((()=>{var e;const t=null!==(e=r.data)&&void 0!==e?e:{};return(0,p.orderBy)(Object.keys(t).filter((e=>{var i,s;return(null!==(i=null===(s=t[e])||void 0===s?void 0:s.decks)&&void 0!==i?i:[]).includes("alien")})),(e=>Number(e)),"asc")}),[r.data]),getItem:e=>{var t;return null!==(t=r.data)&&void 0!==t&&t[e]?r.data[e]:(e&&i.info("Item ".concat(e," not found in TDR. Creating a new item...")),I({id:e}))},getItemAttributeValues:e=>{var t,i,s;const r=null!==(t=null===g||void 0===g?void 0:g[e])&&void 0!==t?t:{},n=null!==(i=o[e])&&void 0!==i?i:{};return(0,p.isEmpty)(r)&&(0,p.isEmpty)(n)?(R[e]=Z({id:e}),R[e]):(0,p.merge)(null!==(s=null===R||void 0===R?void 0:R[e])&&void 0!==s?s:{},r,n)},attributes:null!==(e=n.data)&&void 0!==e?e:{},isLoading:r.isLoading||n.isLoading||a.isLoading||l.isLoading,error:r.error||n.error||a.error||l.error,firebaseData:b,isSaving:d.isPending,save:()=>{d.mutate(M((0,c.Z)((0,c.Z)({},b),o),n.data))},addAttributesToUpdate:(e,t)=>{u((i=>(0,c.Z)((0,c.Z)({},i),{},{[e]:(0,c.Z)((0,c.Z)({},t),{},{updatedAt:Date.now()})})))},addMultipleAttributesToUpdate:e=>{u((t=>(0,c.Z)((0,c.Z)({},t),(0,p.mapKeys)(e.map((e=>(0,c.Z)((0,c.Z)({},e),{},{updatedAt:Date.now()}))),"id"))))},attributesToUpdate:o,isDirty:h}}(),{message:x}=m.Z.useApp(),[v,j]=(0,S.useState)((0,p.random)(0,r.length-1)),f=i(r[v]),y=s(f.id),N=(0,S.useMemo)((()=>(0,p.orderBy)(Object.values(g),"name.en","asc")),[g]);return(0,_.jsx)(V.Provider,{value:{getItem:i,getItemAttributeValues:s,availableItemIds:r,isLoading:n,error:a,hasResponseData:r.length>0&&!(0,p.isEmpty)(g),isDirty:d,itemAttributeValues:y,jumpToItem:(e,t)=>{if("next"!==e)if("previous"!==e)if("random"!==e)if("first"!==e)if("last"!==e)if("next10"!==e)if("previous10"!==e)if("incomplete"!==e){if("goTo"===e&&void 0!==t){const e=r.indexOf(t);if(-1!==e)return void j(e);x.error("Item ".concat(t," is not available for attribution."))}}else j((e=>{let t=e+1;for(;t<r.length;){const i=s(r[t]);if(Object.keys(i.attributes).length!==N.length)return t;if(t===r.length-1)return x.info("No more incomplete items found."),e;t++}return e}));else j((e=>(e-10+r.length)%r.length));else j((e=>(e+10)%r.length));else j(r.length-1);else j(0);else j((0,p.random)(0,r.length-1));else j((e=>(e-1+r.length)%r.length));else j((e=>(e+1)%r.length))},activeItem:f,onAttributeChange:(e,t)=>{u(f.id,(0,c.Z)((0,c.Z)({},y),{},{attributes:(0,c.Z)((0,c.Z)({},y.attributes),{},{[e]:t})}))},isSaving:l,save:o,attributes:g,attributesList:N,addAttributesToUpdate:u,addMultipleAttributesToUpdate:h,prepareItemsAttributesFileForDownload:()=>(0,L.Tj)(r.reduce(((e,t)=>{const i=s(t);return(0,p.isEmpty)(i.attributes)||(Object.keys(i.attributes).length===N.length?i.complete=!0:delete i.complete,e[i.id]=i),e}),{})),attributesToUpdate:b},children:t})},F=()=>(0,S.useContext)(V);var G=i(1087);function Q(){var e;const[t,i]=(0,G.lr)();return{view:null!==(e=t.get("view"))&&void 0!==e?e:"classifier",setView:e=>i({view:e}),addQueryParam:(e,s)=>{t.set(e,"".concat(s)),i(t)},removeQueryParam:e=>{t.delete(e),i(t)},searchParams:t}}var q=i(4925),K=i(6178),$=i(9475),Y=i(952);function J(e){let{label:t,children:i}=e;return(0,_.jsxs)(K.Z.Text,{children:[t," ",(0,_.jsx)(Y.Z,{children:i})]})}const W=["id","name"];function X(){const{getItemAttributeValues:e,availableItemIds:t,attributesList:i}=F(),{total:s,complete:r,completionPercentage:l,hasDataCount:o,initiatedPercentage:u,progress:d,progressTotal:c,currentProgress:m}=(0,S.useMemo)((()=>{const s=t.length;let r=0,n=0,a=0;t.map((t=>e(t))).forEach((e=>{let{attributes:t}=e;(0,p.isEmpty)(t)||(r+=1),Object.values(t).length===i.length&&(n+=1),a+=Object.values(t).length}));const l=Object.values(i).length*t.length;return{total:s,complete:n,completionPercentage:s>0?(n/s*100).toFixed(1):0,hasDataCount:r,initiatedPercentage:s>0?Math.floor(r/s*100):0,progress:(a/l*100).toFixed(1),currentProgress:a,progressTotal:l}}),[i,t,e]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(n.Z,{vertical:!0,children:[(0,_.jsx)(K.Z.Text,{strong:!0,className:"mb-2",children:"Items Stats"}),(0,_.jsx)(J,{label:"Total",children:s}),(0,_.jsxs)(J,{label:"Complete",children:[r," (",l,"%)"]}),(0,_.jsxs)(J,{label:"Initiated",children:[o," (",u,"%)"]}),(0,_.jsx)(K.Z.Text,{strong:!0,className:"mt-4 mb-2",children:"Attributes Stats"}),(0,_.jsx)(J,{label:"Total",children:c}),(0,_.jsx)(J,{label:"Set",children:m}),(0,_.jsxs)(J,{label:"Progress",children:[d,"%"]})]}),(0,_.jsx)(a.Z,{})]})}function H(){const{jumpToItem:e}=F(),{searchParams:t,addQueryParam:i}=Q();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)($.ZP,{block:!0,onClick:()=>e("random"),type:"primary",children:"Random Item"}),(0,_.jsx)(l.Do,{label:"Unset Only",value:"unset"===t.get("scope"),onChange:e=>i("scope",e?"unset":""),className:"mt-4"})]})}function ee(){const{searchParams:e,addQueryParam:t}=Q(),{attributesList:i}=F(),s=(0,S.useMemo)((()=>[{label:"Random Attribute",value:"random"},...i.map((e=>{let{id:t,name:i}=e;return{label:i.en,value:t}}))]),[i]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.zE,{label:"Sampler Attribute",value:e.get("attribute")||"random",onChange:e=>t("attribute",e),options:s}),(0,_.jsx)(l.xh,{label:"Sample Size",value:Number(e.get("size")||9),onChange:e=>t("size",String(e)),min:3,max:21,step:3})]})}function te(){const{searchParams:e,addQueryParam:t}=Q(),{attributesList:i}=F(),s=(0,S.useMemo)((()=>i.map((e=>{let{id:t,name:i}=e,s=(0,q.Z)(e,W);return{label:"".concat(i.en).concat(s.default?"*":""),value:t}}))),[i]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.zE,{label:"Attribute",value:e.get("attribute")||"ali",onChange:e=>t("attribute",e),options:s}),(0,_.jsx)(l.zE,{label:"Scope",value:e.get("scope")||"unset",onChange:e=>t("scope",e),options:[{value:"unset",label:"Unset"},...y.Ud]}),(0,_.jsx)(l.zE,{label:"Results per page",value:e.get("pageSize")||12,onChange:e=>t("pageSize",e),options:[12,24,48,96]})]})}function ie(){const{searchParams:e,addQueryParam:t}=Q();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.Do,{label:"Only Complete",value:"true"===e.get("showComplete"),onChange:e=>t("showComplete",e?"true":""),className:"full-width m-0"}),(0,_.jsx)(l.Do,{label:"Show Unrelated",value:"true"===e.get("showUnrelated"),onChange:e=>t("showUnrelated",e?"true":""),className:"full-width m-0"}),(0,_.jsx)(l.Do,{label:"Show Unclear",value:"true"===e.get("showUnclear"),onChange:e=>t("showUnclear",e?"true":""),className:"full-width m-0"})]})}function se(){const{searchParams:e,addQueryParam:t}=Q();return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(l.Do,{label:"Show Glyphs",value:"true"===e.get("showGlyphs"),onChange:e=>t("showGlyphs",e?"true":""),className:"full-width m-0"})})}function re(){const{isDirty:e,save:t,prepareItemsAttributesFileForDownload:i,attributes:s,isSaving:r,attributesToUpdate:c}=F(),{view:m,setView:p}=Q();return(0,_.jsxs)(d.Pd,{children:[(0,_.jsxs)(n.Z,{vertical:!0,gap:12,children:[(0,_.jsx)(u.k,{isDirty:e,onSave:t,isSaving:r,dirt:JSON.stringify(c)}),(0,_.jsx)(o.o,{data:()=>function(e,t){const i=Object.keys(t).length;return Object.keys(e).forEach((s=>{const r=e[s],n=Object.keys(r.attributes);n.forEach((e=>{t[e]||delete r.attributes[e]}));n.length===i?(r.complete=!0,r.score=P(r),r.reliability=w(r,i),r.signature=T(r,t,{onlyRelevant:!0})):(r.complete=void 0,r.score=void 0,r.reliability=void 0,r.signature=void 0)})),(0,L.Tj)((0,L.ET)(e))}(i(),s),fileName:"items-attribute-values.json",disabled:e,block:!0})]}),(0,_.jsx)(a.Z,{}),(0,_.jsx)(X,{}),(0,_.jsx)(l.zE,{label:"View",value:m,onChange:p,options:["classifier","sampler","grouping","comparator","simulator","stats"]}),(0,_.jsx)(a.Z,{}),"classifier"===m&&(0,_.jsx)(H,{}),"sampler"===m&&(0,_.jsx)(ee,{}),"grouping"===m&&(0,_.jsx)(te,{}),"comparator"===m&&(0,_.jsx)(ie,{}),"stats"===m&&(0,_.jsx)(se,{})]})}var ne=i(4664),ae=i(9416),le=i(263);function oe(e){const[t,i]=(0,S.useState)(!1),s=()=>{i(window.scrollY>300)};return(0,le.Z)((()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}))),(0,_.jsx)($.ZP,(0,c.Z)((0,c.Z)({className:"go-to-top-button ".concat(t?"visible":""),onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},icon:(0,_.jsx)(ae.Z,{})},e),{},{children:"Go to Top"}))}var ue=i(6473),de=i(7305),ce=i(1046),me=i(8158),pe=i(4424),ge=i(7557),he=i(8624),be=i(1431);function xe(e){let{title:t,icon:i}=e;return(0,_.jsx)(be.Z,{title:t,children:null!==i&&void 0!==i?i:(0,_.jsx)(he.Z,{})})}const ve=[{label:"Opposite",value:y.NL.OPPOSITE},{label:"Unrelated",value:y.NL.UNRELATED},{label:"Unclear",value:y.NL.UNCLEAR},{label:"Related",value:y.NL.RELATED},{label:"Deterministic",value:y.NL.DETERMINISTIC}],je=[{label:"Opposite",value:y.NL.OPPOSITE},{label:"Unrelated",value:y.NL.UNRELATED},{label:"Unclear",value:y.NL.UNCLEAR},{label:"Related",value:y.NL.RELATED},{label:"Deterministic",value:y.NL.DETERMINISTIC,disabled:!0}];function fe(e){let{attribute:t,value:i,onChange:s,onlyButtons:r,size:n}=e;return t?r?(0,_.jsx)(pe.ZP.Group,{options:t.limited?je:ve,onChange:e=>{let{target:{value:i}}=e;return s(t.id,i)},value:i,optionType:"button",buttonStyle:"solid",size:n}):(0,_.jsxs)("div",{className:"attribute-button-container__row",children:[(0,_.jsxs)("span",{className:"attribute-button-container__label",children:[(0,p.truncate)(t.name.en,{length:12})," ",(0,_.jsx)(xe,{title:t.description.en})]}),(0,_.jsx)(pe.ZP.Group,{options:t.limited?je:ve,onChange:e=>{let{target:{value:i}}=e;return s(t.id,i)},value:i,optionType:"button",buttonStyle:"solid",size:n}),(0,_.jsx)("span",{children:(0,_.jsx)(ge.Z,{style:{color:i&&i>7?"green":"transparent"}})})]},t.id):(0,_.jsx)(_.Fragment,{})}var ye=i(3733),Ie=i(2997);function Ze(e){let{itemAttributeValues:t,attributes:i}=e;const{searchParams:s,addQueryParam:r}=Q(),a="true"===s.get("showUnclear"),o="true"===s.get("showUnrelated"),u=(0,S.useMemo)((()=>C(N(t,i),a,o)),[t,i,a,o]),d="true"===s.get("signs")?Ne:Ee;return(0,_.jsxs)(n.Z,{gap:6,vertical:!0,children:[(0,_.jsx)(l.Do,{label:"Show Unrelated",value:"true"===s.get("showUnrelated"),onChange:e=>r("showUnrelated",e?"true":""),className:"full-width m-0"}),(0,_.jsx)(l.Do,{label:"Show Unclear",value:"true"===s.get("showUnclear"),onChange:e=>r("showUnclear",e?"true":""),className:"full-width m-0"}),(0,_.jsx)(l.Do,{label:"Alien Sings",value:"true"===s.get("signs"),onChange:e=>r("signs",e?"true":""),className:"full-width m-0"}),(0,_.jsx)(n.Z,{gap:6,wrap:"wrap",className:"item-attribute-value-statement",children:u.map(((e,t,s)=>(0,_.jsx)(d,{keyVariant:e,attributes:i,firstElement:0===t,lastElement:t===s.length-1},e)))})]})}function Ne(e){let{keyVariant:t,attributes:i,withText:s}=e;const{key:r,className:a,text:l}=E(t);return(0,_.jsxs)(n.Z,{vertical:!0,align:"center",children:[(0,_.jsx)(Ie.o$,{width:50,id:i[r].spriteId,className:(0,ye.Z)("item-attribute-alien-sign","item-attribute-alien-sign--".concat(a))}),s&&(0,_.jsxs)(n.Z,{wrap:"wrap",justify:"center",align:"center",style:{maxWidth:50,textAlign:"center",wordBreak:"break-word"},children:[l," ",i[r].name.en.toLowerCase()]})]})}function Ee(e){let{keyVariant:t,attributes:i,firstElement:s,lastElement:r}=e;const{key:n,text:a}=E(t),l=s?"It's ":"",o=r?".":", ";return(0,_.jsxs)(_.Fragment,{children:[l,a," ",i[n].name.en.toLowerCase(),o]})}var Ce=i(1532),Te=i(4587);function Ae(e){let{attributesList:t,itemAttributeValues:i}=e;const{completion:s,isDeterministic:r,value:a,isOpposing:l,relevancy:o}=(0,S.useMemo)((()=>{const e=t.length,s=Object.keys(i.attributes).length,r=Math.floor(s/e*100);let n=!1,a=!1,l=0;const o=Object.values(i.attributes).reduce(((e,t)=>t<=0?(t===y.NL.UNCLEAR&&(l+=1),t===y.NL.OPPOSITE&&(a=!0,e+=t/2),e):(t===y.NL.DETERMINISTIC&&(n=!0),e+t)),0),u=Math.floor((s-l)/e*100);return{completion:r,isDeterministic:n,value:o,isOpposing:a,relevancy:u}}),[t,i.attributes]);return(0,_.jsxs)("div",{children:[(0,_.jsx)(K.Z.Text,{strong:!0,children:"Completion"}),(0,_.jsx)(Te.Z,{percent:s,size:"small"}),(0,_.jsx)(K.Z.Text,{strong:!0,children:"Stats"}),(0,_.jsxs)(n.Z,{vertical:!0,children:[(0,_.jsx)(J,{label:"Deterministic",children:r?(0,_.jsx)(ge.Z,{style:{color:"green"}}):(0,_.jsx)(Ce.Z,{style:{color:"red"}})}),(0,_.jsx)(J,{label:"Opposing",children:l?(0,_.jsx)(ge.Z,{style:{color:"CornflowerBlue"}}):(0,_.jsx)(Ce.Z,{style:{color:"grey"}})}),(0,_.jsx)(J,{label:"Value",children:a}),(0,_.jsx)(be.Z,{title:"The percentage of conclusive attributes (not unclear)",children:(0,_.jsxs)(J,{label:"Reliability",children:[o,"%"]})})]})]})}function Pe(){const{activeItem:e,attributesList:t,itemAttributeValues:i,onAttributeChange:s,jumpToItem:r,attributes:l}=F(),{searchParams:o,removeQueryParam:u}=Q(),d=o.get("itemId"),c=o.get("filters");(0,S.useEffect)((()=>{d&&(u("itemId"),r("goTo",d))}),[d,r,u]);const m="unset"===o.get("scope"),p=(0,S.useMemo)((()=>{const e=m?t.filter((e=>!i.attributes[e.id])):t;if(c){const t=c.split(",").reduce(((e,t)=>(e[t]=!0,e)),{});return e.filter((e=>t[e.id]))}return e}),[m,e.id,c]);return e?(0,_.jsx)(ue.Z,{children:(0,_.jsxs)("div",{className:"item-attribution-card",children:[(0,_.jsx)(de.Z,{offsetTop:120,className:"item-attribution-card__item",children:(0,_.jsxs)(n.Z,{vertical:!0,gap:6,children:[(0,_.jsx)(me.xL,{item:e,width:150}),(0,_.jsx)(me.bN,{item:e}),(0,_.jsx)(me.CQ,{item:e,language:"en"}),(0,_.jsx)(me.CQ,{item:e,language:"pt"}),(0,_.jsx)(a.Z,{className:"my-2"}),(0,_.jsx)(Ae,{attributesList:t,itemAttributeValues:i}),(0,_.jsx)(a.Z,{className:"my-2"}),(0,_.jsx)(K.Z.Text,{type:"secondary",children:(0,_.jsx)(Ze,{itemAttributeValues:i,attributes:l})})]})}),(0,_.jsx)(ce.Z,{size:"small",direction:"vertical",className:"my-4 attribute-button-container",wrap:!0,children:p.map((e=>(0,_.jsx)(fe,{attribute:e,value:i.attributes[e.id],onChange:s},e.id)))})]},"".concat(e.id))}):(0,_.jsx)(ue.Z,{children:(0,_.jsxs)(K.Z.Text,{type:"secondary",children:["No item selected."," ",(0,_.jsx)($.ZP,{size:"small",type:"primary",onClick:()=>r("random"),children:"Random Item"})]})})}var we=i(9228),Se=i(906),Le=i(9515),ke=i(9617),De=i(6864),Ue=i(1938),Oe=i(5542),Re=i(6588),Me=i(609),ze=i(2033),_e=i(8178),Ve=i(4766);function Be(){const{jumpToItem:e}=F();return(0,_.jsxs)($.ZP.Group,{children:[(0,_.jsx)($.ZP,{onClick:()=>e("first"),icon:(0,_.jsx)(Le.Z,{}),children:"First"}),(0,_.jsx)($.ZP,{onClick:()=>e("previous10"),icon:(0,_.jsx)(ke.Z,{}),children:"Previous 10"}),(0,_.jsx)($.ZP,{onClick:()=>e("previous"),icon:(0,_.jsx)(De.Z,{}),children:"Previous"}),(0,_.jsxs)($.ZP,{onClick:()=>e("next"),children:["Next ",(0,_.jsx)(Ue.Z,{})]}),(0,_.jsxs)($.ZP,{onClick:()=>e("next10"),children:["Next 10 ",(0,_.jsx)(Oe.Z,{})]}),(0,_.jsxs)($.ZP,{onClick:()=>e("last"),children:["Last ",(0,_.jsx)(Re.Z,{})]}),(0,_.jsx)(we.Z,{content:(0,_.jsx)(Fe,{}),title:"Go to item",children:(0,_.jsx)($.ZP,{children:"Go To"})}),(0,_.jsx)($.ZP,{onClick:()=>e("incomplete"),children:"Next Incomplete"})]})}function Fe(){const{jumpToItem:e}=F();return(0,_.jsx)(_e.i,{isPending:!1,onFinish:t=>e("goTo",t)})}function Ge(){const{addParam:e,queryParams:t}=(0,Ve.K)(),{attributesList:i}=F(),s=(0,S.useMemo)((()=>i.map((e=>({label:e.name.en,value:e.id})))),[i]),r=t.get("filters"),n=(0,_.jsx)(Se.Z,{mode:"multiple",style:{width:300},options:s,value:null===r||void 0===r?void 0:r.split(","),onChange:t=>(t=>{e("filters",t.join(","))})(t),allowClear:!0});return(0,_.jsx)(we.Z,{content:n,title:"Filter Attributes",children:(0,_.jsx)($.ZP,{children:r?(0,_.jsx)(Me.Z,{style:{color:"gold"}}):(0,_.jsx)(ze.Z,{})})})}var Qe=i(5625);var qe=i(3320),Ke=i(5922);function $e(){const{searchParams:e,removeQueryParam:t}=Q(),i=e.get("drawer"),[s,r]=(0,S.useState)(!1),{activeItem:l,attributesList:o,itemAttributeValues:u,onAttributeChange:d,jumpToItem:c}=F();(0,S.useEffect)((()=>{i&&c("goTo",i)}),[i,c,t]);const m=(0,S.useMemo)((()=>s?o.filter((e=>!u.attributes[e.id])):o),[s,l.id]);return(0,_.jsxs)(qe.Z,{open:!!i,title:"Edit: ".concat(l.name.en),onClose:()=>{t("drawer")},width:"640px",children:[(0,_.jsxs)(n.Z,{gap:6,children:[(0,_.jsxs)(n.Z,{vertical:!0,gap:6,children:[(0,_.jsx)(me.xL,{item:l,width:50}),(0,_.jsx)(me.bN,{item:l})]}),(0,_.jsxs)(n.Z,{vertical:!0,gap:6,children:[(0,_.jsx)(me.CQ,{item:l,language:"en"}),(0,_.jsx)(me.CQ,{item:l,language:"pt"})]}),(0,_.jsx)(n.Z,{vertical:!0,gap:6,children:(0,_.jsx)(Ke.Z,{checked:s,onChange:r,checkedChildren:"Unset",unCheckedChildren:"All"})})]}),(0,_.jsx)(a.Z,{className:"my-1"}),(0,_.jsx)(ce.Z,{size:"small",direction:"vertical",className:"my-4 attribute-button-container",wrap:!0,children:m.map((e=>(0,_.jsx)(fe,{size:"small",attribute:e,value:u.attributes[e.id],onChange:d},e.id)))})]})}function Ye(){const{attributes:e}=F(),{itemMessages:t,grouping:i}=function(){const{attributes:e,getItemAttributeValues:t,availableItemIds:i,getItem:s,isLoading:r}=F(),{searchParams:n}=Q(),a="true"===n.get("showComplete"),l="true"===n.get("showUnclear"),o="true"===n.get("showUnrelated"),{itemMessages:u,itemMessagesDict:d,grouping:c}=(0,S.useMemo)((()=>{if(r)return{itemMessages:[],itemMessagesDict:{},grouping:{}};const n=(0,p.orderBy)(i.map((i=>{const r=t(i),n=N(r,e);return{item:s(i),itemAttributesValues:r,message:C(n,l,o),fullMessage:n}})).filter((e=>{let{itemAttributesValues:t}=e;return!a||t.complete})),["message"],["asc"]),u=n.reduce(((e,t)=>{let{message:i,item:{id:s}}=t;const r=i.join(" ");return void 0===e[r]&&(e[r]=[]),e[r].push(s),e}),{}),d=Object.values(u).filter((e=>e.length>1));return d.length>0&&console.log("More than one",d),{itemMessages:n,itemMessagesDict:(0,p.keyBy)(n,"item.id"),grouping:u}}),[e,i,t,s,r,a,l,o]);return{itemMessages:u,itemMessagesDict:d,grouping:c}}(),{addQueryParam:s}=Q(),r=[{title:"Item Id",dataIndex:"item",key:"id",render:e=>(0,_.jsxs)("div",{children:[(0,_.jsx)(me.bN,{item:e}),(0,_.jsxs)($.ZP.Group,{children:[(0,_.jsx)(me.cw,{item:e}),(0,_.jsx)($.ZP,{size:"small",shape:"round",onClick:()=>s("drawer",e.id),children:"Drawer"})]})]}),sorter:(e,t)=>Number(e.item.id)-Number(t.item.id)},{title:"Sprite",dataIndex:"item",key:"sprite",render:e=>(0,_.jsx)(me.xL,{item:e,width:75})},{title:"Name",dataIndex:"item",key:"name",render:e=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(me.CQ,{item:e,language:"en"}),(0,_.jsx)(me.CQ,{item:e,language:"pt"})]}),sorter:(e,t)=>e.item.name.en.localeCompare(t.item.name.en)},{title:"Address",dataIndex:"message",key:"message",render:(t,i)=>{let{item:s}=i;return(0,_.jsx)(n.Z,{gap:6,children:t.map(((t,i,r)=>(0,_.jsx)(Ne,{keyVariant:t,attributes:e,firstElement:0===i,lastElement:i===r.length-1,withText:!0},"".concat(t,"-").concat(s.id))))})},sorter:(e,t)=>e.message.join(" ").localeCompare(t.message.join(" "))},{title:"Complete",dataIndex:"itemAttributesValues",key:"complete",render:e=>e.complete?"Yes":"No"},{title:"Identical",dataIndex:"message",key:"identical",render:e=>{var t;const s=null!==(t=i[e.join(" ")])&&void 0!==t?t:[];return(0,_.jsx)(_.Fragment,{children:s.length>1?s.length:"0"})},sorter:(e,t)=>{var s,r;const n=null!==(s=i[e.message.join(" ")])&&void 0!==s?s:[];return(null!==(r=i[t.message.join(" ")])&&void 0!==r?r:[]).length-n.length}}];return(0,_.jsxs)("div",{className:"my-4",children:[(0,_.jsx)(K.Z.Title,{level:5,children:"Item Comparator"}),(0,_.jsx)(Qe.Z,{dataSource:t,columns:r,pagination:{showQuickJumper:!0}}),(0,_.jsx)($e,{})]})}var Je=i(2658),We=i(1082);var Xe=i(1503);const He=(e,t)=>"unset"!==t&&t?"".concat(e.percent,"%  - ").concat(e.group," items"):"".concat(100-e.percent,"% done, ").concat(e.group," left");function et(){const{getItem:e,getItemAttributeValues:t,attributesList:i}=F(),{attribute:s,pageIds:r,updateAttributeValue:a,updatePageItemsAsUnrelated:l,pagination:o,stats:u,sorting:d}=function(){var e,t,i,s;const{attributesList:r,addAttributesToUpdate:n,getItemAttributeValues:a,availableItemIds:l,addMultipleAttributesToUpdate:o}=F(),{searchParams:u,addQueryParam:d}=Q(),m=null!==(e=u.get("attribute"))&&void 0!==e?e:"ali",g=null!==(t=u.get("scope"))&&void 0!==t?t:"unset",h=null!==(i=u.get("page"))&&void 0!==i?i:"1",b=null!==(s=u.get("pageSize"))&&void 0!==s?s:"12",[x,v]=(0,S.useState)("ali"),[j,f]=(0,S.useState)("unset"),[I,Z]=(0,S.useState)(null),[N,E]=(0,S.useState)("desc"),C=(0,S.useMemo)((()=>{const e=l.map((e=>a(e))),t="unset"===g?void 0:y.NL[g.toUpperCase()],i=e.filter((e=>{var i;return(null===(i=e.attributes)||void 0===i?void 0:i[m])===t})).map((e=>e.id)),[s,r]=(null!==I&&void 0!==I?I:"::").split("::");return(0,p.orderBy)(i,[e=>{var t,i;return"attribute"!==s||(null===(t=a(e))||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i[r])},e=>"prop"!==s||Number(e),e=>{var t;return null===(t=a(e))||void 0===t?void 0:t.updatedAt},e=>Number(e)],[N,"asc","desc","asc"])}),[m,g,I,N]),T=(0,S.useMemo)((()=>{if(x!==m||j!==g)return v(m),f(g),d("page","1"),C.slice(0,Number(b));const e=(Number(h)-1)*Number(b),t=e+Number(b);return C.slice(e,t)}),[h,b,C]),A=r.find((e=>e.id===m));return{group:C,stats:{total:l.length,group:C.length,percent:Math.round(C.length/l.length*100)},pageIds:T,attribute:A,updateAttributeValue:(e,t,i)=>{const s=a(e);n(e,(0,c.Z)((0,c.Z)({},s),{},{attributes:(0,c.Z)((0,c.Z)({},s.attributes),{},{[t]:i})}))},updatePageItemsAsUnrelated:()=>{o(T.map((e=>{const t=a(e);return t.attributes[m]||(t.attributes[m]=y.NL.UNRELATED),t})))},sorting:{sortBy:I,setSortBy:Z,sortOrder:N,setSortOrder:E},pagination:{total:C.length,current:Number(h),pageSize:Number(b),onChange:e=>d("page",String(e)),onShowSizeChange:(e,t)=>d("pageSize",String(t)),pageSizeOptions:[12,24,48,96]}}}(),{searchParams:m,addQueryParam:g}=Q(),h=(0,Xe.Z)("(max-width: 1024px)");if((0,p.isEmpty)(s))return(0,_.jsx)(ue.Z,{className:"my-4",children:(0,_.jsx)(K.Z.Text,{type:"secondary",children:"No group attribute has been selected."})});const b=(0,_.jsx)(Je.Z,{onChange:o.onChange,current:o.current,total:o.total,pageSizeOptions:o.pageSizeOptions,pageSize:o.pageSize,onShowSizeChange:o.onShowSizeChange},"pagination"),x=(0,_.jsxs)(n.Z,{align:"center",children:[(0,_.jsx)(K.Z.Text,{className:"mr-2",children:"Sort by"}),(0,_.jsxs)(Se.Z,{style:{width:120},value:d.sortBy,onChange:e=>d.setSortBy(e),children:[(0,_.jsx)(Se.Z.Option,{value:null,children:"Last Updated"}),(0,_.jsx)(Se.Z.Option,{value:"prop::id",children:"Id"}),i.map((e=>(0,_.jsx)(Se.Z.Option,{value:"attribute::".concat(e.id),children:e.name.en},e.id)))]})]}),v=("unset"===m.get("scope")||!m.get("scope"))&&(0,_.jsx)(We.Z,{title:"Are you sure everything is unrelated to ".concat(s.name.en,"?"),onConfirm:l,children:(0,_.jsx)($.ZP,{type:"primary",danger:!0,disabled:0===r.length,children:"Unrelate Unset Items on Page"})},"unrelate-button");return(0,_.jsxs)(ue.Z,{className:"my-4",title:(0,_.jsxs)(K.Z.Text,{children:[null===s||void 0===s?void 0:s.name.en," (",He(u,m.get("scope")),") -"," ",s.description.en]}),extra:(0,_.jsxs)(n.Z,{align:"center",children:[x,b]}),actions:[v,(0,_.jsx)(oe,{},"go-to-top"),b].filter(Boolean),children:[0===r.length&&(0,_.jsx)(ne.Z,{description:"No items found in this scope for this attribute.",image:ne.Z.PRESENTED_IMAGE_SIMPLE}),r.map((i=>{const r=t(i),l=e(i);return(0,_.jsx)(ue.Z.Grid,{style:{width:h?"50%":"25%"},children:(0,_.jsxs)(n.Z,{gap:6,children:[(0,_.jsxs)(n.Z,{vertical:!0,gap:6,children:[(0,_.jsx)(me.xL,{item:l,width:75}),(0,_.jsx)(me.bN,{item:l}),(0,_.jsxs)($.ZP.Group,{children:[(0,_.jsx)(me.cw,{item:l}),(0,_.jsx)($.ZP,{size:"small",shape:"round",onClick:()=>g("drawer",l.id),children:"Drawer"})]}),(0,_.jsx)(me.CQ,{item:l,language:"en"}),(0,_.jsx)(me.CQ,{item:l,language:"pt"})]}),(0,_.jsx)(fe,{attribute:s,value:r.attributes[s.id],onlyButtons:!0,onChange:(e,t)=>a(l.id,e,t)})]})},"".concat(i,"-").concat(r.updatedAt))})),(0,_.jsx)($e,{})]})}var tt=i(324);function it(){const{attributesList:e,availableItemIds:t,addAttributesToUpdate:i,getItemAttributeValues:s}=F(),{searchParams:r}=Q(),[n,a]=(0,S.useState)([]),[l,o]=(0,S.useState)(),u=()=>{var i,n,a,l;const o=null!==(i=null!==(n=r.get("attribute"))&&void 0!==n?n:null===(a=(0,p.sample)(e))||void 0===a?void 0:a.id)&&void 0!==i?i:"ali",u=null!==(l=e.find((e=>e.id===o)))&&void 0!==l?l:(0,p.sample)(e),d=Number(r.get("size"))||9,c=[],m=(0,p.shuffle)(t);for(let e=0;e<m.length&&c.length!==d;e++){const t=m[e];s(t).attributes[o]||c.push(t)}return{selectedAttribute:u,selected:c}},d=(0,S.useMemo)((()=>l?t.filter((e=>!s(e).attributes[null===l||void 0===l?void 0:l.id])).length:0),[l,t]);return{sampleIds:n,attribute:l,itemsLeftForAttribute:d,onGetSample:()=>{let e=u(),t=0;for(;0===e.selected.length&&t<30;)e=u(),t++;o(e.selectedAttribute),a(e.selected)},updateAttributeValue:(e,t,r)=>{const n=s(e);i(e,(0,c.Z)((0,c.Z)({},n),{},{attributes:(0,c.Z)((0,c.Z)({},n.attributes),{},{[t]:r})}))}}}var st=i(2675);function rt(){const{getItem:e,getItemAttributeValues:t}=F(),{sampleIds:i,attribute:s,onGetSample:r,updateAttributeValue:l,itemsLeftForAttribute:o}=it(),{addQueryParam:u}=Q();if((0,p.isEmpty)(i)&&(0,p.isEmpty)(s))return(0,_.jsxs)(ue.Z,{className:"my-4",children:[(0,_.jsxs)(K.Z.Text,{type:"secondary",children:["No sample has been generated. Tweak options and"," ",(0,_.jsx)($.ZP,{size:"small",type:"primary",onClick:r,children:"Get Sample"})]}),(0,_.jsx)(a.Z,{}),(0,_.jsx)(nt,{})]});const d=i.map((i=>({itemAttributes:t(i),item:e(i)}))),c=d.filter((e=>{let{itemAttributes:t}=e;return(null===s||void 0===s?void 0:s.id)&&!t.attributes[s.id]}));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(nt,{}),(0,_.jsxs)(ue.Z,{className:"my-4",title:(0,_.jsxs)(K.Z.Text,{children:[null===s||void 0===s?void 0:s.name.en," - ",null===s||void 0===s?void 0:s.description.en," (",o," items left)"]}),actions:[(0,_.jsx)($.ZP,{onClick:()=>{c.forEach((e=>{let{item:t}=e;null!==s&&void 0!==s&&s.id&&l(t.id,s.id,-3)}))},danger:!0,disabled:0===c.length,children:"Mark rest as unrelated"},"1"),(0,_.jsx)($.ZP,{type:"primary",ghost:!0,onClick:r,children:"Get New Sample"},"2")],extra:(0,_.jsx)($.ZP,{type:"primary",size:"small",onClick:r,children:"Get New Sample"}),children:[(0,_.jsxs)(n.Z,{vertical:!0,gap:6,children:[0===d.length&&(0,_.jsx)(ne.Z,{description:"No unset items found for this attribute.",image:ne.Z.PRESENTED_IMAGE_SIMPLE}),d.map((e=>{let{item:t,itemAttributes:i}=e;return(0,_.jsxs)(S.Fragment,{children:[(0,_.jsxs)(n.Z,{gap:6,children:[(0,_.jsx)(me.xL,{item:t,width:75}),(0,_.jsxs)(n.Z,{vertical:!0,gap:6,children:[(0,_.jsxs)(n.Z,{gap:6,children:[(0,_.jsx)(me.bN,{item:t}),(0,_.jsxs)($.ZP.Group,{children:[(0,_.jsx)(me.cw,{item:t}),(0,_.jsx)($.ZP,{size:"small",shape:"round",onClick:()=>u("drawer",t.id),children:"Drawer"})]})]}),(0,_.jsx)(me.CQ,{item:t,language:"en"}),(0,_.jsx)(me.CQ,{item:t,language:"pt"})]}),!!s&&(0,_.jsx)(fe,{attribute:s,value:i.attributes[s.id],onChange:(e,i)=>l(t.id,e,i)})]}),(0,_.jsx)(a.Z,{className:"my-1"})]},"".concat(t.id,"-").concat(i.updatedAt))}))]}),(0,_.jsx)($e,{})]})]})}function nt(){const[e,t]=(0,st.Z)(!1),{addQueryParam:i,removeQueryParam:s}=Q(),{sampleIds:r,attribute:a,onGetSample:l,updateAttributeValue:o}=it(),{getItem:u,getItemAttributeValues:d}=F(),c=()=>{s("size"),t(!1)},m=r[0],p=u(m),g=d(m);return(0,_.jsxs)(n.Z,{className:"mt-4",children:[(0,_.jsx)($.ZP,{type:"primary",onClick:()=>{i("size","1"),t(!0),l()},children:"Single Sampler"}),(0,_.jsxs)(tt.Z,{title:(0,_.jsxs)(K.Z,{children:["Single Sampler: ",(0,_.jsx)("strong",{children:null===a||void 0===a?void 0:a.name.en})]}),open:e,width:"100vw",maskClosable:!1,onOk:c,onClose:c,onCancel:c,cancelButtonProps:{style:{display:"none"}},children:[m&&p&&g&&a&&(0,_.jsxs)(n.Z,{gap:6,className:"my-10",wrap:"wrap",children:[(0,_.jsx)(me.xL,{item:p,width:150}),(0,_.jsxs)(n.Z,{vertical:!0,gap:6,children:[(0,_.jsxs)(n.Z,{gap:6,children:[(0,_.jsx)(me.bN,{item:p}),(0,_.jsx)(me.cw,{item:p})]}),(0,_.jsx)(me.CQ,{item:p,language:"en"}),(0,_.jsx)(me.CQ,{item:p,language:"pt"})]}),!!a&&(0,_.jsx)(fe,{size:"large",attribute:a,value:g.attributes[a.id],onChange:async(e,t)=>{o(p.id,e,t),await(0,L.Dc)(500),l()}})]},m),(0,_.jsx)($.ZP,{onClick:l,children:"Another Sample"})]})]})}var at=i(7844),lt=i(7974),ot=i(3281),ut=i(3949),dt=i(9793),ct=i(9263);function mt(){const e=(0,U.N)("items-attributes"),t=(0,U.N)("items-attribute-values"),[i,s]=(0,S.useState)(null);return(0,_.jsxs)("div",{className:"my-4",children:[(0,_.jsx)(K.Z.Title,{level:3,children:"Daily Simulator"}),(0,_.jsx)(K.Z.Paragraph,{children:"Generates a daily game for Alien Communication"}),(0,_.jsxs)(ce.Z,{children:[(0,_.jsx)($.ZP,{type:"primary",onClick:()=>{s(pt(e.data,t.data))},children:"Generate"}),(0,_.jsx)($.ZP,{onClick:()=>{const i={};let s=0;for(;s<300||15===(0,p.keys)(i).length;){const r=pt(e.data,t.data);if(r.valid&&!i[r.setId]&&(i[r.setId]=r),(0,p.keys)(i).length>=15)break;s+=1}console.log("TRIES",s),console.log(Object.values(i).map(((e,t)=>(0,c.Z)((0,c.Z)({},e),{},{number:e.number-t}))))},children:"Generate List"})]}),(0,_.jsx)("div",{children:Boolean(i)&&(0,_.jsxs)(ce.Z,{direction:"vertical",children:[(0,_.jsx)(K.Z.Title,{level:5,children:null===i||void 0===i?void 0:i.setId}),!(null!==i&&void 0!==i&&i.valid)&&(0,_.jsx)(ct.Z,{type:"error",message:"Invalid game"}),(0,_.jsx)(ce.Z,{direction:"vertical",children:null===i||void 0===i?void 0:i.attributes.map((e=>(0,_.jsxs)(n.Z,{gap:8,children:[(0,_.jsx)(Ie.o$,{id:e.spriteId,width:50}),e.itemsIds.map((e=>(0,_.jsx)(Ie.ck,{id:e||"0",width:50},e)))]},e.id)))}),(0,_.jsx)(a.Z,{className:"my-1"}),(0,_.jsx)(ce.Z,{direction:"horizontal",children:null===i||void 0===i?void 0:i.requests.map((e=>(0,_.jsxs)(n.Z,{vertical:!0,children:[(0,_.jsx)(Ie.o$,{id:e.spritesIds[2],width:50}),(0,_.jsx)(Ie.o$,{id:e.spritesIds[1],width:50}),(0,_.jsx)(Ie.o$,{id:e.spritesIds[0],width:50})]},e.itemId)))}),(0,_.jsx)(a.Z,{className:"my-1"}),(0,_.jsx)(ce.Z,{direction:"horizontal",children:null===i||void 0===i?void 0:i.itemsIds.map((e=>(0,_.jsx)(Ie.ck,{id:e||"0",width:50},e)))})]},null===i||void 0===i?void 0:i.setId)})]})}const pt=(e,t)=>{const i=(0,p.values)(e).filter((e=>!e.limited||"sol"===e.id)),s=(0,p.shuffle)((0,p.values)(t).filter((e=>e.complete))),r=(0,p.shuffle)((0,L.VL)(38,0)),n=(0,p.sampleSize)(i,3).map((e=>(0,c.Z)((0,c.Z)({},e),{},{spriteId:"".concat(r.pop())}))),a=[],l=[],o=[],u=[],d=[],m=[],g=[],h=[];s.forEach((e=>{const t=[y.NL.DETERMINISTIC,y.NL.RELATED],i=e.attributes[n[0].id]===y.NL.DETERMINISTIC,s=t.includes(e.attributes[n[0].id]),r=e.attributes[n[0].id]===y.NL.UNRELATED,c=e.attributes[n[1].id]===y.NL.DETERMINISTIC,p=t.includes(e.attributes[n[1].id]),b=e.attributes[n[1].id]===y.NL.UNRELATED,x=e.attributes[n[2].id]===y.NL.DETERMINISTIC,v=t.includes(e.attributes[n[2].id]),j=e.attributes[n[2].id]===y.NL.UNRELATED;if(r&&b&&j)return h.push(e.id);i&&b&&j&&a.push(e.id),r&&c&&j&&l.push(e.id),r&&b&&x&&o.push(e.id),s&&p&&j&&u.push(e.id),s&&b&&v&&d.push(e.id),r&&p&&v&&m.push(e.id),s&&p&&v&&g.push(e.id)}));const b=n.map((e=>({id:e.id,name:e.name.pt,description:e.description.pt,spriteId:e.spriteId,itemsIds:[]})));b[0].itemsIds=(0,p.sampleSize)(a,a.length>3?3:Math.max(a.length-1,1)),b[1].itemsIds=(0,p.sampleSize)(l,l.length>3?3:Math.max(a.length-1,1)),b[2].itemsIds=(0,p.sampleSize)(o,o.length>3?3:Math.max(a.length-1,1));const x=[];b.forEach((e=>{x.push(...e.itemsIds)}));const v=[];var j,f,I,Z;u.length>0&&v.push({spritesIds:[n[0].spriteId,n[1].spriteId],itemId:null!==(j=(0,p.sample)(u))&&void 0!==j?j:""});d.length>0&&v.push({spritesIds:[n[0].spriteId,n[2].spriteId],itemId:null!==(f=(0,p.sample)(d))&&void 0!==f?f:""});m.length>0&&v.push({spritesIds:[n[1].spriteId,n[2].spriteId],itemId:null!==(I=(0,p.sample)(m))&&void 0!==I?I:""});g.length>0&&v.push({spritesIds:n.map((e=>e.spriteId)),itemId:null!==(Z=(0,p.sample)(g))&&void 0!==Z?Z:""});const N=[];a.length>0&&N.push({spritesIds:[n[0].spriteId],itemId:a.filter((e=>!x.includes(e)))[0]}),l.length>0&&N.push({spritesIds:[n[1].spriteId],itemId:l.filter((e=>!x.includes(e)))[0]}),o.length>0&&N.push({spritesIds:[n[2].spriteId],itemId:o.filter((e=>!x.includes(e)))[0]}),console.log({attributeA:a,attributeB:l,attributeC:o,attributeAB:u,attributeAC:d,attributeBC:m,attributeABC:g}),console.log("COMPLEX REQUEST SIZE",v.length),console.log("SIMPLE REQUEST SIZE",N.length);let E=(0,p.sampleSize)(v,4);console.log("REQUEST SIZE",E.length),E.length<3&&E.push(...(0,p.sampleSize)(N,4-E.length)),E.length<4&&console.warn("Not enough requests"),E=(0,p.shuffle)(E);const C=E.map((e=>e.itemId)),T={id:"2024-00-00",setId:b.map((e=>e.id)).sort().join("-"),number:0,type:"comunica\xe7\xe3o-alien\xedgena",attributes:b,requests:E,solution:C.join("-"),itemsIds:(0,p.shuffle)([...C,h[0],h[1],h[2],h[3]]).filter(Boolean),valid:!1};return T.valid=[3===T.attributes.length,4===T.requests.length,T.itemsIds.length>5,T.attributes.every((e=>e.itemsIds.length>0)),T.requests.every((e=>e.itemId))].every(Boolean),console.log(T),T},gt=["","I","II","III","IV","V"];function ht(){const{attributes:e,availableItemIds:t,getItemAttributeValues:i,getItem:s}=F(),{message:r}=m.Z.useApp(),[a,o]=(0,S.useState)(25),[u,d]=(0,S.useState)(80),[g,h]=(0,S.useState)(!1),[b,x]=(0,S.useState)([]),[v,j]=(0,S.useState)([]),[f,I]=(0,S.useState)(null),[Z,N]=(0,S.useState)({id:!0,nameEn:!0,namePt:!0,reliability:!0}),E=e=>{N((t=>(0,c.Z)((0,c.Z)({},t),{},{[e]:!t[e]})))};return(0,_.jsxs)("div",{className:"my-4",children:[(0,_.jsx)(K.Z.Title,{level:3,children:"Simulator"}),(0,_.jsx)(K.Z.Paragraph,{children:"Generates a board with items different enough to get Deterministic values in all selected attributes."}),(0,_.jsxs)(n.Z,{wrap:!0,gap:12,children:[(0,_.jsx)(l.zE,{label:"Grid Size",value:a,onChange:e=>o(e),options:[16,25]}),(0,_.jsx)(l.xh,{label:"Reliability Threshold",value:u,onChange:e=>d(e),step:5,min:10,max:100}),(0,_.jsx)(l.Do,{label:"NSFW",value:g,onChange:h}),(0,_.jsx)($.ZP,{onClick:()=>{const n={},l=(0,p.shuffle)(t);for(;Object.values(n).length<a;){const e=l.pop();if(!e)break;const t=i(e);t&&(!t.complete||!t.reliability||t.reliability<u||!g&&s(e).nsfw||(t.signature&&!n[t.signature]?n[t.signature]=e:console.log("Item has identical key to another item. Skipping.",s(e).name.en)))}const o=Object.values(n);o.length<a&&r.error("Could not generate sample. Got only ".concat(o.length," items")),x((0,p.sortBy)(o,(e=>Number(e))));const d=function(e,t,i){const s={},r={};e.forEach((e=>{e&&Object.keys(e.attributes).forEach((t=>{e.attributes[t]>0&&(s[t]=(s[t]||0)+1),e.attributes[t]===y.NL.DETERMINISTIC&&(r[t]=!0,s[t]=(s[t]||0)+2),e.attributes[t]===y.NL.OPPOSITE&&(s[t]=(s[t]||0)+1)}))}));const n={1:0,2:0,3:0,4:0};function a(e){return e.filter((e=>(n[i[e].level]++,!(n[4]>1)||(console.log("Discarding level 4 attribute",e),!1))))}const l=a(Object.keys(r)),o=a((0,p.keys)(s).filter((e=>!l.includes(e))));if(console.log({levelCount:n}),t===l.length)return console.log("All keys are deterministic"),l;if(console.log(s),0===l.length)return[];const u=l.reduce(((e,t)=>{const i=s[t];return e[i]||(e[i]=[]),e[i].push(t),e}),{}),d=(0,p.keys)(u).sort(((e,t)=>Number(t)-Number(e)));console.log({sortedDeterministicTiedGroupsKeys:d});const c=o.reduce(((e,t)=>{const i=s[t];return e[i]||(e[i]=[]),e[i].push(t),e}),{});console.log(c);const m=(0,p.keys)(c).sort(((e,t)=>Number(t)-Number(e))),g=[];for(const h of d){if(g.length===t)break;g.push(...(0,p.sampleSize)(u[h],t-g.length))}for(const h of m){if(g.length===t)break;g.push(...(0,p.sampleSize)(c[h],t-g.length))}return g}(o.map((e=>i(e))),25,e);if(d.length<25){const t=(0,p.keys)(e).filter((e=>!d.includes(e))),i=(0,p.sortBy)(t,(t=>e[t].priority)).slice(0,25-d.length);console.log("Adding more attributes by priority",i),d.push(...i)}const m=d.reduce(((e,t)=>(o.forEach((s=>{const r=i(s);if(r)switch(r.attributes[t]){case y.NL.RELATED:e.relatedCount[t]=(e.relatedCount[t]||0)+1;break;case y.NL.DETERMINISTIC:e.deterministicCount[t]=(e.deterministicCount[t]||0)+1;break;case y.NL.UNCLEAR:e.unclearCount[t]=(e.unclearCount[t]||0)+1;break;case y.NL.OPPOSITE:e.oppositeCount[t]=(e.oppositeCount[t]||0)+1}})),e)),{relatedCount:{},deterministicCount:{},unclearCount:{},oppositeCount:{}});j(d.sort().map((t=>(0,c.Z)((0,c.Z)({},e[t]),{},{relatedCount:m.relatedCount[t],deterministicCount:m.deterministicCount[t],unclearCount:m.unclearCount[t],oppositeCount:m.oppositeCount[t]}))))},type:"primary",children:"Get Sample Board"})]}),(0,_.jsxs)(n.Z,{wrap:!0,gap:12,children:[(0,_.jsx)(l.tj,{label:"Show Id",value:!!Z.id,onChange:()=>E("id")}),(0,_.jsx)(l.tj,{label:"Show Name (EN)",value:!!Z.nameEn,onChange:()=>E("nameEn")}),(0,_.jsx)(l.tj,{label:"Show Name (PT)",value:!!Z.namePt,onChange:()=>E("namePt")}),(0,_.jsx)(l.tj,{label:"Show Reliability",value:!!Z.reliability,onChange:()=>E("reliability")})]}),(0,_.jsx)("div",{className:"simulator-grid",style:{gridTemplateColumns:"repeat(".concat(Math.sqrt(a),", 1fr)")},children:b.map((e=>{const t=s(e),r=i(e);return(0,_.jsxs)(ce.Z,{direction:"vertical",className:(0,ye.Z)("simulator-grid__entry",f&&r.attributes[f]>0&&"simulator-grid__entry--highlighted"),align:"center",children:[(0,_.jsxs)(ce.Z,{children:[(0,_.jsxs)(n.Z,{vertical:!0,children:[Z.id&&(0,_.jsx)(me.bN,{item:t}),Z.reliability&&(0,_.jsx)("span",{children:(0,_.jsx)(dt.Z,{prefix:(0,_.jsx)(at.Z,{}),placeholder:"Reliability",variant:"borderless",size:"small",value:r.reliability,readOnly:!0,style:{width:"8ch"},formatter:e=>"".concat(e,"%")})}),Z.id&&(0,_.jsx)(me.cw,{item:t})]}),(0,_.jsx)(me.xL,{item:t,width:50})]}),Z.nameEn&&(0,_.jsx)(me.CQ,{item:t,language:"en"}),Z.namePt&&(0,_.jsx)(me.CQ,{item:t,language:"pt"})]},e)}))}),(0,_.jsx)("div",{className:"simulator-grid my-4",children:v.map((e=>{var t,i,s,r;return(0,_.jsxs)(l.F6,{className:(0,ye.Z)("simulator-grid__entry","simulator-grid__button",f===e.id&&"simulator-grid__entry--highlighted"),onClick:()=>I(e.id),children:[e.name.en," ",gt[e.level],(0,_.jsxs)(n.Z,{gap:6,justify:"center",className:"my-1",children:[(0,_.jsxs)("span",{children:[(0,_.jsx)(lt.Z,{style:{color:e.deterministicCount?"dodgerblue":void 0}})," ",null!==(t=e.deterministicCount)&&void 0!==t?t:0]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(ot.Z,{style:{color:e.relatedCount?"green":void 0}})," ",null!==(i=e.relatedCount)&&void 0!==i?i:0]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(ut.Z,{style:{color:e.oppositeCount?"red":void 0}})," ",null!==(s=e.oppositeCount)&&void 0!==s?s:0]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(he.Z,{style:{color:e.unclearCount?"gold":void 0}})," ",null!==(r=e.unclearCount)&&void 0!==r?r:0]})]})]},e.id)}))}),(0,_.jsx)(mt,{})]})}var bt=i(9486),xt=i(4704),vt=i(18),jt=i(6978),ft=i(7689);function yt(){const{attributes:e}=F(),t=[{key:"1",label:"All Attributes",children:(0,_.jsx)(It,{type:"all"})},{key:"2",label:"Default",children:(0,_.jsx)(It,{type:"default"})},{key:"3",label:"Custom",children:(0,_.jsx)(It,{type:"custom"})},{key:"4",label:"Limited",children:(0,_.jsx)(It,{type:"limited"})},{key:"5",label:"Specific",children:(0,_.jsx)(It,{type:"specific"})},{key:"6",label:"Opposite",children:(0,_.jsx)(It,{type:"opposite"})}];return(0,_.jsxs)("div",{className:"my-4",children:[(0,_.jsxs)(n.Z,{justify:"space-between",align:"center",children:[(0,_.jsx)(K.Z.Title,{level:5,children:"Stats"}),(0,_.jsx)(o.o,{data:()=>function(e){const t=(0,p.cloneDeep)(e);return(0,L.Tj)((0,L.ET)(t),["description","priority","level","spriteId","oppositeId","relatedId","default","limited","specific","keywords"])}(e),fileName:"items-attributes.json",children:"Download Attribute Json"})]}),(0,_.jsx)(vt.Z,{defaultActiveKey:"1",items:t})]})}function It(e){let{type:t}=e;const{availableItemIds:i,getItemAttributeValues:s,attributesList:r}=F(),a=(0,ft.s0)(),{is:l}=(0,Ve.K)(),o=(0,S.useMemo)((()=>{const e=new Array(65).fill(0).map(((e,t)=>t)),t=r.map((e=>e.spriteId));return e.filter((e=>!t.includes("sign-".concat(e))))}),[r]),u=(0,S.useMemo)((()=>"default"===t?r.filter((e=>e.default)):"custom"===t?r.filter((e=>!e.default)):"limited"===t?r.filter((e=>e.limited)):"specific"===t?r.filter((e=>e.specific)):"opposite"===t?r.filter((e=>e.oppositeId)):r),[r,t]),d=(0,S.useMemo)((()=>{const e=i.map((e=>s(e)));return u.map((t=>(0,c.Z)((0,c.Z)({},t),((e,t)=>{let i=0,s=0,r=0,n=0,a=0,l=0,o=0,u=0;t.forEach((t=>{let{attributes:d}=t;if(d[e.id]){i++;const t=d[e.id];10===t?s++:5===t?r++:0!==t&&t?-1===t?a++:-3===t?l++:-10===t&&o++:n++,t>0&&u++}}));const d=t.length,c=s/d*100,m=r/d*100,p=n/d*100,g=a/d*100,h=l/d*100,b=o/d*100,x=u/d*100;return{completionPercentage:(i/d*100).toFixed(1),tensPercentage:c.toFixed(1),fivesPercentage:m.toFixed(1),zerosPercentage:p.toFixed(1),negativeOnesPercentage:g.toFixed(1),negativeThreesPercentage:h.toFixed(1),negativeTensPercentage:b.toFixed(1),positivePercentage:x.toFixed(1)}})(t,e))))}),[u,i,s]),m=[{title:"Attribute",dataIndex:"name",key:"name",render:(e,t)=>(0,_.jsxs)(n.Z,{align:"center",gap:8,children:[l("showGlyphs")&&(0,_.jsx)(Ie.o$,{id:t.spriteId,width:30}),e.en,t.default&&(0,_.jsx)(Y.Z,{className:"ml-1",children:"default"}),t.limited&&(0,_.jsx)(Y.Z,{className:"ml-1",children:"limited"}),(t.specific||t.parentId)&&(0,_.jsx)(Y.Z,{className:"ml-1",children:"specific"}),t.oppositeId&&(0,_.jsx)(Y.Z,{className:"ml-1",children:(0,_.jsx)(bt.Z,{})}),(0,_.jsx)(xe,{title:t.description.en})]}),sorter:(e,t)=>e.name.en.localeCompare(t.name.en)},{title:(0,_.jsx)(xt.Z,{}),dataIndex:"spriteId",key:"spriteId",render:e=>(0,_.jsx)(Ie.o$,{id:e,width:18,padding:0})},{title:"Priority",dataIndex:"priority",key:"priority",sorter:(e,t)=>e.priority-t.priority},{title:"Positive",dataIndex:"positivePercentage",key:"positivePercentage",render:e=>"".concat(e,"%"),sorter:(e,t)=>Number.parseFloat(e.positivePercentage)-Number.parseFloat(t.positivePercentage)},{title:"10",dataIndex:"tensPercentage",key:"tensPercentage",render:(e,t)=>t.limited?"-":"".concat(e,"%"),sorter:(e,t)=>Number.parseFloat(e.tensPercentage)-Number.parseFloat(t.tensPercentage)},{title:"5",dataIndex:"fivesPercentage",key:"fivesPercentage",render:e=>"".concat(e,"%"),sorter:(e,t)=>Number.parseFloat(e.fivesPercentage)-Number.parseFloat(t.fivesPercentage)},{title:"-1",dataIndex:"negativeOnesPercentage",key:"negativeOnesPercentage",render:e=>"".concat(e,"%"),sorter:(e,t)=>Number.parseFloat(e.negativeOnesPercentage)-Number.parseFloat(t.negativeOnesPercentage)},{title:"-3",dataIndex:"negativeThreesPercentage",key:"negativeThreesPercentage",render:e=>"".concat(e,"%"),sorter:(e,t)=>Number.parseFloat(e.negativeThreesPercentage)-Number.parseFloat(t.negativeThreesPercentage)},{title:"-10",dataIndex:"negativeTensPercentage",key:"negativeTensPercentage",render:e=>"".concat(e,"%"),sorter:(e,t)=>Number.parseFloat(e.negativeTensPercentage)-Number.parseFloat(t.negativeTensPercentage)},{title:"Completion",dataIndex:"completionPercentage",key:"completionPercentage",render:e=>(0,_.jsx)(Te.Z,{percent:Number.parseFloat(e),size:"small"}),sorter:(e,t)=>Number.parseFloat(e.completionPercentage)-Number.parseFloat(t.completionPercentage)},{title:"Level",dataIndex:"level",key:"level",render:e=>(0,_.jsx)(jt.Z,{count:4,value:e,disabled:!0}),sorter:(e,t)=>e.level-t.level},{title:"Actions",key:"actions",render:e=>(0,_.jsx)(ce.Z,{children:(0,_.jsxs)($.ZP.Group,{children:[(0,_.jsx)($.ZP,{size:"small",shape:"round",onClick:()=>a("/items/attribution?view=grouping&attribute=".concat(e.id,"&page=1")),children:"Grouping"}),(0,_.jsx)($.ZP,{size:"small",shape:"round",onClick:()=>a("/items/attribution?view=sampler&attribute=".concat(e.id,"&size=6")),children:"Sample"})]})})}];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(K.Z.Paragraph,{children:["Total: ",d.length]}),(0,_.jsx)(Qe.Z,{columns:m,dataSource:d,pagination:!1,rowKey:"id",size:"small"}),(0,_.jsx)(n.Z,{wrap:"wrap",gap:8,children:o.map((e=>(0,_.jsxs)("div",{children:["#",e,(0,_.jsx)(Ie.o$,{id:"sign-".concat(e)},e)]},e)))})]})}function Zt(){const{view:e}=Q();return"classifier"===e?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(n.Z,{className:"my-4",gap:8,children:[(0,_.jsx)(Be,{}),(0,_.jsx)(Ge,{})]}),(0,_.jsx)(Pe,{}),(0,_.jsx)(n.Z,{justify:"flex-end",className:"my-4",children:(0,_.jsx)(oe,{})})]}):"sampler"===e?(0,_.jsx)(rt,{}):"grouping"===e?(0,_.jsx)(et,{}):"comparator"===e?(0,_.jsx)(Ye,{}):"simulator"===e?(0,_.jsx)(ht,{}):"stats"===e?(0,_.jsx)(yt,{}):(0,_.jsx)(ne.Z,{className:"my-10",description:"Unknown view has been selected"})}var Nt=i(4562);function Et(){const{isLoading:e,error:t,hasResponseData:i}=F();return(0,_.jsx)(d.Xg,{title:"Items",subtitle:"Attribution",children:(0,_.jsxs)(s.Z,{hasSider:!0,children:[(0,_.jsx)(Nt.p,{children:(0,_.jsx)(re,{})}),(0,_.jsx)(s.Z.Content,{className:"content",children:(0,_.jsx)(r.T,{isLoading:e,error:t,hasResponseData:i,children:(0,_.jsx)(Zt,{})})})]})})}const Ct=function(){return(0,_.jsx)(B,{children:(0,_.jsx)(Et,{})})}}}]);
//# sourceMappingURL=ItemsAttribution.fa91c644.chunk.js.map