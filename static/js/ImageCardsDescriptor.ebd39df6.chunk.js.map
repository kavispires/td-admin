{"version":3,"file":"static/js/ImageCardsDescriptor.ebd39df6.chunk.js","mappings":"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","sources":["components/Common/FullScreenModal.tsx","components/Common/SaveButton.tsx","components/Images/ImageCard.tsx","hooks/useGetFirebaseDoc.ts","hooks/useResourceFirebaseData.ts","hooks/useTDResource.ts","hooks/useTablePagination.tsx","hooks/useUpdateFirebaseDoc.tsx","components/Images/ImageCards/hooks/useImageCardsDecks.ts","components/Images/ImageCards/ImageCardsDescriptorModal.tsx","components/Images/ImageCards/ImageCardsDescriptorTable.tsx","components/Images/ImageCards/ImageCardsDescriptorContent.tsx","components/Images/ImageCards/ImageCardsDescriptorFilters.tsx","pages/Images/ImageCardsDescriptor.tsx"],"sourcesContent":["import { CloseOutlined } from '@ant-design/icons';\nimport { Button, Card, type CardProps } from 'antd';\nimport clsx from 'clsx';\n\ntype FullScreenModalProps = {\n  open: boolean;\n  onClose: () => void;\n} & Omit<CardProps, 'extra'>;\n\nexport function FullScreenModal({ open, onClose, ...props }: FullScreenModalProps) {\n  return (\n    <Card\n      className={clsx('full-screen-modal', !open && 'full-screen-modal--hidden')}\n      bordered={false}\n      extra={<Button onClick={onClose} type=\"text\" shape=\"circle\" icon={<CloseOutlined />} />}\n      {...props}\n    />\n  );\n}\n","import { Button, type ButtonProps } from 'antd';\nimport moment from 'moment';\nimport { useEffect } from 'react';\nimport { useTimeoutFn } from 'react-use';\n\nimport { SaveOutlined } from '@ant-design/icons';\nimport { useGlobalContext } from 'context/GlobalContext';\n\ntype SaveButtonProps = {\n  isDirty: boolean;\n  dirt?: string | number;\n  onSave: (args?: unknown) => void;\n  isSaving: boolean;\n  interval?: number;\n} & Omit<ButtonProps, 'icon' | 'type' | 'size' | 'danger'>;\n\nexport function SaveButton({\n  isDirty,\n  onSave,\n  isSaving,\n  dirt,\n  interval = 10 * 60 * 1000,\n  ...buttonProps\n}: SaveButtonProps) {\n  const { togglePendingSave } = useGlobalContext();\n\n  // It saves after 10 minutes of the first time of being dirty, unless 'dirt' is provided and changed\n  const [, cancel, reset] = useTimeoutFn(() => {\n    if (isDirty) {\n      onSave();\n    }\n  }, interval); // 10 minutes in milliseconds\n\n  // Reset the timeout if `isDirty` is true and dirt has\n  // biome-ignore lint/correctness/useExhaustiveDependencies: a function shouldn't retrigger the effect\n  useEffect(() => {\n    if (isDirty) {\n      togglePendingSave(true);\n      console.log('Save Reset', moment(Date.now()).format('MM/DD/YYYY HH:mm:ss'));\n      reset(); // Start or reset the timeout if `isDirty` is true and dirt has changed\n    } else {\n      togglePendingSave(false);\n      cancel(); // Cancel the timeout if `isDirty` becomes false\n    }\n  }, [isDirty, reset, cancel, dirt]);\n\n  // Prevents the user from leaving the page if there are unsaved changes (browser navigation or refresh)\n  useEffect(() => {\n    const handleBeforeUnload = (event: any) => {\n      if (isDirty) {\n        const message = 'You have unsaved changes, are you sure you want to leave?';\n        // alert(message);\n        event.returnValue = message; // Standard way to set message\n        return message; // For some browsers\n      }\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [isDirty]);\n\n  return (\n    <Button\n      type=\"primary\"\n      size=\"large\"\n      icon={<SaveOutlined />}\n      onClick={onSave}\n      disabled={!isDirty}\n      loading={isSaving}\n      danger\n      block\n      {...buttonProps}\n    >\n      Save\n    </Button>\n  );\n}\n","// Ant Design Resources\nimport { Image, type ImageProps } from 'antd';\nimport clsx from 'clsx';\n\n// Hooks\nimport { useBaseUrl } from 'hooks/useBaseUrl';\n\nexport type ImageCardProps = {\n  /**\n   * The id of the image\n   */\n  id: string;\n  /**\n   * The width of the card (Default: 200px)\n   */\n  width?: number;\n  /**\n   * Optional custom class name\n   */\n  className?: string;\n  /**\n   * Enables or disables the preview (default: true)\n   */\n  preview?: ImageProps['preview'];\n  /**\n   * The file extension for the image (default: jpg)\n   */\n  fileExtension?: 'jpg' | 'png' | 'gif';\n};\n\n/**\n * Renders an Image Card on tdi\n */\nexport const ImageCard = ({\n  id,\n  width = 200,\n  className = '',\n  preview = true,\n  fileExtension = 'jpg',\n}: ImageCardProps) => {\n  const { getUrl } = useBaseUrl('images');\n  const imageURL = id.replace(/-/g, '/');\n\n  return (\n    <div className={clsx('image-card', className)}>\n      <Image\n        width={width}\n        src={getUrl(`${imageURL}.${fileExtension}`)}\n        fallback={getUrl('back/default.jpg')}\n        preview={preview}\n      />\n    </div>\n  );\n};\n","import { doc, getDoc } from 'firebase/firestore';\nimport { firestore } from 'services/firebase';\n\nimport { type QueryKey, type UseQueryOptions, useQuery } from '@tanstack/react-query';\nimport { getCurrentDateTime } from 'utils';\n\nexport function getDocQueryFunction<TQueryFnData>(path: string, docId: string) {\n  return async () => {\n    console.log(`%cQuerying ${path}/${docId} from firebase: ${getCurrentDateTime()}`, 'color: #f0f');\n    const docRef = doc(firestore, `${path}/${docId}`);\n    const querySnapshot = await getDoc(docRef);\n    return (querySnapshot.data() ?? {}) as TQueryFnData;\n  };\n}\n\nexport function useGetFirebaseDoc<TQueryFnData, TData = TQueryFnData>(\n  path: string,\n  docId: string,\n  options?: Omit<UseQueryOptions<any, Error, TData, QueryKey>, 'queryKey'>,\n) {\n  return useQuery<TQueryFnData, Error, TData, QueryKey>({\n    queryKey: ['firebase', path, docId],\n    queryFn: getDocQueryFunction<TQueryFnData>(path, docId),\n    ...options,\n  });\n}\n","import { App } from 'antd';\nimport { cloneDeep, isEmpty } from 'lodash';\nimport { useMemo, useState } from 'react';\n\nimport { useQueryClient } from '@tanstack/react-query';\n\nimport { deserializeFirebaseData, serializeFirebaseData } from 'utils';\nimport { useGetFirebaseDoc } from './useGetFirebaseDoc';\nimport { useTDResource } from './useTDResource';\nimport { useUpdateFirebaseDoc } from './useUpdateFirebaseDoc';\n\nexport type UseResourceFirebaseDataProps = {\n  tdrResourceName: string;\n  firebaseDataCollectionName: string;\n  serialize?: boolean;\n};\n\nexport type UseResourceFirebaseDataReturnType<TDRData> = {\n  data: Dictionary<TDRData>;\n  isLoading: boolean;\n  error: ResponseError;\n  firebaseData: Dictionary<TDRData> | undefined;\n  isSaving: boolean;\n  save: () => void;\n  addEntryToUpdate: (id: string, item: TDRData) => void;\n  entriesToUpdate: Dictionary<TDRData>;\n  isDirty: boolean;\n};\n\n/**\n * Custom hook that fetches and manages data from both TDR (The Daily Refactor) and Firebase.\n * It merges the data from both sources and provides functions to update and save the data.\n *\n * @template TDRData - The type of data fetched from TDR.\n * @template TFirebaseData - The type of data fetched from Firebase.\n *\n * The hook return object containing the merged data, loading state, error, and functions to update and save the data.\n */\nexport function useResourceFirebaseData<TDRData = PlainObject, TFirebaseData = TDRData>({\n  tdrResourceName,\n  firebaseDataCollectionName,\n  serialize,\n}: UseResourceFirebaseDataProps): UseResourceFirebaseDataReturnType<TDRData> {\n  const { notification } = App.useApp();\n  const queryClient = useQueryClient();\n\n  const tdrQuery = useTDResource<TDRData>(tdrResourceName);\n  const firebaseQuery = useGetFirebaseDoc<Dictionary<TFirebaseData>, Dictionary<TDRData>>(\n    'tdr',\n    firebaseDataCollectionName,\n    {\n      select: serialize ? deserializeFirebaseData : undefined,\n    },\n  );\n\n  // Keeps track of items that have been modified\n  const [modifiedEntries, setModifiedEntries] = useState<Dictionary<TDRData>>({});\n\n  const mutation = useUpdateFirebaseDoc('tdr', firebaseDataCollectionName, {\n    onSuccess: () => {\n      notification.success({\n        message: `${firebaseDataCollectionName} updated`,\n      });\n      queryClient.refetchQueries({\n        queryKey: ['firebase', 'tdr', firebaseDataCollectionName],\n      });\n      setModifiedEntries({});\n    },\n    onError: (error) => {\n      notification.error({\n        message: `${firebaseDataCollectionName} update failed`,\n        description: error.message,\n      });\n    },\n  });\n\n  const data = useMemo(() => {\n    if (!tdrQuery.isSuccess || !firebaseQuery.isSuccess || mutation.isPending) return {};\n\n    console.log(`%cMerging ${tdrResourceName}+${firebaseDataCollectionName} data...`, 'color: #f0f');\n    return cloneDeep({\n      ...(tdrQuery.data ?? {}),\n      ...(firebaseQuery.data ?? {}),\n      ...modifiedEntries,\n    });\n  }, [\n    tdrResourceName,\n    firebaseDataCollectionName,\n    tdrQuery.data,\n    firebaseQuery.data,\n    tdrQuery.isSuccess,\n    firebaseQuery.isSuccess,\n    mutation.isPending,\n    modifiedEntries,\n  ]);\n\n  const isDirty = !isEmpty(modifiedEntries);\n  const addEntryToUpdate = (id: string, item: TDRData) => {\n    setModifiedEntries((prev) => ({ ...prev, [id]: item }));\n  };\n\n  const firebaseData = firebaseQuery.data;\n\n  const save = () => {\n    mutation.mutate(serialize ? serializeFirebaseData(modifiedEntries) : modifiedEntries);\n  };\n\n  return {\n    data,\n    isLoading: tdrQuery.isLoading || firebaseQuery.isLoading,\n    error: tdrQuery.error || firebaseQuery.error,\n    firebaseData,\n    isSaving: mutation.isPending,\n    save,\n    addEntryToUpdate,\n    entriesToUpdate: modifiedEntries,\n    isDirty,\n  };\n}\n","import { isEmpty } from 'lodash';\n\nimport { useQuery } from '@tanstack/react-query';\n\nimport { useBaseUrl } from './useBaseUrl';\n\nexport function useTDResource<TData>(resourceName: string, enabled = true) {\n  const { getUrl } = useBaseUrl('resources');\n\n  const query = useQuery<Dictionary<TData>, ResponseError>({\n    queryKey: [resourceName],\n    queryFn: async () => {\n      const res = await fetch(getUrl(`${resourceName}.json`));\n      return (await res.json()) as Dictionary<TData>;\n    },\n    enabled,\n  });\n  const hasResponseData = !isEmpty(query.data);\n\n  return {\n    ...query,\n    data: query.data ?? ({} as Dictionary<TData>),\n    hasResponseData,\n  };\n}\n\nexport function useTDResourceNonCollection<TData>(resourceName: string, enabled = true) {\n  const { getUrl } = useBaseUrl('resources');\n\n  const query = useQuery<TData, ResponseError>({\n    queryKey: [resourceName],\n    queryFn: async () => {\n      const res = await fetch(getUrl(`${resourceName}.json`));\n      return (await res.json()) as TData;\n    },\n    enabled,\n  });\n  const hasResponseData = !isEmpty(query.data);\n\n  return {\n    ...query,\n    data: query.data,\n    hasResponseData,\n  };\n}\n","import type { TableProps } from 'antd';\nimport { useQueryParams } from './useQueryParams';\n\n/**\n * Options for configuring table pagination.\n */\ntype UseTablePaginationOptions = {\n  /**\n   * Only necessary if multiple tables are on the same page.\n   */\n  prefix?: string;\n\n  /**\n   * The default current page number.\n   */\n  defaultCurrent?: number;\n\n  /**\n   * The default number of items per page.\n   */\n  defaultPageSize?: number;\n\n  /**\n   * An array of available page size options.\n   */\n  pageSizeOptions?: number[];\n\n  /**\n   * The total number of items in the table.\n   */\n  total: number;\n\n  /**\n   * Whether to show the quick jumper input.\n   */\n  showQuickJumper?: boolean;\n};\n\nexport function useTablePagination({\n  prefix = '',\n  defaultCurrent = 1,\n  defaultPageSize = 10,\n  pageSizeOptions = [10, 20, 50, 100],\n  total,\n  showQuickJumper,\n}: UseTablePaginationOptions): TableProps['pagination'] {\n  const { queryParams, addParam } = useQueryParams();\n  const currentPage = Number(queryParams.get(`${prefix}page`) ?? String(defaultCurrent));\n  const pageSize = Number(queryParams.get(`${prefix}pageSize`) ?? String(defaultPageSize));\n\n  const onChange = (page: number) => {\n    addParam(`${prefix}page`, page.toString(), String(defaultCurrent));\n  };\n  const onShowSizeChange = (_: number, size: number) => {\n    addParam(`${prefix}pageSize`, size.toString(), String(defaultPageSize));\n  };\n\n  return {\n    current: currentPage,\n    pageSize,\n    onChange,\n    onShowSizeChange,\n    defaultCurrent,\n    defaultPageSize,\n    pageSizeOptions,\n    total,\n    hideOnSinglePage: true,\n    showQuickJumper,\n  };\n}\n","import { type DocumentData, doc, updateDoc } from 'firebase/firestore';\nimport { firestore } from 'services/firebase';\n\nimport { type QueryKey, type UseMutationOptions, useMutation } from '@tanstack/react-query';\n\nexport function updateQueryFunction<TData = PlainObject>(path: string, docId: string, data: TData) {\n  console.log(`%cUpdating ${path}/${docId} from firebase`, 'color: #f00');\n  const docRef = doc(firestore, `${path}/${docId}`);\n  return updateDoc(docRef, data as DocumentData);\n}\n\nexport function useUpdateFirebaseDoc<TData>(\n  path: string,\n  docId: string,\n  options: UseMutationOptions<any, Error, TData, QueryKey> = {},\n) {\n  return useMutation<any, Error, TData, QueryKey>({\n    mutationFn: async (data: TData) => updateQueryFunction<TData>(path, docId, data),\n    ...options,\n  });\n}\n","import { useTDResource } from 'hooks/useTDResource';\nimport { isEmpty, random, sample } from 'lodash';\n\nexport function useImageCardsDecks() {\n  const tdrImagesDecksQuery = useTDResource<number>('images-decks');\n  const decks = tdrImagesDecksQuery.data ?? {};\n\n  const onRandomCard = () => {\n    if (isEmpty(decks)) return 'td-d0-00';\n\n    const randomDeckNumber = sample(Object.keys(decks));\n    if (!randomDeckNumber) return 'td-d0-00';\n    const randomCardNumber = random(1, decks[randomDeckNumber]);\n    console.log({ randomDeckNumber, randomCardNumber });\n    return `${randomDeckNumber}-${randomCardNumber.toString().padStart(2, '0')}`;\n  };\n\n  const onRandomUniqueCard = (usedCards: string[]) => {\n    const randomCard: string | null = null;\n    let tries = 0;\n\n    while (!randomCard && tries < 30) {\n      const randomCard = onRandomCard();\n      if (usedCards.includes(randomCard)) {\n        tries++;\n        continue;\n      }\n      return randomCard;\n    }\n\n    if (tries > 30) {\n      throw new Error('Could not find a unique card');\n    }\n  };\n\n  const onRandomCards = (quantity = 10) => {\n    const randomCards: string[] = [];\n    let tries = 0;\n    while (Object.keys(randomCards).length < quantity && tries < 30) {\n      const randomCard = onRandomCard();\n      if (randomCards.includes(randomCard)) {\n        tries++;\n        continue;\n      }\n      randomCards.push(randomCard);\n      tries - 0;\n    }\n    if (tries > 30 && randomCards.length < quantity) {\n      throw new Error('Could not find enough unique cards');\n    }\n\n    return randomCards;\n  };\n\n  return {\n    ...tdrImagesDecksQuery,\n    decks,\n    decksList: Object.keys(decks),\n    onRandomCard,\n    onRandomUniqueCard,\n    onRandomCards,\n  };\n}\n","import { FullScreenModal } from 'components/Common/FullScreenModal';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport type { UseResourceFirebaseDataReturnType } from 'hooks/useResourceFirebaseData';\nimport type { ImageCardDescriptor } from 'types';\nimport { ImageCard } from '../ImageCard';\nimport {\n  Button,\n  Flex,\n  Input,\n  type InputProps,\n  type ButtonProps,\n  type SelectProps,\n  Select,\n  Slider,\n} from 'antd';\nimport { HeartFilled, HeartOutlined } from '@ant-design/icons';\nimport { removeDuplicates } from 'utils';\n\nconst DEFAULT_CARD_SIZE = 200;\n\nexport function ImageCardsDescriptorModal({\n  data,\n  addEntryToUpdate,\n  onClose,\n  onNewCard,\n}: UseResourceFirebaseDataReturnType<ImageCardDescriptor> & {\n  onNewCard: () => void;\n  onClose: () => void;\n}) {\n  const { queryParams, removeParam, addParam } = useQueryParams();\n  const cardSize = Number(queryParams.get('cardSize') ?? DEFAULT_CARD_SIZE);\n\n  const cardId = queryParams.get('cardId');\n  const imageCard = data[cardId ?? ''] ?? {\n    id: cardId,\n    keywords: [],\n  };\n\n  return (\n    <FullScreenModal\n      title={`Image Card Descriptor for ${cardId}`}\n      open={!!cardId}\n      onClose={() => removeParam('cardId')}\n      cover={\n        <Flex justify=\"center\" align=\"center\" style={{ width: '100vw' }}>\n          <ImageCard id={cardId ?? ''} width={cardSize} />\n        </Flex>\n      }\n      actions={[\n        <Button key=\"cancel\" className=\"my-10\" onClick={onClose}>\n          Close\n        </Button>,\n        <Button key=\"cancel\" className=\"my-10\" onClick={onNewCard}>\n          New Card\n        </Button>,\n      ]}\n    >\n      <Flex gap={8} vertical key={cardId} style={{ maxWidth: '500px' }}>\n        <Slider\n          value={cardSize}\n          min={100}\n          max={500}\n          step={25}\n          style={{ maxWidth: 500, width: '100%' }}\n          onChange={(v) => addParam('cardSize', v, DEFAULT_CARD_SIZE)}\n        />\n        <FavoriteImageCardButton imageCard={imageCard} addEntryToUpdate={addEntryToUpdate} size=\"large\" />\n        <ImageCardKeywordsField imageCard={imageCard} addEntryToUpdate={addEntryToUpdate} size=\"large\" />\n        <ImageCardTriggersField imageCard={imageCard} addEntryToUpdate={addEntryToUpdate} size=\"large\" />\n      </Flex>\n    </FullScreenModal>\n  );\n}\n\ntype FavoriteImageCardButtonProps = {\n  imageCard: ImageCardDescriptor;\n  addEntryToUpdate: UseResourceFirebaseDataReturnType<ImageCardDescriptor>['addEntryToUpdate'];\n} & Omit<ButtonProps, 'onClick' | 'icon' | 'shape'>;\n\nexport function FavoriteImageCardButton({\n  imageCard,\n  addEntryToUpdate,\n  ...buttonProps\n}: FavoriteImageCardButtonProps) {\n  const isHearted = imageCard.favorite;\n  return (\n    <Button\n      shape=\"circle\"\n      icon={isHearted ? <HeartFilled style={{ color: 'red' }} /> : <HeartOutlined />}\n      type=\"text\"\n      onClick={() => addEntryToUpdate(imageCard.id, { ...imageCard, favorite: !isHearted })}\n      {...buttonProps}\n    />\n  );\n}\n\ntype ImageCardKeywordsFieldProps = {\n  imageCard: ImageCardDescriptor;\n  addEntryToUpdate: UseResourceFirebaseDataReturnType<ImageCardDescriptor>['addEntryToUpdate'];\n} & Omit<InputProps, 'onSearch' | 'icon' | 'shape'>;\n\nexport function ImageCardKeywordsField({\n  imageCard,\n  addEntryToUpdate,\n  style,\n  ...inputProps\n}: ImageCardKeywordsFieldProps) {\n  const onUpdateKeywords = (keywords: string) => {\n    addEntryToUpdate(imageCard.id, {\n      ...imageCard,\n      keywords: removeDuplicates(\n        keywords\n          .toLocaleLowerCase()\n          .split(/, |,| /)\n          .filter(Boolean)\n          .map((v) => v.trim())\n          .sort(),\n      ),\n    });\n  };\n\n  return (\n    <Input.Search\n      defaultValue={imageCard.keywords.join(' ')}\n      onSearch={(v) => onUpdateKeywords(v)}\n      style={{ maxWidth: 500, width: '100%', ...style }}\n      enterButton=\"Update\"\n      {...inputProps}\n    />\n  );\n}\n\ntype ImageCardTriggersFieldProps = {\n  imageCard: ImageCardDescriptor;\n  addEntryToUpdate: UseResourceFirebaseDataReturnType<ImageCardDescriptor>['addEntryToUpdate'];\n} & Omit<SelectProps, 'onClick' | 'icon' | 'shape'>;\n\nexport function ImageCardTriggersField({\n  imageCard,\n  addEntryToUpdate,\n  style,\n  ...selectProps\n}: ImageCardTriggersFieldProps) {\n  const onUpdateTriggers = (triggers: string[]) => {\n    addEntryToUpdate(imageCard.id, {\n      ...imageCard,\n      triggers,\n    });\n  };\n\n  return (\n    <Select\n      mode=\"multiple\"\n      allowClear\n      style={{ width: '100%', ...style }}\n      placeholder=\"Please select\"\n      defaultValue={imageCard?.triggers}\n      onChange={onUpdateTriggers}\n      options={[\n        { label: 'aliens', value: 'aliens' },\n        { label: 'insets', value: 'insets' },\n        { label: 'snakes', value: 'snakes' },\n        { label: 'spiders', value: 'spiders' },\n        { label: 'scarry', value: 'scarry' },\n      ]}\n      {...selectProps}\n    />\n  );\n}\n","import { Button, Flex, Table, type TableProps } from 'antd';\nimport type { UseResourceFirebaseDataReturnType } from 'hooks/useResourceFirebaseData';\nimport type { ImageCardDescriptor } from 'types';\nimport { ImageCard } from '../ImageCard';\nimport { EditOutlined } from '@ant-design/icons';\nimport { useTablePagination } from 'hooks/useTablePagination';\nimport { FavoriteImageCardButton } from './ImageCardsDescriptorModal';\nimport { useQueryParams } from 'hooks/useQueryParams';\n\nexport function ImageCardsDescriptorTable({\n  data,\n  addEntryToUpdate,\n}: UseResourceFirebaseDataReturnType<ImageCardDescriptor>) {\n  const { addParam } = useQueryParams();\n\n  const columns: TableProps<ImageCardDescriptor>['columns'] = [\n    {\n      title: 'CardId',\n      dataIndex: 'id',\n      key: 'id',\n      sorter: (a, b) => Number(a.id) - Number(b.id),\n    },\n    {\n      title: 'Image',\n      dataIndex: 'id',\n      key: 'image',\n      render: (id: string) => <ImageCard id={id} width={50} />,\n    },\n    {\n      title: 'Keywords',\n      dataIndex: 'keywords',\n      key: 'keywords',\n      render: (keywords: string[]) => keywords?.join(', '),\n    },\n    {\n      title: 'Triggers',\n      dataIndex: 'triggers',\n      key: 'triggers',\n      render: (triggers: string[]) => triggers?.join(', '),\n    },\n    {\n      title: 'Actions',\n      key: 'actions',\n      render: (_, record) => (\n        <Flex>\n          <FavoriteImageCardButton imageCard={record} addEntryToUpdate={addEntryToUpdate} />\n          <Button icon={<EditOutlined />} onClick={() => addParam('cardId', record.id)}>\n            Edit\n          </Button>\n        </Flex>\n      ),\n    },\n  ];\n\n  const rows = Object.values(data);\n\n  const paginationProps = useTablePagination({ total: rows.length, showQuickJumper: true });\n\n  return <Table dataSource={rows} columns={columns} rowKey=\"id\" pagination={paginationProps} />;\n}\n","import { useQueryParams } from 'hooks/useQueryParams';\nimport type { UseResourceFirebaseDataReturnType } from 'hooks/useResourceFirebaseData';\nimport type { ImageCardDescriptor } from 'types';\nimport { useTDResource } from 'hooks/useTDResource';\nimport { DataLoadingWrapper } from 'components/DataLoadingWrapper';\nimport { useImageCardsDecks } from './hooks/useImageCardsDecks';\nimport { ImageCardsDescriptorTable } from './ImageCardsDescriptorTable';\nimport { ImageCardsDescriptorModal } from './ImageCardsDescriptorModal';\n\nexport function ImageCardsDescriptorContent(query: UseResourceFirebaseDataReturnType<ImageCardDescriptor>) {\n  const imageCardsDecksQuery = useImageCardsDecks();\n  const tdrImagesCredoQuery = useTDResource('images-credo');\n  const { addParam, removeParam } = useQueryParams();\n\n  return (\n    <DataLoadingWrapper\n      isLoading={imageCardsDecksQuery.isLoading || tdrImagesCredoQuery.isLoading}\n      hasResponseData={imageCardsDecksQuery.hasResponseData || tdrImagesCredoQuery.hasResponseData}\n      error={tdrImagesCredoQuery.error ?? imageCardsDecksQuery.error}\n    >\n      <ImageCardsDescriptorTable {...query} />\n      <ImageCardsDescriptorModal\n        {...query}\n        onNewCard={() => addParam('cardId', imageCardsDecksQuery.onRandomCard())}\n        onClose={() => removeParam('cardId')}\n      />\n    </DataLoadingWrapper>\n  );\n}\n","import { Button, Divider, Flex } from 'antd';\nimport { DownloadButton } from 'components/Common/DownloadButton';\nimport { SaveButton } from 'components/Common/SaveButton';\nimport { SiderContent } from 'components/Layout';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport type { UseResourceFirebaseDataReturnType } from 'hooks/useResourceFirebaseData';\nimport { cloneDeep } from 'lodash';\nimport type { ImageCardDescriptor } from 'types';\nimport { sortJsonKeys } from 'utils';\nimport { useImageCardsDecks } from './hooks/useImageCardsDecks';\n\nexport function ImageCardsDescriptorFilters({\n  data,\n  save,\n  isDirty,\n  isSaving,\n  entriesToUpdate,\n}: UseResourceFirebaseDataReturnType<ImageCardDescriptor>) {\n  const { addParam } = useQueryParams();\n  const { onRandomCard } = useImageCardsDecks();\n  return (\n    <SiderContent>\n      <Flex vertical gap={12}>\n        <SaveButton\n          isDirty={isDirty}\n          onSave={save}\n          isSaving={isSaving}\n          dirt={JSON.stringify(entriesToUpdate)}\n        />\n\n        <DownloadButton\n          data={() => prepareFileForDownload(data)}\n          fileName=\"image-cards.json\"\n          disabled={isDirty}\n          block\n        />\n      </Flex>\n\n      <Divider />\n\n      <Button onClick={() => addParam('cardId', onRandomCard())} block>\n        Random Card\n      </Button>\n\n      <Divider />\n    </SiderContent>\n  );\n}\n\nfunction prepareFileForDownload(diagramItems: Dictionary<ImageCardDescriptor>) {\n  console.log('Preparing file for download...');\n  const copy = cloneDeep(diagramItems);\n  return sortJsonKeys(copy);\n}\n","import { Layout } from 'antd';\nimport { DataLoadingWrapper } from 'components/DataLoadingWrapper';\nimport { ImageCardsDescriptorContent } from 'components/Images/ImageCards/ImageCardsDescriptorContent';\nimport { ImageCardsDescriptorFilters } from 'components/Images/ImageCards/ImageCardsDescriptorFilters';\nimport { PageLayout } from 'components/Layout';\nimport { PageSider } from 'components/Layout/PageSider';\nimport { useResourceFirebaseData } from 'hooks/useResourceFirebaseData';\nimport { isEmpty } from 'lodash';\nimport type { ImageCardDescriptor } from 'types';\n\nexport function ImageCardsDescriptor() {\n  const imageCardsQuery = useResourceFirebaseData<ImageCardDescriptor>({\n    tdrResourceName: 'image-cards',\n    firebaseDataCollectionName: 'imageCards',\n    serialize: true,\n  });\n\n  return (\n    <PageLayout title=\"Image Cards Descriptor\" subtitle=\"Teenage Student Cards\">\n      <Layout hasSider>\n        <PageSider>\n          <ImageCardsDescriptorFilters {...imageCardsQuery} />\n        </PageSider>\n\n        <Layout.Content className=\"content\">\n          <DataLoadingWrapper\n            isLoading={imageCardsQuery.isLoading}\n            error={imageCardsQuery.error}\n            hasResponseData={!isEmpty(imageCardsQuery.data)}\n          >\n            <ImageCardsDescriptorContent {...imageCardsQuery} />\n          </DataLoadingWrapper>\n        </Layout.Content>\n      </Layout>\n    </PageLayout>\n  );\n}\n\nexport default ImageCardsDescriptor;\n"],"names":["FullScreenModal","open","onClose","props","className","clsx","bordered","extra","onClick","type","shape","icon","SaveButton","isDirty","onSave","isSaving","dirt","interval","buttonProps","togglePendingSave","useGlobalContext","cancel","reset","useTimeoutFn","useEffect","console","log","moment","Date","now","format","handleBeforeUnload","event","message","returnValue","window","addEventListener","removeEventListener","size","disabled","loading","danger","block","ImageCard","id","width","preview","fileExtension","getUrl","useBaseUrl","imageURL","replace","src","fallback","getDocQueryFunction","path","docId","async","getCurrentDateTime","docRef","doc","firestore","getDoc","data","useGetFirebaseDoc","options","useQuery","queryKey","queryFn","useResourceFirebaseData","tdrResourceName","firebaseDataCollectionName","serialize","notification","App","queryClient","useQueryClient","tdrQuery","useTDResource","firebaseQuery","select","deserializeFirebaseData","undefined","modifiedEntries","setModifiedEntries","useState","mutation","useUpdateFirebaseDoc","onSuccess","success","refetchQueries","onError","error","description","useMemo","isSuccess","isPending","cloneDeep","isEmpty","firebaseData","isLoading","save","mutate","serializeFirebaseData","addEntryToUpdate","item","prev","entriesToUpdate","resourceName","enabled","query","res","fetch","json","hasResponseData","useTDResourceNonCollection","useTablePagination","prefix","defaultCurrent","defaultPageSize","pageSizeOptions","total","showQuickJumper","queryParams","addParam","useQueryParams","current","Number","get","String","pageSize","onChange","page","toString","onShowSizeChange","_","hideOnSinglePage","updateQueryFunction","updateDoc","useMutation","mutationFn","useImageCardsDecks","tdrImagesDecksQuery","decks","onRandomCard","randomDeckNumber","sample","Object","keys","randomCardNumber","random","padStart","decksList","onRandomUniqueCard","usedCards","tries","randomCard","includes","Error","onRandomCards","quantity","randomCards","length","push","ImageCardsDescriptorModal","onNewCard","removeParam","cardSize","cardId","imageCard","keywords","title","cover","justify","align","style","actions","gap","vertical","maxWidth","value","min","max","step","v","FavoriteImageCardButton","ImageCardKeywordsField","ImageCardTriggersField","isHearted","favorite","HeartFilled","color","HeartOutlined","inputProps","defaultValue","join","onSearch","onUpdateKeywords","removeDuplicates","toLocaleLowerCase","split","filter","Boolean","map","trim","sort","enterButton","selectProps","mode","allowClear","placeholder","triggers","label","ImageCardsDescriptorTable","columns","dataIndex","key","sorter","a","b","render","record","EditOutlined","rows","values","paginationProps","dataSource","rowKey","pagination","ImageCardsDescriptorContent","imageCardsDecksQuery","tdrImagesCredoQuery","DataLoadingWrapper","ImageCardsDescriptorFilters","JSON","stringify","DownloadButton","diagramItems","copy","sortJsonKeys","prepareFileForDownload","fileName","ImageCardsDescriptor","imageCardsQuery","subtitle","hasSider","PageSider"],"sourceRoot":""}