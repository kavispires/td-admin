{"version":3,"file":"static/js/ItemsAttribution.19fae1a7.chunk.js","mappings":"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","sources":["components/Items/ItemBuildingBlocks.tsx","hooks/useItemsAttribution.ts","context/ItemsAttributeValuesContext.tsx","hooks/useItemQueryParams.ts","components/Common/Stat.tsx","components/Items/Attributes/ItemAttributionFiltersSections.tsx","components/Items/Attributes/ItemAttributionFilters.tsx","components/Common/GoToTopButton.tsx","components/Common/PopoverInfo.tsx","components/Items/Attributes/AttributionValueButtons.tsx","components/Items/Attributes/ItemAttributeDescription.tsx","components/Items/Attributes/ItemAttributeStats.tsx","components/Items/Attributes/ItemAttributionCard.tsx","components/Items/Attributes/ItemAttributionNavigation.tsx","components/Items/Attributes/ItemComparatorCard.tsx","hooks/useItemsComparator.ts","components/Items/Attributes/ItemAttributionDrawer.tsx","components/Items/Attributes/ItemGroupingCard.tsx","hooks/useItemGrouping.ts","hooks/useItemSampler.ts","components/Items/Attributes/ItemSamplerCard.tsx","components/Items/Attributes/DailyAlienSimulator.tsx","components/Items/Attributes/ItemSimulation.tsx","components/Items/Attributes/ItemStats.tsx","components/Items/Attributes/ItemAttributionPageContent.tsx","pages/Items/ItemsAttribution.tsx"],"sourcesContent":["import { Button, Input } from 'antd';\nimport { LanguageFlag } from 'components/Common/LanguageFlag';\nimport { Item } from 'components/Sprites';\nimport type { Item as ItemT } from 'types';\n\nimport { FireFilled, IdcardOutlined } from '@ant-design/icons';\nimport { useCopyToClipboardFunction } from 'hooks/useCopyToClipboardFunction';\nimport { useSearchParams } from 'react-router-dom';\n\ntype ItemBlockProps = {\n  item: ItemT;\n};\n\ntype ItemBlocksAdditionalProps = {\n  className?: string;\n  width: number;\n  language: 'en' | 'pt';\n  to: string;\n};\n\nexport function ItemSprite({\n  item,\n  width,\n  className,\n}: ItemBlockProps & Pick<ItemBlocksAdditionalProps, 'width' | 'className'>) {\n  return (\n    <Item id={item.id} width={width} title={`${item.name.en} | ${item.name.pt}`} className={className} />\n  );\n}\n\nexport function ItemId({ item }: ItemBlockProps) {\n  const copyToClipboard = useCopyToClipboardFunction();\n  return (\n    <span>\n      <Input\n        prefix={item.nsfw ? <FireFilled style={{ color: 'hotPink' }} /> : <IdcardOutlined />}\n        placeholder=\"Id\"\n        variant=\"borderless\"\n        size=\"small\"\n        value={item.id}\n        readOnly\n        style={{ width: '8ch' }}\n        onClick={() => copyToClipboard(item.id)}\n      />\n    </span>\n  );\n}\n\nexport function ItemName({ item, language }: ItemBlockProps & Pick<ItemBlocksAdditionalProps, 'language'>) {\n  return (\n    <Input\n      prefix={<LanguageFlag language={language} width=\"1em\" />}\n      placeholder={`Name in ${language.toUpperCase()}`}\n      variant=\"borderless\"\n      size=\"small\"\n      value={item.name[language]}\n      readOnly\n    />\n  );\n}\n\nexport function ItemNsfw({ item }: ItemBlockProps) {\n  return item.nsfw ? <FireFilled style={{ color: 'hotpink' }} /> : <></>;\n}\n\nexport function ItemGoTo({ item }: ItemBlockProps) {\n  const [, setSearchParams] = useSearchParams();\n  const onGoTo = () => {\n    setSearchParams({ itemId: item.id, view: 'classifier' });\n  };\n\n  return (\n    <span>\n      <Button size=\"small\" shape=\"round\" onClick={onGoTo}>\n        Go to\n      </Button>\n    </span>\n  );\n}\n","import { App } from 'antd';\nimport { isEmpty, mapKeys, merge, orderBy } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport type { Item, ItemAttributesValues, ItemAttribute } from 'types';\nimport { deserializeFirebaseData, getNewItem, getNewItemAttributeValues, serializeFirebaseData } from 'utils';\n\nimport { useQueryClient } from '@tanstack/react-query';\n\nimport { useGetFirebaseDoc } from './useGetFirebaseDoc';\nimport { useTDResource } from './useTDResource';\nimport { useUpdateFirebaseDoc } from './useUpdateFirebaseDoc';\n\n/**\n * This is to avoid new items being generated and unused just for the sake of placeholders.\n */\nconst globalNewItemsAttributesValues: Dictionary<ItemAttributesValues> = {};\n\nexport function useItemsAttribution() {\n  const { notification, message } = App.useApp();\n  const queryClient = useQueryClient();\n\n  // Gather basic item data\n  const tdrItemsQuery = useTDResource<Item>('items');\n  const tdrAttributesQuery = useTDResource<ItemAttribute>('items-attributes');\n  const tdrItemsAttributesValuesQuery = useTDResource<ItemAttributesValues>('items-attribute-values');\n  const firebaseItemsAttributeValuesQuery = useGetFirebaseDoc<\n    Dictionary<string>,\n    Dictionary<ItemAttributesValues>\n  >('tdr', 'itemsAttributeValues', {\n    select: deserializeFirebaseData,\n  });\n\n  const [modifiedAttributeValues, setModifiedAttributeValues] = useState<Dictionary<ItemAttributesValues>>(\n    {},\n  );\n\n  const mutation = useUpdateFirebaseDoc('tdr', 'itemsAttributeValues', {\n    onSuccess: () => {\n      notification.success({\n        message: 'itemsAttributeValues updated',\n      });\n      queryClient.refetchQueries({\n        queryKey: ['firebase', 'tdr', 'itemsAttributeValues'],\n      });\n      setModifiedAttributeValues({});\n    },\n    onError: (error) => {\n      notification.error({\n        message: 'itemsAttributeValues update failed',\n        description: error.message,\n      });\n    },\n  });\n\n  const savedItemsAttributeValues = useMemo(() => {\n    return {\n      ...(tdrItemsAttributesValuesQuery.data ?? {}),\n      ...(firebaseItemsAttributeValuesQuery.data ?? {}),\n    };\n  }, [tdrItemsAttributesValuesQuery.data, firebaseItemsAttributeValuesQuery.data]);\n\n  const isDirty = !isEmpty(modifiedAttributeValues);\n  const addAttributesToUpdate = (id: string, item: ItemAttributesValues) => {\n    setModifiedAttributeValues((prev) => ({ ...prev, [id]: { ...item, updatedAt: Date.now() } }));\n  };\n  const addMultipleAttributesToUpdate = (itemsArr: ItemAttributesValues[]) => {\n    setModifiedAttributeValues((prev) => ({\n      ...prev,\n      ...mapKeys(\n        itemsArr.map((item) => ({ ...item, updatedAt: Date.now() })),\n        'id',\n      ),\n    }));\n  };\n\n  const firebaseData = firebaseItemsAttributeValuesQuery.data;\n\n  const save = () => {\n    mutation.mutate(serializeFirebaseData({ ...firebaseData, ...modifiedAttributeValues }));\n  };\n\n  // Filter items that have the alien deck only\n  const availableItemIds = useMemo(() => {\n    const items = tdrItemsQuery.data ?? {};\n    return orderBy(\n      Object.keys(items).filter((id) => {\n        return (items[id]?.decks ?? []).includes('alien');\n      }),\n      (id) => Number(id),\n      'asc',\n    );\n  }, [tdrItemsQuery.data]);\n\n  const getItem = (id: string) => {\n    if (tdrItemsQuery.data?.[id]) {\n      return tdrItemsQuery.data[id];\n    }\n    if (id) {\n      message.info(`Item ${id} not found in TDR. Creating a new item...`);\n    }\n    return getNewItem({ id });\n  };\n\n  const getItemAttributeValues = (id: string) => {\n    const storedValue = savedItemsAttributeValues?.[id] ?? {};\n    const modifiedValue = modifiedAttributeValues[id] ?? {};\n\n    if (isEmpty(storedValue) && isEmpty(modifiedValue)) {\n      globalNewItemsAttributesValues[id] = getNewItemAttributeValues({ id });\n      return globalNewItemsAttributesValues[id];\n    }\n\n    return merge(globalNewItemsAttributesValues?.[id] ?? {}, storedValue, modifiedValue);\n  };\n\n  return {\n    availableItemIds,\n    getItem,\n    getItemAttributeValues,\n    attributes: tdrAttributesQuery.data ?? {},\n    isLoading:\n      tdrItemsQuery.isLoading ||\n      tdrAttributesQuery.isLoading ||\n      tdrItemsAttributesValuesQuery.isLoading ||\n      firebaseItemsAttributeValuesQuery.isLoading,\n    error:\n      tdrItemsQuery.error ||\n      tdrAttributesQuery.error ||\n      tdrItemsAttributesValuesQuery.error ||\n      firebaseItemsAttributeValuesQuery.error,\n    firebaseData,\n    isSaving: mutation.isPending,\n    save,\n    addAttributesToUpdate,\n    addMultipleAttributesToUpdate,\n    attributesToUpdate: modifiedAttributeValues,\n    isDirty,\n  };\n}\n","import { App } from 'antd';\nimport { useItemsAttribution } from 'hooks/useItemsAttribution';\nimport { isEmpty, orderBy, random } from 'lodash';\nimport { type ReactNode, createContext, useContext, useMemo, useState } from 'react';\nimport type { Item, ItemAttributesValues, ItemAttribute } from 'types';\nimport { getNewItem, getNewItemAttributeValues, sortJsonKeys } from 'utils';\n\nexport type ItemsAttributeValuesContextType = {\n  getItem: (itemId: string) => Item;\n  getItemAttributeValues: (itemId: string) => ItemAttributesValues;\n  isLoading: boolean;\n  error: ResponseError;\n  hasResponseData: boolean;\n  isDirty: boolean;\n  itemAttributeValues: ItemAttributesValues;\n  prepareItemsAttributesFileForDownload: () => Dictionary<ItemAttributesValues>;\n  jumpToItem: (direction: string, itemId?: string) => void;\n  activeItem: Item;\n  onAttributeChange: (attributeId: string, value: number) => void;\n  isSaving: boolean;\n  save: () => void;\n  attributesList: ItemAttribute[];\n  availableItemIds: string[];\n  addAttributesToUpdate: (itemId: string, attributes: ItemAttributesValues) => void;\n  addMultipleAttributesToUpdate: (itemsArr: ItemAttributesValues[]) => void;\n  attributes: Dictionary<ItemAttribute>;\n  attributesToUpdate: Dictionary<ItemAttributesValues>;\n};\n\nconst ItemsAttributeValuesContext = createContext<ItemsAttributeValuesContextType>({\n  getItem: () => getNewItem(),\n  getItemAttributeValues: () => getNewItemAttributeValues(),\n  isLoading: true,\n  error: null,\n  hasResponseData: false,\n  isDirty: false,\n  jumpToItem: () => {},\n  activeItem: getNewItem(),\n  itemAttributeValues: getNewItemAttributeValues(),\n  onAttributeChange: () => {},\n  isSaving: false,\n  save: () => {},\n  attributesList: [],\n  availableItemIds: [],\n  addAttributesToUpdate: () => {},\n  addMultipleAttributesToUpdate: () => {},\n  prepareItemsAttributesFileForDownload: () => ({}),\n  attributes: {},\n  attributesToUpdate: {},\n});\n\ntype ItemsAttributeValuesProviderProps = {\n  children: ReactNode;\n};\n\nexport const ItemsAttributeValuesProvider = ({ children }: ItemsAttributeValuesProviderProps) => {\n  const {\n    getItem,\n    getItemAttributeValues,\n    availableItemIds,\n    isLoading,\n    error,\n    isSaving,\n    save,\n    addAttributesToUpdate,\n    isDirty,\n    attributes,\n    addMultipleAttributesToUpdate,\n    attributesToUpdate,\n  } = useItemsAttribution();\n  const { message } = App.useApp();\n\n  const [itemIndex, setItemIndex] = useState(random(0, availableItemIds.length - 1));\n  const activeItem = getItem(availableItemIds[itemIndex]);\n  const itemAttributeValues = getItemAttributeValues(activeItem.id);\n\n  const jumpToItem = (direction: string, itemId?: string) => {\n    if (direction === 'next') {\n      setItemIndex((prev) => (prev + 1) % availableItemIds.length);\n      return;\n    }\n    if (direction === 'previous') {\n      setItemIndex((prev) => (prev - 1 + availableItemIds.length) % availableItemIds.length);\n      return;\n    }\n    if (direction === 'random') {\n      setItemIndex(random(0, availableItemIds.length - 1));\n      return;\n    }\n\n    if (direction === 'first') {\n      setItemIndex(0);\n      return;\n    }\n    if (direction === 'last') {\n      setItemIndex(availableItemIds.length - 1);\n      return;\n    }\n    if (direction === 'next10') {\n      setItemIndex((prev) => (prev + 10) % availableItemIds.length);\n      return;\n    }\n    if (direction === 'previous10') {\n      setItemIndex((prev) => (prev - 10 + availableItemIds.length) % availableItemIds.length);\n      return;\n    }\n\n    if (direction === 'incomplete') {\n      setItemIndex((prev) => {\n        let index = prev + 1;\n        while (index < availableItemIds.length) {\n          const item = getItemAttributeValues(availableItemIds[index]);\n          if (Object.keys(item.attributes).length !== attributesList.length) {\n            return index;\n          }\n          if (index === availableItemIds.length - 1) {\n            message.info('No more incomplete items found.');\n            return prev;\n          }\n          index++;\n        }\n        return prev;\n      });\n      return;\n    }\n\n    if (direction === 'goTo' && itemId !== undefined) {\n      const index = availableItemIds.indexOf(itemId);\n      if (index !== -1) {\n        setItemIndex(index);\n        return;\n      }\n      message.error(`Item ${itemId} is not available for attribution.`);\n    }\n  };\n\n  const attributesList = useMemo(() => orderBy(Object.values(attributes), 'name.en', 'asc'), [attributes]);\n\n  const onAttributeChange = (attributeId: string, value: number) => {\n    addAttributesToUpdate(activeItem.id, {\n      ...itemAttributeValues,\n      attributes: {\n        ...itemAttributeValues.attributes,\n        [attributeId]: value,\n      },\n    });\n  };\n\n  const prepareItemsAttributesFileForDownload = () => {\n    return sortJsonKeys(\n      availableItemIds.reduce((acc: Dictionary<ItemAttributesValues>, itemId) => {\n        // Get items and only the ones with attributes\n        const item = getItemAttributeValues(itemId);\n\n        if (isEmpty(item.attributes)) {\n          return acc;\n        }\n\n        // Assess item completion\n        if (Object.keys(item.attributes).length === attributesList.length) {\n          item.complete = true;\n        } else {\n          // biome-ignore lint/performance/noDelete: <explanation>\n          delete item.complete;\n        }\n\n        acc[item.id] = item;\n\n        return acc;\n      }, {}),\n    );\n  };\n\n  return (\n    <ItemsAttributeValuesContext.Provider\n      value={{\n        getItem,\n        getItemAttributeValues,\n        availableItemIds,\n        isLoading,\n        error,\n        hasResponseData: availableItemIds.length > 0 && !isEmpty(attributes),\n        isDirty,\n        itemAttributeValues,\n        jumpToItem,\n        activeItem,\n        onAttributeChange,\n        isSaving,\n        save,\n        attributes,\n        attributesList,\n        addAttributesToUpdate,\n        addMultipleAttributesToUpdate,\n        prepareItemsAttributesFileForDownload,\n        attributesToUpdate,\n      }}\n    >\n      {children}\n    </ItemsAttributeValuesContext.Provider>\n  );\n};\n\nexport const useItemsAttributeValuesContext = () => useContext(ItemsAttributeValuesContext);\n","import { useSearchParams } from 'react-router-dom';\n\nexport function useItemQueryParams() {\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const addQueryParam = (key: string, value: string) => {\n    searchParams.set(key, `${value}`);\n    setSearchParams(searchParams);\n  };\n\n  const removeQueryParam = (key: string) => {\n    searchParams.delete(key);\n    setSearchParams(searchParams);\n  };\n\n  return {\n    view: searchParams.get('view') ?? 'classifier',\n    setView: (value: string) => setSearchParams({ view: value }),\n    addQueryParam,\n    removeQueryParam,\n    searchParams,\n  };\n}\n","import { Tag, Typography } from 'antd';\nimport type { ReactNode } from 'react';\n\ntype StatProps = {\n  label: ReactNode;\n  children: ReactNode;\n};\n\nexport function Stat({ label, children }: StatProps) {\n  return (\n    <Typography.Text>\n      {label} <Tag>{children}</Tag>\n    </Typography.Text>\n  );\n}\n","import { Button, Divider, Flex, Typography } from 'antd';\nimport { FilterNumber, FilterSelect, FilterSwitch } from 'components/Common';\nimport { Stat } from 'components/Common/Stat';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport { isEmpty } from 'lodash';\nimport { useMemo } from 'react';\nimport { ATTRIBUTE_GROUP_VALUES } from 'utils/constants';\n\nexport function ItemAttributionStats() {\n  const { getItemAttributeValues, availableItemIds, attributesList } = useItemsAttributeValuesContext();\n\n  const {\n    total,\n    complete,\n    completionPercentage,\n    hasDataCount,\n    initiatedPercentage,\n    progress,\n    progressTotal,\n    currentProgress,\n  } = useMemo(() => {\n    const total = availableItemIds.length;\n    let someData = 0;\n    let complete = 0;\n    let currentProgress = 0;\n    const itemsAttributes = availableItemIds.map((id) => getItemAttributeValues(id));\n    itemsAttributes.forEach(({ attributes }) => {\n      if (!isEmpty(attributes)) {\n        someData += 1;\n      }\n      if (Object.values(attributes).length === attributesList.length) {\n        complete += 1;\n      }\n\n      currentProgress += Object.values(attributes).length;\n    });\n\n    const progressTotal = Object.values(attributesList).length * availableItemIds.length;\n\n    return {\n      total,\n      complete,\n      completionPercentage: total > 0 ? ((complete / total) * 100).toFixed(1) : 0,\n      hasDataCount: someData,\n      initiatedPercentage: total > 0 ? Math.floor((someData / total) * 100) : 0,\n      progress: ((currentProgress / progressTotal) * 100).toFixed(1),\n      currentProgress,\n      progressTotal,\n    };\n  }, [attributesList, availableItemIds, getItemAttributeValues]);\n\n  return (\n    <>\n      <Flex vertical>\n        <Typography.Text strong className=\"mb-2\">\n          Items Stats\n        </Typography.Text>\n        <Stat label=\"Total\">{total}</Stat>\n        <Stat label=\"Complete\">\n          {complete} ({completionPercentage}%)\n        </Stat>\n        <Stat label=\"Initiated\">\n          {hasDataCount} ({initiatedPercentage}%)\n        </Stat>\n        <Typography.Text strong className=\"mt-4 mb-2\">\n          Attributes Stats\n        </Typography.Text>\n        <Stat label=\"Total\">{progressTotal}</Stat>\n        <Stat label=\"Set\">{currentProgress}</Stat>\n        <Stat label=\"Progress\">{progress}%</Stat>\n      </Flex>\n      <Divider />\n    </>\n  );\n}\n\nexport function ItemAttributionClassifierFilters() {\n  const { jumpToItem } = useItemsAttributeValuesContext();\n  const { searchParams, addQueryParam } = useItemQueryParams();\n\n  return (\n    <>\n      <Button block onClick={() => jumpToItem('random')} type=\"primary\">\n        Random Item\n      </Button>\n      <FilterSwitch\n        label=\"Unset Only\"\n        value={searchParams.get('scope') === 'unset'}\n        onChange={(value) => addQueryParam('scope', value ? 'unset' : '')}\n        className=\"mt-4\"\n      />\n    </>\n  );\n}\n\nexport function ItemAttributionSamplerFilters() {\n  const { searchParams, addQueryParam } = useItemQueryParams();\n  const { attributesList } = useItemsAttributeValuesContext();\n\n  const options = useMemo(() => {\n    return [\n      { label: 'Random Attribute', value: 'random' },\n      ...attributesList.map(({ id, name }) => ({ label: name.en, value: id })),\n    ];\n  }, [attributesList]);\n\n  return (\n    <>\n      <FilterSelect\n        label=\"Sampler Attribute\"\n        value={searchParams.get('attribute') || 'random'}\n        onChange={(v) => addQueryParam('attribute', v)}\n        options={options}\n      />\n      <FilterNumber\n        label=\"Sample Size\"\n        value={Number(searchParams.get('size') || 9)}\n        onChange={(v) => addQueryParam('size', String(v))}\n        min={3}\n        max={21}\n        step={3}\n      />\n    </>\n  );\n}\n\nexport function ItemAttributionGroupingFilters() {\n  const { searchParams, addQueryParam } = useItemQueryParams();\n  const { attributesList } = useItemsAttributeValuesContext();\n\n  const options = useMemo(() => {\n    return attributesList.map(({ id, name, ...rest }) => ({\n      label: `${name.en}${rest.default ? '*' : ''}`,\n      value: id,\n    }));\n  }, [attributesList]);\n\n  return (\n    <>\n      <FilterSelect\n        label=\"Attribute\"\n        value={searchParams.get('attribute') || 'ali'}\n        onChange={(v) => addQueryParam('attribute', v)}\n        options={options}\n      />\n\n      <FilterSelect\n        label=\"Scope\"\n        value={searchParams.get('scope') || 'unset'}\n        onChange={(v) => addQueryParam('scope', v)}\n        options={[{ value: 'unset', label: 'Unset' }, ...ATTRIBUTE_GROUP_VALUES]}\n      />\n\n      <FilterSelect\n        label=\"Results per page\"\n        value={searchParams.get('pageSize') || 12}\n        onChange={(v) => addQueryParam('pageSize', v)}\n        options={[12, 24, 48, 96]}\n      />\n    </>\n  );\n}\n\nexport function ItemAttributionComparatorFilters() {\n  const { searchParams, addQueryParam } = useItemQueryParams();\n  return (\n    <>\n      <FilterSwitch\n        label=\"Only Complete\"\n        value={searchParams.get('showComplete') === 'true'}\n        onChange={(v) => addQueryParam('showComplete', v ? 'true' : '')}\n        className=\"full-width m-0\"\n      />\n      <FilterSwitch\n        label=\"Show Unrelated\"\n        value={searchParams.get('showUnrelated') === 'true'}\n        onChange={(v) => addQueryParam('showUnrelated', v ? 'true' : '')}\n        className=\"full-width m-0\"\n      />\n      <FilterSwitch\n        label=\"Show Unclear\"\n        value={searchParams.get('showUnclear') === 'true'}\n        onChange={(v) => addQueryParam('showUnclear', v ? 'true' : '')}\n        className=\"full-width m-0\"\n      />\n    </>\n  );\n}\n\nexport function ItemAttributionStatsFilters() {\n  const { searchParams, addQueryParam } = useItemQueryParams();\n  return (\n    <>\n      <FilterSwitch\n        label=\"Show Glyphs\"\n        value={searchParams.get('showGlyphs') === 'true'}\n        onChange={(v) => addQueryParam('showGlyphs', v ? 'true' : '')}\n        className=\"full-width m-0\"\n      />\n    </>\n  );\n}\n","import { Divider, Flex } from 'antd';\nimport { FilterSelect } from 'components/Common';\nimport { DownloadButton } from 'components/Common/DownloadButton';\nimport { SaveButton } from 'components/Common/SaveButton';\nimport { SiderContent } from 'components/Layout';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport type { ItemAttributesValues, ItemAttribute } from 'types';\nimport { deepCleanObject, getItemAttributePriorityResponse, sortJsonKeys } from 'utils';\nimport { ATTRIBUTE_VALUE } from 'utils/constants';\n\nimport {\n  ItemAttributionClassifierFilters,\n  ItemAttributionComparatorFilters,\n  ItemAttributionGroupingFilters,\n  ItemAttributionSamplerFilters,\n  ItemAttributionStats,\n  ItemAttributionStatsFilters,\n} from './ItemAttributionFiltersSections';\n\nexport function ItemAttributionFilters() {\n  const { isDirty, save, prepareItemsAttributesFileForDownload, attributes, isSaving, attributesToUpdate } =\n    useItemsAttributeValuesContext();\n\n  const { view, setView } = useItemQueryParams();\n\n  return (\n    <SiderContent>\n      <Flex vertical gap={12}>\n        <SaveButton\n          isDirty={isDirty}\n          onSave={save}\n          isSaving={isSaving}\n          dirt={JSON.stringify(attributesToUpdate)}\n        />\n\n        <DownloadButton\n          data={() => prepareFileForDownload(prepareItemsAttributesFileForDownload(), attributes)}\n          fileName=\"items-attribute-values.json\"\n          disabled={isDirty}\n          block\n        />\n      </Flex>\n      <Divider />\n\n      <ItemAttributionStats />\n\n      <FilterSelect\n        label=\"View\"\n        value={view}\n        onChange={setView}\n        options={['classifier', 'sampler', 'grouping', 'comparator', 'simulator', 'stats']}\n      />\n      <Divider />\n\n      {view === 'classifier' && <ItemAttributionClassifierFilters />}\n      {view === 'sampler' && <ItemAttributionSamplerFilters />}\n      {view === 'grouping' && <ItemAttributionGroupingFilters />}\n      {view === 'comparator' && <ItemAttributionComparatorFilters />}\n      {view === 'stats' && <ItemAttributionStatsFilters />}\n    </SiderContent>\n  );\n}\n\nfunction prepareFileForDownload(\n  itemsAttributes: Dictionary<ItemAttributesValues>,\n  attributes: Dictionary<ItemAttribute>,\n) {\n  const total = Object.keys(attributes).length;\n\n  Object.keys(itemsAttributes).forEach((key) => {\n    const itemAttributeValues = itemsAttributes[key];\n\n    // // TODO: Tempo Rename hol to gra (grab)\n    // const originalHolValue = itemAttributeValues.attributes['hol'];\n    // delete itemAttributeValues.attributes['hol'];\n    // itemAttributeValues.attributes['gra'] = originalHolValue;\n\n    // // TODO: TEMP Rename sol to har, and base values in soft\n    // const originalSolValue = itemAttributeValues.attributes['sol'];\n    // delete itemAttributeValues.attributes['sol'];\n    // const softValue = itemAttributeValues.attributes['sof'];\n    // if (softValue === ATTRIBUTE_VALUE.DETERMINISTIC) {\n    //   itemAttributeValues.attributes['har'] = ATTRIBUTE_VALUE.OPPOSITE;\n    // }\n    // if (originalSolValue === ATTRIBUTE_VALUE.DETERMINISTIC) {\n    //   itemAttributeValues.attributes['har'] = ATTRIBUTE_VALUE.DETERMINISTIC;\n    // }\n\n    // // TODO: TEMP Auto-add cold if warm\n    // const warmValue = itemAttributeValues.attributes['war'];\n    // if (warmValue === ATTRIBUTE_VALUE.DETERMINISTIC) {\n    //   itemAttributeValues.attributes['col'] = ATTRIBUTE_VALUE.OPPOSITE;\n    // }\n    // if (warmValue === ATTRIBUTE_VALUE.OPPOSITE) {\n    //   itemAttributeValues.attributes['col'] = ATTRIBUTE_VALUE.DETERMINISTIC;\n    // }\n    // if (warmValue === ATTRIBUTE_VALUE.RELATED) {\n    //   itemAttributeValues.attributes['col'] = ATTRIBUTE_VALUE.UNCLEAR;\n    // }\n\n    // const bigValue = itemAttributeValues.attributes['big'];\n    // if (bigValue === ATTRIBUTE_VALUE.RELATED) {\n    //   itemAttributeValues.attributes['sma'] = ATTRIBUTE_VALUE.UNRELATED;\n    // }\n    // if (bigValue === ATTRIBUTE_VALUE.DETERMINISTIC) {\n    //   itemAttributeValues.attributes['sma'] = ATTRIBUTE_VALUE.OPPOSITE;\n    // }\n\n    // const toolValue = itemAttributeValues.attributes.too;\n    // const accessoryValue = itemAttributeValues.attributes.acc;\n    // const instrumentValue = itemAttributeValues.attributes.ins;\n    // let changed = false;\n    // const toBeChanged =\n    //   (toolValue > 0 || accessoryValue > 0 || instrumentValue > 0) &&\n    //   (!toolValue ||\n    //     toolValue < 0 ||\n    //     !accessoryValue ||\n    //     accessoryValue < ATTRIBUTE_VALUE.UNCLEAR ||\n    //     !instrumentValue ||\n    //     instrumentValue < ATTRIBUTE_VALUE.UNCLEAR);\n    // if (toBeChanged) {\n    //   console.log('id', itemAttributeValues.id);\n    //   console.log(toolValue, accessoryValue, instrumentValue);\n    // }\n\n    // if (toolValue > 0) {\n    //   console.log('tool is set resetting the rest');\n    //   if (!accessoryValue || accessoryValue < ATTRIBUTE_VALUE.UNCLEAR) {\n    //     console.log('resetting accessory');\n    //     changed = true;\n    //     itemAttributeValues.attributes.acc = ATTRIBUTE_VALUE.UNCLEAR;\n    //   }\n    //   if (!instrumentValue || instrumentValue < ATTRIBUTE_VALUE.UNCLEAR) {\n    //     console.log('resetting instrument');\n    //     changed = true;\n    //     itemAttributeValues.attributes.ins = ATTRIBUTE_VALUE.UNCLEAR;\n    //   }\n    // }\n\n    // if (accessoryValue > 0) {\n    //   console.log('accessory is set resetting the rest');\n    //   if (!toolValue || toolValue < ATTRIBUTE_VALUE.UNCLEAR) {\n    //     console.log('resetting tool');\n    //     changed = true;\n    //     itemAttributeValues.attributes.too = ATTRIBUTE_VALUE.UNCLEAR;\n    //   }\n    //   if (!instrumentValue || instrumentValue < ATTRIBUTE_VALUE.UNCLEAR) {\n    //     console.log('resetting instrument');\n    //     changed = true;\n    //     itemAttributeValues.attributes.ins = ATTRIBUTE_VALUE.UNCLEAR;\n    //   }\n    // }\n\n    // if (instrumentValue > 0) {\n    //   console.log('instrument is set resetting the rest');\n    //   if (!toolValue || toolValue < ATTRIBUTE_VALUE.UNCLEAR) {\n    //     console.log('resetting tool');\n    //     changed = true;\n    //     itemAttributeValues.attributes.too = ATTRIBUTE_VALUE.UNCLEAR;\n    //   }\n    //   if (!accessoryValue || accessoryValue < ATTRIBUTE_VALUE.UNCLEAR) {\n    //     console.log('resetting accessory');\n    //     changed = true;\n    //     itemAttributeValues.attributes.acc = ATTRIBUTE_VALUE.UNCLEAR;\n    //   }\n    // }\n\n    // if (toBeChanged) {\n    //   if (changed) {\n    //     console.log(\n    //       itemAttributeValues.attributes.too,\n    //       itemAttributeValues.attributes.acc,\n    //       itemAttributeValues.attributes.ins,\n    //     );\n    //   } else {\n    //     console.log('no change');\n    //   }\n\n    //   console.log('-----------------');\n    // }\n\n    // Remove any key that is not an attribute\n    const attributeKeys = Object.keys(itemAttributeValues.attributes);\n    attributeKeys.forEach((k) => {\n      if (!attributes[k]) {\n        delete itemAttributeValues.attributes[k];\n      }\n    });\n\n    // Check completion\n    const completed = attributeKeys.length;\n\n    if (completed === total) {\n      // Add completion\n      itemAttributeValues.complete = true;\n\n      // Add score\n      let unclearCount = 0;\n      itemAttributeValues.score = Object.values(itemAttributeValues.attributes).reduce((acc: number, v) => {\n        if (v <= 0) {\n          if (v === ATTRIBUTE_VALUE.UNCLEAR) {\n            unclearCount += 1;\n          }\n          if (v === ATTRIBUTE_VALUE.OPPOSITE) {\n            acc += v / 2;\n          }\n          return acc;\n        }\n\n        return acc + v;\n      }, 0);\n\n      // Add reliability\n      itemAttributeValues.reliability = Math.floor(((completed - unclearCount) / total) * 100);\n\n      // Add key with only relevant attributes\n      itemAttributeValues.key = getItemAttributePriorityResponse(itemAttributeValues, attributes, true).join(\n        '',\n      );\n    } else {\n      itemAttributeValues.complete = undefined;\n      itemAttributeValues.score = undefined;\n      itemAttributeValues.reliability = undefined;\n      itemAttributeValues.key = undefined;\n    }\n  });\n\n  return sortJsonKeys(deepCleanObject(itemsAttributes));\n}\n","import { VerticalAlignTopOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport type { ButtonProps } from 'antd/lib/button';\nimport { useState } from 'react';\nimport { useEffectOnce } from 'react-use';\n\nexport function GoToTopButton(props: ButtonProps) {\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n\n  const handleScroll = () => {\n    setIsVisible(window.scrollY > 300);\n  };\n\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  };\n\n  useEffectOnce(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  });\n\n  return (\n    <Button\n      className={`go-to-top-button ${isVisible ? 'visible' : ''}`}\n      onClick={scrollToTop}\n      icon={<VerticalAlignTopOutlined />}\n      {...props}\n    >\n      Go to Top\n    </Button>\n  );\n}\n","import { QuestionCircleOutlined } from '@ant-design/icons';\nimport { Tooltip } from 'antd';\nimport type { ReactNode } from 'react';\n\ntype PopoverInfoProps = {\n  title: ReactNode;\n  icon?: ReactNode;\n};\n\nexport function PopoverInfo({ title, icon }: PopoverInfoProps) {\n  return <Tooltip title={title}>{icon ?? <QuestionCircleOutlined />}</Tooltip>;\n}\n","import { Radio, type RadioGroupProps } from 'antd';\nimport type { ItemAttribute } from 'types';\n\nimport { CheckCircleFilled } from '@ant-design/icons';\n\nimport { PopoverInfo } from 'components/Common/PopoverInfo';\nimport { ATTRIBUTE_VALUE } from 'utils/constants';\n\nconst attributeOptions = [\n  { label: 'Opposite', value: ATTRIBUTE_VALUE.OPPOSITE },\n  { label: 'Unrelated', value: ATTRIBUTE_VALUE.UNRELATED },\n  { label: 'Unclear', value: ATTRIBUTE_VALUE.UNCLEAR },\n  { label: 'Related', value: ATTRIBUTE_VALUE.RELATED },\n  { label: 'Deterministic', value: ATTRIBUTE_VALUE.DETERMINISTIC },\n];\n\nconst attributeLimitedOptions = [\n  { label: 'Opposite', value: ATTRIBUTE_VALUE.OPPOSITE },\n  { label: 'Unrelated', value: ATTRIBUTE_VALUE.UNRELATED },\n  { label: 'Unclear', value: ATTRIBUTE_VALUE.UNCLEAR },\n  { label: 'Related', value: ATTRIBUTE_VALUE.RELATED },\n  { label: 'Deterministic', value: ATTRIBUTE_VALUE.DETERMINISTIC, disabled: true },\n];\n\ntype AttributionValueButtonsProps = {\n  attribute: ItemAttribute;\n  value?: number;\n  onChange: (attributeId: string, value: number) => void;\n  onlyButtons?: boolean;\n  size?: RadioGroupProps['size'];\n};\n\nexport function AttributionValueButtons({\n  attribute,\n  value,\n  onChange,\n  onlyButtons,\n  size,\n}: AttributionValueButtonsProps) {\n  if (!attribute) return <></>;\n\n  if (onlyButtons) {\n    return (\n      <Radio.Group\n        options={attribute.limited ? attributeLimitedOptions : attributeOptions}\n        onChange={({ target: { value: v } }) => onChange(attribute.id, v)}\n        value={value}\n        optionType=\"button\"\n        buttonStyle=\"solid\"\n        size={size}\n      />\n    );\n  }\n\n  return (\n    <div key={attribute.id} className=\"attribute-button-container__row\">\n      <span className=\"attribute-button-container__label\">\n        {attribute.name.en} <PopoverInfo title={attribute.description.en} />\n      </span>\n\n      <Radio.Group\n        options={attribute.limited ? attributeLimitedOptions : attributeOptions}\n        onChange={({ target: { value: v } }) => onChange(attribute.id, v)}\n        value={value}\n        optionType=\"button\"\n        buttonStyle=\"solid\"\n        size={size}\n      />\n\n      <span>\n        <CheckCircleFilled style={{ color: value && value > 7 ? 'green' : 'transparent' }} />\n      </span>\n    </div>\n  );\n}\n","import { Flex } from 'antd';\nimport clsx from 'clsx';\nimport { FilterSwitch } from 'components/Common';\nimport { AlienSign } from 'components/Sprites';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport { useMemo } from 'react';\nimport type { ItemAttributesValues, ItemAttribute } from 'types';\nimport { filterMessage, getItemAttributePriorityResponse, parseAttribute } from 'utils';\n\ntype ItemAttributeDescriptionProps = {\n  itemAttributeValues: ItemAttributesValues;\n  attributes: Dictionary<ItemAttribute>;\n};\n\nexport function ItemAttributeDescription({ itemAttributeValues, attributes }: ItemAttributeDescriptionProps) {\n  const { searchParams, addQueryParam } = useItemQueryParams();\n  const showUnclear = searchParams.get('showUnclear') === 'true';\n  const showUnrelated = searchParams.get('showUnrelated') === 'true';\n\n  const filteredResponse = useMemo(\n    () =>\n      filterMessage(\n        getItemAttributePriorityResponse(itemAttributeValues, attributes),\n        showUnclear,\n        showUnrelated,\n      ),\n    [itemAttributeValues, attributes, showUnclear, showUnrelated],\n  );\n\n  const Component = searchParams.get('signs') === 'true' ? AttributeSprite : AttributeText;\n\n  return (\n    <Flex gap={6} vertical>\n      <FilterSwitch\n        label=\"Show Unrelated\"\n        value={searchParams.get('showUnrelated') === 'true'}\n        onChange={(v) => addQueryParam('showUnrelated', v ? 'true' : '')}\n        className=\"full-width m-0\"\n      />\n      <FilterSwitch\n        label=\"Show Unclear\"\n        value={searchParams.get('showUnclear') === 'true'}\n        onChange={(v) => addQueryParam('showUnclear', v ? 'true' : '')}\n        className=\"full-width m-0\"\n      />\n      <FilterSwitch\n        label=\"Alien Sings\"\n        value={searchParams.get('signs') === 'true'}\n        onChange={(v) => addQueryParam('signs', v ? 'true' : '')}\n        className=\"full-width m-0\"\n      />\n      <Flex gap={6} wrap=\"wrap\" className=\"item-attribute-value-statement\">\n        {filteredResponse.map((keyVariant, index, arr) => (\n          <Component\n            key={keyVariant}\n            keyVariant={keyVariant}\n            attributes={attributes}\n            firstElement={index === 0}\n            lastElement={index === arr.length - 1}\n          />\n        ))}\n      </Flex>\n    </Flex>\n  );\n}\n\ntype AttributeSpriteProps = {\n  keyVariant: string;\n  attributes: Dictionary<ItemAttribute>;\n  firstElement: boolean;\n  lastElement: boolean;\n};\n\nexport function AttributeSprite({\n  keyVariant,\n  attributes,\n  withText,\n}: AttributeSpriteProps & { withText?: boolean }) {\n  const { key, className, text } = parseAttribute(keyVariant);\n\n  return (\n    <Flex vertical align=\"center\">\n      <AlienSign\n        width={50}\n        id={attributes[key].spriteId}\n        className={clsx('item-attribute-alien-sign', `item-attribute-alien-sign--${className}`)}\n      />\n      {withText && (\n        <Flex\n          wrap=\"wrap\"\n          justify=\"center\"\n          align=\"center\"\n          style={{ maxWidth: 50, textAlign: 'center', wordBreak: 'break-word' }}\n        >\n          {text} {attributes[key].name.en.toLowerCase()}\n        </Flex>\n      )}\n    </Flex>\n  );\n}\n\nfunction AttributeText({ keyVariant, attributes, firstElement, lastElement }: AttributeSpriteProps) {\n  const { key, text } = parseAttribute(keyVariant);\n\n  const prefix = firstElement ? \"It's \" : '';\n  const suffix = lastElement ? '.' : ', ';\n\n  return (\n    <>\n      {prefix}\n      {text} {attributes[key].name.en.toLowerCase()}\n      {suffix}\n    </>\n  );\n}\n","import { CheckCircleFilled, CloseCircleOutlined } from '@ant-design/icons';\nimport { Flex, Progress, Tooltip, Typography } from 'antd';\nimport { Stat } from 'components/Common/Stat';\nimport { useMemo } from 'react';\nimport type { ItemAttributesValues, ItemAttribute } from 'types';\nimport { ATTRIBUTE_VALUE } from 'utils/constants';\n\ntype ItemAttributeStatsProps = {\n  attributesList: ItemAttribute[];\n  itemAttributeValues: ItemAttributesValues;\n};\n\nexport function ItemAttributeStats({ attributesList, itemAttributeValues }: ItemAttributeStatsProps) {\n  const { completion, isDeterministic, value, isOpposing, relevancy } = useMemo(() => {\n    const total = attributesList.length;\n    const completed = Object.keys(itemAttributeValues.attributes).length;\n    const completion = Math.floor((completed / total) * 100);\n\n    let isDeterministic = false;\n    let isOpposing = false;\n    let unclearCount = 0;\n    const value = Object.values(itemAttributeValues.attributes).reduce((acc: number, v) => {\n      if (v <= 0) {\n        if (v === ATTRIBUTE_VALUE.UNCLEAR) {\n          unclearCount += 1;\n        }\n        if (v === ATTRIBUTE_VALUE.OPPOSITE) {\n          isOpposing = true;\n          acc += v / 2;\n        }\n        return acc;\n      }\n      if (v === ATTRIBUTE_VALUE.DETERMINISTIC) {\n        isDeterministic = true;\n      }\n\n      return acc + v;\n    }, 0);\n\n    const relevancy = Math.floor(((completed - unclearCount) / total) * 100);\n\n    return { completion, isDeterministic, value, isOpposing, relevancy };\n  }, [attributesList, itemAttributeValues.attributes]);\n\n  return (\n    <div>\n      <Typography.Text strong>Completion</Typography.Text>\n      <Progress percent={completion} size=\"small\" />\n      <Typography.Text strong>Stats</Typography.Text>\n      <Flex vertical>\n        <Stat label=\"Deterministic\">\n          {isDeterministic ? (\n            <CheckCircleFilled style={{ color: 'green' }} />\n          ) : (\n            <CloseCircleOutlined style={{ color: 'red' }} />\n          )}\n        </Stat>\n        <Stat label=\"Opposing\">\n          {isOpposing ? (\n            <CheckCircleFilled style={{ color: 'CornflowerBlue' }} />\n          ) : (\n            <CloseCircleOutlined style={{ color: 'grey' }} />\n          )}\n        </Stat>\n        <Stat label=\"Value\">{value}</Stat>\n        <Tooltip title=\"The percentage of conclusive attributes (not unclear)\">\n          <Stat label=\"Reliability\">{relevancy}%</Stat>\n        </Tooltip>\n      </Flex>\n    </div>\n  );\n}\n","import { Affix, Button, Card, Divider, Flex, Space, Typography } from 'antd';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport { useEffect, useMemo } from 'react';\nimport { ItemId, ItemName, ItemSprite } from '../ItemBuildingBlocks';\nimport { AttributionValueButtons } from './AttributionValueButtons';\nimport { ItemAttributeDescription } from './ItemAttributeDescription';\nimport { ItemAttributeStats } from './ItemAttributeStats';\n\nexport function ItemAttributionCard() {\n  const { activeItem, attributesList, itemAttributeValues, onAttributeChange, jumpToItem, attributes } =\n    useItemsAttributeValuesContext();\n  const { searchParams, removeQueryParam } = useItemQueryParams();\n  const queryParamsItemId = searchParams.get('itemId');\n  const filteredAttributesIds = searchParams.get('filters');\n\n  useEffect(() => {\n    if (queryParamsItemId) {\n      removeQueryParam('itemId');\n      jumpToItem('goTo', queryParamsItemId);\n    }\n  }, [queryParamsItemId, jumpToItem, removeQueryParam]);\n\n  const showOnlyUnset = searchParams.get('scope') === 'unset';\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  const filteredAttributesList = useMemo(() => {\n    const shortlist = showOnlyUnset\n      ? attributesList.filter((attribute) => !itemAttributeValues.attributes[attribute.id])\n      : attributesList;\n\n    if (filteredAttributesIds) {\n      const parsedList = filteredAttributesIds.split(',').reduce((acc: BooleanDictionary, id) => {\n        acc[id] = true;\n        return acc;\n      }, {});\n\n      return shortlist.filter((attribute) => parsedList[attribute.id]);\n    }\n\n    return shortlist;\n  }, [showOnlyUnset, activeItem.id, filteredAttributesIds]);\n\n  if (!activeItem)\n    return (\n      <Card>\n        <Typography.Text type=\"secondary\">\n          No item selected.{' '}\n          <Button size=\"small\" type=\"primary\" onClick={() => jumpToItem('random')}>\n            Random Item\n          </Button>\n        </Typography.Text>\n      </Card>\n    );\n\n  return (\n    <Card>\n      <div className=\"item-attribution-card\" key={`${activeItem.id}`}>\n        <Affix offsetTop={120} className=\"item-attribution-card__item\">\n          <Flex vertical gap={6}>\n            <ItemSprite item={activeItem} width={150} />\n            <ItemId item={activeItem} />\n            <ItemName item={activeItem} language=\"en\" />\n            <ItemName item={activeItem} language=\"pt\" />\n\n            <Divider className=\"my-2\" />\n            <ItemAttributeStats attributesList={attributesList} itemAttributeValues={itemAttributeValues} />\n            <Divider className=\"my-2\" />\n            <Typography.Text type=\"secondary\">\n              <ItemAttributeDescription itemAttributeValues={itemAttributeValues} attributes={attributes} />\n            </Typography.Text>\n          </Flex>\n        </Affix>\n\n        <Space size=\"small\" direction=\"vertical\" className=\"my-4 attribute-button-container\" wrap>\n          {filteredAttributesList.map((attribute) => (\n            <AttributionValueButtons\n              key={attribute.id}\n              attribute={attribute}\n              value={itemAttributeValues.attributes[attribute.id]}\n              onChange={onAttributeChange}\n            />\n          ))}\n        </Space>\n      </div>\n    </Card>\n  );\n}\n","import { Button, Popover, Select } from 'antd';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\n\nimport {\n  DoubleLeftOutlined,\n  DoubleRightOutlined,\n  FilterFilled,\n  FilterOutlined,\n  LeftOutlined,\n  RightOutlined,\n  VerticalLeftOutlined,\n  VerticalRightOutlined,\n} from '@ant-design/icons';\n\nimport { ItemsTypeahead } from '../ItemsTypeahead';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport { useMemo } from 'react';\n\nexport function ItemAttributionNavigation() {\n  const { jumpToItem } = useItemsAttributeValuesContext();\n  return (\n    <Button.Group>\n      <Button onClick={() => jumpToItem('first')} icon={<VerticalRightOutlined />}>\n        First\n      </Button>\n      <Button onClick={() => jumpToItem('previous10')} icon={<DoubleLeftOutlined />}>\n        Previous 10\n      </Button>\n      <Button onClick={() => jumpToItem('previous')} icon={<LeftOutlined />}>\n        Previous\n      </Button>\n      <Button onClick={() => jumpToItem('next')}>\n        Next <RightOutlined />\n      </Button>\n      <Button onClick={() => jumpToItem('next10')}>\n        Next 10 <DoubleRightOutlined />\n      </Button>\n      <Button onClick={() => jumpToItem('last')}>\n        Last <VerticalLeftOutlined />\n      </Button>\n      <Popover content={<GoToItemPopOverContent />} title=\"Go to item\">\n        <Button>Go To</Button>\n      </Popover>\n      <Button onClick={() => jumpToItem('incomplete')}>Next Incomplete</Button>\n    </Button.Group>\n  );\n}\n\nfunction GoToItemPopOverContent() {\n  const { jumpToItem } = useItemsAttributeValuesContext();\n  return <ItemsTypeahead isPending={false} onFinish={(itemId) => jumpToItem('goTo', itemId)} />;\n}\n\nexport function ItemAttributionFilterAttributes() {\n  const { addParam, queryParams } = useQueryParams();\n\n  const { attributesList } = useItemsAttributeValuesContext();\n\n  const options = useMemo(\n    () =>\n      attributesList.map((attribute) => ({\n        label: attribute.name.en,\n        value: attribute.id,\n      })),\n    [attributesList],\n  );\n\n  const onChangeFilters = (values: string[]) => {\n    addParam('filters', values.join(','));\n  };\n\n  const activeFilters = queryParams.get('filters');\n\n  const content = (\n    <Select\n      mode=\"multiple\"\n      style={{ width: 300 }}\n      options={options}\n      value={activeFilters?.split(',')}\n      onChange={(values) => onChangeFilters(values)}\n      allowClear\n    />\n  );\n\n  return (\n    <Popover content={content} title=\"Filter Attributes\">\n      <Button>{activeFilters ? <FilterFilled style={{ color: 'gold' }} /> : <FilterOutlined />}</Button>\n    </Popover>\n  );\n}\n","import { Flex, Table, type TableColumnsType, Typography } from 'antd';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { type ItemMessageObject, useItemsComparator } from 'hooks/useItemsComparator';\nimport type { Item } from 'types';\n\nimport { ItemGoTo, ItemId, ItemName, ItemSprite } from '../ItemBuildingBlocks';\nimport { AttributeSprite } from './ItemAttributeDescription';\n\nexport function ItemComparatorCard() {\n  const { attributes } = useItemsAttributeValuesContext();\n  const { itemMessages, grouping } = useItemsComparator();\n\n  const columns: TableColumnsType<ItemMessageObject> = [\n    {\n      title: 'Item Id',\n      dataIndex: 'item',\n      key: 'id',\n      render: (item: Item) => (\n        <div>\n          <ItemId item={item} />\n          <ItemGoTo item={item} />\n        </div>\n      ),\n      sorter: (a, b) => Number(a.item.id) - Number(b.item.id),\n    },\n    {\n      title: 'Sprite',\n      dataIndex: 'item',\n      key: 'sprite',\n      render: (item: Item) => <ItemSprite item={item} width={75} />,\n    },\n    {\n      title: 'Name',\n      dataIndex: 'item',\n      key: 'name',\n      render: (item: Item) => (\n        <>\n          <ItemName item={item} language=\"en\" />\n          <ItemName item={item} language=\"pt\" />\n        </>\n      ),\n      sorter: (a, b) => a.item.name.en.localeCompare(b.item.name.en),\n    },\n    {\n      title: 'Address',\n      dataIndex: 'message',\n      key: 'message',\n      render: (message: string[], { item }) => (\n        <Flex gap={6}>\n          {message.map((keyVariant, index, arr) => (\n            <AttributeSprite\n              key={`${keyVariant}-${item.id}`}\n              keyVariant={keyVariant}\n              attributes={attributes}\n              firstElement={index === 0}\n              lastElement={index === arr.length - 1}\n              withText\n            />\n          ))}\n        </Flex>\n      ),\n      sorter: (a, b) => a.message.join(' ').localeCompare(b.message.join(' ')),\n    },\n    {\n      title: 'Complete',\n      dataIndex: 'itemAttributesValues',\n      key: 'complete',\n      render: (itemAttributesValues: { complete: boolean }) => (itemAttributesValues.complete ? 'Yes' : 'No'),\n    },\n    {\n      title: 'Identical',\n      dataIndex: 'message',\n      key: 'identical',\n      render: (message: string[]) => {\n        const group = grouping[message.join(' ')] ?? [];\n        return <>{group.length > 1 ? group.length : '0'}</>;\n      },\n      sorter: (a, b) => {\n        const groupA = grouping[a.message.join(' ')] ?? [];\n        const groupB = grouping[b.message.join(' ')] ?? [];\n        return groupB.length - groupA.length;\n      },\n    },\n  ];\n\n  return (\n    <div className=\"my-4\">\n      <Typography.Title level={5}>Item Comparator</Typography.Title>\n      <Table dataSource={itemMessages} columns={columns} pagination={{ showQuickJumper: true }} />\n    </div>\n  );\n}\n","import { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { keyBy, orderBy } from 'lodash';\nimport { useMemo } from 'react';\nimport type { Item, ItemAttributesValues } from 'types';\nimport { filterMessage, getItemAttributePriorityResponse } from 'utils';\nimport { useItemQueryParams } from './useItemQueryParams';\n\nexport type ItemMessageObject = {\n  item: Item;\n  itemAttributesValues: ItemAttributesValues;\n  message: string[];\n  fullMessage: string[];\n};\n\nexport function useItemsComparator() {\n  const { attributes, getItemAttributeValues, availableItemIds, getItem, isLoading } =\n    useItemsAttributeValuesContext();\n  const { searchParams } = useItemQueryParams();\n  const showComplete = searchParams.get('showComplete') === 'true';\n  const showUnclear = searchParams.get('showUnclear') === 'true';\n  const showUnrelated = searchParams.get('showUnrelated') === 'true';\n\n  const { itemMessages, itemMessagesDict, grouping } = useMemo(() => {\n    if (isLoading) {\n      const itemMessages: ItemMessageObject[] = [];\n      return {\n        itemMessages,\n        itemMessagesDict: {},\n        grouping: {},\n      };\n    }\n\n    const itemMessages = orderBy(\n      availableItemIds\n        .map((id) => {\n          const itemAttributesValues = getItemAttributeValues(id);\n          const itemMessage = getItemAttributePriorityResponse(itemAttributesValues, attributes);\n          return {\n            item: getItem(id),\n            itemAttributesValues,\n            message: filterMessage(itemMessage, showUnclear, showUnrelated),\n            fullMessage: itemMessage,\n          };\n        })\n        .filter(({ itemAttributesValues }) => (showComplete ? itemAttributesValues.complete : true)),\n      ['message'],\n      ['asc'],\n    );\n\n    const grouping = itemMessages.reduce((acc: Dictionary<string[]>, { message, item: { id } }) => {\n      const key = message.join(' ');\n\n      if (acc[key] === undefined) {\n        acc[key] = [];\n      }\n      acc[key].push(id);\n\n      return acc;\n    }, {});\n\n    const moreThanOne = Object.values(grouping).filter((ids) => ids.length > 1);\n    if (moreThanOne.length > 0) {\n      console.log('More than one', moreThanOne);\n    }\n\n    return {\n      itemMessages,\n      itemMessagesDict: keyBy(itemMessages, 'item.id'),\n      grouping,\n    };\n  }, [\n    attributes,\n    availableItemIds,\n    getItemAttributeValues,\n    getItem,\n    isLoading,\n    showComplete,\n    showUnclear,\n    showUnrelated,\n  ]);\n\n  return {\n    itemMessages,\n    itemMessagesDict,\n    grouping,\n  };\n}\n","import { Divider, Drawer, Flex, Space, Switch } from 'antd';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport { useEffect, useMemo, useState } from 'react';\nimport { ItemId, ItemName, ItemSprite } from '../ItemBuildingBlocks';\nimport { AttributionValueButtons } from './AttributionValueButtons';\n\nexport function ItemAttributionDrawer() {\n  const { searchParams, removeQueryParam } = useItemQueryParams();\n  const queryParamsItemId = searchParams.get('drawer');\n  const [showOnlyUnset, setUnsetOnly] = useState(false);\n\n  const { activeItem, attributesList, itemAttributeValues, onAttributeChange, jumpToItem } =\n    useItemsAttributeValuesContext();\n\n  const onClose = () => {\n    removeQueryParam('drawer');\n  };\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: function\n  useEffect(() => {\n    if (queryParamsItemId) {\n      jumpToItem('goTo', queryParamsItemId);\n    }\n  }, [queryParamsItemId, jumpToItem, removeQueryParam]);\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  const filteredAttributesList = useMemo(\n    () =>\n      showOnlyUnset\n        ? attributesList.filter((attribute) => !itemAttributeValues.attributes[attribute.id])\n        : attributesList,\n    [showOnlyUnset, activeItem.id],\n  );\n\n  return (\n    <Drawer open={!!queryParamsItemId} title={`Edit: ${activeItem.name.en}`} onClose={onClose} width=\"640px\">\n      <Flex gap={6}>\n        <Flex vertical gap={6}>\n          <ItemSprite item={activeItem} width={50} />\n          <ItemId item={activeItem} />\n        </Flex>\n        <Flex vertical gap={6}>\n          <ItemName item={activeItem} language=\"en\" />\n          <ItemName item={activeItem} language=\"pt\" />\n        </Flex>\n        <Flex vertical gap={6}>\n          <Switch\n            checked={showOnlyUnset}\n            onChange={setUnsetOnly}\n            checkedChildren=\"Unset\"\n            unCheckedChildren=\"All\"\n          />\n        </Flex>\n      </Flex>\n\n      <Divider className=\"my-1\" />\n\n      <Space size=\"small\" direction=\"vertical\" className=\"my-4 attribute-button-container\" wrap>\n        {filteredAttributesList.map((attribute) => (\n          <AttributionValueButtons\n            size=\"small\"\n            key={attribute.id}\n            attribute={attribute}\n            value={itemAttributeValues.attributes[attribute.id]}\n            onChange={onAttributeChange}\n          />\n        ))}\n      </Space>\n    </Drawer>\n  );\n}\n","import { Button, Card, Empty, Flex, Pagination, Popconfirm, Select, Typography } from 'antd';\nimport { GoToTopButton } from 'components/Common/GoToTopButton';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useItemGrouping } from 'hooks/useItemGrouping';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport { isEmpty } from 'lodash';\nimport { useMedia } from 'react-use';\n\nimport { ItemGoTo, ItemId, ItemName, ItemSprite } from '../ItemBuildingBlocks';\nimport { AttributionValueButtons } from './AttributionValueButtons';\nimport { ItemAttributionDrawer } from './ItemAttributionDrawer';\n\nconst getStatSentence = (stats: Record<string, number>, scope: string | null) => {\n  if (scope === 'unset' || !scope) {\n    return `${100 - stats.percent}% done, ${stats.group} left`;\n  }\n\n  return `${stats.percent}%  - ${stats.group} items`;\n};\n\nexport function ItemGroupingCard() {\n  const { getItem, getItemAttributeValues, attributesList } = useItemsAttributeValuesContext();\n\n  const { attribute, pageIds, updateAttributeValue, updatePageItemsAsUnrelated, pagination, stats, sorting } =\n    useItemGrouping();\n  const { searchParams, addQueryParam } = useItemQueryParams();\n  const isNarrow = useMedia('(max-width: 1024px)');\n\n  if (isEmpty(attribute)) {\n    return (\n      <Card className=\"my-4\">\n        <Typography.Text type=\"secondary\">No group attribute has been selected.</Typography.Text>\n      </Card>\n    );\n  }\n\n  const paginationComponent = (\n    <Pagination\n      key=\"pagination\"\n      onChange={pagination.onChange}\n      current={pagination.current}\n      total={pagination.total}\n      pageSizeOptions={pagination.pageSizeOptions}\n      pageSize={pagination.pageSize}\n      onShowSizeChange={pagination.onShowSizeChange}\n    />\n  );\n\n  const sortingComponent = (\n    <Flex align=\"center\">\n      <Typography.Text className=\"mr-2\">Sort by</Typography.Text>\n      <Select style={{ width: 120 }} value={sorting.sortBy} onChange={(v) => sorting.setSortBy(v)}>\n        <Select.Option value={null}>Last Updated</Select.Option>\n        <Select.Option value=\"prop::id\">Id</Select.Option>\n        {attributesList.map((a) => (\n          <Select.Option key={a.id} value={`attribute::${a.id}`}>\n            {a.name.en}\n          </Select.Option>\n        ))}\n      </Select>\n    </Flex>\n  );\n\n  const isUnsetSet = searchParams.get('scope') === 'unset' || !searchParams.get('scope');\n  const unrelateButton = isUnsetSet && (\n    <Popconfirm\n      key=\"unrelate-button\"\n      title={`Are you sure everything is unrelated to ${attribute.name.en}?`}\n      onConfirm={updatePageItemsAsUnrelated}\n    >\n      <Button type=\"primary\" danger disabled={pageIds.length === 0}>\n        Unrelate Unset Items on Page\n      </Button>\n    </Popconfirm>\n  );\n  return (\n    <Card\n      className=\"my-4\"\n      title={\n        <Typography.Text>\n          {attribute?.name.en} ({getStatSentence(stats, searchParams.get('scope'))}) -{' '}\n          {attribute.description.en}\n        </Typography.Text>\n      }\n      extra={\n        <Flex align=\"center\">\n          {sortingComponent}\n\n          {paginationComponent}\n        </Flex>\n      }\n      actions={[unrelateButton, <GoToTopButton key=\"go-to-top\" />, paginationComponent].filter(Boolean)}\n    >\n      {pageIds.length === 0 && (\n        <Empty\n          description=\"No items found in this scope for this attribute.\"\n          image={Empty.PRESENTED_IMAGE_SIMPLE}\n        />\n      )}\n      {pageIds.map((itemId) => {\n        const itemAttributes = getItemAttributeValues(itemId);\n        const item = getItem(itemId);\n\n        return (\n          <Card.Grid\n            key={`${itemId}-${itemAttributes.updatedAt}`}\n            style={{ width: isNarrow ? '50%' : '25%' }}\n          >\n            <Flex gap={6}>\n              <Flex vertical gap={6}>\n                <ItemSprite item={item} width={75} />\n                <ItemId item={item} />\n                <Button.Group>\n                  <ItemGoTo item={item} />\n                  <Button size=\"small\" shape=\"round\" onClick={() => addQueryParam('drawer', item.id)}>\n                    Drawer\n                  </Button>\n                </Button.Group>\n                <ItemName item={item} language=\"en\" />\n                <ItemName item={item} language=\"pt\" />\n              </Flex>\n              <AttributionValueButtons\n                attribute={attribute}\n                value={itemAttributes.attributes[attribute.id]}\n                onlyButtons\n                onChange={(attributeId: string, value: number) =>\n                  updateAttributeValue(item.id, attributeId, value)\n                }\n              />\n            </Flex>\n          </Card.Grid>\n        );\n      })}\n      <ItemAttributionDrawer />\n    </Card>\n  );\n}\n","import { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useMemo, useState } from 'react';\n\nimport { orderBy } from 'lodash';\nimport { ATTRIBUTE_VALUE } from 'utils/constants';\nimport { useItemQueryParams } from './useItemQueryParams';\n\nexport function useItemGrouping() {\n  const {\n    attributesList,\n    addAttributesToUpdate,\n    getItemAttributeValues,\n    availableItemIds,\n    addMultipleAttributesToUpdate,\n  } = useItemsAttributeValuesContext();\n  const { searchParams, addQueryParam } = useItemQueryParams();\n\n  const attributeKey = searchParams.get('attribute') ?? 'ali';\n  const scope = searchParams.get('scope') ?? 'unset';\n\n  const page = searchParams.get('page') ?? '1';\n  const pageSize = searchParams.get('pageSize') ?? '12';\n\n  const [previousAttribute, setPreviousAttribute] = useState<string>('ali');\n  const [previousScope, setPreviousScope] = useState<string>('unset');\n\n  const [sortBy, setSortBy] = useState<string | null>(null);\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  const group = useMemo(() => {\n    const itemsAttributes = availableItemIds.map((id) => getItemAttributeValues(id));\n    const scopeValue =\n      scope === 'unset' ? undefined : ATTRIBUTE_VALUE[scope.toUpperCase() as keyof typeof ATTRIBUTE_VALUE];\n\n    const filteredItemIds = itemsAttributes\n      .filter((item) => item.attributes?.[attributeKey] === scopeValue)\n      .map((item) => item.id);\n\n    const [sortType, sortValue] = (sortBy ?? '::').split('::');\n\n    return orderBy(\n      filteredItemIds,\n      [\n        (id) => (sortType === 'attribute' ? getItemAttributeValues(id)?.attributes?.[sortValue] : true),\n        (id) => (sortType === 'prop' ? Number(id) : true),\n        (id) => getItemAttributeValues(id)?.updatedAt,\n        (id) => Number(id),\n      ],\n      [sortOrder, 'asc', 'desc', 'asc'],\n    );\n  }, [attributeKey, scope, sortBy, sortOrder]);\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  const pageIds = useMemo(() => {\n    if (previousAttribute !== attributeKey || previousScope !== scope) {\n      setPreviousAttribute(attributeKey);\n      setPreviousScope(scope);\n      addQueryParam('page', '1');\n      return group.slice(0, Number(pageSize));\n    }\n\n    const start = (Number(page) - 1) * Number(pageSize);\n    const end = start + Number(pageSize);\n\n    return group.slice(start, end);\n  }, [page, pageSize, group]);\n\n  const attribute = attributesList.find((a) => a.id === attributeKey);\n\n  const updateAttributeValue = (itemId: string, attributeId: string, value: number) => {\n    const currentItemAttributeValues = getItemAttributeValues(itemId);\n\n    addAttributesToUpdate(itemId, {\n      ...currentItemAttributeValues,\n      attributes: {\n        ...currentItemAttributeValues.attributes,\n        [attributeId]: value,\n      },\n    });\n  };\n\n  const updatePageItemsAsUnrelated = () => {\n    addMultipleAttributesToUpdate(\n      pageIds.map((id) => {\n        const prev = getItemAttributeValues(id);\n        if (!prev.attributes[attributeKey]) {\n          prev.attributes[attributeKey] = ATTRIBUTE_VALUE.UNRELATED;\n        }\n\n        return prev;\n      }),\n    );\n  };\n\n  return {\n    group,\n    stats: {\n      total: availableItemIds.length,\n      group: group.length,\n      percent: Math.round((group.length / availableItemIds.length) * 100),\n    },\n    pageIds,\n    attribute,\n    updateAttributeValue,\n    updatePageItemsAsUnrelated,\n    sorting: {\n      sortBy,\n      setSortBy,\n      sortOrder,\n      setSortOrder,\n    },\n    pagination: {\n      total: group.length,\n      current: Number(page),\n      pageSize: Number(pageSize),\n      onChange: (page: number) => addQueryParam('page', String(page)),\n      onShowSizeChange: (_: number, pageSize: number) => addQueryParam('pageSize', String(pageSize)),\n      pageSizeOptions: [12, 24, 48, 96],\n    },\n  };\n}\n","import { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { sample as lodashSample, shuffle } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport type { ItemAttribute } from 'types';\n\nimport { useItemQueryParams } from './useItemQueryParams';\n\nexport function useItemSampler() {\n  const { attributesList, availableItemIds, addAttributesToUpdate, getItemAttributeValues } =\n    useItemsAttributeValuesContext();\n  const { searchParams } = useItemQueryParams();\n\n  const [sampleIds, setSampleIds] = useState<string[]>([]);\n  const [attribute, setAttribute] = useState<ItemAttribute>();\n\n  const getSample = () => {\n    const attributeKey = searchParams.get('attribute') ?? lodashSample(attributesList)?.id ?? 'ali';\n    const selectedAttribute =\n      attributesList.find((a) => a.id === attributeKey) ?? lodashSample(attributesList);\n    const sampleSize = Number(searchParams.get('size')) || 9;\n\n    const selected: string[] = [];\n    const options = shuffle(availableItemIds);\n\n    for (let i = 0; i < options.length; i++) {\n      if (selected.length === sampleSize) break;\n\n      const itemId = options[i];\n      const currentAttributeValues = getItemAttributeValues(itemId).attributes;\n\n      if (!currentAttributeValues[attributeKey]) {\n        selected.push(itemId);\n      }\n    }\n\n    return {\n      selectedAttribute,\n      selected,\n    };\n  };\n\n  // Create sample\n  const onGetSample = () => {\n    let tempSample = getSample();\n    let attempts = 0;\n    while (tempSample.selected.length === 0 && attempts < 30) {\n      tempSample = getSample();\n      attempts++;\n    }\n\n    setAttribute(tempSample.selectedAttribute);\n    setSampleIds(tempSample.selected);\n  };\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: getItemAttributeValues should not be a dependency\n  const itemsLeftForAttribute = useMemo(() => {\n    if (!attribute) return 0;\n\n    return availableItemIds.filter((id) => !getItemAttributeValues(id).attributes[attribute?.id]).length;\n  }, [attribute, availableItemIds]);\n\n  const updateAttributeValue = (itemId: string, attributeId: string, value: number) => {\n    const currentItemAttributeValues = getItemAttributeValues(itemId);\n\n    addAttributesToUpdate(itemId, {\n      ...currentItemAttributeValues,\n      attributes: {\n        ...currentItemAttributeValues.attributes,\n        [attributeId]: value,\n      },\n    });\n  };\n\n  return {\n    sampleIds,\n    attribute,\n    itemsLeftForAttribute,\n    onGetSample,\n    updateAttributeValue,\n  };\n}\n","import { Button, Card, Divider, Empty, Flex, Modal, Typography } from 'antd';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport { useItemSampler } from 'hooks/useItemSampler';\nimport { isEmpty } from 'lodash';\nimport { Fragment } from 'react';\nimport { useToggle } from 'react-use';\nimport { wait } from 'utils';\nimport { ItemGoTo, ItemId, ItemName, ItemSprite } from '../ItemBuildingBlocks';\nimport { AttributionValueButtons } from './AttributionValueButtons';\n\nexport function ItemSamplerCard() {\n  const { getItem, getItemAttributeValues } = useItemsAttributeValuesContext();\n  const { sampleIds, attribute, onGetSample, updateAttributeValue, itemsLeftForAttribute } = useItemSampler();\n\n  if (isEmpty(sampleIds) && isEmpty(attribute)) {\n    return (\n      <Card className=\"my-4\">\n        <Typography.Text type=\"secondary\">\n          No sample has been generated. Tweak options and{' '}\n          <Button size=\"small\" type=\"primary\" onClick={onGetSample}>\n            Get Sample\n          </Button>\n        </Typography.Text>\n\n        <Divider />\n\n        <SingleSampleModalFlow />\n      </Card>\n    );\n  }\n\n  const sample = sampleIds.map((itemId) => ({\n    itemAttributes: getItemAttributeValues(itemId),\n    item: getItem(itemId),\n  }));\n\n  const unsetItems = sample.filter(\n    ({ itemAttributes }) => attribute?.id && !itemAttributes.attributes[attribute.id],\n  );\n\n  const onMarkRestAsUnrelated = () => {\n    unsetItems.forEach(({ item }) => {\n      if (attribute?.id) {\n        updateAttributeValue(item.id, attribute.id, -3);\n      }\n    });\n  };\n\n  return (\n    <>\n      <SingleSampleModalFlow />\n      <Card\n        className=\"my-4\"\n        title={\n          <Typography.Text>\n            {attribute?.name.en} - {attribute?.description.en} ({itemsLeftForAttribute} items left)\n          </Typography.Text>\n        }\n        actions={[\n          <Button key=\"1\" onClick={onMarkRestAsUnrelated} danger disabled={unsetItems.length === 0}>\n            Mark rest as unrelated\n          </Button>,\n          <Button key=\"2\" type=\"primary\" ghost onClick={onGetSample}>\n            Get New Sample\n          </Button>,\n        ]}\n        extra={\n          <Button type=\"primary\" size=\"small\" onClick={onGetSample}>\n            Get New Sample\n          </Button>\n        }\n      >\n        <Flex vertical gap={6}>\n          {sample.length === 0 && (\n            <Empty\n              description=\"No unset items found for this attribute.\"\n              image={Empty.PRESENTED_IMAGE_SIMPLE}\n            />\n          )}\n          {sample.map(({ item, itemAttributes }) => {\n            return (\n              <Fragment key={`${item.id}-${itemAttributes.updatedAt}`}>\n                <Flex gap={6}>\n                  <ItemSprite item={item} width={75} />\n                  <Flex vertical gap={6}>\n                    <Flex gap={6}>\n                      <ItemId item={item} />\n                      <ItemGoTo item={item} />\n                    </Flex>\n                    <ItemName item={item} language=\"en\" />\n                    <ItemName item={item} language=\"pt\" />\n                  </Flex>\n                  {!!attribute && (\n                    <AttributionValueButtons\n                      attribute={attribute}\n                      value={itemAttributes.attributes[attribute.id]}\n                      onChange={(attributeId: string, value: number) =>\n                        updateAttributeValue(item.id, attributeId, value)\n                      }\n                    />\n                  )}\n                </Flex>\n                <Divider className=\"my-1\" />\n              </Fragment>\n            );\n          })}\n        </Flex>\n      </Card>\n    </>\n  );\n}\n\nexport function SingleSampleModalFlow() {\n  const [open, toggleOpen] = useToggle(false);\n  const { addQueryParam, removeQueryParam } = useItemQueryParams();\n  const { sampleIds, attribute, onGetSample, updateAttributeValue } = useItemSampler();\n  const { getItem, getItemAttributeValues } = useItemsAttributeValuesContext();\n\n  const handleOpenSingleSampler = () => {\n    addQueryParam('size', '1');\n    toggleOpen(true);\n    onGetSample();\n  };\n\n  const onClose = () => {\n    removeQueryParam('size');\n    toggleOpen(false);\n  };\n\n  const itemId = sampleIds[0];\n  const item = getItem(itemId);\n  const itemAttributes = getItemAttributeValues(itemId);\n\n  return (\n    <Flex className=\"mt-4\">\n      <Button type=\"primary\" onClick={handleOpenSingleSampler}>\n        Single Sampler\n      </Button>\n      <Modal\n        title={\n          <Typography>\n            Single Sampler: <strong>{attribute?.name.en}</strong>\n          </Typography>\n        }\n        open={open}\n        width=\"100vw\"\n        maskClosable={false}\n        onOk={onClose}\n        onClose={onClose}\n        onCancel={onClose}\n        cancelButtonProps={{\n          style: { display: 'none' },\n        }}\n      >\n        {itemId && item && itemAttributes && attribute && (\n          <Flex gap={6} className=\"my-10\" wrap=\"wrap\" key={itemId}>\n            <ItemSprite item={item} width={150} />\n            <Flex vertical gap={6}>\n              <Flex gap={6}>\n                <ItemId item={item} />\n                <ItemGoTo item={item} />\n              </Flex>\n              <ItemName item={item} language=\"en\" />\n              <ItemName item={item} language=\"pt\" />\n            </Flex>\n            {!!attribute && (\n              <AttributionValueButtons\n                size=\"large\"\n                attribute={attribute}\n                value={itemAttributes.attributes[attribute.id]}\n                onChange={async (attributeId: string, value: number) => {\n                  updateAttributeValue(item.id, attributeId, value);\n                  await wait(500);\n                  onGetSample();\n                }}\n              />\n            )}\n          </Flex>\n        )}\n        <Button onClick={onGetSample}>Another Sample</Button>\n      </Modal>\n    </Flex>\n  );\n}\n","import { Alert, Button, Divider, Flex, Space, Typography } from 'antd';\nimport { AlienSign, Item } from 'components/Sprites';\nimport { useTDResource } from 'hooks/useTDResource';\nimport { keys, sample, sampleSize, shuffle, values } from 'lodash';\nimport { useState } from 'react';\nimport type { ItemAttributesValues, ItemAttribute } from 'types';\nimport { makeArray } from 'utils';\nimport { ATTRIBUTE_VALUE } from 'utils/constants';\n\nexport function DailyAliemSimulator() {\n  const tdrAttributesQuery = useTDResource<ItemAttribute>('items-attributes');\n  const tdrItemsAttributesValuesQuery = useTDResource<ItemAttributesValues>('items-attribute-values');\n\n  const [simulation, setSimulation] = useState<DailyAlienGame | null>(null);\n\n  // Choose 3 random attributes that are not limited\n  // Get examples for each attribute of items that have value 10 in that attribute but are -3 in the other two\n\n  const onSimulate = () => {\n    setSimulation(generateDailyAlienGame(tdrAttributesQuery.data, tdrItemsAttributesValuesQuery.data));\n  };\n\n  const onSimulateMany = () => {\n    const simulations: Dictionary<DailyAlienGame> = {};\n    let tries = 0;\n    while (tries < 300 || keys(simulations).length === 15) {\n      const simulation = generateDailyAlienGame(tdrAttributesQuery.data, tdrItemsAttributesValuesQuery.data);\n      if (simulation.valid && !simulations[simulation.setId]) {\n        simulations[simulation.setId] = simulation;\n      }\n      if (keys(simulations).length >= 15) {\n        break;\n      }\n      tries += 1;\n    }\n    console.log('TRIES', tries);\n    console.log(Object.values(simulations).map((e, i) => ({ ...e, number: e.number - i })));\n  };\n\n  return (\n    <div className=\"my-4\">\n      <Typography.Title level={3}>Daily Simulator</Typography.Title>\n\n      <Typography.Paragraph>Generates a daily game for Alien Communication</Typography.Paragraph>\n\n      <Space>\n        <Button type=\"primary\" onClick={onSimulate}>\n          Generate\n        </Button>\n        <Button onClick={onSimulateMany}>Generate List</Button>\n      </Space>\n\n      <div>\n        {Boolean(simulation) && (\n          <Space direction=\"vertical\" key={simulation?.setId}>\n            <Typography.Title level={5}>{simulation?.setId}</Typography.Title>\n            {!simulation?.valid && <Alert type=\"error\" message=\"Invalid game\" />}\n            <Space direction=\"vertical\">\n              {simulation?.attributes.map((attr) => (\n                <Flex key={attr.id} gap={8}>\n                  <AlienSign id={attr.spriteId} width={50} />\n                  {attr.itemsIds.map((itemId) => (\n                    <Item key={itemId} id={itemId || '0'} width={50} />\n                  ))}\n                </Flex>\n              ))}\n            </Space>\n            <Divider className=\"my-1\" />\n            <Space direction=\"horizontal\">\n              {simulation?.requests.map((req) => (\n                <Flex key={req.itemId} vertical>\n                  <AlienSign id={req.spritesIds[2]} width={50} />\n                  <AlienSign id={req.spritesIds[1]} width={50} />\n                  <AlienSign id={req.spritesIds[0]} width={50} />\n                </Flex>\n              ))}\n            </Space>\n\n            <Divider className=\"my-1\" />\n            <Space direction=\"horizontal\">\n              {simulation?.itemsIds.map((itemId) => (\n                <Item key={itemId} id={itemId || '0'} width={50} />\n              ))}\n            </Space>\n          </Space>\n        )}\n      </div>\n    </div>\n  );\n}\n\ntype DailyAlienGameAttribute = {\n  id: string;\n  name: string;\n  description: string;\n  spriteId: string;\n  itemsIds: string[];\n};\n\ntype DailyAlienGameRequest = {\n  spritesIds: string[];\n  itemId: string;\n};\n\ntype DailyAlienGame = {\n  id: string;\n  setId: string;\n  number: number;\n  type: 'comunicao-aliengena';\n  attributes: DailyAlienGameAttribute[];\n  requests: DailyAlienGameRequest[];\n  solution: string;\n  itemsIds: string[];\n  valid: boolean;\n};\n\nconst generateDailyAlienGame = (\n  attributes: Dictionary<ItemAttribute>,\n  itemsAttributesValues: Dictionary<ItemAttributesValues>,\n): DailyAlienGame => {\n  const allAttributes = values(attributes).filter((attr) => !attr.limited || attr.id === 'sol');\n  const allItems = shuffle(values(itemsAttributesValues).filter((i) => i.complete));\n\n  const spriteIDs = shuffle(makeArray(38, 0));\n\n  // Select 3 attributes and reassign random sprites\n  const selectedAttributes = sampleSize(allAttributes, 3).map((attr) => ({\n    ...attr,\n    spriteId: `${spriteIDs.pop()}`,\n  }));\n  const attributeA: string[] = [];\n  const attributeB: string[] = [];\n  const attributeC: string[] = [];\n  const attributeAB: string[] = [];\n  const attributeAC: string[] = [];\n  const attributeBC: string[] = [];\n  const attributeABC: string[] = [];\n  const none: string[] = [];\n\n  allItems.forEach((item) => {\n    const POSITIVE = [ATTRIBUTE_VALUE.DETERMINISTIC, ATTRIBUTE_VALUE.RELATED];\n    const isVeryValueA = item.attributes[selectedAttributes[0].id] === ATTRIBUTE_VALUE.DETERMINISTIC;\n    const isValueA = POSITIVE.includes(item.attributes[selectedAttributes[0].id]);\n    const isNotValueA = item.attributes[selectedAttributes[0].id] === ATTRIBUTE_VALUE.UNRELATED;\n    const isVeryValueB = item.attributes[selectedAttributes[1].id] === ATTRIBUTE_VALUE.DETERMINISTIC;\n    const isValueB = POSITIVE.includes(item.attributes[selectedAttributes[1].id]);\n    const isNotValueB = item.attributes[selectedAttributes[1].id] === ATTRIBUTE_VALUE.UNRELATED;\n    const isVeryValueC = item.attributes[selectedAttributes[2].id] === ATTRIBUTE_VALUE.DETERMINISTIC;\n    const isValueC = POSITIVE.includes(item.attributes[selectedAttributes[2].id]);\n    const isNotValueC = item.attributes[selectedAttributes[2].id] === ATTRIBUTE_VALUE.UNRELATED;\n\n    if (isNotValueA && isNotValueB && isNotValueC) {\n      return none.push(item.id);\n    }\n    if (isVeryValueA && isNotValueB && isNotValueC) {\n      attributeA.push(item.id);\n    }\n    if (isNotValueA && isVeryValueB && isNotValueC) {\n      attributeB.push(item.id);\n    }\n    if (isNotValueA && isNotValueB && isVeryValueC) {\n      attributeC.push(item.id);\n    }\n    if (isValueA && isValueB && isNotValueC) {\n      attributeAB.push(item.id);\n    }\n    if (isValueA && isNotValueB && isValueC) {\n      attributeAC.push(item.id);\n    }\n    if (isNotValueA && isValueB && isValueC) {\n      attributeBC.push(item.id);\n    }\n    if (isValueA && isValueB && isValueC) {\n      attributeABC.push(item.id);\n    }\n  });\n\n  const gameAttributes: DailyAlienGameAttribute[] = selectedAttributes.map((attr) => ({\n    id: attr.id,\n    name: attr.name.pt,\n    description: attr.description.pt,\n    spriteId: attr.spriteId,\n    itemsIds: [],\n  }));\n  gameAttributes[0].itemsIds = sampleSize(\n    attributeA,\n    attributeA.length > 3 ? 3 : Math.max(attributeA.length - 1, 1),\n  );\n  gameAttributes[1].itemsIds = sampleSize(\n    attributeB,\n    attributeB.length > 3 ? 3 : Math.max(attributeA.length - 1, 1),\n  );\n  gameAttributes[2].itemsIds = sampleSize(\n    attributeC,\n    attributeC.length > 3 ? 3 : Math.max(attributeA.length - 1, 1),\n  );\n\n  const usedItemsIds: string[] = [];\n  gameAttributes.forEach((attr) => {\n    usedItemsIds.push(...attr.itemsIds);\n  });\n\n  const complexRequests: DailyAlienGameRequest[] = [];\n  // AB request\n  if (attributeAB.length > 0) {\n    complexRequests.push({\n      spritesIds: [selectedAttributes[0].spriteId, selectedAttributes[1].spriteId],\n      itemId: sample(attributeAB) ?? '',\n    });\n  }\n  // AC request\n  if (attributeAC.length > 0) {\n    complexRequests.push({\n      spritesIds: [selectedAttributes[0].spriteId, selectedAttributes[2].spriteId],\n      itemId: sample(attributeAC) ?? '',\n    });\n  }\n  // BC request\n  if (attributeBC.length > 0) {\n    complexRequests.push({\n      spritesIds: [selectedAttributes[1].spriteId, selectedAttributes[2].spriteId],\n      itemId: sample(attributeBC) ?? '',\n    });\n  }\n  // ABC request\n  if (attributeABC.length > 0) {\n    complexRequests.push({\n      spritesIds: selectedAttributes.map((attr) => attr.spriteId),\n      itemId: sample(attributeABC) ?? '',\n    });\n  }\n  const simpleRequests: DailyAlienGameRequest[] = [];\n  // Additional request A\n  if (attributeA.length > 0) {\n    simpleRequests.push({\n      spritesIds: [selectedAttributes[0].spriteId],\n      itemId: attributeA.filter((id) => !usedItemsIds.includes(id))[0],\n    });\n  }\n  // Additional request B\n  if (attributeB.length > 0) {\n    simpleRequests.push({\n      spritesIds: [selectedAttributes[1].spriteId],\n\n      itemId: attributeB.filter((id) => !usedItemsIds.includes(id))[0],\n    });\n  }\n  // Additional request C\n  if (attributeC.length > 0) {\n    simpleRequests.push({\n      spritesIds: [selectedAttributes[2].spriteId],\n      itemId: attributeC.filter((id) => !usedItemsIds.includes(id))[0],\n    });\n  }\n\n  console.log({\n    attributeA,\n    attributeB,\n    attributeC,\n    attributeAB,\n    attributeAC,\n    attributeBC,\n    attributeABC,\n  });\n\n  console.log('COMPLEX REQUEST SIZE', complexRequests.length);\n  console.log('SIMPLE REQUEST SIZE', simpleRequests.length);\n  let requests = sampleSize(complexRequests, 4);\n  console.log('REQUEST SIZE', requests.length);\n\n  if (requests.length < 3) {\n    requests.push(...sampleSize(simpleRequests, 4 - requests.length));\n  }\n\n  if (requests.length < 4) {\n    console.warn('Not enough requests');\n  }\n\n  requests = shuffle(requests);\n\n  const requestItemsIds: string[] = requests.map((req) => req.itemId);\n\n  const result: DailyAlienGame = {\n    id: '2024-00-00',\n    setId: gameAttributes\n      .map((attr) => attr.id)\n      .sort()\n      .join('-'),\n    number: 0,\n    type: 'comunicao-aliengena',\n    attributes: gameAttributes,\n    requests,\n    solution: requestItemsIds.join('-'),\n    itemsIds: shuffle([...requestItemsIds, none[0], none[1], none[2], none[3]]).filter(Boolean),\n    valid: false,\n  };\n\n  // Validate game\n  result.valid = [\n    result.attributes.length === 3,\n    result.requests.length === 4,\n    // TODO: verify if it should be 6\n    result.itemsIds.length > 5,\n    result.attributes.every((attr) => attr.itemsIds.length > 0),\n    result.requests.every((req) => req.itemId),\n  ].every(Boolean);\n\n  console.log(result);\n\n  return result;\n};\n","import {\n  CheckSquareOutlined,\n  CloseSquareOutlined,\n  LineChartOutlined,\n  PlusSquareOutlined,\n  QuestionCircleOutlined,\n} from '@ant-design/icons';\nimport { App, Button, Flex, InputNumber, Space, Typography } from 'antd';\nimport clsx from 'clsx';\nimport {\n  FilterCheckBox,\n  FilterNumber,\n  FilterSelect,\n  FilterSwitch,\n  TransparentButton,\n} from 'components/Common';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { keys, sampleSize, shuffle, sortBy } from 'lodash';\nimport { useState } from 'react';\nimport type { ItemAttributesValues, ItemAttribute } from 'types';\nimport { ATTRIBUTE_VALUE } from 'utils/constants';\nimport { ItemGoTo, ItemId, ItemName, ItemSprite } from '../ItemBuildingBlocks';\nimport { DailyAliemSimulator } from './DailyAlienSimulator';\n\nconst ROMAN_NUMERALS = ['', 'I', 'II', 'III', 'IV', 'V'];\n\ntype AttributeSummary = {\n  relatedCount: number;\n  deterministicCount: number;\n  unclearCount: number;\n  oppositeCount: number;\n} & ItemAttribute;\n\nexport function ItemSimulation() {\n  const { attributes, availableItemIds, getItemAttributeValues, getItem } = useItemsAttributeValuesContext();\n  const { message } = App.useApp();\n\n  const [gridSize, setGridSize] = useState<16 | 25>(25);\n  const [reliabilityThreshold, setReliabilityThreshold] = useState<number>(90);\n  const [nsfw, setNsfw] = useState<boolean>(false);\n  const [selectedItemsIds, setSelectedItemsIds] = useState<string[]>([]);\n  const [selectedAttributes, setSelectedAttributes] = useState<AttributeSummary[]>([]);\n  const [highlightedAttributeKey, setHighlightedAttributeKey] = useState<string | null>(null);\n  const [displays, setDisplays] = useState<BooleanDictionary>({\n    id: true,\n    nameEn: true,\n    namePt: true,\n    reliability: true,\n  });\n\n  const onGetSample = () => {\n    const keysDict: Record<string, string> = {};\n\n    const shuffledIds = shuffle(availableItemIds);\n\n    while (Object.values(keysDict).length < gridSize) {\n      const itemId = shuffledIds.pop();\n      if (!itemId) break;\n\n      const itemAttributeValues = getItemAttributeValues(itemId);\n\n      if (!itemAttributeValues) continue;\n\n      if (\n        !itemAttributeValues.complete ||\n        !itemAttributeValues.reliability ||\n        itemAttributeValues.reliability < reliabilityThreshold\n      )\n        continue;\n\n      if (!nsfw && getItem(itemId).nsfw) continue;\n\n      if (itemAttributeValues.key && !keysDict[itemAttributeValues.key]) {\n        keysDict[itemAttributeValues.key] = itemId;\n      } else {\n        console.log('Item has identical key to another item. Skipping.', getItem(itemId).name.en);\n      }\n    }\n    const result = Object.values(keysDict);\n    if (result.length < gridSize) {\n      message.error(`Could not generate sample. Got only ${result.length} items`);\n    }\n\n    setSelectedItemsIds(sortBy(result, (itemId) => Number(itemId)));\n\n    // Get the most common attributes\n    const attributesResult = getHighestAttributeKeys(\n      result.map((itemId) => getItemAttributeValues(itemId)),\n      25,\n      attributes,\n    );\n\n    // If less than 25 attributes are found, add more by priority\n    if (attributesResult.length < 25) {\n      const remainingAttributes = keys(attributes).filter((key) => !attributesResult.includes(key));\n      const remainingAttributesByPriority = sortBy(remainingAttributes, (key) => attributes[key].priority);\n      const toBeAdded = remainingAttributesByPriority.slice(0, 25 - attributesResult.length);\n      console.log('Adding more attributes by priority', toBeAdded);\n      attributesResult.push(...toBeAdded);\n    }\n\n    const dicts = attributesResult.reduce(\n      (\n        acc: {\n          relatedCount: NumberDictionary;\n          deterministicCount: NumberDictionary;\n          unclearCount: NumberDictionary;\n          oppositeCount: NumberDictionary;\n        },\n        key,\n      ) => {\n        result.forEach((itemId) => {\n          const itemAttributeValues = getItemAttributeValues(itemId);\n          if (!itemAttributeValues) return;\n          switch (itemAttributeValues.attributes[key]) {\n            case ATTRIBUTE_VALUE.RELATED:\n              acc.relatedCount[key] = (acc.relatedCount[key] || 0) + 1;\n              break;\n            case ATTRIBUTE_VALUE.DETERMINISTIC:\n              acc.deterministicCount[key] = (acc.deterministicCount[key] || 0) + 1;\n              break;\n            case ATTRIBUTE_VALUE.UNCLEAR:\n              acc.unclearCount[key] = (acc.unclearCount[key] || 0) + 1;\n              break;\n            case ATTRIBUTE_VALUE.OPPOSITE:\n              acc.oppositeCount[key] = (acc.oppositeCount[key] || 0) + 1;\n              break;\n          }\n        });\n\n        return acc;\n      },\n      { relatedCount: {}, deterministicCount: {}, unclearCount: {}, oppositeCount: {} },\n    );\n\n    setSelectedAttributes(\n      attributesResult.sort().map((key) => ({\n        ...attributes[key],\n        relatedCount: dicts.relatedCount[key],\n        deterministicCount: dicts.deterministicCount[key],\n        unclearCount: dicts.unclearCount[key],\n        oppositeCount: dicts.oppositeCount[key],\n      })),\n    );\n  };\n\n  const onUpdateDisplays = (key: string) => {\n    setDisplays((prev) => ({ ...prev, [key]: !prev[key] }));\n  };\n\n  return (\n    <div className=\"my-4\">\n      <Typography.Title level={3}>Simulator</Typography.Title>\n\n      <Typography.Paragraph>\n        Generates a board with items different enough to get Deterministic values in all selected attributes.\n      </Typography.Paragraph>\n\n      <Flex wrap gap={12}>\n        <FilterSelect\n          label=\"Grid Size\"\n          value={gridSize}\n          onChange={(value) => setGridSize(value)}\n          options={[16, 25]}\n        />\n        <FilterNumber\n          label=\"Reliability Threshold\"\n          value={reliabilityThreshold}\n          onChange={(value) => setReliabilityThreshold(value)}\n          step={5}\n          min={10}\n          max={100}\n        />\n        <FilterSwitch label=\"NSFW\" value={nsfw} onChange={setNsfw} />\n        <Button onClick={onGetSample} type=\"primary\">\n          Get Sample Board\n        </Button>\n      </Flex>\n      <Flex wrap gap={12}>\n        <FilterCheckBox label=\"Show Id\" value={!!displays.id} onChange={() => onUpdateDisplays('id')} />\n        <FilterCheckBox\n          label=\"Show Name (EN)\"\n          value={!!displays.nameEn}\n          onChange={() => onUpdateDisplays('nameEn')}\n        />\n        <FilterCheckBox\n          label=\"Show Name (PT)\"\n          value={!!displays.namePt}\n          onChange={() => onUpdateDisplays('namePt')}\n        />\n        <FilterCheckBox\n          label=\"Show Reliability\"\n          value={!!displays.reliability}\n          onChange={() => onUpdateDisplays('reliability')}\n        />\n      </Flex>\n\n      <div className=\"simulator-grid\" style={{ gridTemplateColumns: `repeat(${Math.sqrt(gridSize)}, 1fr)` }}>\n        {selectedItemsIds.map((itemId) => {\n          const item = getItem(itemId);\n          const itemAttributeValues = getItemAttributeValues(itemId);\n          return (\n            <Space\n              key={itemId}\n              direction=\"vertical\"\n              className={clsx(\n                'simulator-grid__entry',\n                highlightedAttributeKey &&\n                  itemAttributeValues.attributes[highlightedAttributeKey] > 0 &&\n                  'simulator-grid__entry--highlighted',\n              )}\n              align=\"center\"\n            >\n              <Space>\n                <Flex vertical>\n                  {displays.id && <ItemId item={item} />}\n\n                  {displays.reliability && (\n                    <span>\n                      <InputNumber\n                        prefix={<LineChartOutlined />}\n                        placeholder=\"Reliability\"\n                        variant=\"borderless\"\n                        size=\"small\"\n                        value={itemAttributeValues.reliability}\n                        readOnly\n                        style={{ width: '8ch' }}\n                        formatter={(value) => `${value}%`}\n                      />\n                    </span>\n                  )}\n\n                  {displays.id && <ItemGoTo item={item} />}\n                </Flex>\n\n                <ItemSprite item={item} width={50} />\n              </Space>\n\n              {displays.nameEn && <ItemName item={item} language=\"en\" />}\n              {displays.namePt && <ItemName item={item} language=\"pt\" />}\n            </Space>\n          );\n        })}\n      </div>\n\n      <div className=\"simulator-grid my-4\">\n        {selectedAttributes.map((attributeSummary) => (\n          <TransparentButton\n            key={attributeSummary.id}\n            className={clsx(\n              'simulator-grid__entry',\n              'simulator-grid__button',\n              highlightedAttributeKey === attributeSummary.id && 'simulator-grid__entry--highlighted',\n            )}\n            onClick={() => setHighlightedAttributeKey(attributeSummary.id)}\n          >\n            {attributeSummary.name.en} {ROMAN_NUMERALS[attributeSummary.level]}\n            <Flex gap={6} justify=\"center\" className=\"my-1\">\n              <span>\n                <CheckSquareOutlined\n                  style={{ color: attributeSummary.deterministicCount ? 'dodgerblue' : undefined }}\n                />{' '}\n                {attributeSummary.deterministicCount ?? 0}\n              </span>\n              <span>\n                <PlusSquareOutlined style={{ color: attributeSummary.relatedCount ? 'green' : undefined }} />{' '}\n                {attributeSummary.relatedCount ?? 0}\n              </span>\n              <span>\n                <CloseSquareOutlined style={{ color: attributeSummary.oppositeCount ? 'red' : undefined }} />{' '}\n                {attributeSummary.oppositeCount ?? 0}\n              </span>\n              <span>\n                <QuestionCircleOutlined\n                  style={{ color: attributeSummary.unclearCount ? 'gold' : undefined }}\n                />{' '}\n                {attributeSummary.unclearCount ?? 0}\n              </span>\n            </Flex>\n          </TransparentButton>\n        ))}\n      </div>\n\n      <DailyAliemSimulator />\n    </div>\n  );\n}\n\nfunction getHighestAttributeKeys(\n  selectedItemsAttributesValues: ItemAttributesValues[],\n  quantity: number,\n  attributes: Dictionary<ItemAttribute>,\n): string[] {\n  // 1. Count the number of times each attribute is present. Make sure to gather any deterministic value\n  const attributesCounts: Record<string, number> = {};\n  const deterministicKeysDict: BooleanDictionary = {};\n  selectedItemsAttributesValues.forEach((itemAttributeValues) => {\n    if (!itemAttributeValues) return;\n    Object.keys(itemAttributeValues.attributes).forEach((key) => {\n      if (itemAttributeValues.attributes[key] > 0) {\n        attributesCounts[key] = (attributesCounts[key] || 0) + 1;\n      }\n      if (itemAttributeValues.attributes[key] === ATTRIBUTE_VALUE.DETERMINISTIC) {\n        deterministicKeysDict[key] = true;\n        attributesCounts[key] = (attributesCounts[key] || 0) + 2;\n      }\n      if (itemAttributeValues.attributes[key] === ATTRIBUTE_VALUE.OPPOSITE) {\n        attributesCounts[key] = (attributesCounts[key] || 0) + 1;\n      }\n    });\n  });\n\n  const levelCount: NumberDictionary = {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n  };\n\n  /**\n   * Filters the given keys array based on the count of attribute levels and guards against having more than one level 4 attribute.\n   */\n  function filterCountLevelsAndGuardLevel4(keys: string[]) {\n    return keys.filter((key) => {\n      levelCount[attributes[key].level]++;\n\n      if (levelCount[4] > 1) {\n        console.log('Discarding level 4 attribute', key);\n        return false;\n      }\n      return true;\n    });\n  }\n\n  const deterministicKeys = filterCountLevelsAndGuardLevel4(Object.keys(deterministicKeysDict));\n  const nondeterministicKeys = filterCountLevelsAndGuardLevel4(\n    keys(attributesCounts).filter((key) => !deterministicKeys.includes(key)),\n  );\n  console.log({ levelCount });\n\n  // 1.b If deterministic keys are exactly the quantity, return them\n  if (quantity === deterministicKeys.length) {\n    console.log('All keys are deterministic');\n    return deterministicKeys;\n  }\n\n  // 2. Get all keys and sort them by value in descending order, but have only one level 5 attribute\n  console.log(attributesCounts);\n  // let hasLevel5Attribute = false;\n  // const sortedKeys = keys(attributesCounts)\n  //   .sort((a, b) => {\n  //     if (attributesCounts[a] !== attributesCounts[b]) {\n  //       return attributesCounts[b] - attributesCounts[a];\n  //     }\n\n  //     return attributes[a].priority - attributes[b].priority;\n  //   })\n  //   .filter((key) => {\n  //     if (attributes[key].level !== 4) return true;\n\n  //     if (!hasLevel5Attribute) {\n  //       console.log('Keeping level 4 attribute', key, attributesCounts[key]);\n  //       hasLevel5Attribute = true;\n  //       return true;\n  //     }\n  //     console.log('Discarding level 4 attribute', key, attributesCounts[key]);\n\n  //     return false;\n  //   });\n\n  // console.log(sortedKeys);\n\n  // 2.b. Handle edge cases: empty object or quantity exceeding keys\n  if (deterministicKeys.length === 0) {\n    return [];\n  }\n\n  const deterministicTiedGroups = deterministicKeys.reduce((acc: Record<string, string[]>, key) => {\n    const value = attributesCounts[key];\n    if (!acc[value]) {\n      acc[value] = [];\n    }\n    acc[value].push(key);\n    return acc;\n  }, {});\n  const sortedDeterministicTiedGroupsKeys = keys(deterministicTiedGroups).sort(\n    (a, b) => Number(b) - Number(a),\n  );\n  console.log({ sortedDeterministicTiedGroupsKeys });\n\n  const nondeterministicTiedGroups = nondeterministicKeys.reduce((acc: Record<string, string[]>, key) => {\n    const value = attributesCounts[key];\n    if (!acc[value]) {\n      acc[value] = [];\n    }\n    acc[value].push(key);\n    return acc;\n  }, {});\n  console.log(nondeterministicTiedGroups);\n  const sortedNondeterministicTiedGroupsKeys = keys(nondeterministicTiedGroups).sort(\n    (a, b) => Number(b) - Number(a),\n  );\n\n  const result: string[] = [];\n\n  for (const group of sortedDeterministicTiedGroupsKeys) {\n    if (result.length === quantity) {\n      break;\n    }\n    result.push(...sampleSize(deterministicTiedGroups[group], quantity - result.length));\n  }\n\n  for (const group of sortedNondeterministicTiedGroupsKeys) {\n    if (result.length === quantity) {\n      break;\n    }\n    result.push(...sampleSize(nondeterministicTiedGroups[group], quantity - result.length));\n  }\n\n  return result;\n}\n","import { Button, Flex, Progress, Rate, Space, Table, type TableProps, Tabs, Tag, Typography } from 'antd';\nimport type { TabsProps } from 'antd/lib';\nimport { PopoverInfo } from 'components/Common/PopoverInfo';\nimport { AlienSign } from 'components/Sprites';\nimport { useItemsAttributeValuesContext } from 'context/ItemsAttributeValuesContext';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport { useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport type { ItemAttributesValues, ItemAttribute } from 'types';\n\nexport function ItemStats() {\n  // console.log(attributesList);\n  // console.log(attributes);\n\n  const items: TabsProps['items'] = [\n    {\n      key: '1',\n      label: 'All Attributes',\n      children: <AttributesStatsTable type=\"all\" />,\n    },\n    {\n      key: '2',\n      label: 'Default Attributes',\n      children: <AttributesStatsTable type=\"default\" />,\n    },\n    {\n      key: '3',\n      label: 'Custom Attributes',\n      children: <AttributesStatsTable type=\"custom\" />,\n    },\n  ];\n\n  return (\n    <div className=\"my-4\">\n      <Typography.Title level={5}>Stats</Typography.Title>\n\n      <Tabs defaultActiveKey=\"1\" items={items} />\n    </div>\n  );\n}\n\nconst calculateAttributeStats = (attribute: ItemAttribute, itemsAttributes: ItemAttributesValues[]) => {\n  let completionCount = 0;\n  let tensCount = 0;\n  let fivesCount = 0;\n  let zerosCount = 0;\n  let negativeOnesCount = 0;\n  let negativeThreesCount = 0;\n  let negativeTensCount = 0;\n  let positiveCount = 0;\n\n  itemsAttributes.forEach(({ attributes }) => {\n    if (attributes[attribute.id]) {\n      completionCount++;\n\n      const value = attributes[attribute.id];\n      if (value === 10) {\n        tensCount++;\n      } else if (value === 5) {\n        fivesCount++;\n      } else if (value === 0 || !value) {\n        zerosCount++;\n      } else if (value === -1) {\n        negativeOnesCount++;\n      } else if (value === -3) {\n        negativeThreesCount++;\n      } else if (value === -10) {\n        negativeTensCount++;\n      }\n\n      if (value > 0) {\n        positiveCount++;\n      }\n    }\n  });\n\n  const total = itemsAttributes.length;\n  const completionPercentage = (completionCount / total) * 100;\n  const tensPercentage = (tensCount / total) * 100;\n  const fivesPercentage = (fivesCount / total) * 100;\n  const zerosPercentage = (zerosCount / total) * 100;\n  const negativeOnesPercentage = (negativeOnesCount / total) * 100;\n  const negativeThreesPercentage = (negativeThreesCount / total) * 100;\n  const negativeTensPercentage = (negativeTensCount / total) * 100;\n  const positivePercentage = (positiveCount / total) * 100;\n\n  return {\n    completionPercentage: completionPercentage.toFixed(1),\n    tensPercentage: tensPercentage.toFixed(1),\n    fivesPercentage: fivesPercentage.toFixed(1),\n    zerosPercentage: zerosPercentage.toFixed(1),\n    negativeOnesPercentage: negativeOnesPercentage.toFixed(1),\n    negativeThreesPercentage: negativeThreesPercentage.toFixed(1),\n    negativeTensPercentage: negativeTensPercentage.toFixed(1),\n    positivePercentage: positivePercentage.toFixed(1),\n  };\n};\n\ntype AttributesStatsTableProps = {\n  type: 'all' | 'default' | 'custom';\n};\n\nfunction AttributesStatsTable({ type }: AttributesStatsTableProps) {\n  const { availableItemIds, getItemAttributeValues, attributesList } = useItemsAttributeValuesContext();\n  const navigate = useNavigate();\n  const { is } = useQueryParams();\n\n  const attributesPool = useMemo(() => {\n    if (type === 'default') {\n      return attributesList.filter((attribute) => attribute.default);\n    }\n\n    if (type === 'custom') {\n      return attributesList.filter((attribute) => !attribute.default);\n    }\n\n    return attributesList;\n  }, [attributesList, type]);\n\n  const rows = useMemo(() => {\n    const itemsAttributes = availableItemIds.map((id) => getItemAttributeValues(id));\n\n    return attributesPool.map((attribute) => {\n      return {\n        ...attribute,\n        ...calculateAttributeStats(attribute, itemsAttributes),\n      };\n    });\n  }, [attributesPool, availableItemIds, getItemAttributeValues]);\n\n  const columns: TableProps['columns'] = [\n    {\n      title: 'Attribute',\n      dataIndex: 'name',\n      key: 'name',\n      render: (name, record) => (\n        <Flex align=\"center\" gap={8}>\n          {is('showGlyphs') && <AlienSign id={record.spriteId} width={30} />}\n          {name.en}\n          {record.default ? <Tag className=\"ml-1\">default</Tag> : ''}\n          {record.limited ? <Tag className=\"ml-1\">limited</Tag> : ''}\n          <PopoverInfo title={record.description.en} />\n        </Flex>\n      ),\n      sorter: (a, b) => a.name.en.localeCompare(b.name.en),\n    },\n\n    {\n      title: 'Priority',\n      dataIndex: 'priority',\n      key: 'priority',\n      sorter: (a, b) => a.priority - b.priority,\n    },\n\n    {\n      title: 'Positive',\n      dataIndex: 'positivePercentage',\n      key: 'positivePercentage',\n      render: (positivePercentage: string) => `${positivePercentage}%`,\n      sorter: (a, b) => Number.parseFloat(a.positivePercentage) - Number.parseFloat(b.positivePercentage),\n    },\n    {\n      title: '10',\n      dataIndex: 'tensPercentage',\n      key: 'tensPercentage',\n      render: (tensPercentage: string, record) => {\n        if (record.limited) {\n          return '-';\n        }\n\n        return `${tensPercentage}%`;\n      },\n      sorter: (a, b) => Number.parseFloat(a.tensPercentage) - Number.parseFloat(b.tensPercentage),\n    },\n    {\n      title: '5',\n      dataIndex: 'fivesPercentage',\n      key: 'fivesPercentage',\n      render: (fivesPercentage: string) => `${fivesPercentage}%`,\n      sorter: (a, b) => Number.parseFloat(a.fivesPercentage) - Number.parseFloat(b.fivesPercentage),\n    },\n    {\n      title: '-1',\n      dataIndex: 'negativeOnesPercentage',\n      key: 'negativeOnesPercentage',\n      render: (negativeOnesPercentage: string) => `${negativeOnesPercentage}%`,\n      sorter: (a, b) =>\n        Number.parseFloat(a.negativeOnesPercentage) - Number.parseFloat(b.negativeOnesPercentage),\n    },\n    {\n      title: '-3',\n      dataIndex: 'negativeThreesPercentage',\n      key: 'negativeThreesPercentage',\n      render: (negativeThreesPercentage: string) => `${negativeThreesPercentage}%`,\n      sorter: (a, b) =>\n        Number.parseFloat(a.negativeThreesPercentage) - Number.parseFloat(b.negativeThreesPercentage),\n    },\n    {\n      title: '-10',\n      dataIndex: 'negativeTensPercentage',\n      key: 'negativeTensPercentage',\n      render: (negativeTensPercentage: string) => `${negativeTensPercentage}%`,\n      sorter: (a, b) =>\n        Number.parseFloat(a.negativeTensPercentage) - Number.parseFloat(b.negativeTensPercentage),\n    },\n    {\n      title: 'Completion',\n      dataIndex: 'completionPercentage',\n      key: 'completionPercentage',\n      render: (completionPercentage: string) => (\n        <Progress percent={Number.parseFloat(completionPercentage)} size=\"small\" />\n      ),\n      sorter: (a, b) => Number.parseFloat(a.completionPercentage) - Number.parseFloat(b.completionPercentage),\n    },\n    {\n      title: 'Level',\n      dataIndex: 'level',\n      key: 'level',\n      render: (level) => <Rate count={4} value={level} disabled />,\n      sorter: (a, b) => a.level - b.level,\n    },\n    {\n      title: 'Actions',\n      key: 'actions',\n      render: (record) => (\n        <Space>\n          <Button.Group>\n            <Button\n              size=\"small\"\n              shape=\"round\"\n              onClick={() => navigate(`/items/attribution?view=grouping&attribute=${record.id}&page=1`)}\n            >\n              Grouping\n            </Button>\n            <Button\n              size=\"small\"\n              shape=\"round\"\n              onClick={() => navigate(`/items/attribution?view=sampler&attribute=${record.id}&size=6`)}\n            >\n              Sample\n            </Button>\n          </Button.Group>\n        </Space>\n      ),\n    },\n  ];\n\n  return (\n    <>\n      <Typography.Paragraph>Total: {rows.length}</Typography.Paragraph>\n      <Table columns={columns} dataSource={rows} pagination={false} rowKey=\"id\" size=\"small\" />\n    </>\n  );\n}\n","import { Empty, Flex } from 'antd';\nimport { GoToTopButton } from 'components/Common/GoToTopButton';\nimport { useItemQueryParams } from 'hooks/useItemQueryParams';\nimport { ItemAttributionCard } from './ItemAttributionCard';\nimport { ItemAttributionFilterAttributes, ItemAttributionNavigation } from './ItemAttributionNavigation';\nimport { ItemComparatorCard } from './ItemComparatorCard';\nimport { ItemGroupingCard } from './ItemGroupingCard';\nimport { ItemSamplerCard } from './ItemSamplerCard';\nimport { ItemSimulation } from './ItemSimulation';\nimport { ItemStats } from './ItemStats';\n\nexport function ItemAttributionPageContent() {\n  const { view } = useItemQueryParams();\n\n  if (view === 'classifier') {\n    return (\n      <>\n        <Flex className=\"my-4\" gap={8}>\n          <ItemAttributionNavigation />\n          <ItemAttributionFilterAttributes />\n        </Flex>\n        <ItemAttributionCard />\n        <Flex justify=\"flex-end\" className=\"my-4\">\n          <GoToTopButton />\n        </Flex>\n      </>\n    );\n  }\n\n  if (view === 'sampler') {\n    return <ItemSamplerCard />;\n  }\n\n  if (view === 'grouping') {\n    return <ItemGroupingCard />;\n  }\n\n  if (view === 'comparator') {\n    return <ItemComparatorCard />;\n  }\n\n  if (view === 'simulator') {\n    return <ItemSimulation />;\n  }\n\n  if (view === 'stats') {\n    return <ItemStats />;\n  }\n\n  return <Empty className=\"my-10\" description=\"Unknown view has been selected\" />;\n}\n","import { Layout } from 'antd';\nimport { DataLoadingWrapper } from 'components/DataLoadingWrapper';\nimport { ItemAttributionFilters } from 'components/Items/Attributes/ItemAttributionFilters';\nimport { ItemAttributionPageContent } from 'components/Items/Attributes/ItemAttributionPageContent';\nimport { PageLayout } from 'components/Layout';\nimport { PageSider } from 'components/Layout/PageSider';\nimport {\n  ItemsAttributeValuesProvider,\n  useItemsAttributeValuesContext,\n} from 'context/ItemsAttributeValuesContext';\n\nfunction ItemsAttributionPage() {\n  const { isLoading, error, hasResponseData } = useItemsAttributeValuesContext();\n\n  return (\n    <PageLayout title=\"Items\" subtitle=\"Attribution\">\n      <Layout hasSider>\n        <PageSider>\n          <ItemAttributionFilters />\n        </PageSider>\n\n        <Layout.Content className=\"content\">\n          <DataLoadingWrapper isLoading={isLoading} error={error} hasResponseData={hasResponseData}>\n            <ItemAttributionPageContent />\n          </DataLoadingWrapper>\n        </Layout.Content>\n      </Layout>\n    </PageLayout>\n  );\n}\n\nfunction ItemsAttribution() {\n  return (\n    <ItemsAttributeValuesProvider>\n      <ItemsAttributionPage />\n    </ItemsAttributeValuesProvider>\n  );\n}\n\nexport default ItemsAttribution;\n"],"names":["ItemSprite","item","width","className","id","title","name","en","pt","ItemId","copyToClipboard","useCopyToClipboardFunction","prefix","nsfw","style","color","placeholder","variant","size","value","readOnly","onClick","ItemName","language","toUpperCase","ItemNsfw","ItemGoTo","setSearchParams","useSearchParams","shape","itemId","view","globalNewItemsAttributesValues","ItemsAttributeValuesContext","createContext","getItem","getNewItem","getItemAttributeValues","getNewItemAttributeValues","isLoading","error","hasResponseData","isDirty","jumpToItem","activeItem","itemAttributeValues","onAttributeChange","isSaving","save","attributesList","availableItemIds","addAttributesToUpdate","addMultipleAttributesToUpdate","prepareItemsAttributesFileForDownload","attributes","attributesToUpdate","ItemsAttributeValuesProvider","children","notification","message","App","queryClient","useQueryClient","tdrItemsQuery","useTDResource","tdrAttributesQuery","tdrItemsAttributesValuesQuery","firebaseItemsAttributeValuesQuery","useGetFirebaseDoc","select","deserializeFirebaseData","modifiedAttributeValues","setModifiedAttributeValues","useState","mutation","useUpdateFirebaseDoc","onSuccess","success","refetchQueries","queryKey","onError","description","savedItemsAttributeValues","useMemo","data","isEmpty","firebaseData","items","orderBy","Object","keys","filter","decks","includes","Number","info","storedValue","modifiedValue","merge","isPending","mutate","serializeFirebaseData","prev","updatedAt","Date","now","itemsArr","mapKeys","map","useItemsAttribution","itemIndex","setItemIndex","random","length","values","Provider","direction","undefined","index","indexOf","attributeId","sortJsonKeys","reduce","acc","complete","useItemsAttributeValuesContext","useContext","useItemQueryParams","searchParams","get","setView","addQueryParam","key","set","removeQueryParam","delete","Stat","label","ItemAttributionStats","total","completionPercentage","hasDataCount","initiatedPercentage","progress","progressTotal","currentProgress","someData","forEach","toFixed","Math","floor","vertical","strong","ItemAttributionClassifierFilters","block","type","onChange","ItemAttributionSamplerFilters","options","v","String","min","max","step","ItemAttributionGroupingFilters","rest","default","ATTRIBUTE_GROUP_VALUES","ItemAttributionComparatorFilters","ItemAttributionStatsFilters","ItemAttributionFilters","gap","SaveButton","onSave","dirt","JSON","stringify","DownloadButton","itemsAttributes","attributeKeys","k","completed","unclearCount","score","ATTRIBUTE_VALUE","reliability","getItemAttributePriorityResponse","join","deepCleanObject","prepareFileForDownload","fileName","disabled","GoToTopButton","props","isVisible","setIsVisible","handleScroll","window","scrollY","useEffectOnce","addEventListener","removeEventListener","scrollTo","top","behavior","icon","VerticalAlignTopOutlined","PopoverInfo","QuestionCircleOutlined","attributeOptions","attributeLimitedOptions","AttributionValueButtons","attribute","onlyButtons","limited","target","optionType","buttonStyle","CheckCircleFilled","ItemAttributeDescription","showUnclear","showUnrelated","filteredResponse","filterMessage","Component","AttributeSprite","AttributeText","wrap","keyVariant","arr","firstElement","lastElement","withText","text","parseAttribute","align","spriteId","clsx","justify","maxWidth","textAlign","wordBreak","toLowerCase","suffix","ItemAttributeStats","completion","isDeterministic","isOpposing","relevancy","percent","CloseCircleOutlined","ItemAttributionCard","queryParamsItemId","filteredAttributesIds","useEffect","showOnlyUnset","filteredAttributesList","shortlist","parsedList","split","offsetTop","ItemAttributionNavigation","VerticalRightOutlined","DoubleLeftOutlined","LeftOutlined","RightOutlined","DoubleRightOutlined","VerticalLeftOutlined","content","GoToItemPopOverContent","ItemsTypeahead","onFinish","ItemAttributionFilterAttributes","addParam","queryParams","useQueryParams","activeFilters","mode","onChangeFilters","allowClear","FilterFilled","FilterOutlined","ItemComparatorCard","itemMessages","grouping","showComplete","itemMessagesDict","itemAttributesValues","itemMessage","fullMessage","push","moreThanOne","ids","console","log","keyBy","useItemsComparator","columns","dataIndex","render","sorter","a","b","localeCompare","group","groupA","level","dataSource","pagination","showQuickJumper","ItemAttributionDrawer","setUnsetOnly","open","onClose","checked","checkedChildren","unCheckedChildren","getStatSentence","stats","scope","ItemGroupingCard","pageIds","updateAttributeValue","updatePageItemsAsUnrelated","sorting","attributeKey","page","pageSize","previousAttribute","setPreviousAttribute","previousScope","setPreviousScope","sortBy","setSortBy","sortOrder","setSortOrder","scopeValue","filteredItemIds","sortType","sortValue","slice","start","end","find","round","currentItemAttributeValues","current","onShowSizeChange","_","pageSizeOptions","useItemGrouping","isNarrow","useMedia","paginationComponent","sortingComponent","unrelateButton","onConfirm","danger","extra","actions","Boolean","image","Empty","itemAttributes","useItemSampler","sampleIds","setSampleIds","setAttribute","getSample","lodashSample","selectedAttribute","sampleSize","selected","shuffle","i","itemsLeftForAttribute","onGetSample","tempSample","attempts","ItemSamplerCard","SingleSampleModalFlow","sample","unsetItems","ghost","Fragment","toggleOpen","useToggle","maskClosable","onOk","onCancel","cancelButtonProps","display","async","wait","DailyAliemSimulator","simulation","setSimulation","generateDailyAlienGame","simulations","tries","valid","setId","e","number","attr","itemsIds","requests","req","spritesIds","itemsAttributesValues","allAttributes","allItems","spriteIDs","makeArray","selectedAttributes","pop","attributeA","attributeB","attributeC","attributeAB","attributeAC","attributeBC","attributeABC","none","POSITIVE","isVeryValueA","isValueA","isNotValueA","isVeryValueB","isValueB","isNotValueB","isVeryValueC","isValueC","isNotValueC","gameAttributes","usedItemsIds","complexRequests","simpleRequests","warn","requestItemsIds","result","sort","solution","every","ROMAN_NUMERALS","ItemSimulation","gridSize","setGridSize","reliabilityThreshold","setReliabilityThreshold","setNsfw","selectedItemsIds","setSelectedItemsIds","setSelectedAttributes","highlightedAttributeKey","setHighlightedAttributeKey","displays","setDisplays","nameEn","namePt","onUpdateDisplays","keysDict","shuffledIds","attributesResult","selectedItemsAttributesValues","quantity","attributesCounts","deterministicKeysDict","levelCount","filterCountLevelsAndGuardLevel4","deterministicKeys","nondeterministicKeys","deterministicTiedGroups","sortedDeterministicTiedGroupsKeys","nondeterministicTiedGroups","sortedNondeterministicTiedGroupsKeys","getHighestAttributeKeys","remainingAttributes","toBeAdded","priority","dicts","relatedCount","deterministicCount","oppositeCount","gridTemplateColumns","sqrt","LineChartOutlined","formatter","attributeSummary","CheckSquareOutlined","PlusSquareOutlined","CloseSquareOutlined","ItemStats","AttributesStatsTable","defaultActiveKey","navigate","useNavigate","is","attributesPool","rows","completionCount","tensCount","fivesCount","zerosCount","negativeOnesCount","negativeThreesCount","negativeTensCount","positiveCount","tensPercentage","fivesPercentage","zerosPercentage","negativeOnesPercentage","negativeThreesPercentage","negativeTensPercentage","positivePercentage","calculateAttributeStats","record","parseFloat","count","rowKey","ItemAttributionPageContent","ItemsAttributionPage","subtitle","hasSider","PageSider","DataLoadingWrapper"],"sourceRoot":""}