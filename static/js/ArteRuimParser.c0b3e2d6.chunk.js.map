{"version":3,"file":"static/js/ArteRuimParser.c0b3e2d6.chunk.js","mappings":"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","sources":["components/Resource/ResourceSelectionFilters.tsx","components/SearchDuplicates.tsx","hooks/useQueryParams.ts","hooks/useResourceState.ts","components/ArteRuimLevels.tsx","pages/ArteRuimParser.tsx","../node_modules/@ant-design/icons-svg/es/asn/WarningOutlined.js","../node_modules/@ant-design/icons/es/icons/WarningOutlined.js","../node_modules/string-similarity/src/index.js"],"sourcesContent":["import { Button, Form, Select } from 'antd';\nimport { useState } from 'react';\n\nimport { useQueryParams } from '../../hooks/useQueryParams';\nimport { DUAL_LANGUAGE_RESOURCES, LANGUAGES } from '../../utils/constants';\nimport { SiderContent } from 'components/Layout';\n\ntype ResourceSelectionFiltersProps = {\n  resourceNames: string[];\n};\n\nexport function ResourceSelectionFilters({ resourceNames }: ResourceSelectionFiltersProps) {\n  const { queryParams, addParam } = useQueryParams();\n  const [form] = Form.useForm();\n  const [currentResourceName, setCurrentResourceName] = useState(queryParams.get('resourceName') ?? '');\n\n  const onFinish = (v: any) => {\n    const isDualLanguageResource = DUAL_LANGUAGE_RESOURCES.includes(v.resourceName);\n\n    addParam('language', isDualLanguageResource ? null : v.language);\n    addParam('resourceName', v.resourceName);\n  };\n\n  return (\n    <SiderContent>\n      <Form\n        layout=\"vertical\"\n        onFinish={onFinish}\n        size=\"small\"\n        form={form}\n        initialValues={{\n          resourceName: queryParams.get('resourceName') ?? '',\n          language: queryParams.get('language') ?? '',\n        }}\n      >\n        <Form.Item label=\"Resource\" name=\"resourceName\">\n          <Select\n            style={{ minWidth: '150px' }}\n            value={queryParams.get('resourceName')}\n            onChange={(e: string) => setCurrentResourceName(e)}\n          >\n            {resourceNames.map((resourceName) => (\n              <Select.Option key={resourceName} value={resourceName}>\n                {resourceName}\n              </Select.Option>\n            ))}\n          </Select>\n        </Form.Item>\n        <Form.Item label=\"Language\" name=\"language\">\n          <Select\n            style={{ minWidth: '150px' }}\n            disabled={DUAL_LANGUAGE_RESOURCES.includes(currentResourceName)}\n          >\n            {LANGUAGES.map((entry) => (\n              <Select.Option key={entry} value={entry}>\n                {entry}\n              </Select.Option>\n            ))}\n          </Select>\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\">\n            Load\n          </Button>\n        </Form.Item>\n      </Form>\n    </SiderContent>\n  );\n}\n","import { Input } from 'antd';\nimport { useState } from 'react';\nimport { findSimilar, stringRemoveAccents } from '../utils';\nimport { SEARCH_THRESHOLD } from '../utils/constants';\nimport { SectionTitle } from './Common/SectionTitle';\n\ntype SearchDuplicatesProps = {\n  response: ObjectDictionary;\n  property: string;\n};\n\nexport function SearchDuplicates({ response, property }: SearchDuplicatesProps) {\n  const [searchResults, setSearchResults] = useState({});\n\n  const onSearchSimilar = (e: any) => {\n    const { value = '' } = e.target;\n    const str = stringRemoveAccents(value.trim().toLowerCase());\n\n    if (str && str.length >= SEARCH_THRESHOLD) {\n      setSearchResults(findSimilar(str, response, property));\n    } else {\n      setSearchResults({});\n    }\n  };\n\n  return (\n    <div className=\"parser-flex-column\">\n      <SectionTitle>Search Similar</SectionTitle>\n      <Input type=\"text\" onChange={onSearchSimilar} placeholder=\"Type here\" />\n      <Input.TextArea\n        name=\"search-results\"\n        id=\"\"\n        cols={10}\n        rows={10}\n        readOnly\n        value={JSON.stringify(searchResults, null, 4)}\n      />\n    </div>\n  );\n}\n","import { useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nexport function useQueryParams(defaultParams: Record<string, string | number> = {}) {\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const addParam = (key: string, value: unknown, defaultValue?: unknown) => {\n    if (value === undefined || value === '' || value === defaultValue) {\n      searchParams.delete(key);\n    } else {\n      searchParams.set(key, String(value));\n    }\n\n    setSearchParams(searchParams);\n  };\n\n  const addParams = (params: Record<string, unknown>, defaultValues: Record<string, unknown> = {}) => {\n    Object.entries(params).forEach(([key, value]) => {\n      if (defaultValues[key] === value) {\n        searchParams.delete(key);\n      } else {\n        searchParams.set(key, String(value));\n      }\n    });\n    setSearchParams(searchParams);\n  };\n\n  const removeParam = (key: string) => {\n    searchParams.delete(key);\n    setSearchParams(searchParams);\n  };\n\n  const is = (key: string, value = 'true') => searchParams.get(key) === String(value);\n\n  useEffect(() => {\n    Object.entries(defaultParams).forEach(([key, value]) => {\n      if (!searchParams.has(key)) {\n        addParam(key, value);\n      }\n    });\n  }, []); // eslint-disable-line\n\n  return {\n    addParam,\n    addParams,\n    removeParam,\n    queryParams: searchParams,\n    is,\n  };\n}\n","import { DUAL_LANGUAGE_RESOURCES } from 'utils/constants';\n\nimport { useQuery } from '@tanstack/react-query';\n\nimport { useBaseUrl } from './useBaseUrl';\nimport { useQueryParams } from './useQueryParams';\n\ntype ResourceState = {\n  resourceName: string | null;\n  language?: Language | null;\n  response: any;\n  isLoading: boolean;\n  error?: ResponseError | null;\n  hasResponseData: boolean;\n  enabled: boolean;\n};\n\nexport function useResourceState(availableResources: AvailableResources): ResourceState {\n  const { queryParams } = useQueryParams();\n  const { getUrl } = useBaseUrl('resources');\n  const resourceName = queryParams.get('resourceName') ?? '';\n  const language = queryParams.get('language');\n\n  const enabled = !!resourceName && availableResources.includes(resourceName);\n\n  const { data, isLoading, error } = useQuery<any, ResponseError>({\n    queryKey: ['resource', resourceName, language],\n    queryFn: async () => {\n      const url =\n        language && !DUAL_LANGUAGE_RESOURCES.includes(resourceName)\n          ? getUrl(`${resourceName}-${language}.json`)\n          : getUrl(`${resourceName}.json`);\n\n      const res = await fetch(url);\n\n      const result = res.body ? await res.json() : {};\n\n      return result;\n    },\n    enabled,\n  });\n\n  return {\n    resourceName,\n    language: (language as Language) || null,\n    response: data,\n    isLoading,\n    enabled,\n    error,\n    hasResponseData: Boolean(data),\n  };\n}\n","import { useMemo } from 'react';\nimport { SectionTitle } from './Common/SectionTitle';\n\ntype ArteRuimLevelsProps = {\n  data: PlainObject;\n};\n\nexport function ArteRuimLevels({ data }: ArteRuimLevelsProps) {\n  const { level0, level1, level2, level3, level4, total } = useMemo(\n    () =>\n      Object.values(data).reduce(\n        (acc, entry) => {\n          acc[`level${entry.level}`] += 1;\n          acc.total += 1;\n          return acc;\n        },\n        {\n          level0: 0,\n          level1: 0,\n          level2: 0,\n          level3: 0,\n          level4: 0,\n          total: 0,\n        }\n      ),\n    [data]\n  );\n\n  return (\n    <div className=\"\">\n      <SectionTitle>Levels ({total})</SectionTitle>\n      <div style={{ color: level0 > 0 ? 'red' : 'inherit' }}>Level 0: {level0}</div>\n      <div>Level 1: {level1}</div>\n      <div>Level 2: {level2}</div>\n      <div>Level 3: {level3}</div>\n      <div>Level 4: {level4}</div>\n    </div>\n  );\n}\n","import { Input, Layout } from 'antd';\nimport { ArteRuimLevels } from 'components/ArteRuimLevels';\nimport { SectionTitle } from 'components/Common/SectionTitle';\nimport { DataLoadingWrapper } from 'components/DataLoadingWrapper';\nimport { PageLayout } from 'components/Layout';\nimport { PageSider } from 'components/Layout/PageSider';\nimport { ResponseState } from 'components/Common';\nimport { ResourceSelectionFilters } from 'components/Resource/ResourceSelectionFilters';\nimport { SearchDuplicates } from 'components/SearchDuplicates';\nimport { useQueryParams } from 'hooks/useQueryParams';\nimport { useResourceState } from 'hooks/useResourceState';\nimport { useEffect, useState } from 'react';\nimport { ArteRuimCard } from 'types';\n\nimport { checkForDuplicates, findSimilar, stringRemoveAccents } from 'utils';\nimport { RESOURCE_NAMES, SEARCH_THRESHOLD } from 'utils/constants';\n\nexport function ArteRuimParser() {\n  // Set default query params\n  useQueryParams({ resourceName: RESOURCE_NAMES.ARTE_RUIM_CARDS, language: 'pt' });\n\n  const [searchResults, setSearchResults] = useState({});\n  const [output, setOutput] = useState({});\n  const [duplicates, setDuplicates] = useState({});\n  const property = 'text';\n\n  const { resourceName, language, isLoading, error, hasResponseData, response } = useResourceState([\n    RESOURCE_NAMES.ARTE_RUIM_CARDS,\n  ]);\n\n  useEffect(() => {\n    if (response) {\n      setDuplicates(checkForDuplicates(response, property));\n      setOutput(response);\n    }\n  }, [response]);\n\n  const onInputChange = (e: any) => {\n    const { value } = e.target;\n    const parsedInput = value.split('\\n');\n\n    const dataArray: any[] = Object.values(response ?? {});\n    const lastId = Number(dataArray[dataArray.length - 1].id.split('-')[1]) || 1;\n\n    if (parsedInput.at(-1) && parsedInput.at(-1).length > SEARCH_THRESHOLD) {\n      const str = stringRemoveAccents(parsedInput.at(-1).trim().toLowerCase());\n\n      setSearchResults(findSimilar(str, response, property));\n    } else {\n      setSearchResults({});\n    }\n\n    const result = parsedInput.reduce(\n      (acc: Record<CardId, ArteRuimCard>, text: string, index: number) => {\n        if (text) {\n          const newId = `${resourceName![0]}-${lastId + index + 1}-${language}`;\n          acc[newId] = {\n            id: newId,\n            text,\n            level: 0,\n          };\n        }\n        return acc;\n      },\n      { ...response }\n    );\n\n    setOutput(result);\n  };\n\n  return (\n    <PageLayout title=\"Arte Ruim\" subtitle={Boolean(resourceName && language) ? `Parser (${language})` : ''}>\n      <Layout hasSider>\n        <PageSider>\n          <ResponseState hasResponseData={hasResponseData} isLoading={isLoading} error={error} />\n          <ResourceSelectionFilters resourceNames={[RESOURCE_NAMES.ARTE_RUIM_CARDS]} />\n        </PageSider>\n\n        <Layout.Content className=\"content\">\n          <DataLoadingWrapper isLoading={isLoading} error={error} hasResponseData={hasResponseData}>\n            <div className=\"parser-container\">\n              <div className=\"parser-main\">\n                <SectionTitle>Input New Data</SectionTitle>\n                <Input.TextArea name=\"input\" id=\"\" cols={15} rows={5} onChange={onInputChange} />\n\n                <SectionTitle>Output</SectionTitle>\n                <Input.TextArea\n                  name=\"output\"\n                  id=\"\"\n                  cols={15}\n                  rows={14}\n                  readOnly\n                  value={JSON.stringify(output, null, 4)}\n                />\n\n                <SectionTitle>Duplicates</SectionTitle>\n                <Input.TextArea\n                  name=\"duplicates\"\n                  id=\"\"\n                  cols={15}\n                  rows={3}\n                  readOnly\n                  value={JSON.stringify(duplicates)}\n                />\n              </div>\n\n              <aside className=\"parser-controls\">\n                {Boolean(response) && <ArteRuimLevels data={response} />}\n\n                <SectionTitle>\n                  Similar Results for Last Entry ({Object.values(searchResults).length})\n                </SectionTitle>\n                <Input.TextArea\n                  name=\"search-results\"\n                  id=\"\"\n                  cols={10}\n                  rows={5}\n                  readOnly\n                  value={JSON.stringify(searchResults, null, 4)}\n                />\n\n                <SearchDuplicates response={response} property={property} />\n              </aside>\n            </div>\n          </DataLoadingWrapper>\n        </Layout.Content>\n      </Layout>\n    </PageLayout>\n  );\n}\n\nexport default ArteRuimParser;\n","// This icon file is generated automatically.\nvar WarningOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z\" } }] }, \"name\": \"warning\", \"theme\": \"outlined\" };\nexport default WarningOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport WarningOutlinedSvg from \"@ant-design/icons-svg/es/asn/WarningOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar WarningOutlined = function WarningOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: WarningOutlinedSvg\n  }));\n};\n\n/**![warning](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ2NCA3MjBhNDggNDggMCAxMDk2IDAgNDggNDggMCAxMC05NiAwem0xNi0zMDR2MTg0YzAgNC40IDMuNiA4IDggOGg0OGM0LjQgMCA4LTMuNiA4LThWNDE2YzAtNC40LTMuNi04LTgtOGgtNDhjLTQuNCAwLTggMy42LTggOHptNDc1LjcgNDQwbC00MTYtNzIwYy02LjItMTAuNy0xNi45LTE2LTI3LjctMTZzLTIxLjYgNS4zLTI3LjcgMTZsLTQxNiA3MjBDNTYgODc3LjQgNzEuNCA5MDQgOTYgOTA0aDgzMmMyNC42IDAgNDAtMjYuNiAyNy43LTQ4em0tNzgzLjUtMjcuOUw1MTIgMjM5LjlsMzM5LjggNTg4LjJIMTcyLjJ6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(WarningOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'WarningOutlined';\n}\nexport default RefIcon;","module.exports = {\n\tcompareTwoStrings:compareTwoStrings,\n\tfindBestMatch:findBestMatch\n};\n\nfunction compareTwoStrings(first, second) {\n\tfirst = first.replace(/\\s+/g, '')\n\tsecond = second.replace(/\\s+/g, '')\n\n\tif (first === second) return 1; // identical or empty\n\tif (first.length < 2 || second.length < 2) return 0; // if either is a 0-letter or 1-letter string\n\n\tlet firstBigrams = new Map();\n\tfor (let i = 0; i < first.length - 1; i++) {\n\t\tconst bigram = first.substring(i, i + 2);\n\t\tconst count = firstBigrams.has(bigram)\n\t\t\t? firstBigrams.get(bigram) + 1\n\t\t\t: 1;\n\n\t\tfirstBigrams.set(bigram, count);\n\t};\n\n\tlet intersectionSize = 0;\n\tfor (let i = 0; i < second.length - 1; i++) {\n\t\tconst bigram = second.substring(i, i + 2);\n\t\tconst count = firstBigrams.has(bigram)\n\t\t\t? firstBigrams.get(bigram)\n\t\t\t: 0;\n\n\t\tif (count > 0) {\n\t\t\tfirstBigrams.set(bigram, count - 1);\n\t\t\tintersectionSize++;\n\t\t}\n\t}\n\n\treturn (2.0 * intersectionSize) / (first.length + second.length - 2);\n}\n\nfunction findBestMatch(mainString, targetStrings) {\n\tif (!areArgsValid(mainString, targetStrings)) throw new Error('Bad arguments: First argument should be a string, second should be an array of strings');\n\t\n\tconst ratings = [];\n\tlet bestMatchIndex = 0;\n\n\tfor (let i = 0; i < targetStrings.length; i++) {\n\t\tconst currentTargetString = targetStrings[i];\n\t\tconst currentRating = compareTwoStrings(mainString, currentTargetString)\n\t\tratings.push({target: currentTargetString, rating: currentRating})\n\t\tif (currentRating > ratings[bestMatchIndex].rating) {\n\t\t\tbestMatchIndex = i\n\t\t}\n\t}\n\t\n\t\n\tconst bestMatch = ratings[bestMatchIndex]\n\t\n\treturn { ratings: ratings, bestMatch: bestMatch, bestMatchIndex: bestMatchIndex };\n}\n\nfunction areArgsValid(mainString, targetStrings) {\n\tif (typeof mainString !== 'string') return false;\n\tif (!Array.isArray(targetStrings)) return false;\n\tif (!targetStrings.length) return false;\n\tif (targetStrings.find( function (s) { return typeof s !== 'string'})) return false;\n\treturn true;\n}\n"],"names":["ResourceSelectionFilters","resourceNames","queryParams","addParam","useQueryParams","form","Form","currentResourceName","setCurrentResourceName","useState","get","layout","onFinish","v","isDualLanguageResource","DUAL_LANGUAGE_RESOURCES","resourceName","language","size","initialValues","label","name","style","minWidth","value","onChange","e","map","disabled","LANGUAGES","entry","type","htmlType","SearchDuplicates","response","property","searchResults","setSearchResults","className","target","str","stringRemoveAccents","trim","toLowerCase","length","SEARCH_THRESHOLD","findSimilar","placeholder","id","cols","rows","readOnly","JSON","stringify","defaultParams","searchParams","setSearchParams","useSearchParams","key","defaultValue","undefined","delete","set","String","addParams","params","defaultValues","Object","entries","forEach","removeParam","is","useEffect","has","useResourceState","availableResources","getUrl","useBaseUrl","enabled","includes","data","isLoading","error","useQuery","queryKey","queryFn","async","url","res","fetch","body","json","hasResponseData","Boolean","ArteRuimLevels","level0","level1","level2","level3","level4","total","useMemo","values","reduce","acc","level","SectionTitle","color","ArteRuimParser","RESOURCE_NAMES","output","setOutput","duplicates","setDuplicates","checkForDuplicates","title","subtitle","hasSider","PageSider","DataLoadingWrapper","parsedInput","split","dataArray","lastId","Number","at","result","text","index","newId","WarningOutlined","props","ref","React","AntdIcon","_extends","icon","WarningOutlinedSvg","compareTwoStrings","first","second","replace","firstBigrams","Map","i","bigram","substring","count","intersectionSize","module","exports","findBestMatch","mainString","targetStrings","Array","isArray","find","s","areArgsValid","Error","ratings","bestMatchIndex","currentTargetString","currentRating","push","rating","bestMatch"],"sourceRoot":""}